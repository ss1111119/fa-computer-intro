<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³‡è¨Šå®‰å…¨é‡‘é‘°èˆ‡è³ªæ•¸æ•™å­¸ (Crypto Key Generation & Prime Numbers)</title>
    <style>
        /* --- åŸºç¤è¨­å®š (Reset & Typography) --- */
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #c0392b;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: "PingFang TC", "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1, h2, h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        /* --- å…ƒä»¶æ¨£å¼ (Components) --- */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid var(--accent-color);
        }

        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
            display: inline-block;
            margin-top: 10px;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
        }
        
        .btn-outline:hover {
            background-color: var(--accent-color);
            color: white;
        }

        select, input {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 1rem;
            margin: 5px;
        }

        /* --- Header --- */
        header {
            text-align: center;
            padding: 40px 20px;
            background: var(--primary-color);
            color: white;
            border-radius: 0 0 20px 20px;
            margin-bottom: 30px;
        }
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* --- æœ¬é¡Œå€å¡Š --- */
        .question-box {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            font-weight: bold;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }
        .options-list li {
            padding: 10px;
            margin: 5px 0;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        /* --- äº’å‹•æ¨¡æ“¬å€ (Simulation) --- */
        .sim-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: center;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
        }

        .sim-result {
            margin-top: 20px;
            padding: 15px;
            background-color: #edf7ed;
            border: 1px solid #c8e6c9;
            border-radius: 8px;
            display: none; /* åˆå§‹éš±è— */
        }

        .highlight-text {
            color: var(--danger-color);
            font-weight: bold;
        }

        /* --- è¦–è¦ºåŒ–æµç¨‹åœ– (Flowchart) --- */
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: #fff;
            border: 1px dashed #ccc;
        }

        .flow-row {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            gap: 20px;
        }

        .flow-box {
            background: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 100px;
        }

        .flow-arrow {
            font-size: 2rem;
            color: var(--accent-color);
            margin: 10px 0;
        }
        
        .arrow-down { margin: 10px 0; }

        /* å› æ•¸åˆ†è§£æŒ‘æˆ°å€ */
        .challenge-box {
            margin-top: 20px;
            padding: 15px;
            border: 2px dashed var(--accent-color);
            border-radius: 8px;
            text-align: center;
        }

        /* --- é¸é …ç ´è§£å€ (Breakdown) --- */
        .breakdown-item {
            border: 1px solid #eee;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
        }
        .breakdown-item.correct {
            border-left: 5px solid var(--success-color);
            background-color: #f0fdf4;
        }
        .breakdown-item.wrong {
            border-left: 5px solid var(--danger-color);
            background-color: #fdf2f2;
        }
        .term-en {
            font-size: 0.85em;
            color: #666;
            margin-left: 5px;
        }

        /* --- å°æ¸¬é©—å€ (Quiz) --- */
        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            margin-bottom: 10px;
            padding: 15px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quiz-option:hover {
            border-color: var(--accent-color);
            background-color: #f0f8ff;
        }
        .quiz-option.correct-answer {
            background-color: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }
        .quiz-option.wrong-answer {
            background-color: var(--danger-color);
            color: white;
            border-color: var(--danger-color);
        }

        #quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-weight: bold;
            display: none;
        }

        /* --- å»¶ä¼¸çŸ¥è­˜ (Accordion) --- */
        .accordion {
            background-color: #eee;
            color: #444;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            text-align: left;
            border: none;
            outline: none;
            transition: 0.4s;
            border-radius: 8px;
            font-weight: bold;
        }
        .active, .accordion:hover {
            background-color: #ccc;
        }
        .panel {
            padding: 0 18px;
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            border-radius: 0 0 8px 8px;
        }

        /* RWD èª¿æ•´ */
        @media (max-width: 600px) {
            .sim-controls {
                flex-direction: column;
            }
            .flow-row {
                flex-direction: column;
            }
            .flow-arrow {
                transform: rotate(90deg); /* æ‰‹æ©Ÿç‰ˆç®­é ­è½‰å‘ */
            }
            .flow-arrow.arrow-down {
                 transform: rotate(0deg);
            }
        }
    </style>
</head>
<body>

<header>
    <h1>è³‡è¨Šå®‰å…¨é‡‘é‘°è£½ä½œ</h1>
    <p>é‡‘é‘°ä¸æ˜¯äº‚æ¹Šçš„ï¼šæ ¸å¿ƒä¾é ã€Œè³ªæ•¸ã€çš„æ•¸å­¸é›£é¡Œ</p>
</header>

<div class="container">

    <!-- 1. é¡Œç›®å€ -->
    <section class="card">
        <h2><span style="border-bottom: 3px solid var(--accent-color);">æœ¬é¡Œ</span></h2>
        <div class="question-box">
            <p>è³‡è¨Šå®‰å…¨çš„é‡‘é‘°(Key)è£½ä½œï¼Œè·Ÿä¸‹åˆ—ä½•è€…æŠ€è¡“æœ‰é—œï¼Ÿ</p>
            <ul class="options-list">
                <li>(A) éè¿´é‹ç®—ï¼ˆRecursionï¼‰</li>
                <li>(B) æ¨¹ç‹€çµæ§‹ï¼ˆTree Structureï¼‰</li>
                <li>(C) AI çš„æ¼”ç®—æ³•ï¼ˆAI Algorithmsï¼‰</li>
                <li>(D) è³ªæ•¸çš„è¨ˆç®—ï¼ˆPrime Number Computationï¼‰</li>
            </ul>
        </div>
    </section>

    <!-- 2. æ¦‚å¿µèªªæ˜å€ -->
    <section class="card">
        <h2>ç‚ºä»€éº¼æ˜¯è³ªæ•¸ï¼Ÿ(Why Prime Numbers?)</h2>
        <p>åœ¨<strong>å…¬é–‹é‡‘é‘°å¯†ç¢¼å­¸ï¼ˆPublic-key Cryptographyï¼‰</strong>ä¸­ï¼Œæˆ‘å€‘å¸Œæœ›è£½é€ ä¸€æŠŠé–ï¼Œé€™æŠŠé–å¾ˆå®¹æ˜“é–ä¸Šï¼Œä½†å¦‚æœæ²’æœ‰é‘°åŒ™ï¼Œå»æ¥µé›£æ‰“é–‹ã€‚</p>
        <ul>
            <li><strong>æ ¸å¿ƒåŸç†ï¼š</strong>å°‡å…©å€‹å¾ˆå¤§çš„<strong>è³ªæ•¸ï¼ˆPrime Numbersï¼‰</strong>ç›¸ä¹˜å¾ˆå®¹æ˜“ã€‚</li>
            <li><strong>å›°é›£é»ï¼š</strong>çµ¦ä½ ä¹˜ç©å¾Œçš„çµæœï¼ˆæ¨¡æ•¸ Modulusï¼‰ï¼Œè¦ä½ åæ¨å›åŸæœ¬æ˜¯å“ªå…©å€‹è³ªæ•¸ç›¸ä¹˜ï¼ˆå› æ•¸åˆ†è§£ Factorizationï¼‰ï¼Œåœ¨æ•¸å­—å¾ˆå¤§æ™‚æ˜¯éå¸¸å›°é›£çš„ã€‚</li>
        </ul>
        <p>é€™å€‹ã€Œæ˜“é€²é›£å‡ºã€çš„ç‰¹æ€§ï¼Œå°±æ˜¯ç¾ä»£åŠ å¯†æŠ€è¡“ï¼ˆå¦‚ RSA æ¼”ç®—æ³•ï¼‰çš„å®‰å…¨åŸºç¤ã€‚</p>
    </section>

    <!-- 3. äº’å‹•æ¨¡æ“¬å€ (æ ¸å¿ƒ) -->
    <section class="card" id="simulation-area">
        <h2>äº’å‹•å¯¦é©—å®¤ï¼šç°¡æ˜“é‡‘é‘°ç”¢ç”Ÿ (Simulation)</h2>
        <p>è®“æˆ‘å€‘ç”¨å°ä¸€é»çš„æ•¸å­—ä¾†æ¨¡æ“¬é€™å€‹éç¨‹ã€‚è«‹é¸æ“‡å…©å€‹ä¸åŒçš„è³ªæ•¸ï¼š</p>
        
        <div class="sim-controls">
            <div>
                <label for="prime-p">è³ªæ•¸ p (Prime p)ï¼š</label>
                <select id="prime-p">
                    <option value="11">11</option>
                    <option value="13">13</option>
                    <option value="17">17</option>
                    <option value="19">19</option>
                    <option value="23">23</option>
                </select>
            </div>
            <div>
                <label for="prime-q">è³ªæ•¸ q (Prime q)ï¼š</label>
                <select id="prime-q">
                    <option value="29">29</option>
                    <option value="31">31</option>
                    <option value="37">37</option>
                    <option value="41">41</option>
                    <option value="43">43</option>
                </select>
            </div>
            <button class="btn" onclick="generateKey()">ç”¢ç”Ÿç¤ºç¯„é‡‘é‘°</button>
        </div>

        <!-- è¨ˆç®—çµæœé¡¯ç¤ºå€ -->
        <div id="sim-result" class="sim-result">
            <h3>è¨ˆç®—çµæœ</h3>
            <p>1. æ¨¡æ•¸ (Modulus) <strong>n = p Ã— q</strong> = <span id="val-p"></span> Ã— <span id="val-q"></span> = <span class="highlight-text" style="font-size: 1.5em;" id="val-n"></span></p>
            <p>2. æ­æ‹‰å‡½æ•¸ Ï†(n) = (p-1)(q-1) = <span id="val-phi"></span> <small>(é€™æ˜¯è£½ä½œè§£å¯†é‡‘é‘°çš„é—œéµåƒæ•¸)</small></p>
            
            <!-- è¦–è¦ºåŒ–æµç¨‹ -->
            <div class="flowchart">
                <div class="flow-row">
                    <div class="flow-box">è³ªæ•¸ p, q<br>(ç§å¯†)</div>
                </div>
                <div class="flow-arrow arrow-down">â¬‡ï¸ ç›¸ä¹˜ (å®¹æ˜“)</div>
                <div class="flow-row">
                    <div class="flow-box" style="background-color: var(--success-color);">æ¨¡æ•¸ n<br>(å…¬é–‹)</div>
                </div>
                <div class="flow-arrow arrow-down" style="color: var(--danger-color);">â¬†ï¸ å› æ•¸åˆ†è§£ (æ¥µåº¦å›°é›£)</div>
                <p style="font-size: 0.9em; color: #666;">è‹¥ n åªæœ‰å¹¾ç™¾ä½æ•¸ï¼Œè¶…ç´šé›»è…¦ä¹Ÿè¦ç®—å¹¾è¬å¹´æ‰æ‰¾å¾—å› p å’Œ qã€‚</p>
            </div>

            <!-- æŒ‘æˆ°å€ -->
            <div class="challenge-box">
                <h4>æŒ‘æˆ°ï¼šé§­å®¢è¦–è§’</h4>
                <p>å‡è¨­ä½ æ””æˆªåˆ°äº†æ¨¡æ•¸ <strong>n = <span id="challenge-n"></span></strong>ï¼Œä½ èƒ½çŒœå‡ºåŸæœ¬çš„ p å’Œ q æ˜¯å¤šå°‘å—ï¼Ÿ</p>
                <input type="number" id="guess-p" placeholder="çŒœçŒœ p" style="width: 100px;">
                <input type="number" id="guess-q" placeholder="çŒœçŒœ q" style="width: 100px;">
                <button class="btn btn-outline" onclick="verifyGuess()">é©—è­‰ç ´è§£</button>
                <p id="guess-feedback" style="margin-top: 10px; font-weight: bold;"></p>
            </div>
        </div>
    </section>

    <!-- 4. é¸é …é€ä¸€ç ´è§£å€ -->
    <section class="card">
        <h2>é¸é …è©³è§£ (Breakdown)</h2>
        
        <div class="breakdown-item wrong">
            <strong>(A) éè¿´é‹ç®— <span class="term-en">(Recursion)</span></strong>
            <p>éŒ¯ã€‚éè¿´æ˜¯ä¸€ç¨®ç¨‹å¼å¯«æ³•ï¼ˆè‡ªå·±å‘¼å«è‡ªå·±ï¼‰ï¼Œå¸¸ç”¨æ–¼æ’åºæˆ–æœå°‹è³‡æ–™ï¼Œä½†ä¸æ˜¯ç”¢ç”ŸåŠ å¯†é‡‘é‘°çš„æ•¸å­¸åŸºç¤ã€‚</p>
        </div>

        <div class="breakdown-item wrong">
            <strong>(B) æ¨¹ç‹€çµæ§‹ <span class="term-en">(Tree Structure)</span></strong>
            <p>éŒ¯ã€‚é€™æ˜¯ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œç”¨ä¾†çµ„ç¹”è³‡æ–™ï¼ˆå¦‚æª”æ¡ˆç¸½ç®¡ç›®éŒ„ï¼‰ï¼Œè·ŸåŠ å¯†æ•¸å­¸åŸç†ç„¡é—œã€‚</p>
        </div>

        <div class="breakdown-item wrong">
            <strong>(C) AI çš„æ¼”ç®—æ³• <span class="term-en">(AI Algorithms)</span></strong>
            <p>éŒ¯ã€‚é›–ç„¶ AI å¾ˆç†±é–€ï¼Œä½†å‚³çµ±åŠ å¯†é‡‘é‘°ï¼ˆå¦‚ RSAã€ECCï¼‰æ˜¯å»ºç«‹åœ¨æ•¸è«–ï¼ˆNumber Theoryï¼‰ä¸Šï¼Œè€Œéé¡ç¥ç¶“ç¶²è·¯æˆ–æ©Ÿå™¨å­¸ç¿’ã€‚</p>
        </div>

        <div class="breakdown-item correct">
            <strong>(D) è³ªæ•¸çš„è¨ˆç®— <span class="term-en">(Prime Number Computation)</span></strong>
            <p><strong>æ­£è§£ï¼</strong>ç¾ä»£å…¬é–‹é‡‘é‘°ç³»çµ±ï¼ˆRSAï¼‰ä¾è³´ã€Œå¤§è³ªæ•¸ç›¸ä¹˜å®¹æ˜“ï¼Œåˆ†è§£å»å¾ˆé›£ã€çš„ç‰¹æ€§ä¾†ä¿è­·è³‡è¨Šå®‰å…¨ã€‚</p>
        </div>
    </section>

    <!-- 5. å°æ¸¬é©—å€ -->
    <section class="card" id="quiz-section">
        <h2>éš¨å ‚å°æ¸¬é©— (Quiz)</h2>
        <p>å†è©¦ä¸€æ¬¡ï¼Œé€™æ¬¡ä½ ä¸€å®šæœƒï¼</p>
        <p style="font-weight: bold;">é¡Œç›®ï¼šè³‡è¨Šå®‰å…¨çš„é‡‘é‘°è£½ä½œï¼Œä¸»è¦ä¾è³´å“ªç¨®æ•¸å­¸ç‰¹æ€§ï¼Ÿ</p>
        
        <button class="quiz-option" onclick="checkQuiz(this, 'A')">(A) éè¿´é‹ç®—ï¼ˆRecursionï¼‰</button>
        <button class="quiz-option" onclick="checkQuiz(this, 'B')">(B) æ¨¹ç‹€çµæ§‹ï¼ˆTree Structureï¼‰</button>
        <button class="quiz-option" onclick="checkQuiz(this, 'C')">(C) AI çš„æ¼”ç®—æ³•ï¼ˆAI Algorithmsï¼‰</button>
        <button class="quiz-option" onclick="checkQuiz(this, 'D')">(D) è³ªæ•¸çš„è¨ˆç®—ï¼ˆPrime Number Computationï¼‰</button>

        <div id="quiz-feedback"></div>
        <button id="retry-btn" class="btn" style="display:none; margin-top:10px;" onclick="scrollToSim()">å¸¶æˆ‘å›äº’å‹•å€è¤‡ç¿’</button>
    </section>

    <!-- 6. å»¶ä¼¸çŸ¥è­˜å€ -->
    <section class="container" style="padding: 0 0 40px 0;">
        <button class="accordion">ï¼‹ å»¶ä¼¸çŸ¥è­˜ï¼šé‚„æœ‰å“ªäº›åŠ å¯†æŠ€è¡“ï¼Ÿ</button>
        <div class="panel">
            <p>é™¤äº† RSA åˆ©ç”¨è³ªæ•¸å› æ•¸åˆ†è§£å¤–ï¼Œå¸¸è¦‹çš„é‚„æœ‰ï¼š</p>
            <ul>
                <li><strong>Diffie-Hellmanï¼š</strong>åˆ©ç”¨ã€Œé›¢æ•£å°æ•¸å•é¡Œã€ (Discrete Logarithm Problem)ã€‚</li>
                <li><strong>æ©¢åœ“æ›²ç·šå¯†ç¢¼å­¸ (ECC)ï¼š</strong>åˆ©ç”¨æ©¢åœ“æ›²ç·šä¸Šçš„é»é‹ç®—é›£é¡Œï¼Œé‡‘é‘°é•·åº¦æ›´çŸ­ä½†åŒæ¨£å®‰å…¨ï¼Œç¾åœ¨æ¯”ç‰¹å¹£å’Œæ‰‹æ©Ÿé€šè¨Šå¸¸ä½¿ç”¨æ­¤æŠ€è¡“ã€‚</li>
            </ul>
            <p>å®ƒå€‘çš„å…±åŒé»éƒ½æ˜¯ï¼š<strong>æ•¸å­¸ä¸Šä¸å¯é€†ï¼ˆæˆ–æ¥µé›£é€†æ¨ï¼‰çš„é‹ç®—</strong>ã€‚</p>
        </div>
    </section>

</div>

<script>
    /* --- äº’å‹•æ¨¡æ“¬å€é‚è¼¯ --- */
    let currentN = 0;
    let currentP = 0;
    let currentQ = 0;

    function generateKey() {
        // 1. å–å¾—ä½¿ç”¨è€…é¸æ“‡
        const pSelect = document.getElementById('prime-p');
        const qSelect = document.getElementById('prime-q');
        const p = parseInt(pSelect.value);
        const q = parseInt(qSelect.value);

        // 2. æª¢æŸ¥ p, q æ˜¯å¦ç›¸åŒ
        if (p === q) {
            alert("å®‰å…¨æ€§è­¦å‘Šï¼šåœ¨çœŸå¯¦å¯†ç¢¼å­¸ä¸­ï¼Œp å’Œ q å¿…é ˆæ˜¯ä¸åŒçš„è³ªæ•¸ï¼è«‹é‡æ–°é¸æ“‡ã€‚");
            return;
        }

        // 3. è¨ˆç®—
        currentP = p;
        currentQ = q;
        currentN = p * q;
        const phi = (p - 1) * (q - 1);

        // 4. æ›´æ–° UI
        document.getElementById('val-p').textContent = p;
        document.getElementById('val-q').textContent = q;
        document.getElementById('val-n').textContent = currentN;
        document.getElementById('val-phi').textContent = phi;
        
        // æ›´æ–°æŒ‘æˆ°å€æ•¸å­—
        document.getElementById('challenge-n').textContent = currentN;
        document.getElementById('guess-feedback').textContent = "";
        document.getElementById('guess-p').value = "";
        document.getElementById('guess-q').value = "";

        // é¡¯ç¤ºçµæœå€å¡Š
        document.getElementById('sim-result').style.display = 'block';
        
        // å¹³æ»‘æ²å‹•
        document.getElementById('sim-result').scrollIntoView({behavior: "smooth"});
    }

    function verifyGuess() {
        const guessP = parseInt(document.getElementById('guess-p').value);
        const guessQ = parseInt(document.getElementById('guess-q').value);
        const feedback = document.getElementById('guess-feedback');

        if (!guessP || !guessQ) {
            feedback.style.color = "var(--danger-color)";
            feedback.textContent = "è«‹è¼¸å…¥å…©å€‹æ•¸å­—ï¼";
            return;
        }

        // é©—è­‰é‚è¼¯ï¼šä¹˜ç©å¿…é ˆç­‰æ–¼ nï¼Œä¸”å¿…é ˆæ˜¯åŸæœ¬çš„ p æˆ– q (é †åºä¸æ‹˜)
        const isCorrectProduct = (guessP * guessQ === currentN);
        // åš´è¬¹ä¸€é»ï¼Œç¢ºä¿ä¸æ˜¯è¼¸å…¥ 1 å’Œ n
        const isNotTrivial = (guessP !== 1 && guessQ !== 1);

        if (isCorrectProduct && isNotTrivial) {
            feedback.style.color = "var(--success-color)";
            feedback.innerHTML = "ğŸ‰ ç ´è§£æˆåŠŸï¼<br>ä½†åœ¨çœŸå¯¦ä¸–ç•Œ n æ˜¯å¹¾ç™¾ä½æ•¸ï¼Œä½ ä¸å¯èƒ½é€™æ¨£çŒœå‡ºä¾†å–”ï¼";
        } else {
            feedback.style.color = "var(--danger-color)";
            feedback.innerHTML = "âŒ ç ´è§£å¤±æ•—ï¼<br>é€™å…©å€‹æ•¸ä¹˜èµ·ä¾†ä¸æ˜¯ " + currentN + "ï¼Œæˆ–è€…ä½ è¼¸å…¥äº†ç„¡æ•ˆå› æ•¸ã€‚å†è©¦è©¦ï¼Ÿ";
        }
    }

    /* --- å°æ¸¬é©—é‚è¼¯ --- */
    function checkQuiz(btnElement, answer) {
        const feedback = document.getElementById('quiz-feedback');
        const retryBtn = document.getElementById('retry-btn');
        
        // é‡ç½®æ‰€æœ‰æŒ‰éˆ•æ¨£å¼
        const allBtns = document.querySelectorAll('.quiz-option');
        allBtns.forEach(btn => {
            btn.classList.remove('correct-answer', 'wrong-answer');
            btn.disabled = true; // é–å®š
        });

        if (answer === 'D') {
            btnElement.classList.add('correct-answer');
            feedback.style.color = "var(--success-color)";
            feedback.style.display = "block";
            feedback.textContent = "âœ… æ­£ç¢ºï¼é‡‘é‘°ç”¢ç”Ÿé«˜åº¦ä¾è³´è³ªæ•¸èˆ‡å› æ•¸åˆ†è§£çš„å›°é›£åº¦ã€‚";
            retryBtn.style.display = "none";
        } else {
            btnElement.classList.add('wrong-answer');
            feedback.style.color = "var(--danger-color)";
            feedback.style.display = "block";
            feedback.textContent = "âŒ ç­”éŒ¯å›‰ï¼å›æƒ³ä¸€ä¸‹å‰›å‰›çš„æ¨¡æ“¬å¯¦é©—ã€‚";
            retryBtn.style.display = "inline-block";
        }
    }

    function scrollToSim() {
        // è§£é–æŒ‰éˆ•
        const allBtns = document.querySelectorAll('.quiz-option');
        allBtns.forEach(btn => btn.disabled = false);
        document.getElementById('quiz-feedback').style.display = 'none';
        document.getElementById('retry-btn').style.display = 'none';

        // æ²å‹•
        const simArea = document.getElementById('simulation-area');
        simArea.scrollIntoView({behavior: "smooth"});
        
        // é«˜äº®æç¤ºæ•ˆæœ
        simArea.style.border = "2px solid var(--accent-color)";
        setTimeout(() => {
            simArea.style.border = "none";
        }, 2000);
    }

    /* --- Accordion é‚è¼¯ --- */
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            } 
        });
    }
</script>

</body>
</html>