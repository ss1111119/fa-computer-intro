<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 31ï¼šTCP/IP å‚³è¼¸å±¤é€šè¨Šå”å®šäº’å‹•æ•™å­¸</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        :root {
            --primary-color: #2c3e50; /* æ·±è— - å°ˆæ¥­æ„Ÿ */
            --accent-color: #e67e22;  /* æ©˜è‰² - é‡é» */
            --success-color: #27ae60; /* ç¶ è‰² - æ­£ç¢º */
            --error-color: #c0392b;   /* ç´…è‰² - éŒ¯èª¤ */
            --bg-color: #f0f2f5;      /* æ·ºç° - èƒŒæ™¯ */
            --card-bg: #ffffff;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1, h2, h3 {
            color: var(--primary-color);
        }

        /* --- è£œç¿’ç­è¬›ç¾©é¢¨æ ¼å¡ç‰‡ --- */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary-color);
        }

        .card.highlight {
            border-left-color: var(--accent-color);
            background-color: #fffdf9;
        }

        .tag {
            display: inline-block;
            background: #eee;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #666;
            margin-right: 5px;
        }

        .highlight-text {
            color: var(--error-color);
            font-weight: bold;
            font-size: 1.1em;
        }

        /* --- æŒ‰éˆ•æ¨£å¼ --- */
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        .btn:hover {
            background-color: #34495e;
        }

        .btn-reset {
            background-color: #7f8c8d;
            margin-top: 20px;
        }

        .btn-check {
            background-color: var(--accent-color);
        }

        /* --- è¡¨æ ¼æ¨£å¼ (å±¤ç´šå°ç…§) --- */
        .layer-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .layer-table th, .layer-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        .layer-table th {
            background-color: #f8f9fa;
        }

        .target-layer {
            background-color: #fff3cd; /* é»ƒåº•æ¨™ç¤ºé‡é»å±¤ */
            font-weight: bold;
            color: var(--error-color);
            border: 2px solid var(--accent-color) !important;
        }

        /* --- äº’å‹•å€ (A) æ‹–æ‹‰åˆ†é¡ --- */
        .drag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }

        .protocol-source {
            display: flex;
            gap: 10px;
            background: #eef;
            padding: 15px;
            border-radius: 8px;
            width: 100%;
            min-height: 60px;
            align-items: center;
            flex-wrap: wrap;
        }

        .draggable-item {
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: grab;
            user-select: none;
            font-weight: bold;
        }

        .draggable-item:active {
            cursor: grabbing;
        }

        .drop-zones {
            display: flex;
            gap: 10px;
            width: 100%;
            flex-wrap: wrap;
        }

        .drop-zone {
            flex: 1;
            min-width: 120px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 10px;
            min-height: 100px;
            background: #fafafa;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .drop-zone h4 {
            margin: 0 0 10px 0;
            font-size: 0.9em;
            color: #666;
        }

        .drop-zone.drag-over {
            border-color: var(--accent-color);
            background: #fff5e6;
        }

        /* --- äº’å‹•å€ (B) è¤‡é¸é¡Œ --- */
        .quiz-options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .quiz-options label:hover {
            background-color: #f1f1f1;
        }

        .quiz-options input[type="checkbox"] {
            transform: scale(1.2);
            margin-right: 10px;
        }

        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }

        .feedback-correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback-wrong {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* --- äº’å‹•å€ (C) TCP vs UDP ç¿»ç‰Œ --- */
        .compare-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .flip-card {
            flex: 1;
            min-width: 250px;
            background-color: white;
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s;
            overflow: hidden;
            position: relative;
            min-height: 150px;
        }

        .flip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .flip-header {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .flip-content {
            padding: 20px;
            text-align: center;
            display: none; /* é è¨­éš±è— */
            background: #fff;
        }

        .flip-hint {
            text-align: center;
            padding: 40px 0;
            color: #888;
            font-style: italic;
        }

        /* --- äº’å‹•å€ (E) é™·é˜±å¡ --- */
        .trap-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .trap-card {
            background: #fff0f0;
            border: 1px solid #ffcccc;
            border-left: 4px solid var(--error-color);
            padding: 15px;
            border-radius: 8px;
            flex: 1;
            min-width: 200px;
            position: relative;
        }

        .trap-close {
            display: block;
            margin-top: 10px;
            text-align: right;
            color: var(--primary-color);
            font-size: 0.9em;
            text-decoration: underline;
            cursor: pointer;
        }

        /* --- äº’å‹•å€ (D) é¸é …è§£æ --- */
        .analysis-btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .analysis-output {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
            min-height: 40px;
        }

        /* --- è‡ªæˆ‘æª¢æ¸¬æç¤º --- */
        .hint-section {
            margin-top: 10px;
            display: none;
            background: #fffbea;
            padding: 10px;
            border: 1px dashed var(--accent-color);
            border-radius: 5px;
        }

    </style>
</head>
<body>

<div class="container">
    <!-- æ¨™é¡Œå€ -->
    <header style="text-align: center; margin-bottom: 30px;">
        <h1 style="margin-bottom: 5px;">è¤‡é¸é¡Œ 31ï¼šå‚³è¼¸å±¤é€šè¨Šå”å®š</h1>
        <p style="color: #666;">é«˜ä¸­é›»è…¦æ¦‚è«– - ç¶²è·¯å–®å…ƒé‡é»è¬›ç¾©</p>
    </header>

    <!-- 1. é¡Œç›®å±•ç¤ºå€ -->
    <section class="card">
        <h2>ğŸ“š ç¶“å…¸è©¦é¡Œï¼šè¤‡é¸é¡Œ 31</h2>
        <div style="font-size: 1.1em; background: #fff; padding: 15px; border: 1px solid #ccc; border-radius: 8px;">
            <p>ä¸‹åˆ—ä½•è€…å±¬æ–¼ TCP/IP ç¶²è·¯ä¸­ï¼Œ<strong>å‚³è¼¸å±¤ï¼ˆTransport Layerï¼‰</strong>çš„é€šè¨Šå”å®šï¼Ÿ</p>
            <p>
                (A) TCP<br>
                (B) ICMP<br>
                (C) IP<br>
                (D) UDP<br>
                (E) CMIP
            </p>
            <p style="color: var(--success-color); font-weight: bold; border-top: 1px dashed #ccc; padding-top: 10px; display: none;" id="answer-reveal">
                æ­£ç¢ºç­”æ¡ˆï¼š(A) TCPã€(D) UDP
            </p>
        </div>
        <button class="btn" style="margin-top: 10px;" onclick="document.getElementById('answer-reveal').style.display='block'">å·çœ‹ç­”æ¡ˆ</button>
    </section>

    <!-- 2. æ ¸å¿ƒè§€å¿µèˆ‡åè©è§£é‡‹ -->
    <section class="card highlight">
        <h2>ğŸ’¡ è€å¸«å¹«ä½ ç•«é‡é»ï¼ˆå¿…èƒŒï¼ï¼‰</h2>
        <p>é€™é¡Œæ˜¯ç¶²è·¯å±¤ç´šåˆ¤æ–·çš„é€åˆ†é¡Œï¼Œåªè¦çœ‹åˆ°<strong>ã€Œå‚³è¼¸å±¤ã€</strong>ï¼Œè…¦è¢‹ç«‹åˆ»è¦å½ˆå‡ºå…©å€‹ä¸»è§’ï¼š</p>
        <div style="text-align: center; margin: 20px 0;">
            <span style="font-size: 2em; font-weight: bold; color: var(--accent-color); margin: 0 15px;">TCP</span>
            <span style="font-size: 2em; font-weight: bold; color: var(--primary-color);">+</span>
            <span style="font-size: 2em; font-weight: bold; color: var(--accent-color); margin: 0 15px;">UDP</span>
        </div>
        <p>å…¶ä»–çš„ IPã€ICMP éƒ½æ˜¯ä¸‹ä¸€å±¤ã€Œç¶²è·¯å±¤ã€çš„å”å®šï¼Œåƒè¬åˆ¥ææ··ï¼</p>
        
        <hr style="border: 0; border-top: 1px solid #ddd; margin: 20px 0;">
        
        <h3>ğŸ“– å°ˆæœ‰åè©ç™½è©±æ–‡ï¼š</h3>
        <ul>
            <li><strong>TCP/IP</strong>ï¼šç¶²éš›ç¶²è·¯ä½¿ç”¨çš„ä¸€æ•´å¥—é€šè¨Šæ¶æ§‹ï¼ˆå¯ä»¥æƒ³æˆæ˜¯ç¶²è·¯ä¸–ç•Œçš„æ†²æ³•èˆ‡æ³•å¾‹ï¼‰ã€‚</li>
            <li><strong>å‚³è¼¸å±¤ (Transport Layer)</strong>ï¼šè² è²¬ã€Œç«¯åˆ°ç«¯è³‡æ–™å‚³é€ã€çš„é‚£ä¸€å±¤ï¼ˆåƒæ˜¯å¿«éå…¬å¸ï¼Œç¢ºä¿è²¨ç‰©é€åˆ°ï¼‰ã€‚</li>
            <li><strong>TCP</strong>ï¼šå¯é å‚³è¼¸å”å®šï¼ˆåƒæ›è™Ÿä¿¡ï¼Œæœƒç¢ºèªå°æ–¹æœ‰æ²’æœ‰æ”¶åˆ°ï¼Œæ²’æ”¶åˆ°æœƒé‡å¯„ï¼‰ã€‚</li>
            <li><strong>UDP</strong>ï¼šä¸å¯é ä½†é€Ÿåº¦å¿«çš„å”å®šï¼ˆåƒå¯„å¹³ä¿¡æˆ–å»£æ’­ï¼Œä¸Ÿå‡ºå»å°±ä¸ç®¡äº†ï¼Œé©åˆç›´æ’­ï¼‰ã€‚</li>
            <li><strong>IP</strong>ï¼šç¶²éš›ç¶²è·¯å”å®šï¼ˆè² è²¬æ‰¾è·¯ã€è²¼åœ°å€ï¼Œå±¬æ–¼ç¶²è·¯å±¤ï¼‰ã€‚</li>
            <li><strong>ICMP</strong>ï¼šæ§åˆ¶è¨Šæ¯å”å®šï¼ˆç”¨ä¾†å›å ±éŒ¯èª¤ã€ping æ¸¬è©¦ï¼Œå±¬æ–¼ç¶²è·¯å±¤ï¼‰ã€‚</li>
            <li><strong>CMIP</strong>ï¼šé€šç”¨ç®¡ç†è³‡è¨Šå”å®šï¼ˆé€™æ˜¯ OSI æ¨¡å‹çš„ç¶²è·¯ç®¡ç†å”å®šï¼Œä¸æ˜¯ TCP/IP å‚³è¼¸å±¤çš„ä¸»è§’ï¼‰ã€‚</li>
        </ul>
    </section>

    <!-- 3. æ¶æ§‹å°ç…§è¡¨ -->
    <section class="card">
        <h2>ğŸ“Š TCP/IP å››å±¤æ¶æ§‹å°ç…§è¡¨</h2>
        <p>è€ƒè©¦æœ€å–œæ­¡è€ƒé€™ä¸€å¼µè¡¨ï¼Œè«‹çœ‹æ¸…æ¥šã€Œå‚³è¼¸å±¤ã€çš„ä½ç½®ï¼š</p>
        <table class="layer-table">
            <thead>
                <tr>
                    <th width="30%">å±¤ç´šåç¨±</th>
                    <th>å¸¸è¦‹é€šè¨Šå”å®š</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>æ‡‰ç”¨å±¤<br><small>(Application Layer)</small></td>
                    <td>HTTP, FTP, SMTP, DNS, POP3</td>
                </tr>
                <tr class="target-layer">
                    <td>ğŸ‘‰ å‚³è¼¸å±¤ ğŸ‘ˆ<br><small>(Transport Layer)</small></td>
                    <td>TCP, UDP</td>
                </tr>
                <tr>
                    <td>ç¶²è·¯å±¤<br><small>(Internet Layer)</small></td>
                    <td>IP, ICMP, ARP, RARP</td>
                </tr>
                <tr>
                    <td>ç¶²è·¯ä»‹é¢å±¤<br><small>(Network Interface Layer)</small></td>
                    <td>Ethernet (ä¹™å¤ªç¶²è·¯), Wi-Fi</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- 4. äº’å‹• (C) TCP vs UDP -->
    <section class="card">
        <h2>âš”ï¸ å‚³è¼¸å±¤é›™é›„ï¼šé»æ“Šå¡ç‰‡çœ‹ç´°ç¯€</h2>
        <p>é»æ“Šä¸‹æ–¹å¡ç‰‡ï¼Œçœ‹çœ‹å®ƒå€‘åœ¨ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š</p>
        <div class="compare-container">
            <!-- TCP Card -->
            <div class="flip-card" onclick="toggleCard(this)">
                <div class="flip-header">TCP (å‚³è¼¸æ§åˆ¶å”å®š)</div>
                <div class="flip-hint">é»æˆ‘ç¿»é¢</div>
                <div class="flip-content">
                    <p><strong>ç‰¹æ€§ï¼š</strong>å¯é ã€é€£ç·šå°å‘ã€æ…¢ã€‚</p>
                    <p><strong>å£è¨£ï¼š</strong>ã€Œä½¿å‘½å¿…é”ã€ã€‚</p>
                    <p><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>ä¸‹è¼‰æª”æ¡ˆã€ç€è¦½ç¶²é ã€å‚³ Emailã€‚å› ç‚ºä¸èƒ½å°‘ä¸€å€‹å­—ï¼Œæ‰€ä»¥å¿…é ˆç¢ºèªæ”¶åˆ°ã€‚</p>
                </div>
            </div>
            <!-- UDP Card -->
            <div class="flip-card" onclick="toggleCard(this)" style="border-color: var(--accent-color);">
                <div class="flip-header" style="background: var(--accent-color);">UDP (ä½¿ç”¨è€…è³‡æ–™åŒ…å”å®š)</div>
                <div class="flip-hint">é»æˆ‘ç¿»é¢</div>
                <div class="flip-content">
                    <p><strong>ç‰¹æ€§ï¼š</strong>ä¸å¯é ã€éé€£ç·šã€å¿«ã€‚</p>
                    <p><strong>å£è¨£ï¼š</strong>ã€Œå°„å¾Œä¸ç†ã€ã€‚</p>
                    <p><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>èªéŸ³é€šè©±ã€è¦–è¨Šç›´æ’­ã€ç·šä¸ŠéŠæˆ²ã€‚ç¨å¾®æ‰ä¸€é»å°åŒ…æ²’é—œä¿‚ï¼Œé‡é»è¦ã€Œå³æ™‚ã€ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. äº’å‹• (A) æ‹–æ‹‰åˆ†é¡ -->
    <section class="card">
        <h2>ğŸ® äº’å‹•ç·´ç¿’ï¼šå”å®šæ­¸ä½</h2>
        <p>è«‹å°‡ä¸Šæ–¹çš„å”å®šï¼Œæ‹–æ‹‰åˆ°ä¸‹æ–¹æ­£ç¢ºçš„åˆ†é¡æ¡†ä¸­ï¼š</p>
        
        <!-- ä¾†æºå€ -->
        <div class="protocol-source" id="source-zone" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-tcp" data-layer="transport">TCP</div>
            <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-udp" data-layer="transport">UDP</div>
            <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-ip" data-layer="internet">IP</div>
            <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-icmp" data-layer="internet">ICMP</div>
            <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-cmip" data-layer="other">CMIP</div>
            <span style="color: #999; font-size: 0.9em; margin-left: auto;">(å¦‚æœæ‹–éŒ¯äº†ï¼Œå¯ä»¥æ‹–å›é€™è£¡)</span>
        </div>

        <!-- ç›®æ¨™å€ -->
        <div class="drag-container">
            <div class="drop-zones">
                <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-target="transport">
                    <h4>å‚³è¼¸å±¤ (Transport)</h4>
                </div>
                <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-target="internet">
                    <h4>ç¶²è·¯å±¤ (Internet)</h4>
                </div>
                <div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)" data-target="other">
                    <h4>å…¶ä»– / OSI</h4>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 15px; text-align: right;">
            <button class="btn btn-check" onclick="checkDragAnswer()">æª¢æŸ¥åˆ†é¡</button>
            <p id="drag-feedback" style="font-weight: bold; margin-top: 10px;"></p>
        </div>
    </section>

    <!-- 6. äº’å‹• (D) é¸é …é€ä¸€è§£æ -->
    <section class="card">
        <h2>ğŸ” é¸é …é€ä¸€æ“Šç ´</h2>
        <p>é»æ“Šé¸é …ä»£è™Ÿï¼Œçœ‹çœ‹ç‚ºä»€éº¼å°æˆ–éŒ¯ï¼š</p>
        <div class="analysis-btn-group">
            <button class="btn" onclick="showAnalysis('A')">(A) TCP</button>
            <button class="btn" onclick="showAnalysis('B')">(B) ICMP</button>
            <button class="btn" onclick="showAnalysis('C')">(C) IP</button>
            <button class="btn" onclick="showAnalysis('D')">(D) UDP</button>
            <button class="btn" onclick="showAnalysis('E')">(E) CMIP</button>
        </div>
        <div id="analysis-text" class="analysis-output">
            è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹è§£æ...
        </div>
    </section>

    <!-- 7. äº’å‹• (E) é™·é˜±å¡ -->
    <section class="card" style="background-color: #fff5f5;">
        <h2 style="color: var(--error-color);">âš ï¸ è€ƒè©¦å¸¸è¦‹é™·é˜±å€</h2>
        <p>å¾ˆå¤šå­¸é•·å§éƒ½åœ¨é€™è£¡è·Œå€’ï¼Œçœ‹æ‡‚äº†å°±é»æ“Šã€Œæˆ‘æ‡‚äº†ã€æŠŠå®ƒæ¶ˆæ»…ï¼</p>
        <div class="trap-container">
            <div class="trap-card">
                <h3>é™·é˜± 1ï¼šçœ‹åˆ° IP å°±é¸ï¼Ÿ</h3>
                <p>IP (Internet Protocol) é›–ç„¶æ˜¯ TCP/IP çš„åå­—ä¸€éƒ¨åˆ†ï¼Œä½†å®ƒæ˜¯<strong>ç¶²è·¯å±¤</strong>ï¼Œè² è²¬æ‰¾è·¯å¾‘çš„ï¼Œä¸æ˜¯å‚³è¼¸å±¤å–”ï¼</p>
                <span class="trap-close" onclick="dismissTrap(this)">æˆ‘æ‡‚äº†ï¼Œæ¶ˆæ»…é™·é˜±ï¼</span>
            </div>
            <div class="trap-card">
                <h3>é™·é˜± 2ï¼šä»¥ç‚º ICMP å‚³è³‡æ–™ï¼Ÿ</h3>
                <p>ICMP åªæ˜¯ç”¨ä¾†ã€Œå›å ±éŒ¯èª¤ã€æˆ–æ¸¬è©¦ (å¦‚ ping)ï¼Œå®ƒä¸¦ä¸è² è²¬å‚³é€ä½¿ç”¨è€…çš„æª”æ¡ˆè³‡æ–™ã€‚</p>
                <span class="trap-close" onclick="dismissTrap(this)">æˆ‘æ‡‚äº†ï¼Œæ¶ˆæ»…é™·é˜±ï¼</span>
            </div>
            <div class="trap-card">
                <h3>é™·é˜± 3ï¼šè¤‡é¸é¡Œåªé¸ä¸€å€‹ï¼Ÿ</h3>
                <p>é¡Œç›®å•ã€Œå“ªäº›ã€ï¼Œé€šå¸¸ä¸åªä¸€å€‹ã€‚å‚³è¼¸å±¤ä¸€å®šæ˜¯ <strong>TCP èˆ‡ UDP</strong> é€™å°é›£å…„é›£å¼Ÿä¸€èµ·å‡ºç¾ã€‚</p>
                <span class="trap-close" onclick="dismissTrap(this)">æˆ‘æ‡‚äº†ï¼Œæ¶ˆæ»…é™·é˜±ï¼</span>
            </div>
        </div>
    </section>

    <!-- 8. äº’å‹• (B) è¤‡é¸é¡Œä½œç­” -->
    <section class="card highlight">
        <h2>âœï¸ å¯¦æˆ°æ¼”ç·´ï¼šç¾åœ¨æ›ä½ ä½œç­”</h2>
        <p><strong>é¡Œç›® 31ï¼šä¸‹åˆ—ä½•è€…å±¬æ–¼ TCP/IP ç¶²è·¯ä¸­ï¼Œå‚³è¼¸å±¤çš„é€šè¨Šå”å®šï¼Ÿï¼ˆæœ¬é¡Œå¯è¤‡é¸ï¼‰</strong></p>
        
        <div class="quiz-options">
            <label><input type="checkbox" name="q31" value="A"> (A) TCP</label>
            <label><input type="checkbox" name="q31" value="B"> (B) ICMP</label>
            <label><input type="checkbox" name="q31" value="C"> (C) IP</label>
            <label><input type="checkbox" name="q31" value="D"> (D) UDP</label>
            <label><input type="checkbox" name="q31" value="E"> (E) CMIP</label>
        </div>

        <button class="btn btn-check" style="margin-top: 15px;" onclick="checkQuiz()">é€å‡ºç­”æ¡ˆ</button>

        <div id="quiz-feedback" class="feedback-box"></div>
    </section>

    <!-- 9. è‡ªæˆ‘æª¢æ¸¬ -->
    <section class="card">
        <h2>ğŸ¤” è‡ªæˆ‘æª¢æ¸¬ï¼ˆä¸çµ¦ç­”æ¡ˆï¼Œè‡ªå·±æƒ³ï¼ï¼‰</h2>
        
        <div style="margin-bottom: 20px;">
            <p><strong>Q1ï¼šå¦‚æœé¡Œç›®æ”¹æˆã€Œç¶²è·¯å±¤ (Internet Layer)ã€çš„å”å®šï¼Œä½ æœƒé¸èª°ï¼Ÿ</strong></p>
            <button class="btn" style="font-size: 0.8em; padding: 5px 10px;" onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
            <div id="hint1" class="hint-section">æç¤ºï¼šè² è²¬å®šå€èˆ‡è·¯ç”±çš„é‚£ä¸€ä½ï¼Œé‚„æœ‰ ping æœƒç”¨åˆ°çš„é‚£ä¸€ä½ã€‚ï¼ˆç­”æ¡ˆåœ¨è¡¨æ ¼è£¡æœ‰å–”ï¼ï¼‰</div>
        </div>

        <div style="margin-bottom: 20px;">
            <p><strong>Q2ï¼šç‚ºä»€éº¼è§€çœ‹ YouTube ç›´æ’­æˆ–è¦–è¨Šæœƒè­°æ™‚ï¼Œåº•å±¤é€šå¸¸ä½¿ç”¨ UDP è€Œä¸æ˜¯ TCPï¼Ÿ</strong></p>
            <button class="btn" style="font-size: 0.8em; padding: 5px 10px;" onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
            <div id="hint2" class="hint-section">æç¤ºï¼šç›´æ’­æœ€æ€•å¡é “ï¼Œæ‰ä¸€å…©å€‹ç•«é¢æ²’é—œä¿‚ï¼Œé‡é»è¦ã€Œå¿«ã€ä¸”ã€Œå³æ™‚ã€ã€‚</div>
        </div>

        <div>
            <p><strong>Q3ï¼šçœ‹åˆ°é—œéµå­—ã€Œç«¯åˆ°ç«¯ (End-to-End) å‚³è¼¸ã€ï¼Œè¦é¦¬ä¸Šæƒ³åˆ°å“ªä¸€å±¤ï¼Ÿ</strong></p>
            <button class="btn" style="font-size: 0.8em; padding: 5px 10px;" onclick="toggleHint('hint3')">é¡¯ç¤ºæç¤º</button>
            <div id="hint3" class="hint-section">æç¤ºï¼šå°±æ˜¯æœ¬ç¶²é çš„ä¸»è§’å±¤ç´šï¼è² è²¬ä¿è­‰æ±è¥¿å¾æ‡‰ç”¨ç¨‹å¼é€åˆ°å¦ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ã€‚</div>
        </div>
    </section>

    <!-- å…¨åŸŸæ§åˆ¶ -->
    <div style="text-align: center; margin-bottom: 50px;">
        <button class="btn btn-reset" onclick="resetAll()">ğŸ”„ é‡ç½®æ‰€æœ‰ç·´ç¿’</button>
    </div>

</div>

<script>
    /* --- 1. æ‹–æ‹‰äº’å‹•é‚è¼¯ (Drag and Drop) --- */
    function allowDrop(ev) {
        ev.preventDefault();
        // å¢åŠ è¦–è¦ºæ•ˆæœ
        if(ev.target.classList.contains('drop-zone')) {
            ev.target.classList.add('drag-over');
        }
    }

    // ç•¶é›¢é–‹æ‹–æ‹‰å€æ™‚ç§»é™¤æ•ˆæœ
    document.addEventListener('dragleave', function(ev) {
        if(ev.target.classList.contains('drop-zone')) {
            ev.target.classList.remove('drag-over');
        }
    });

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);
        
        // è™•ç†æ”¾ç½®ç›®æ¨™
        let target = ev.target;
        
        // å¦‚æœæ”¾åˆ°äº† drop-zone å…§éƒ¨ï¼Œç¢ºä¿æ˜¯åŠ åˆ° drop-zone æœ¬èº«
        if (!target.classList.contains('drop-zone') && !target.classList.contains('protocol-source')) {
            target = target.closest('.drop-zone') || target.closest('.protocol-source');
        }

        if (target) {
            target.classList.remove('drag-over'); // ç§»é™¤æ‹–æ‹‰æ¨£å¼
            target.appendChild(draggedElement);
        }
    }

    function checkDragAnswer() {
        let score = 0;
        let feedback = "";
        let isCorrect = true;
        
        // å–å¾—æ‰€æœ‰åœ¨ drop-zone å…§çš„é …ç›®
        const zones = document.querySelectorAll('.drop-zone');
        
        zones.forEach(zone => {
            const expectedLayer = zone.getAttribute('data-target');
            const items = zone.querySelectorAll('.draggable-item');
            
            if (items.length === 0) {
                isCorrect = false;
                // ç©ºçš„ä¸æ‰£åˆ†ï¼Œä½†ä¹Ÿä¸ç®—å°
            }

            items.forEach(item => {
                if (item.getAttribute('data-layer') === expectedLayer) {
                    item.style.backgroundColor = "var(--success-color)"; // ç­”å°è®Šç¶ 
                } else {
                    item.style.backgroundColor = "var(--error-color)"; // ç­”éŒ¯è®Šç´…
                    isCorrect = false;
                }
            });
        });

        // æª¢æŸ¥æ˜¯å¦é‚„æœ‰æ±è¥¿ç•™åœ¨ä¾†æºå€
        const sourceItems = document.getElementById('source-zone').querySelectorAll('.draggable-item');
        if (sourceItems.length > 0) {
            feedback = "é‚„æœ‰å”å®šæ²’åˆ†é¡å–”ï¼è«‹å…¨éƒ¨æ‹–å®Œã€‚";
            document.getElementById('drag-feedback').style.color = "var(--error-color)";
        } else if (isCorrect) {
            feedback = "ğŸ‰ å¤ªå¼·äº†ï¼å…¨éƒ¨åˆ†é¡æ­£ç¢ºï¼TCP/UDP å°±æ˜¯å‚³è¼¸å±¤ç„¡èª¤ï¼";
            document.getElementById('drag-feedback').style.color = "var(--success-color)";
        } else {
            feedback = "âŒ æœ‰éŒ¯èª¤å–”ï¼ç´…è‰²çš„è¡¨ç¤ºæ”¾éŒ¯ä½ç½®äº†ï¼Œè«‹åƒè€ƒä¸Šæ–¹è¡¨æ ¼å†è©¦ä¸€æ¬¡ã€‚";
            document.getElementById('drag-feedback').style.color = "var(--error-color)";
        }
        
        document.getElementById('drag-feedback').innerText = feedback;
    }

    /* --- 2. è¤‡é¸é¡Œæª¢æ ¸é‚è¼¯ --- */
    function checkQuiz() {
        const checkboxes = document.querySelectorAll('input[name="q31"]');
        let selectedValues = [];
        checkboxes.forEach((cb) => {
            if (cb.checked) selectedValues.push(cb.value);
        });

        const correctAnswers = ['A', 'D'];
        const feedbackBox = document.getElementById('quiz-feedback');
        
        // åˆ¤æ–·é‚è¼¯
        // 1. å®Œå…¨æ­£ç¢º: é¸äº† A, D ä¸”æ²’æœ‰é¸å…¶ä»–
        // 2. æ¼é¸: å°‘é¸äº†
        // 3. é¸éŒ¯: é¸äº† B, C, E

        // æ‰¾å‡ºé¸éŒ¯çš„
        let wrongSelections = selectedValues.filter(val => !correctAnswers.includes(val));
        // æ‰¾å‡ºæ¼é¸çš„
        let missingSelections = correctAnswers.filter(val => !selectedValues.includes(val));

        feedbackBox.style.display = 'block';
        feedbackBox.className = 'feedback-box'; // reset class

        if (wrongSelections.length === 0 && missingSelections.length === 0) {
            // å®Œå…¨æ­£ç¢º
            feedbackBox.innerHTML = "<strong>âœ… å®Œå…¨æ­£ç¢ºï¼</strong><br>TCP èˆ‡ UDP æ­£æ˜¯å‚³è¼¸å±¤çš„å…©å¤§æ”¯æŸ±ã€‚";
            feedbackBox.classList.add('feedback-correct');
        } else {
            // æœ‰éŒ¯
            let msg = "<strong>âŒ ç­”éŒ¯å›‰ï¼š</strong><br>";
            if (missingSelections.length > 0) {
                msg += `â€¢ ä½ æ¼é¸äº†ï¼š${missingSelections.map(v => mapOptionName(v)).join('ã€')}<br>`;
            }
            if (wrongSelections.length > 0) {
                msg += `â€¢ ä½ å¤šé¸äº†ï¼ˆé€™æ˜¯åˆ¥å±¤çš„ï¼‰ï¼š${wrongSelections.map(v => mapOptionName(v)).join('ã€')}<br>`;
            }
            msg += "<br>ğŸ’¡ æç¤ºï¼šè¨˜å¾—å‚³è¼¸å±¤åªæœ‰ TCP å’Œ UDP å–”ï¼";
            
            feedbackBox.innerHTML = msg;
            feedbackBox.classList.add('feedback-wrong');
        }
    }

    function mapOptionName(val) {
        const map = {'A':'(A) TCP', 'B':'(B) ICMP', 'C':'(C) IP', 'D':'(D) UDP', 'E':'(E) CMIP'};
        return map[val] || val;
    }

    /* --- 3. ç¿»ç‰Œèˆ‡è§£æé‚è¼¯ --- */
    function toggleCard(card) {
        const content = card.querySelector('.flip-content');
        const hint = card.querySelector('.flip-hint');
        if (content.style.display === 'block') {
            content.style.display = 'none';
            hint.style.display = 'block';
        } else {
            content.style.display = 'block';
            hint.style.display = 'none';
        }
    }

    function showAnalysis(option) {
        const output = document.getElementById('analysis-text');
        let text = "";
        let color = "#333";

        switch(option) {
            case 'A':
                text = "<strong>(A) TCPï¼šâœ… æ­£ç¢ºï¼</strong><br>å®ƒæ˜¯å‚³è¼¸å±¤çš„æ ¸å¿ƒå”å®šï¼Œè² è²¬å¯é å‚³è¼¸ã€‚";
                color = "var(--success-color)";
                break;
            case 'B':
                text = "<strong>(B) ICMPï¼šâŒ éŒ¯èª¤ï¼</strong><br>ICMP æ˜¯ã€ç¶²è·¯å±¤ã€å”å®šï¼Œç”¨ä¾† ping åˆ¥äººæˆ–å›å ±éŒ¯èª¤ï¼Œä¸è² è²¬å‚³è¼¸å±¤çš„ç«¯å°ç«¯é€£ç·šã€‚";
                color = "var(--error-color)";
                break;
            case 'C':
                text = "<strong>(C) IPï¼šâŒ éŒ¯èª¤ï¼</strong><br>IP æ˜¯ã€ç¶²è·¯å±¤ã€çš„è€å¤§ï¼Œè² è²¬å®šå€å’Œè·¯ç”±ï¼Œä¸æ˜¯å‚³è¼¸å±¤ã€‚";
                color = "var(--error-color)";
                break;
            case 'D':
                text = "<strong>(D) UDPï¼šâœ… æ­£ç¢ºï¼</strong><br>å®ƒæ˜¯å‚³è¼¸å±¤å¦ä¸€å€‹é‡è¦å”å®šï¼Œè² è²¬å¿«é€Ÿä½†ä¸å¯é çš„å‚³è¼¸ã€‚";
                color = "var(--success-color)";
                break;
            case 'E':
                text = "<strong>(E) CMIPï¼šâŒ éŒ¯èª¤ï¼</strong><br>é€™æ˜¯ OSI æ¨¡å‹çš„ç¶²è·¯ç®¡ç†å”å®šï¼Œåœ¨ TCP/IP æ¶æ§‹ä¸­å¾ˆå°‘è¨è«–ï¼Œä¸”ä¸å±¬æ–¼å‚³è¼¸å±¤ã€‚";
                color = "var(--error-color)";
                break;
        }
        output.innerHTML = text;
        output.style.borderLeftColor = color;
    }

    function dismissTrap(element) {
        const card = element.parentElement;
        card.style.transition = "opacity 0.5s";
        card.style.opacity = "0";
        setTimeout(() => {
            card.style.display = "none";
        }, 500);
    }

    function toggleHint(id) {
        const hint = document.getElementById(id);
        hint.style.display = hint.style.display === 'block' ? 'none' : 'block';
    }

    /* --- 4. é‡ç½®åŠŸèƒ½ --- */
    function resetAll() {
        // é‡ç½®æ‹–æ‹‰
        const sourceZone = document.getElementById('source-zone');
        const items = document.querySelectorAll('.draggable-item');
        items.forEach(item => {
            sourceZone.appendChild(item); // ç§»å›åŸä½
            item.style.backgroundColor = "var(--primary-color)"; // é‡ç½®é¡è‰²
        });
        document.getElementById('drag-feedback').innerText = "";
        document.getElementById('drag-feedback').style.color = "";

        // é‡ç½®è¤‡é¸é¡Œ
        const checkboxes = document.querySelectorAll('input[name="q31"]');
        checkboxes.forEach(cb => cb.checked = false);
        document.getElementById('quiz-feedback').style.display = 'none';

        // é‡ç½®é™·é˜±å¡ (å¦‚æœè¢«éš±è—äº†)
        const traps = document.querySelectorAll('.trap-card');
        traps.forEach(trap => {
            trap.style.display = "block";
            trap.style.opacity = "1";
        });

        // é‡ç½®ç¿»ç‰Œ
        const contents = document.querySelectorAll('.flip-content');
        contents.forEach(c => c.style.display = 'none');
        const hints = document.querySelectorAll('.flip-hint');
        hints.forEach(h => h.style.display = 'block');

        // é‡ç½®è§£æ
        document.getElementById('analysis-text').innerText = "è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹è§£æ...";
        document.getElementById('analysis-text').style.borderLeftColor = "#3498db";

        // é‡ç½®æç¤º
        const hintSections = document.querySelectorAll('.hint-section');
        hintSections.forEach(h => h.style.display = 'none');

        // éš±è—ç­”æ¡ˆ
        document.getElementById('answer-reveal').style.display = 'none';

        alert("ç·´ç¿’å·²é‡ç½®ï¼Œè«‹é‡æ–°é–‹å§‹ï¼");
    }
</script>

</body>
</html>