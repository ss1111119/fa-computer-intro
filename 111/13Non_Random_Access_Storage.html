<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q13_è³‡æ–™å„²å­˜è¨­å‚™_èª°æ²’æœ‰éš¨æ©Ÿå­˜å–</title>
    <style>
        :root {
            --primary: #4a90e2;
            --secondary: #50e3c2;
            --accent: #ff6b6b;
            --bg: #f5f7fa;
            --text: #2c3e50;
            --card-bg: #ffffff;
            --success: #2ecc71;
            --warning: #f1c40f;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* é˜²æ­¢æ‰‹æ©Ÿä¸Šé•·æŒ‰é¸å–æ–‡å­—å½±éŸ¿é«”é©— */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* --- Header & Nav --- */
        header {
            background: linear-gradient(135deg, var(--primary), #357abd);
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            margin: 0;
            font-size: 1.2rem;
            text-align: center;
        }

        .subtitle {
            font-size: 0.9rem;
            text-align: center;
            opacity: 0.9;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding: 0 10px;
        }

        .step-dot {
            width: 30px;
            height: 30px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            transition: all 0.3s;
        }

        .step-dot.active {
            background: white;
            color: var(--primary);
            transform: scale(1.1);
        }

        /* --- Main Content --- */
        main {
            padding: 1rem;
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 80px; /* Space for footer */
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s forwards;
            display: none; /* é è¨­éš±è—ï¼Œç”± JS æ§åˆ¶é¡¯ç¤º */
        }

        .card.active {
            display: block;
        }

        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: var(--primary);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            font-size: 1.3rem;
            margin-top: 0;
        }

        /* --- Interaction Components --- */
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .btn:hover, .btn:active {
            background: var(--primary);
            color: white;
        }

        .btn.selected {
            background: var(--primary);
            color: white;
        }

        .btn.correct {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .btn.wrong {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .feedback {
            background: #e8f4fd;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0 8px 8px 0;
            display: none;
        }

        .highlight {
            color: var(--accent);
            font-weight: bold;
        }

        /* --- Simulation Animation Area --- */
        .sim-container {
            border: 2px solid #eee;
            border-radius: 8px;
            padding: 10px;
            margin: 15px 0;
            background: #fafafa;
        }

        .sim-label {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .tape-track {
            height: 50px;
            background: #333;
            overflow: hidden;
            position: relative;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .tape-strip {
            display: flex;
            position: absolute;
            left: 0;
            transition: left 0.5s linear; /* JS will change this */
        }

        .data-block {
            width: 40px;
            height: 30px;
            background: white;
            margin: 0 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: #333;
            border-radius: 2px;
        }

        .read-head {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--accent);
            transform: translateX(-50%);
            z-index: 10;
            box-shadow: 0 0 10px var(--accent);
        }

        .disk-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .disk-cell {
            height: 40px;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 0.8rem;
            transition: background 0.1s;
        }

        .disk-cell.active {
            background: var(--success);
            color: white;
            transform: scale(1.1);
        }

        .sim-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        /* --- Drag & Drop Game --- */
        .game-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .drop-zones {
            display: flex;
            gap: 10px;
        }

        .zone {
            flex: 1;
            border: 2px dashed #aaa;
            border-radius: 8px;
            min-height: 120px;
            padding: 10px;
            text-align: center;
            background: #f9f9f9;
            transition: background 0.2s;
        }

        .zone h4 { margin: 0 0 10px 0; font-size: 0.9rem;}

        .zone.drag-over {
            background: #e1f5fe;
            border-color: var(--primary);
        }

        .draggables {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            background: #eee;
            padding: 10px;
            border-radius: 8px;
            min-height: 60px;
        }

        .drag-item {
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: pointer; /* Change to pointer to indicate clickable */
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 2px solid transparent;
        }
        
        .drag-item.selected {
            border-color: var(--primary);
            background-color: #e3f2fd;
            transform: scale(1.05);
        }

        /* --- Analysis Cards --- */
        .option-analysis {
            background: #fff;
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
        }
        
        .option-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: white;
            margin-bottom: 5px;
        }
        .tag-random { background: var(--success); }
        .tag-seq { background: var(--accent); }

        /* --- Misc --- */
        .next-btn-container {
            text-align: center;
            margin-top: 20px;
        }

        .big-btn {
            background: var(--text);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .alert-box {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: flex;
            align-items: start;
            gap: 10px;
        }

        .true-false-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .tf-btns button {
            margin-left: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
        }

        details {
            margin-top: 20px;
            padding: 10px;
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        summary {
            cursor: pointer;
            font-weight: bold;
        }

        /* Modal specific */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            animation: fadeIn 0.3s;
        }
    </style>
</head>
<body>

<header>
    <h1>é¡Œç›® 13ï¼šè³‡æ–™å„²å­˜è¨­å‚™</h1>
    <div class="subtitle">éš¨æ©Ÿå­˜å– vs å¾ªåºå­˜å–</div>
    <div class="progress-bar">
        <div class="step-dot active" data-step="1">1</div>
        <div class="step-dot" data-step="2">2</div>
        <div class="step-dot" data-step="3">3</div>
        <div class="step-dot" data-step="4">4</div>
        <div class="step-dot" data-step="5">5</div>
    </div>
</header>

<main>

    <!-- STEP 1: Definition Quiz -->
    <section id="step1" class="card active">
        <h2>1. è§€å¿µç†±èº«</h2>
        <p>é€™é¡Œåœ¨è€ƒã€Œéš¨æ©Ÿå­˜å–ï¼ˆRandom Accessï¼‰ã€ã€‚<br>çœ‹åˆ°ã€Œéš¨æ©Ÿã€é€™å…©å€‹å­—ï¼Œä½ çš„ç›´è¦ºæ˜¯ä»€éº¼ï¼Ÿ</p>
        
        <div id="quiz-def-options">
            <button class="btn" onclick="checkDef(this, 1)">â‘  æƒ³æ‹¿å“ªç­†è³‡æ–™ï¼Œå°±ç›´æ¥è·³å»æ‹¿</button>
            <button class="btn" onclick="checkDef(this, 2)">â‘¡ ä¸€å®šè¦å¾é ­é–‹å§‹æ…¢æ…¢æ‰¾</button>
            <button class="btn" onclick="checkDef(this, 3)">â‘¢ è·Ÿäº‚æ•¸ï¼ˆRandom Numberï¼‰æœ‰é—œ</button>
        </div>

        <div id="quiz-def-feedback" class="feedback">
            <h3 id="def-title"></h3>
            <p id="def-desc"></p>
            <div class="next-btn-container">
                <button class="big-btn" onclick="goToStep(2)">ä¸‹ä¸€æ­¥ï¼šèªè­˜åŸç† âœ</button>
            </div>
        </div>
    </section>

    <!-- STEP 2: Simulation -->
    <section id="step2" class="card">
        <h2>2. åŸç†æ¨¡æ“¬å¯¦é©—å®¤</h2>
        <p>æˆ‘å€‘ä¾†æ¯”è¼ƒå…©ç¨®å­˜å–è³‡æ–™çš„æ–¹å¼ã€‚å‡è¨­æˆ‘å€‘è¦è®€å– <span class="highlight">ç¬¬ 8 è™Ÿè³‡æ–™</span>ã€‚</p>
        
        <div class="sim-container">
            <div class="sim-label">
                <span>ğŸ“¼ ç£å¸¶ (Tape)</span>
                <span style="font-size:0.8rem; color:#666;">å¾ªåºå­˜å– Sequential</span>
            </div>
            <div class="tape-track">
                <div class="read-head"></div>
                <div class="tape-strip" id="tapeStrip">
                    <!-- JS will fill this -->
                </div>
            </div>
            <div style="text-align:center; font-size:0.8rem; color:#888; margin-top:5px;">å¿…é ˆæ²å‹•å¸¶å­ï¼Œç¶“é 1~7 æ‰èƒ½åˆ° 8</div>
        </div>

        <div class="sim-container">
            <div class="sim-label">
                <span>ğŸ’¿ ç¡¬ç¢Ÿ/è¨˜æ†¶é«” (Disk/RAM)</span>
                <span style="font-size:0.8rem; color:#666;">éš¨æ©Ÿå­˜å– Random</span>
            </div>
            <div class="disk-grid" id="diskGrid">
                <!-- JS will fill this -->
            </div>
            <div style="text-align:center; font-size:0.8rem; color:#888; margin-top:5px;">ç›´æ¥å®šä½åº§æ¨™ï¼Œç¬é–“è·³åˆ° 8</div>
        </div>

        <div class="sim-controls" style="justify-content: center;">
            <button class="big-btn" style="background:var(--primary); font-size:0.9rem;" onclick="runSimulation()">â–¶ é–‹å§‹è®€å–ç¬¬ 8 è™Ÿè³‡æ–™</button>
        </div>

        <div id="sim-feedback" class="feedback">
            <p><strong>ç™¼ç¾äº†å—ï¼Ÿ</strong></p>
            <ul>
                <li><strong>å¾ªåºå­˜å– (Sequential)ï¼š</strong>åƒå‚³çµ±éŒ„éŸ³å¸¶ï¼Œæƒ³è½æœ€å¾Œä¸€é¦–è¦å…ˆå¿«è½‰ï¼ˆå€’å¸¶ï¼‰ï¼Œå¾ˆæ…¢ã€‚</li>
                <li><strong>éš¨æ©Ÿå­˜å– (Random)ï¼š</strong>åƒ YouTube å½±ç‰‡é€²åº¦æ¢ï¼Œé»å“ªè£¡å°±æ’­å“ªè£¡ï¼Œä¸ç”¨ç­‰ï¼Œå¾ˆå¿«ï¼</li>
            </ul>
            <div class="next-btn-container">
                <button class="big-btn" onclick="goToStep(3)">ä¸‹ä¸€æ­¥ï¼šåˆ†é¡æŒ‘æˆ° âœ</button>
            </div>
        </div>
    </section>

    <!-- STEP 3: Drag & Drop Game -->
    <section id="step3" class="card">
        <h2>3. è¨­å‚™åˆ†é¡æŒ‘æˆ°</h2>
        <p>è«‹å°‡ä¸‹æ–¹çš„è¨­å‚™æ­¸é¡åˆ°æ­£ç¢ºçš„æ ¼å­ä¸­ã€‚<br><span style="font-size:0.8rem; color:#666;">(é»é¸ä¸‹æ–¹è¨­å‚™ï¼Œå†é»é¸ä¸Šæ–¹å°æ‡‰çš„æ ¼å­)</span></p>

        <div class="game-area">
            <div class="drop-zones">
                <div class="zone" id="zone-random" onclick="handleZoneClick('random')">
                    <h4>ğŸš€ éš¨æ©Ÿå­˜å–<br>(å¯ç›´æ¥è·³èº)</h4>
                    <div class="zone-content"></div>
                </div>
                <div class="zone" id="zone-seq" onclick="handleZoneClick('seq')">
                    <h4>ğŸŒ å¾ªåº/ééš¨æ©Ÿ<br>(è¦ä¾åºå°‹æ‰¾)</h4>
                    <div class="zone-content"></div>
                </div>
            </div>

            <div class="draggables" id="draggable-container">
                <div class="drag-item" onclick="selectItem(this)" data-type="random">ğŸ’¿ å…‰ç¢Ÿæ©Ÿ (CD-ROM)</div>
                <div class="drag-item" onclick="selectItem(this)" data-type="random">ğŸ’¾ ç¡¬ç¢Ÿ (Hard Drive)</div>
                <div class="drag-item" onclick="selectItem(this)" data-type="seq">ğŸ“¼ ç£å¸¶æ©Ÿ (Tape Drive)</div>
                <div class="drag-item" onclick="selectItem(this)" data-type="random">âš¡ ä¸»è¨˜æ†¶é«” (RAM)</div>
            </div>
        </div>
        
        <p id="game-msg" style="text-align:center; color:var(--primary); min-height: 1.5rem;"></p>

        <div id="game-feedback" class="feedback">
            <strong>å…¨å°äº†ï¼ğŸ‰</strong>
            <p>åªæœ‰ã€Œç£å¸¶ã€å› ç‚ºç‰©ç†æ§‹é€ é™åˆ¶ï¼Œå¿…é ˆåƒæ²éºµç·šä¸€æ¨£æ²å‹•ï¼Œç„¡æ³•ç›´æ¥è·³èºã€‚å…¶ä»–ç¾ä»£è¨­å‚™å¹¾ä¹éƒ½æ”¯æ´éš¨æ©Ÿå­˜å–ã€‚</p>
            <div class="next-btn-container">
                <button class="big-btn" onclick="goToStep(4)">ä¸‹ä¸€æ­¥ï¼šå›ç­”é¡Œç›® âœ</button>
            </div>
        </div>
    </section>

    <!-- STEP 4: The Question -->
    <section id="step4" class="card">
        <h2>4. æŒ‘æˆ°åŸé¡Œ</h2>
        <p class="question-text">
            13. ä»¥ä¸‹å“ªä¸€ç¨®è³‡æ–™å„²å­˜è¨­å‚™<strong>ä¸å…·æœ‰</strong>éš¨æ©Ÿå­˜å–ï¼ˆrandom accessï¼‰çš„åŠŸèƒ½ï¼Ÿ
        </p>

        <div id="q13-options">
            <button class="btn" onclick="preCheckAnswer('A')">(A) å…‰ç¢Ÿæ©Ÿï¼ˆCD-ROM driveï¼‰</button>
            <button class="btn" onclick="preCheckAnswer('B')">(B) ç¡¬ç¢Ÿï¼ˆhard driveï¼‰</button>
            <button class="btn" onclick="preCheckAnswer('C')">(C) ç£å¸¶æ©Ÿï¼ˆmagnetic tape driveï¼‰</button>
            <button class="btn" onclick="preCheckAnswer('D')">(D) ä¸»è¨˜æ†¶é«”ï¼ˆmain memoryï¼‰</button>
        </div>

        <div id="q13-final-feedback" class="feedback">
            <!-- Content injected by JS -->
        </div>

        <div id="q13-next-btn" class="next-btn-container" style="display:none">
            <button class="big-btn" onclick="goToStep(5)">çœ‹è©³ç´°è§£æèˆ‡ç¸½çµ âœ</button>
        </div>
    </section>

    <!-- STEP 5: Analysis & Summary -->
    <section id="step5" class="card">
        <h2>5. è§€å¿µç¸½çµèˆ‡è§£æ</h2>
        
        <div class="alert-box">
            <div style="font-size:1.5rem">ğŸ’¡</div>
            <div>
                <strong>ç”Ÿæ´»åŒ–è¨˜æ†¶æ³•</strong><br>
                å£è¨£ï¼šã€Œç£å¸¶è¦å€’å¸¶ï¼Œæ²’æœ‰éš¨æ©Ÿå¿«ï¼›èƒ½ç›´æ¥è·³ä½ï¼Œå°±æ˜¯éš¨æ©Ÿå­˜ï¼ã€<br>
                æƒ³æƒ³ YouTube æ‹‰é€²åº¦æ¢ vs éŒ„éŸ³å¸¶å€’å¸¶ã€‚
            </div>
        </div>

        <h3>é¸é …é€ä¸€åˆ†æ</h3>
        
        <div class="option-analysis">
            <span class="option-tag tag-random">éš¨æ©Ÿå­˜å–</span> <strong>(A) å…‰ç¢Ÿæ©Ÿã€(B) ç¡¬ç¢Ÿ</strong><br>
            å…‰ç¢Ÿçš„é›·å°„é ­å’Œç¡¬ç¢Ÿçš„ç£é ­ï¼Œéƒ½å¯ä»¥åˆ©ç”¨æ©Ÿæ¢°æ‰‹è‡‚ç›´æ¥ç§»å‹•åˆ°æŒ‡å®šçš„ã€Œè»Œé“ã€æˆ–ã€Œç£å€ã€ï¼Œä¸éœ€è¦å¾é ­è®€èµ·ã€‚
        </div>

        <div class="option-analysis" style="border: 2px solid var(--accent); background: #fff5f5;">
            <span class="option-tag tag-seq">æœ¬é¡Œç­”æ¡ˆ / å¾ªåºå­˜å–</span> <strong>(C) ç£å¸¶æ©Ÿ</strong><br>
            è³‡æ–™æ˜¯å¯«åœ¨ä¸€æ¢é•·é•·çš„ç£æ€§å¸¶å­ä¸Šã€‚è¦è®€ä¸­é–“çš„è³‡æ–™ï¼Œå¿…é ˆæŠŠå‰é¢çš„å¸¶å­æ²éå»ã€‚å°±åƒæ²ç­’è¡›ç”Ÿç´™ï¼Œè¦æ‹¿åˆ°ä¸­é–“çš„ç´™ï¼Œä¸€å®šè¦æ‹‰å‡ºå‰é¢çš„éƒ¨åˆ†ã€‚
        </div>

        <div class="option-analysis">
            <span class="option-tag tag-random">éš¨æ©Ÿå­˜å–</span> <strong>(D) ä¸»è¨˜æ†¶é«” (RAM)</strong><br>
            Random Access Memory çš„ç¸®å¯«å°±æ˜¯ RAMã€‚CPU å¯ä»¥é€éåœ°å€ç·šç›´æ¥å­˜å–ä»»ä½•ä¸€å€‹è¨˜æ†¶é«”ä½ç½®ï¼Œé€Ÿåº¦æœ€å¿«ã€‚
        </div>

        <h3>è¿·æ€ç ´è§£ O / X</h3>
        <div class="true-false-item">
            <span>1. å…‰ç¢Ÿä¸€å®šè¦å¾ç¬¬ä¸€è»Œé–‹å§‹æ…¢æ…¢è®€ï¼Ÿ</span>
            <div class="tf-btns">
                <button onclick="checkTF(this, false)">O</button>
                <button onclick="checkTF(this, true)">X</button>
            </div>
        </div>
        <div class="true-false-item">
            <span>2. RAM çš„ R ä»£è¡¨ Randomï¼Œæ‰€ä»¥æ˜¯éš¨æ©Ÿå­˜å–ï¼Ÿ</span>
            <div class="tf-btns">
                <button onclick="checkTF(this, true)">O</button>
                <button onclick="checkTF(this, false)">X</button>
            </div>
        </div>
        <div class="true-false-item">
            <span>3. ç£å¸¶å¯ä»¥ç›´æ¥è·³åˆ°ä¸­é–“è®€è³‡æ–™ï¼Ÿ</span>
            <div class="tf-btns">
                <button onclick="checkTF(this, false)">O</button>
                <button onclick="checkTF(this, true)">X</button>
            </div>
        </div>

        <details>
            <summary>ğŸ‘¨â€ğŸ« æ•™å¸«å‚™è¨» (Teacher's Note)</summary>
            <ul>
                <li><strong>é‡é»æé†’ï¼š</strong>å­¸ç”Ÿå¸¸å°‡ã€Œéš¨æ©Ÿ (Random)ã€èª¤è§£ç‚ºã€Œäº‚æ•¸ã€ï¼Œéœ€å¼·èª¿åœ¨é›»è…¦ç§‘å­¸ä¸­ï¼Œé€™è£¡æ˜¯æŒ‡ã€Œä»»æ„æŒ‡å®šä½ç½® (Arbitrary)ã€ã€‚</li>
                <li><strong>å»¶ä¼¸æ€è€ƒï¼š</strong>ç‚ºä»€éº¼ç£å¸¶é€™éº¼æ…¢é‚„æœ‰äººç”¨ï¼Ÿ(ç­”æ¡ˆï¼šå®¹é‡è¶…å¤§ã€æˆæœ¬ä½ã€é©åˆåšé•·æœŸå†·å‚™ä»½)ã€‚</li>
                <li><strong>SSD æ¯”è¼ƒï¼š</strong>SSD é›–ç„¶æ²’æœ‰è®€å¯«é ­ï¼Œä½†ä¹Ÿæ˜¯éš¨æ©Ÿå­˜å–ï¼Œä¸”é€Ÿåº¦æ¯” HDD æ›´å¿«ã€‚</li>
            </ul>
        </details>

        <div class="next-btn-container" style="margin-top: 30px;">
            <button class="big-btn" style="background: var(--success);" onclick="location.reload()">â†º é‡ç©ä¸€æ¬¡</button>
        </div>
    </section>

</main>

<!-- Modal for Reason Selection -->
<div id="reasonModal" class="modal-overlay">
    <div class="modal-content">
        <h3>ä½ ç‚ºä»€éº¼é¸é€™å€‹ç­”æ¡ˆï¼Ÿ</h3>
        <button class="btn" onclick="confirmReason('knowledge')">ä»¥å‰æœ‰è®€é/è½é</button>
        <button class="btn" onclick="confirmReason('feeling')">æ„Ÿè¦ºå®ƒæœ€å¤è€/è¦å€’å¸¶</button>
        <button class="btn" onclick="confirmReason('guess')">å–®ç´”çŒœçš„</button>
    </div>
</div>

<script>
    // --- Global State ---
    let currentStep = 1;
    let selectedAnswer = '';
    
    // --- Navigation Logic ---
    function goToStep(step) {
        // Hide all cards
        document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
        // Show target card
        document.getElementById(`step${step}`).classList.add('active');
        // Update dots
        document.querySelectorAll('.step-dot').forEach(d => {
            const s = parseInt(d.dataset.step);
            d.classList.toggle('active', s <= step);
        });
        
        currentStep = step;
        window.scrollTo(0, 0);

        // Init simulations if entering step 2
        if(step === 2) initSimulation();
    }

    // --- Step 1: Definition Quiz ---
    function checkDef(btn, option) {
        const title = document.getElementById('def-title');
        const desc = document.getElementById('def-desc');
        const feedback = document.getElementById('quiz-def-feedback');
        
        // Reset buttons style
        const btns = document.getElementById('quiz-def-options').querySelectorAll('.btn');
        btns.forEach(b => b.classList.remove('selected', 'correct', 'wrong'));

        if (option === 1) {
            btn.classList.add('correct');
            title.innerHTML = "âœ… æ­£ç¢ºï¼è§€å¿µå¾ˆå¥½å–”ï¼";
            title.style.color = "var(--success)";
            desc.innerHTML = "<strong>éš¨æ©Ÿå­˜å– (Random Access)</strong> çš„æ„æ€å°±æ˜¯ï¼šã€Œä¸éœ€è¦æŒ‰ç…§é †åºï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ä»»ä½•æŒ‡å®šä½ç½®è®€å–è³‡æ–™ã€ã€‚<br>å°±åƒçœ‹æ›¸å¯ä»¥ç›´æ¥ç¿»åˆ°ç¬¬ 50 é ï¼Œä¸ç”¨å¾ç¬¬ 1 é æ…¢æ…¢ç¿»ã€‚";
        } else if (option === 2) {
            btn.classList.add('wrong');
            title.innerHTML = "âŒ é€™æ˜¯ã€Œå¾ªåºå­˜å–ã€å–”ï¼";
            title.style.color = "var(--accent)";
            desc.innerHTML = "ä¸€å®šè¦å¾é ­é–‹å§‹æ‰¾ï¼Œé‚£å€‹å«åš<strong>å¾ªåºå­˜å– (Sequential Access)</strong>ã€‚<br>éš¨æ©Ÿå­˜å–æ˜¯å¯ä»¥ã€Œç›´æ¥è·³ã€éå»çš„å–”ï¼";
        } else {
            btn.classList.add('wrong');
            title.innerHTML = "âŒ é€™æ˜¯å¸¸è¦‹èª¤è§£ï¼";
            title.style.color = "var(--accent)";
            desc.innerHTML = "é€™è£¡çš„ Random ä¸æ˜¯æŒ‡ã€Œäº‚æ•¸/éš¨ä¾¿ã€ï¼Œè€Œæ˜¯æŒ‡ã€Œä»»æ„ (Arbitrary)ã€ã€‚<br>æ„æ€æ˜¯ä½ å¯ä»¥ä»»æ„æŒ‡å®šä¸€å€‹ä½ç½®å»è®€å–ã€‚";
        }
        
        feedback.style.display = 'block';
    }

    // --- Step 2: Simulation Logic ---
    function initSimulation() {
        const tapeStrip = document.getElementById('tapeStrip');
        const diskGrid = document.getElementById('diskGrid');
        
        // Create Tape Elements (1-10)
        let tapeHtml = '';
        for(let i=1; i<=10; i++) {
            tapeHtml += `<div class="data-block" id="tape-${i}">${i}</div>`;
        }
        tapeStrip.innerHTML = tapeHtml;
        tapeStrip.style.left = "calc(50% - 20px)"; // Reset position (center on 1)

        // Create Disk Elements (1-10)
        let diskHtml = '';
        for(let i=1; i<=10; i++) {
            diskHtml += `<div class="disk-cell" id="disk-${i}">${i}</div>`;
        }
        diskGrid.innerHTML = diskHtml;
    }

    function runSimulation() {
        const target = 8;
        const tapeStrip = document.getElementById('tapeStrip');
        const feedback = document.getElementById('sim-feedback');
        
        // Reset
        document.querySelectorAll('.disk-cell').forEach(c => c.classList.remove('active'));
        tapeStrip.style.transition = 'none';
        tapeStrip.style.left = "calc(50% - 20px)"; // Center on 1 (block width 40, half is 20)
        
        // --- 1. Tape Simulation (Sequential) ---
        // Each block is 44px wide (40 + 2margin*2). To move to 8, we shift left.
        // Distance from 1 to 8 is 7 blocks. 7 * 44 = 308px.
        setTimeout(() => {
            tapeStrip.style.transition = 'left 2.5s linear';
            // Start at center (50%), offset by half block (20px) minus (index-1)*width
            const blockWidth = 44;
            const targetPos = `calc(50% - 20px - ${(target-1) * blockWidth}px)`;
            tapeStrip.style.left = targetPos;
        }, 100);

        // --- 2. Disk Simulation (Random) ---
        setTimeout(() => {
            document.getElementById(`disk-${target}`).classList.add('active');
        }, 500); // Very fast, simulating instant access

        // Show feedback after animation
        setTimeout(() => {
            feedback.style.display = 'block';
            feedback.scrollIntoView({behavior: "smooth"});
        }, 2600);
    }

    // --- Step 3: Drag & Drop Logic (Click based for mobile) ---
    let selectedDragItem = null;

    function selectItem(el) {
        // If clicked inside a zone, ignore selection logic (already placed)
        if (el.parentElement.classList.contains('zone-content')) return;

        // Deselect others
        document.querySelectorAll('.drag-item').forEach(i => i.classList.remove('selected'));
        
        selectedDragItem = el;
        el.classList.add('selected');
        document.getElementById('game-msg').innerText = "å·²é¸å–ï¼š" + el.innerText.split(' ')[1] + "ã€‚è«‹é»é¸ä¸Šæ–¹çš„åˆ†é¡æ ¼å­ã€‚";
    }

    function handleZoneClick(zoneType) {
        if (!selectedDragItem) {
            document.getElementById('game-msg').innerText = "è«‹å…ˆé»é¸ä¸‹æ–¹çš„ä¸€å€‹è¨­å‚™ ğŸ‘‡";
            return;
        }

        const itemType = selectedDragItem.dataset.type;
        const msg = document.getElementById('game-msg');

        if (itemType === zoneType) {
            // Correct
            const zone = document.getElementById(zoneType === 'random' ? 'zone-random' : 'zone-seq');
            // Remove selected class
            selectedDragItem.classList.remove('selected');
            // Move to zone
            zone.querySelector('.zone-content').appendChild(selectedDragItem);
            
            // Visual success
            selectedDragItem.style.background = "#d4edda";
            selectedDragItem.style.borderColor = "var(--success)";
            msg.innerText = "ç­”å°äº†ï¼ğŸ‘";
            msg.style.color = "var(--success)";
            
            selectedDragItem = null;
            checkGameComplete();
        } else {
            // Wrong
            msg.innerText = "âŒ ä¸å°å–”ï¼å†æƒ³ä¸€ä¸‹åŸç†ï¼ˆéœ€ä¸éœ€è¦æ²å‹•/å€’å¸¶ï¼Ÿï¼‰";
            msg.style.color = "var(--accent)";
            
            // Shake animation
            selectedDragItem.style.transform = "translateX(10px)";
            setTimeout(() => selectedDragItem.style.transform = "translateX(-10px)", 100);
            setTimeout(() => selectedDragItem.style.transform = "scale(1.05)", 200);
        }
    }

    function checkGameComplete() {
        const container = document.getElementById('draggable-container');
        if (container.children.length === 0) {
            document.getElementById('game-feedback').style.display = 'block';
            document.getElementById('game-msg').innerText = "";
        }
    }

    // --- Step 4: Question Logic ---
    function preCheckAnswer(option) {
        selectedAnswer = option;
        document.getElementById('reasonModal').style.display = 'flex';
    }

    function confirmReason(reason) {
        document.getElementById('reasonModal').style.display = 'none';
        checkFinalAnswer(selectedAnswer, reason);
    }

    function checkFinalAnswer(answer, reason) {
        const feedback = document.getElementById('q13-final-feedback');
        const nextBtn = document.getElementById('q13-next-btn');
        let htmlContent = "";

        // Disable all buttons
        const btns = document.getElementById('q13-options').querySelectorAll('.btn');
        btns.forEach(b => {
            b.disabled = true;
            if(b.innerText.startsWith(`(${answer})`)) {
                if(answer === 'C') b.classList.add('correct');
                else b.classList.add('wrong');
            }
        });

        if (answer === 'C') {
            htmlContent += `<h3 style="color:var(--success)">ğŸ‰ ç­”å°äº†ï¼</h3>`;
            if (reason === 'guess') htmlContent += `<p>é‹æ°£ä¸éŒ¯ï¼ä½†è¦è¨˜å¾—åŸç†å–”ã€‚</p>`;
            else if (reason === 'feeling') htmlContent += `<p>ä½ çš„ç›´è¦ºå¾ˆæº–ï¼ç£å¸¶ç¢ºå¯¦å› ç‚ºè¦ã€Œæ²å‹•ã€æ‰€ä»¥æœ€æ…¢ã€‚</p>`;
            htmlContent += `<p><strong>ç£å¸¶æ©Ÿ (Magnetic Tape)</strong> æ˜¯å”¯ä¸€å¿…é ˆä½¿ç”¨ã€Œå¾ªåºå­˜å–ã€çš„è¨­å‚™ã€‚<br>å…‰ç¢Ÿã€ç¡¬ç¢Ÿã€è¨˜æ†¶é«”éƒ½èƒ½ã€Œéš¨æ©Ÿå­˜å–ã€ã€‚</p>`;
        } else {
            htmlContent += `<h3 style="color:var(--accent)">âŒ ç­”éŒ¯å›‰ï¼</h3>`;
            htmlContent += `<p>é¸é … (${answer}) æ˜¯å¯ä»¥éš¨æ©Ÿå­˜å–çš„å–”ï¼</p>`;
            htmlContent += `<p><strong>æç¤ºï¼š</strong>å“ªä¸€å€‹è¨­å‚™åœ¨è®€å–è³‡æ–™æ™‚ï¼Œå¦‚æœä¸æŒ‰é †åºè®€ï¼Œå°±å¿…é ˆèŠ±æ™‚é–“ã€Œå¿«è½‰ã€æˆ–ã€Œå€’å¸¶ã€ï¼Ÿ</p>`;
        }

        feedback.innerHTML = htmlContent;
        feedback.style.display = 'block';
        nextBtn.style.display = 'block';
    }

    // --- Step 5: True/False Logic ---
    function checkTF(btn, isCorrect) {
        const parent = btn.parentElement;
        // Disable buttons in this group
        parent.querySelectorAll('button').forEach(b => b.disabled = true);
        
        if (isCorrect) {
            btn.style.background = "var(--success)";
            btn.style.color = "white";
        } else {
            btn.style.background = "var(--accent)";
            btn.style.color = "white";
        }
    }

</script>
</body>
</html>