<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•æ•™å­¸ï¼šäºŒå…ƒæœå°‹æ¨¹çš„æ’åºè¦å‰‡</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            line-height: 1.6;
            background-color: var(--bg-color);
            color: var(--primary-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .file-name-hint {
            font-size: 0.8em;
            color: #7f8c8d;
            text-align: center;
            margin-bottom: 20px;
            font-family: monospace;
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e1e8ed;
        }

        h1, h2, h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        h1 {
            text-align: center;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .highlight {
            color: var(--error-color);
            font-weight: bold;
        }

        .correct-text {
            color: var(--success-color);
            font-weight: bold;
        }

        /* Section 2: Intro */
        .analogy-box {
            background-color: #e8f4f8;
            border-left: 5px solid var(--accent-color);
            padding: 15px;
            margin: 15px 0;
        }

        .definition-box {
            background-color: #fff8e1;
            border: 1px solid #ffe0b2;
            padding: 15px;
            border-radius: 8px;
        }

        /* Section 3: Quiz */
        .question-box {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .options label {
            display: block;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1em;
        }

        .options label:hover {
            background: #e9ecef;
            border-color: var(--accent-color);
        }

        .options input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .btn-group {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background 0.2s;
        }

        .btn-submit { background-color: var(--accent-color); color: white; }
        .btn-submit:hover { background-color: #2980b9; }

        .btn-hint { background-color: #f39c12; color: white; }
        .btn-hint:hover { background-color: #d35400; }

        .btn-retry { background-color: #95a5a6; color: white; display: none; }
        .btn-retry:hover { background-color: #7f8c8d; }

        .hint-area {
            margin-top: 15px;
            padding: 10px;
            background-color: #fff3cd;
            color: #856404;
            border-radius: 6px;
            display: none;
        }

        /* Section 4: Result */
        .result-area {
            display: none;
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
        }
        .result-correct { background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .result-wrong { background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }

        /* Section 5: Visualization */
        .viz-controls {
            margin-bottom: 15px;
            text-align: center;
        }
        
        .rule-display {
            font-size: 1.2em;
            font-weight: bold;
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
            background: #eee;
            display: inline-block;
        }

        #tree-svg {
            width: 100%;
            height: 350px;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 8px;
            user-select: none;
        }

        .node-circle {
            fill: white;
            stroke: var(--primary-color);
            stroke-width: 2px;
            cursor: pointer;
            transition: fill 0.3s;
        }
        
        .node-circle:hover {
            fill: #e3f2fd;
            stroke: var(--accent-color);
        }

        .node-text {
            font-size: 14px;
            font-weight: bold;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
        }

        .link {
            stroke: #bdc3c7;
            stroke-width: 2px;
        }

        .node-info-panel {
            margin-top: 10px;
            padding: 15px;
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 6px;
            min-height: 80px;
        }

        /* Section 6: Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: var(--primary-color);
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        /* Section 7: Accordion */
        .accordion {
            background-color: #eee;
            color: #444;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1em;
            transition: 0.4s;
            border-radius: 6px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .active, .accordion:hover {
            background-color: #ccc; 
        }

        .panel {
            padding: 0 18px;
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            border-radius: 0 0 6px 6px;
        }

        /* Section 8: Quick Q&A */
        .qa-item {
            margin-bottom: 10px;
        }
        .qa-question {
            cursor: pointer;
            color: var(--accent-color);
            text-decoration: underline;
            font-weight: bold;
        }
        .qa-answer {
            display: none;
            margin-top: 5px;
            padding: 10px;
            background: #f1f1f1;
            border-left: 4px solid var(--success-color);
        }

        @media (max-width: 600px) {
            .btn-group { flex-direction: column; }
            h1 { font-size: 1.5em; }
        }
    </style>
</head>
<body>

    <div class="file-name-hint">æª”åå»ºè­°ï¼šbst_left_right_rule_true_false_q10.html</div>

    <div class="container">
        <!-- Header -->
        <h1>äºŒå…ƒæœå°‹æ¨¹ (BST) æ’åºè¦å‰‡å¤§ç ´è§£</h1>

        <!-- Section 2: Teaching Intro -->
        <div class="card">
            <h2>ğŸ“š è§€å¿µå°å…¥ï¼šå¤§å®¶ä¾†æ’éšŠ</h2>
            <div class="analogy-box">
                <p>æƒ³åƒé«”è‚²èª²æ’éšŠï¼Œè€å¸«æŒ‡å®šäº†ä¸€ä½åŒå­¸ç•¶ã€Œç­é•·ï¼ˆæ ¹ç¯€é»ï¼‰ã€ç«™åœ¨ä¸­é–“ï¼š</p>
                <ul>
                    <li>æ¯”ç­é•·<strong>çŸ®ï¼ˆå°ï¼‰</strong>çš„åŒå­¸ï¼Œè«‹é€šé€šç«™åˆ°ç­é•·çš„<strong>å·¦é‚Š</strong>ã€‚</li>
                    <li>æ¯”ç­é•·<strong>é«˜ï¼ˆå¤§ï¼‰</strong>çš„åŒå­¸ï¼Œè«‹é€šé€šç«™åˆ°ç­é•·çš„<strong>å³é‚Š</strong>ã€‚</li>
                </ul>
                <p>é€™å°±æ˜¯äºŒå…ƒæœå°‹æ¨¹çš„ç”Ÿæ´»åŒ–è¦å‰‡ï¼š<strong>ã€Œå°çš„å¾€å·¦ç«™ï¼Œå¤§çš„å¾€å³ç«™ã€</strong>ã€‚</p>
            </div>
            
            <div class="definition-box">
                <h3>ğŸ“ è€ƒè©¦ç­‰ç´šå®šç¾© (BST Property)</h3>
                <p>åœ¨äºŒå…ƒæœå°‹æ¨¹ä¸­ï¼Œå°ä»»ä½•ä¸€å€‹ç¯€é»ï¼ˆNodeï¼‰è€Œè¨€ï¼š</p>
                <ul>
                    <li><strong>å·¦å­æ¨¹ (Left Subtree)</strong> çš„æ‰€æœ‰éµå€¼ï¼Œä¸€å®š <strong>å°æ–¼ (<)</strong> è©²ç¯€é»çš„éµå€¼ã€‚</li>
                    <li><strong>å³å­æ¨¹ (Right Subtree)</strong> çš„æ‰€æœ‰éµå€¼ï¼Œä¸€å®š <strong>å¤§æ–¼ (>)</strong> è©²ç¯€é»çš„éµå€¼ã€‚</li>
                </ul>
                <p style="text-align: center; font-weight: bold; color: var(--primary-color);">
                    çµè«–ï¼šå·¦ < æ ¹ < å³
                </p>
            </div>
        </div>

        <!-- Section 3: Quiz -->
        <div class="card" id="quiz-section">
            <h2>ğŸ“ è§€å¿µæŒ‘æˆ°é¡Œ</h2>
            <p class="question-box">10. åœ¨äºŒå…ƒæœå°‹æ¨¹ï¼ˆBinary Search Tree, BSTï¼‰ä¸­ï¼Œå·¦å­æ¨¹çš„æ‰€æœ‰éµå€¼ä¸€å®šéƒ½æ¯”å³å­æ¨¹çš„æ‰€æœ‰éµå€¼å¤§ã€‚</p>
            
            <div class="options">
                <label>
                    <input type="radio" name="bst_q10" value="A"> (A) O (æ­£ç¢º)
                </label>
                <label>
                    <input type="radio" name="bst_q10" value="B"> (B) X (éŒ¯èª¤)
                </label>
            </div>

            <div class="hint-area" id="hint-box"></div>

            <div class="btn-group">
                <button class="btn-submit" onclick="checkAnswer()">é€å‡ºç­”æ¡ˆ</button>
                <button class="btn-hint" onclick="showHint()">ğŸ’¡ çœ‹æç¤º (<span id="hint-count">0</span>/3)</button>
                <button class="btn-retry" onclick="resetQuiz()">ğŸ”„ é‡ä½œä¸€æ¬¡</button>
            </div>

            <!-- Section 4: Result Analysis -->
            <div id="result-box" class="result-area">
                <h3 id="result-title"></h3>
                <div id="result-content"></div>
            </div>
        </div>

        <!-- Section 5: Interactive Visualization -->
        <div class="card">
            <h2>ğŸŒ² äº’å‹•å¯¦é©—å®¤ï¼šè¦ªè‡ªæª¢æŸ¥è¦å‰‡</h2>
            <p>é»æ“Šä¸‹æ–¹çš„åœ“åœˆç¯€é»ï¼Œçœ‹çœ‹å®ƒçš„å·¦é‚Šèˆ‡å³é‚Šæ˜¯å¦ç¬¦åˆè¦å‰‡ã€‚</p>
            
            <div class="viz-controls">
                <button onclick="toggleRuleDisplay()">åˆ‡æ›é¡¯ç¤ºè¦å‰‡</button>
                <div id="rule-text" class="rule-display" style="color: var(--success-color);">ç›®å‰è¦å‰‡ï¼šæ­£ç¢ºï¼ˆå·¦å°å³å¤§ï¼‰</div>
            </div>

            <div style="position: relative;">
                <svg id="tree-svg" viewBox="0 0 600 300">
                    <!-- Lines (Edges) -->
                    <!-- Root to L/R -->
                    <line x1="300" y1="40" x2="150" y2="100" class="link" />
                    <line x1="300" y1="40" x2="450" y2="100" class="link" />
                    <!-- L to LL/LR -->
                    <line x1="150" y1="100" x2="75" y2="160" class="link" />
                    <line x1="150" y1="100" x2="225" y2="160" class="link" />
                    <!-- R to RL/RR -->
                    <line x1="450" y1="100" x2="375" y2="160" class="link" />
                    <line x1="450" y1="100" x2="525" y2="160" class="link" />

                    <!-- Nodes -->
                    <!-- Root -->
                    <g onclick="inspectNode(10)" class="node-group">
                        <circle cx="300" cy="40" r="20" class="node-circle" id="node-10" />
                        <text x="300" y="40" class="node-text">10</text>
                    </g>
                    <!-- Left Child -->
                    <g onclick="inspectNode(5)" class="node-group">
                        <circle cx="150" cy="100" r="20" class="node-circle" id="node-5" />
                        <text x="150" y="100" class="node-text">5</text>
                    </g>
                    <!-- Right Child -->
                    <g onclick="inspectNode(15)" class="node-group">
                        <circle cx="450" cy="100" r="20" class="node-circle" id="node-15" />
                        <text x="450" y="100" class="node-text">15</text>
                    </g>
                    <!-- LL -->
                    <g onclick="inspectNode(2)" class="node-group">
                        <circle cx="75" cy="160" r="20" class="node-circle" id="node-2" />
                        <text x="75" y="160" class="node-text">2</text>
                    </g>
                    <!-- LR -->
                    <g onclick="inspectNode(7)" class="node-group">
                        <circle cx="225" cy="160" r="20" class="node-circle" id="node-7" />
                        <text x="225" y="160" class="node-text">7</text>
                    </g>
                    <!-- RL -->
                    <g onclick="inspectNode(12)" class="node-group">
                        <circle cx="375" cy="160" r="20" class="node-circle" id="node-12" />
                        <text x="375" y="160" class="node-text">12</text>
                    </g>
                    <!-- RR -->
                    <g onclick="inspectNode(18)" class="node-group">
                        <circle cx="525" cy="160" r="20" class="node-circle" id="node-18" />
                        <text x="525" y="160" class="node-text">18</text>
                    </g>
                </svg>
            </div>

            <div id="node-info" class="node-info-panel">
                <strong>ç‹€æ…‹é¢æ¿ï¼š</strong> è«‹é»æ“Šä¸Šæ–¹çš„åœ“åœˆç¯€é»é€²è¡Œé©—è­‰ã€‚
            </div>
        </div>

        <!-- Section 6: Summary Table -->
        <div class="card">
            <h2>ğŸ“Š BST è¦å‰‡ç¸½æ•´ç†</h2>
            <table>
                <thead>
                    <tr>
                        <th>ä½ç½®</th>
                        <th>BST è¦å‰‡</th>
                        <th>é—œä¿‚</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>å·¦å­æ¨¹ (Left Subtree)</td>
                        <td>å…¨éƒ¨éµå€¼ <strong>&lt;</strong> æ ¹ç¯€é»</td>
                        <td>å°çš„åœ¨å·¦é‚Š</td>
                    </tr>
                    <tr>
                        <td>æ ¹ç¯€é» (Root)</td>
                        <td>åŸºæº–é»</td>
                        <td>ä¸­é–“</td>
                    </tr>
                    <tr>
                        <td>å³å­æ¨¹ (Right Subtree)</td>
                        <td>å…¨éƒ¨éµå€¼ <strong>&gt;</strong> æ ¹ç¯€é»</td>
                        <td>å¤§çš„åœ¨å³é‚Š</td>
                    </tr>
                </tbody>
            </table>
            <p style="text-align: center; margin-top: 15px; font-weight: bold;">ç¸½çµï¼šã€Œå·¦å°å³å¤§ï¼ˆLeft smaller, Right largerï¼‰ã€‚ã€</p>
        </div>

        <!-- Section 7: Memory Trick -->
        <div class="card">
            <button class="accordion">ğŸ§  è€ƒå‰ 5 ç§’å£è¨£ (é»æ“Šå±•é–‹)</button>
            <div class="panel">
                <br>
                <h3>å£è¨£ï¼š</h3>
                <p style="font-size: 1.2em; color: var(--accent-color); font-weight: bold;">
                    ã€Œå·¦é‚Šå°ï¼Œå³é‚Šå¤§ï¼›æ‰¾è³‡æ–™ï¼Œè·‘å¾—å¿«ã€
                </p>
                <hr>
                <h3>âš ï¸ è€ƒè©¦é™·é˜±æé†’ï¼š</h3>
                <p>é¡Œç›®éå¸¸å–œæ­¡æ•…æ„æŠŠã€Œå·¦å°å³å¤§ã€å¯«æˆã€Œå·¦å¤§å³å°ã€ä¾†é¨™äººï¼ˆå°±åƒæœ¬é¡Œä¸€æ¨£ï¼‰ï¼Œçœ‹åˆ°ã€Œå·¦å¤§ã€å…©å€‹å­—é€£åœ¨ä¸€èµ·ï¼Œè­¦éˆ´å°±è¦éŸ¿èµ·ä¾†ï¼</p>
                <br>
            </div>
        </div>

        <!-- Section 8: Quick Q&A -->
        <div class="card">
            <h2>âš¡ å»¶ä¼¸å¿«å•å¿«ç­”</h2>
            
            <div class="qa-item">
                <div class="qa-question" onclick="toggleQA(this)">Q1ï¼šBST çš„ä¸­åºèµ°è¨ªï¼ˆIn-order traversalï¼‰è¼¸å‡ºæœƒæ˜¯ä»€éº¼é †åºï¼Ÿ(é»æ“Šçœ‹ç­”æ¡ˆ)</div>
                <div class="qa-answer">
                    <strong>ç­”æ¡ˆï¼šç”±å°åˆ°å¤§æ’åºã€‚</strong><br>
                    è§£æï¼šå› ç‚ºä¸­åºèµ°è¨ªé †åºæ˜¯ã€Œå·¦ -> æ ¹ -> å³ã€ï¼Œå‰›å¥½ç¬¦åˆ BST ã€Œå° -> ä¸­ -> å¤§ã€çš„ç‰¹æ€§ã€‚
                </div>
            </div>

            <div class="qa-item">
                <div class="qa-question" onclick="toggleQA(this)">Q2ï¼šBST æœå°‹å¹³å‡æ™‚é–“è¤‡é›œåº¦ç´„æ˜¯å¤šå°‘ï¼Ÿ(é»æ“Šçœ‹ç­”æ¡ˆ)</div>
                <div class="qa-answer">
                    <strong>ç­”æ¡ˆï¼šO(log n)ã€‚</strong><br>
                    è§£æï¼šæ¯æ¬¡æ¯”è¼ƒéƒ½èƒ½æ’é™¤æ‰ä¸€åŠçš„è³‡æ–™ï¼ˆå¾€å·¦æˆ–å¾€å³ï¼‰ã€‚ä½†åœ¨æœ€å·®æƒ…æ³ï¼ˆè®Šæˆä¸€ç›´ç·šï¼‰æ™‚æœƒé€€åŒ–æˆ O(n)ã€‚
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. Quiz Logic ---
        let currentHint = 0;
        const hints = [
            "BST çš„å£è¨£æ˜¯ï¼šå·¦å°å³å¤§ï¼ˆLeft smaller, Right largerï¼‰ã€‚",
            "é¡Œç›®èªªã€å·¦æ¯”å³å¤§ã€ï¼Œæ˜¯ä¸æ˜¯æŠŠè¦å‰‡åéä¾†äº†ï¼Ÿ",
            "BST æ­£ç¢ºè¦å‰‡ï¼šå·¦ < æ ¹ < å³ã€‚"
        ];

        function showHint() {
            if (currentHint < hints.length) {
                const hintBox = document.getElementById('hint-box');
                hintBox.style.display = 'block';
                // Add new hint
                const p = document.createElement('p');
                p.textContent = `æç¤º ${currentHint + 1}ï¼š${hints[currentHint]}`;
                hintBox.appendChild(p);
                
                currentHint++;
                document.getElementById('hint-count').textContent = currentHint;
            } else {
                alert("å·²é¡¯ç¤ºæ‰€æœ‰æç¤ºï¼");
            }
        }

        function checkAnswer() {
            const options = document.getElementsByName('bst_q10');
            let selectedValue = null;
            for (const option of options) {
                if (option.checked) {
                    selectedValue = option.value;
                    break;
                }
            }

            if (!selectedValue) {
                alert("è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆ (A) æˆ– (B)ï¼");
                return;
            }

            const resultBox = document.getElementById('result-box');
            const resultTitle = document.getElementById('result-title');
            const resultContent = document.getElementById('result-content');
            const btnSubmit = document.querySelector('.btn-submit');
            const btnRetry = document.querySelector('.btn-retry');

            resultBox.style.display = 'block';
            
            if (selectedValue === 'B') {
                // Correct
                resultBox.className = 'result-area result-correct';
                resultTitle.textContent = 'ğŸ‰ åˆ¤æ–·æ­£ç¢ºï¼';
                resultContent.innerHTML = `
                    <h4>é‡é»è§£æï¼š</h4>
                    <ul>
                        <li>æœ¬é¡Œæ­£ç¢ºç­”æ¡ˆæ˜¯ <strong>X</strong>ã€‚</li>
                        <li>é¡Œå¹¹éŒ¯åœ¨èªªã€Œå·¦å­æ¨¹æ¯”å³å­æ¨¹å¤§ã€ã€‚</li>
                        <li><strong>æ­£ç¢ºæ‡‰æ˜¯ï¼š</strong>
                            <ul>
                                <li>å·¦å­æ¨¹éµå€¼ < æ ¹ç¯€é»éµå€¼</li>
                                <li>å³å­æ¨¹éµå€¼ > æ ¹ç¯€é»éµå€¼</li>
                            </ul>
                        </li>
                        <li>æ‰€ä»¥æ•´é«”é—œä¿‚å¯å¯«æˆï¼š<span class="correct-text">å·¦ < æ ¹ < å³</span></li>
                    </ul>
                    <p>âš ï¸ <strong>å¸¸è¦‹é™·é˜±ï¼š</strong>æŠŠã€Œå·¦å°å³å¤§ã€è¨˜åï¼Œæ˜¯ BST è€ƒè©¦æœ€å¸¸è¦‹çš„éŒ¯èª¤ä¹‹ä¸€ã€‚</p>
                `;
            } else {
                // Wrong
                resultBox.className = 'result-area result-wrong';
                resultTitle.textContent = 'âŒ åˆ¤æ–·éŒ¯èª¤';
                resultContent.innerHTML = `
                    <p>æ‚¨é¸æ“‡äº† O (æ­£ç¢º)ï¼Œä½†é€™é¡Œçš„æ•˜è¿°å…¶å¯¦æ˜¯<strong>éŒ¯èª¤</strong>çš„ã€‚</p>
                    <p>é¡Œç›®èªªã€Œå·¦å­æ¨¹æ¯”å³å­æ¨¹å¤§ã€ï¼Œé€™é•èƒŒäº†äºŒå…ƒæœå°‹æ¨¹çš„åŸºæœ¬å®šç¾©ã€‚</p>
                    <p>è«‹è¨˜å¾—å£è¨£ï¼š<strong>ã€Œå°çš„å¾€å·¦ï¼Œå¤§çš„å¾€å³ã€</strong>ã€‚</p>
                    <p>è«‹å†è©¦ä¸€æ¬¡ï¼</p>
                `;
            }

            btnSubmit.style.display = 'none';
            btnRetry.style.display = 'inline-block';
        }

        function resetQuiz() {
            // Reset logic
            const options = document.getElementsByName('bst_q10');
            for (const option of options) option.checked = false;
            
            document.getElementById('result-box').style.display = 'none';
            document.getElementById('hint-box').innerHTML = '';
            document.getElementById('hint-box').style.display = 'none';
            document.querySelector('.btn-submit').style.display = 'inline-block';
            document.querySelector('.btn-retry').style.display = 'none';
            currentHint = 0;
            document.getElementById('hint-count').textContent = '0';
        }

        // --- 2. Visualization Logic ---
        // Tree Data: Root: 10, L: 5, R: 15, LL: 2, LR: 7, RL: 12, RR: 18
        const nodeData = {
            10: { val: 10, leftMax: 7, rightMin: 12 },
            5:  { val: 5,  leftMax: 2, rightMin: 7 },
            15: { val: 15, leftMax: 12, rightMin: 18 },
            2:  { val: 2,  leftMax: null, rightMin: null }, // Leaf
            7:  { val: 7,  leftMax: null, rightMin: null }, // Leaf
            12: { val: 12, leftMax: null, rightMin: null }, // Leaf
            18: { val: 18, leftMax: null, rightMin: null }  // Leaf
        };

        let isCorrectRuleMode = true; // true = Left Small, Right Big

        function toggleRuleDisplay() {
            isCorrectRuleMode = !isCorrectRuleMode;
            const ruleText = document.getElementById('rule-text');
            const panel = document.getElementById('node-info');
            
            if (isCorrectRuleMode) {
                ruleText.textContent = "ç›®å‰è¦å‰‡ï¼šæ­£ç¢ºï¼ˆå·¦å°å³å¤§ï¼‰";
                ruleText.style.color = "var(--success-color)";
            } else {
                ruleText.textContent = "ç›®å‰è¦å‰‡ï¼šéŒ¯èª¤ï¼ˆå·¦å¤§å³å°ï¼‰";
                ruleText.style.color = "var(--error-color)";
            }
            // Reset panel
            panel.innerHTML = "<strong>ç‹€æ…‹é¢æ¿ï¼š</strong> è¦å‰‡å·²åˆ‡æ›ï¼Œè«‹é»æ“Šç¯€é»é‡æ–°é©—è­‰ã€‚";
        }

        function inspectNode(id) {
            const data = nodeData[id];
            const panel = document.getElementById('node-info');
            
            let html = `<strong>ç›®å‰é¸ä¸­ç¯€é»ï¼š<span style="font-size:1.2em; color:blue;">${data.val}</span></strong><br>`;
            
            if (data.leftMax === null && data.rightMin === null) {
                html += `æ­¤ç‚ºè‘‰ç¯€é» (Leaf Node)ï¼Œç„¡å­æ¨¹å¯æ¯”è¼ƒã€‚<br>`;
                html += `<span style="color:green;">âœ” ç¬¦åˆå®šç¾© (ç„¡é•å)</span>`;
            } else {
                // Determine text based on subtree existence
                const leftText = data.leftMax !== null ? data.leftMax : "ç„¡";
                const rightText = data.rightMin !== null ? data.rightMin : "ç„¡";

                html += `å·¦å­æ¨¹ (Max): ${leftText} | å³å­æ¨¹ (Min): ${rightText}<br>`;
                
                if (isCorrectRuleMode) {
                    // Check logic for Correct Rule (Left < Node < Right)
                    // Simplified visual check logic for this specific tree structure
                    html += `é©—è­‰è¦å‰‡ (å·¦ < ${data.val} < å³)ï¼š`;
                    html += `<span style="color:green; font-weight:bold;">âœ” ç¬¦åˆï¼</span>`;
                    html += `<br><small>(æ­£ç¢ºè¦å‰‡ï¼šå·¦é‚Šéƒ½æ¯” ${data.val} å°ï¼Œå³é‚Šéƒ½æ¯” ${data.val} å¤§)</small>`;
                } else {
                    // Check logic for Incorrect Rule (Left > Node > Right)
                    html += `é©—è­‰è¦å‰‡ (å·¦ > ${data.val} > å³)ï¼š`;
                    html += `<span style="color:red; font-weight:bold;">âœ˜ ä¸ç¬¦åˆï¼</span>`;
                    html += `<br><small>(éŒ¯èª¤åŸå› ï¼š${leftText} æ²’æœ‰æ¯” ${data.val} å¤§ï¼Œä¸” ${rightText} æ²’æœ‰æ¯” ${data.val} å°)</small>`;
                }
            }
            panel.innerHTML = html;
        }

        // --- 3. Accordion Logic ---
        const acc = document.getElementsByClassName("accordion");
        for (let i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                } 
            });
        }

        // --- 4. Quick Q&A Logic ---
        function toggleQA(element) {
            const answer = element.nextElementSibling;
            if (answer.style.display === "block") {
                answer.style.display = "none";
            } else {
                answer.style.display = "block";
            }
        }
    </script>
</body>
</html>