<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«– - è¤‡é¸é¡Œ 42ï¼šç¨‹å¼èªè¨€ä¸–ä»£</title>
    <style>
        /* å…¨åŸŸè¨­å®š */
        :root {
            --primary-color: #2c3e50; /* æ·±è—è‰² - å°ˆæ¥­æ„Ÿ */
            --accent-color: #e74c3c; /* ç´…è‰² - é‡é»æ¨™ç¤º */
            --highlight-color: #f1c40f; /* é»ƒè‰² - è¢å…‰ç­†æ•ˆæœ */
            --success-color: #27ae60;
            --bg-color: #fdfbf7; /* ç±³è‰² - è­·çœ¼ç´™è³ªæ„Ÿ */
            --card-bg: #ffffff;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-top: 10px solid var(--primary-color);
        }

        /* æ¨™é¡Œå€ */
        header {
            text-align: center;
            border-bottom: 2px dashed #ccc;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
            font-weight: bold;
        }

        .teacher-note {
            background-color: #e8f6f3;
            border-left: 5px solid #1abc9c;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        /* ç« ç¯€æ¨™é¡Œ */
        h2 {
            background: var(--primary-color);
            color: #fff;
            padding: 10px 15px;
            border-radius: 5px;
            margin-top: 40px;
            font-size: 1.3em;
        }

        /* é‡é»å¼·èª¿ */
        .highlight {
            background: linear-gradient(to top, var(--highlight-color) 40%, transparent 40%);
            font-weight: bold;
            padding: 0 5px;
        }

        .term {
            font-weight: bold;
            color: var(--accent-color);
        }

        /* è§€å¿µè¡¨æ ¼ */
        .concept-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .concept-table th, .concept-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .concept-table th {
            background-color: #f2f2f2;
            color: var(--primary-color);
        }

        /* (A) æ‹–æ‹‰äº’å‹•å€ */
        .drag-area {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #eee;
        }

        .card-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            min-height: 60px;
            padding: 10px;
            background: #eef;
            border-radius: 8px;
            border: 2px dashed #aac;
        }

        .draggable-card {
            background: #fff;
            border: 2px solid var(--primary-color);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: grab;
            font-weight: bold;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            user-select: none;
            transition: transform 0.2s;
        }

        .draggable-card:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        .drop-zones {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .drop-zone {
            background: #fff;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .drop-zone h3 {
            margin-top: 0;
            font-size: 1em;
            color: #555;
            text-align: center;
        }

        .drop-zone.active {
            border-color: var(--success-color);
            background-color: #eafaf1;
        }

        /* (B) è¤‡é¸é¡Œäº’å‹•å€ */
        .quiz-box {
            background: #fff8e1;
            border: 2px solid #ffe082;
            padding: 25px;
            border-radius: 10px;
            position: relative;
        }

        .question-tag {
            background: var(--accent-color);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 10px;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .options-list li {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff;
            cursor: pointer;
            transition: background 0.2s;
        }

        .options-list li:hover {
            background: #f5f5f5;
        }

        .options-list label {
            cursor: pointer;
            display: flex;
            align-items: center;
            width: 100%;
        }

        .options-list input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.5);
        }

        .action-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s;
            display: block;
            width: 100%;
        }

        .action-btn:hover {
            background: #34495e;
        }

        .result-msg {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        .result-correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result-wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* (D) è§£æèˆ‡ç‰¹æ€§ */
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .analysis-btn {
            background: #fff;
            border: 2px solid var(--primary-color);
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        .analysis-btn:hover, .analysis-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .analysis-display {
            margin-top: 15px;
            padding: 15px;
            background: #eee;
            border-radius: 5px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.1em;
        }

        /* (E) é™·é˜±å¡ */
        .trap-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .trap-card {
            flex: 1;
            min-width: 200px;
            background: #fff;
            border: 2px solid var(--accent-color);
            padding: 15px;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: opacity 0.5s;
        }

        .trap-card h4 {
            margin-top: 0;
            color: var(--accent-color);
        }

        .dismiss-btn {
            background: #ddd;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            margin-top: 10px;
            cursor: pointer;
            font-size: 0.8em;
        }

        /* (F) è‡ªæˆ‘æª¢æ¸¬ */
        .self-test-item {
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .hint-text {
            display: none;
            color: var(--primary-color);
            margin-top: 5px;
            font-style: italic;
        }

        /* RWD é©é… */
        @media (max-width: 600px) {
            .drop-zones {
                grid-template-columns: 1fr;
            }
            .drop-zone {
                min-height: 100px;
            }
        }
        
        .reset-section {
            text-align: center;
            margin-top: 40px;
            border-top: 1px solid #ccc;
            padding-top: 20px;
        }
        
        .reset-btn {
            background: #7f8c8d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>é›»è…¦æ¦‚è«– - è¤‡é¸é¡Œ 42</h1>
        <div class="subtitle">å–®å…ƒï¼šé›»è…¦ç¨‹å¼èªè¨€ç™¼å±•ä¸–ä»£ (1GL ~ 3GL)</div>
    </header>

    <!-- 0. è€å¸«çš„è©± -->
    <div class="teacher-note">
        <strong>ğŸ‘¨â€ğŸ« è€å¸«çš„è©±ï¼š</strong><br>
        å„ä½åŒå­¸å¥½ï¼é€™é¡Œæ˜¯è€ƒè©¦å¿…è€ƒé¡Œï¼Œå¾ˆå¤šåŒå­¸çœ‹åˆ°è‹±æ–‡é¸é …å°±æ…Œäº†ã€‚å…¶å¯¦åªè¦æŒæ¡ã€Œä¸–ä»£å£è¨£ã€ï¼Œä¸ç”¨æ­»èƒŒä¹Ÿèƒ½ç§’æ®ºï¼æˆ‘å€‘ä»Šå¤©è¦æŠŠç¬¬ 42 é¡Œçš„é€™ 5 åˆ†ç©©ç©©æ‹¿ä¸‹ä¾†ï¼
    </div>

    <!-- 1. æ ¸å¿ƒè§€å¿µèªªæ˜å€ -->
    <section>
        <h2>ç¬¬ä¸€éƒ¨åˆ†ï¼šç¨‹å¼èªè¨€ä¸–ä»£å¿«é€Ÿåˆ¤æ–·æ³•</h2>
        <p>é¦–å…ˆï¼Œä»€éº¼æ˜¯ <span class="term">ç¨‹å¼èªè¨€</span>ï¼Ÿç°¡å–®èªªå°±æ˜¯ã€Œäººé¡ç”¨ä¾†æŒ‡æ®é›»è…¦åšäº‹çš„èªè¨€ã€ã€‚</p>
        <p>èªè¨€çš„ç™¼å±•å°±åƒäººé¡æ–‡æ˜ä¸€æ¨£ï¼Œè¶Šä¾†è¶Šé€²æ­¥ã€è¶Šä¾†è¶Šå¥½æ‡‚ï¼š</p>

        <div class="concept-table">
            <table>
                <thead>
                    <tr>
                        <th>ä¸–ä»£</th>
                        <th>åç¨±</th>
                        <th>ç™½è©±è§£é‡‹</th>
                        <th>é—œéµå­—</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>1GL (ç¬¬ä¸€ä»£)</strong></td>
                        <td>æ©Ÿå™¨èªè¨€<br>(Machine Language)</td>
                        <td>åªæœ‰é›»è…¦çœ‹å¾—æ‡‚çš„ <strong>0 èˆ‡ 1</strong>ï¼Œäººé¡çœ‹åƒå¤©æ›¸ã€‚</td>
                        <td>0101ã€äºŒé€²ä½ã€ç¡¬é«”ç›¸ä¾</td>
                    </tr>
                    <tr>
                        <td><strong>2GL (ç¬¬äºŒä»£)</strong></td>
                        <td>çµ„åˆèªè¨€<br>(Assembly)</td>
                        <td>ç”¨ç°¡å–®çš„<strong>åŠ©è¨˜ç¬¦è™Ÿ</strong>(è‹±æ–‡ç¸®å¯«)ä¾†ä»£æ›¿ 0 èˆ‡ 1ã€‚</td>
                        <td>ADD, MOV, JMP</td>
                    </tr>
                    <tr>
                        <td><strong>3GL (ç¬¬ä¸‰ä»£)</strong></td>
                        <td>é«˜éšèªè¨€<br>(High-level Language)</td>
                        <td>æ¥è¿‘äººé¡çš„<strong>è‹±æ–‡èˆ‡æ•¸å­¸</strong>è¡¨ç¤ºæ³•ã€‚éœ€è¦<span class="term">ç·¨è­¯å™¨ (Compiler)</span>ç¿»è­¯ã€‚</td>
                        <td>C, Java, Fortran, Python</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div style="background: #fff3cd; padding: 15px; border-radius: 10px; border: 2px dashed #e67e22;">
            <strong>ğŸ‘‰ è€ƒè©¦ç§’æ®ºå£è¨£ï¼š</strong>
            <ul>
                <li>çœ‹ä¸æ‡‚çš„ 0/1 äº‚ç¢¼ â†’ <span class="highlight">ç¬¬ä¸€ä»£</span></li>
                <li>å¾ˆåƒè‹±æ–‡æŒ‡ä»¤ç¸®å¯« (Assembly) â†’ <span class="highlight">ç¬¬äºŒä»£</span></li>
                <li>åƒå®Œæ•´è‹±æ–‡ã€æ•¸å­¸å¼ã€å¯æ”œæ€§é«˜ (C, Java...) â†’ <span class="highlight">ç¬¬ä¸‰ä»£</span></li>
            </ul>
        </div>
    </section>

    <!-- 2. äº’å‹•åŠŸèƒ½ (A) åˆ†é¡ç·´ç¿’ -->
    <section>
        <h2>ç¬¬äºŒéƒ¨åˆ†ï¼šè§€å¿µäº’å‹•åˆ†é¡</h2>
        <p>è«‹è©¦è‘—å°‡ä¸‹åˆ—èªè¨€å¡ç‰‡ï¼Œæ‹–æ‹‰åˆ°æ­£ç¢ºçš„ä¸–ä»£æ¡†æ¡†ä¸­ï¼š</p>
        
        <div class="drag-area">
            <!-- å¾…é¸å€ -->
            <div id="card-container" class="card-container" ondrop="drop(event)" ondragover="allowDrag(event)">
                <div class="draggable-card" draggable="true" ondragstart="drag(event)" id="card-machine" data-type="1gl">Machine Language</div>
                <div class="draggable-card" draggable="true" ondragstart="drag(event)" id="card-assembly" data-type="2gl">Assembly</div>
                <div class="draggable-card" draggable="true" ondragstart="drag(event)" id="card-c" data-type="3gl">C</div>
                <div class="draggable-card" draggable="true" ondragstart="drag(event)" id="card-java" data-type="3gl">Java</div>
                <div class="draggable-card" draggable="true" ondragstart="drag(event)" id="card-fortran" data-type="3gl">Fortran</div>
            </div>

            <!-- æ”¾ç½®å€ -->
            <div class="drop-zones">
                <div class="drop-zone" id="zone-1gl" ondrop="drop(event)" ondragover="allowDrag(event)">
                    <h3>ç¬¬ä¸€ä»£èªè¨€ (1GL)<br><small>(æ©Ÿå™¨èªè¨€)</small></h3>
                </div>
                <div class="drop-zone" id="zone-2gl" ondrop="drop(event)" ondragover="allowDrag(event)">
                    <h3>ç¬¬äºŒä»£èªè¨€ (2GL)<br><small>(çµ„åˆèªè¨€)</small></h3>
                </div>
                <div class="drop-zone" id="zone-3gl" ondrop="drop(event)" ondragover="allowDrag(event)">
                    <h3>ç¬¬ä¸‰ä»£èªè¨€ (3GL)<br><small>(é«˜éšèªè¨€)</small></h3>
                </div>
            </div>

            <button class="action-btn" onclick="checkSorting()" style="margin-top: 20px;">æª¢æŸ¥åˆ†é¡ç­”æ¡ˆ</button>
            <div id="sort-result" class="result-msg"></div>
        </div>
    </section>

    <!-- 3. äº’å‹•åŠŸèƒ½ (B) è¤‡é¸é¡Œä½œç­” -->
    <section>
        <h2>ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯¦æˆ°æ¼”ç·´ (è¤‡é¸é¡Œ 42)</h2>
        <div class="quiz-box">
            <span class="question-tag">é¡Œç›® 42 (è¤‡é¸é¡Œ)</span>
            <p style="font-size: 1.2em; font-weight: bold;">ä¸‹åˆ—ä½•ç¨®å±¬æ–¼ç¬¬ä¸‰ä»£çš„é›»è…¦ç¨‹å¼èªè¨€ï¼Ÿ</p>
            <p style="color: #e74c3c; font-size: 0.9em;">(è«‹å‹¾é¸æ­£ç¢ºç­”æ¡ˆï¼Œå¯è¤‡é¸)</p>

            <ul class="options-list">
                <li><label><input type="checkbox" name="q42" value="A"> (A) Machine Language</label></li>
                <li><label><input type="checkbox" name="q42" value="B"> (B) Assembly</label></li>
                <li><label><input type="checkbox" name="q42" value="C"> (C) C</label></li>
                <li><label><input type="checkbox" name="q42" value="D"> (D) Java</label></li>
                <li><label><input type="checkbox" name="q42" value="E"> (E) Fortran</label></li>
            </ul>

            <button class="action-btn" onclick="checkQuiz()">é€å‡ºç­”æ¡ˆ</button>
            <div id="quiz-result" class="result-msg"></div>
        </div>
    </section>

    <!-- 4. äº’å‹•åŠŸèƒ½ (C) & (D) è§£æ -->
    <section>
        <h2>ç¬¬å››éƒ¨åˆ†ï¼šé¸é …æ·±åº¦è§£æ</h2>
        <p>é»é¸ä¸‹æ–¹æŒ‰éˆ•ï¼ŒæŸ¥çœ‹æ¯å€‹é¸é …çš„è©³ç´°èªªæ˜ï¼š</p>
        
        <div class="analysis-grid">
            <div class="analysis-btn" onclick="analyzeOption('A')">(A) Machine Language</div>
            <div class="analysis-btn" onclick="analyzeOption('B')">(B) Assembly</div>
            <div class="analysis-btn" onclick="analyzeOption('C')">(C) C èªè¨€</div>
            <div class="analysis-btn" onclick="analyzeOption('D')">(D) Java</div>
            <div class="analysis-btn" onclick="analyzeOption('E')">(E) Fortran</div>
        </div>

        <div id="analysis-display" class="analysis-display">
            è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹è§£æ
        </div>

        <div style="margin-top: 20px; font-size: 0.9em; color: #555;">
            ğŸ’¡ <strong>æç¤ºï¼š</strong>Cã€Javaã€Fortran éƒ½æ˜¯é«˜éšèªè¨€ï¼Œé»æ“Šå®ƒå€‘æŸ¥çœ‹å…±åŒç‰¹æ€§ã€‚
        </div>
    </section>

    <!-- 5. äº’å‹•åŠŸèƒ½ (E) é™·é˜±å¡ -->
    <section>
        <h2>ç¬¬äº”éƒ¨åˆ†ï¼šå¸¸è¦‹è€ƒè©¦é™·é˜±</h2>
        <p>é€™äº›è§€å¿µå¾ˆå®¹æ˜“ææ··ï¼Œé»æ“Šå¡ç‰‡ç¢ºèªã€Œæˆ‘æ‡‚äº†ã€æŠŠå®ƒæ¶ˆé™¤ï¼</p>
        <div class="trap-container">
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 1ï¼šJava å¾ˆæ–°ï¼Ÿ</h4>
                <p>åˆ¥ä»¥ç‚º Java å¾ˆæ½®å°±æ˜¯ç¬¬å››ä»£ï¼å®ƒä»ç„¶æ˜¯æ¨™æº–çš„<strong>ç¬¬ä¸‰ä»£ç‰©ä»¶å°å‘èªè¨€</strong>ã€‚</p>
                <button class="dismiss-btn">æˆ‘æ‡‚äº† (é»æ“Šé—œé–‰)</button>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 2ï¼šçœ‹åˆ°è‹±æ–‡å°±äº‚é¸</h4>
                <p>Assembly ä¹Ÿæ˜¯è‹±æ–‡æ‹¼çš„ï¼Œä½†å®ƒæ˜¯<strong>ç¬¬äºŒä»£</strong>ï¼è¦çœ‹å®ƒæ˜¯ã€ŒæŒ‡ä»¤ç¸®å¯«ã€é‚„æ˜¯ã€Œå®Œæ•´èªæ³•ã€ã€‚</p>
                <button class="dismiss-btn">æˆ‘æ‡‚äº† (é»æ“Šé—œé–‰)</button>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 3ï¼šè¤‡é¸é¡Œæ¼é¸</h4>
                <p>é¡Œç›®å•ã€Œå“ªäº›å±¬æ–¼ã€ï¼Œé€šå¸¸ä¸åªä¸€å€‹ã€‚Cã€Javaã€Fortran éƒ½è¦é¸æ‰ç®—å°ï¼</p>
                <button class="dismiss-btn">æˆ‘æ‡‚äº† (é»æ“Šé—œé–‰)</button>
            </div>
        </div>
    </section>

    <!-- 6. äº’å‹•åŠŸèƒ½ (F) è‡ªæˆ‘æª¢æ¸¬ -->
    <section>
        <h2>ç¬¬å…­éƒ¨åˆ†ï¼šè‡ªæˆ‘æª¢æ¸¬ (è€ƒè€ƒä½ )</h2>
        
        <div class="self-test-item">
            <p><strong>Q1ï¼šç¬¬å››ä»£èªè¨€ (4GL) å’Œç¬¬ä¸‰ä»£æœ€å¤§çš„å·®åˆ¥æ˜¯ï¼Ÿ</strong></p>
            <button onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
            <p id="hint1" class="hint-text">æç¤ºï¼š4GL æ›´æ¥è¿‘äººé¡è‡ªç„¶èªè¨€ï¼Œé€šå¸¸æŒ‡è³‡æ–™åº«æŸ¥è©¢èªè¨€ (å¦‚ SQL)ï¼Œå‘Šè¨´é›»è…¦ã€Œåšä»€éº¼ã€è€Œä¸æ˜¯ã€Œæ€éº¼åšã€ã€‚</p>
        </div>

        <div class="self-test-item">
            <p><strong>Q2ï¼šç‚ºä»€éº¼ Assembly (çµ„åˆèªè¨€) ä¸ç®—é«˜éšèªè¨€ï¼Ÿ</strong></p>
            <button onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
            <p id="hint2" class="hint-text">æç¤ºï¼šå› ç‚ºå®ƒé‚„æ˜¯å¾ˆä¾è³´ç¡¬é«”æ¶æ§‹ï¼Œä¸”ä¸€æ¢æŒ‡ä»¤å°æ‡‰ä¸€å€‹å‹•ä½œï¼Œä¸åƒé«˜éšèªè¨€å…·æœ‰é«˜çµæ§‹æ€§èˆ‡å¯æ”œæ€§ã€‚</p>
        </div>

        <div class="self-test-item">
            <p><strong>Q3ï¼šçœ‹åˆ°ä¸€å€‹æ²’çœ‹éçš„èªè¨€ (å¦‚ Python)ï¼Œæ€éº¼çŒœå®ƒæ˜¯ç¬¬å¹¾ä»£ï¼Ÿ</strong></p>
            <button onclick="toggleHint('hint3')">é¡¯ç¤ºæç¤º</button>
            <p id="hint3" class="hint-text">æç¤ºï¼šå¦‚æœå®ƒå¯«èµ·ä¾†åƒè‹±æ–‡å¥å­ï¼Œä¸ç”¨ç®¡ç¡¬é«”æš«å­˜å™¨ï¼Œé‚£å®ƒè‚¯å®šæ˜¯ç¬¬ä¸‰ä»£ (æˆ–ä»¥ä¸Š) çš„é«˜éšèªè¨€ï¼</p>
        </div>
    </section>

    <div class="reset-section">
        <button class="reset-btn" onclick="resetAll()">ğŸ”„ å…¨éƒ¨é‡ç½® / é‡æ–°é–‹å§‹</button>
    </div>

</div>

<script>
    // --- æ‹–æ‹‰äº’å‹•é‚è¼¯ (Drag and Drop) ---
    function allowDrag(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);
        
        // ç¢ºä¿åªæ”¾ç½®åœ¨ drop-zone æˆ– card-container å…§ï¼Œé¿å…æ”¾åœ¨å­å…ƒç´ ä¸Š
        let target = ev.target;
        if (!target.classList.contains("drop-zone") && !target.classList.contains("card-container")) {
            target = target.closest(".drop-zone") || target.closest(".card-container");
        }
        
        if (target) {
            target.appendChild(draggedElement);
        }
    }

    // æª¢æŸ¥åˆ†é¡çµæœ
    function checkSorting() {
        const zone1 = document.getElementById('zone-1gl');
        const zone2 = document.getElementById('zone-2gl');
        const zone3 = document.getElementById('zone-3gl');
        const resultDiv = document.getElementById('sort-result');

        let score = 0;
        let errors = [];

        // æª¢æŸ¥ 1GL
        if (zone1.children.length === 2 && zone1.querySelector('#card-machine')) {
            score++;
        } else if (zone1.querySelector('#card-machine')) {
             // Correct card but maybe extras
             score++; 
        } else {
            errors.push("Machine Language æ‡‰è©²åœ¨ç¬¬ä¸€ä»£");
        }

        // æª¢æŸ¥ 2GL
        if (zone2.querySelector('#card-assembly')) score++;
        else errors.push("Assembly æ‡‰è©²åœ¨ç¬¬äºŒä»£");

        // æª¢æŸ¥ 3GL
        if (zone3.querySelector('#card-c')) score++;
        else errors.push("C æ‡‰è©²åœ¨ç¬¬ä¸‰ä»£");
        
        if (zone3.querySelector('#card-java')) score++;
        else errors.push("Java æ‡‰è©²åœ¨ç¬¬ä¸‰ä»£");
        
        if (zone3.querySelector('#card-fortran')) score++;
        else errors.push("Fortran æ‡‰è©²åœ¨ç¬¬ä¸‰ä»£");

        // ç°¡å–®åˆ¤æ–·ï¼šå¿…é ˆå…¨éƒ¨æ­¸ä½æ‰ç®—å°
        // é€™è£¡æª¢æŸ¥æ˜¯å¦æ‰€æœ‰å¡ç‰‡éƒ½é›¢é–‹äº†å¾…é¸å€
        const container = document.getElementById('card-container');
        if (container.children.length > 0) {
            resultDiv.className = "result-msg result-wrong";
            resultDiv.innerHTML = "é‚„æœ‰å¡ç‰‡æ²’åˆ†é¡å–”ï¼è«‹å°‡æ‰€æœ‰å¡ç‰‡æ‹–å…¥å°æ‡‰æ¡†æ¡†ã€‚";
            resultDiv.style.display = "block";
            return;
        }

        // æª¢æŸ¥æ¯å€‹å€åŸŸæ˜¯å¦æœ‰éŒ¯èª¤çš„å¡ç‰‡
        let wrongPlacement = false;
        Array.from(zone1.children).forEach(el => { if(el.tagName === 'DIV' && el.dataset.type !== '1gl') wrongPlacement = true; });
        Array.from(zone2.children).forEach(el => { if(el.tagName === 'DIV' && el.dataset.type !== '2gl') wrongPlacement = true; });
        Array.from(zone3.children).forEach(el => { if(el.tagName === 'DIV' && el.dataset.type !== '3gl') wrongPlacement = true; });

        if (!wrongPlacement && errors.length === 0) {
            resultDiv.className = "result-msg result-correct";
            resultDiv.innerHTML = "ğŸ‰ å¤ªæ£’äº†ï¼åˆ†é¡å®Œå…¨æ­£ç¢ºï¼<br>Cã€Javaã€Fortran éƒ½æ˜¯ç¬¬ä¸‰ä»£é«˜éšèªè¨€ã€‚";
        } else {
            resultDiv.className = "result-msg result-wrong";
            resultDiv.innerHTML = "åˆ†é¡æœ‰èª¤å–”ï¼<br>" + errors.join("<br>") + (wrongPlacement ? "<br>æœ‰äº›èªè¨€è·‘éŒ¯ä¸–ä»£äº†ï¼" : "");
        }
        resultDiv.style.display = "block";
    }

    // --- è¤‡é¸é¡Œé‚è¼¯ ---
    function checkQuiz() {
        const inputs = document.querySelectorAll('input[name="q42"]');
        let selected = [];
        inputs.forEach(input => {
            if (input.checked) selected.push(input.value);
        });

        const resultDiv = document.getElementById('quiz-result');
        const correctAnswers = ['C', 'D', 'E'];
        
        // åˆ¤æ–·é‚è¼¯
        const isCorrect = selected.length === 3 && 
                          selected.includes('C') && 
                          selected.includes('D') && 
                          selected.includes('E');
        
        const hasFirstOrSecond = selected.includes('A') || selected.includes('B');

        if (isCorrect) {
            resultDiv.className = "result-msg result-correct";
            resultDiv.innerHTML = "âœ… å®Œå…¨æ­£ç¢ºï¼<br>(C) C, (D) Java, (E) Fortran éƒ½æ˜¯ç¬¬ä¸‰ä»£é«˜éšèªè¨€ã€‚";
        } else if (hasFirstOrSecond) {
            resultDiv.className = "result-msg result-wrong";
            resultDiv.innerHTML = "âŒ ç­”éŒ¯å›‰ï¼<br>(A) æ˜¯ç¬¬ä¸€ä»£æ©Ÿå™¨èªè¨€ï¼Œ(B) æ˜¯ç¬¬äºŒä»£çµ„åˆèªè¨€ï¼Œå®ƒå€‘éƒ½ä¸æ˜¯ç¬¬ä¸‰ä»£ã€‚";
        } else if (selected.length < 3) {
            resultDiv.className = "result-msg result-wrong";
            resultDiv.innerHTML = "âš ï¸ ç­”æ¡ˆä¸å®Œæ•´ï¼<br>æœ¬é¡Œæ˜¯è¤‡é¸é¡Œï¼Œé‚„æœ‰å…¶ä»–ç¬¬ä¸‰ä»£èªè¨€æ²’é¸åˆ°å–”ï¼";
        } else {
            resultDiv.className = "result-msg result-wrong";
            resultDiv.innerHTML = "âŒ ç­”æ¡ˆéŒ¯èª¤ï¼Œè«‹é‡æ–°æ€è€ƒï¼";
        }
        resultDiv.style.display = "block";
    }

    // --- é¸é …è§£æé‚è¼¯ ---
    function analyzeOption(opt) {
        const display = document.getElementById('analysis-display');
        let content = "";
        let is3GL = false;

        switch(opt) {
            case 'A':
                content = "<strong>(A) Machine Language (æ©Ÿå™¨èªè¨€)</strong><br>âŒ é€™æ˜¯ç¬¬ä¸€ä»£èªè¨€ã€‚<br>å®ƒæ˜¯ç›´æ¥ç”¨ 0 èˆ‡ 1 æ§åˆ¶ç¡¬é«”ï¼Œä¸æ˜¯é«˜éšèªè¨€ã€‚";
                break;
            case 'B':
                content = "<strong>(B) Assembly (çµ„åˆèªè¨€)</strong><br>âŒ é€™æ˜¯ç¬¬äºŒä»£èªè¨€ã€‚<br>å®ƒæ˜¯ç”¨åŠ©è¨˜ç¬¦è™Ÿ (å¦‚ ADD) å–ä»£ 0/1ï¼Œä½†é‚„æ˜¯åä½éšã€‚";
                break;
            case 'C':
                content = "<strong>(C) C èªè¨€</strong><br>âœ… é€™æ˜¯ç¬¬ä¸‰ä»£èªè¨€ã€‚<br>å®ƒæ˜¯çµæ§‹åŒ–çš„é«˜éšèªè¨€ï¼Œèªæ³•åƒè‹±æ–‡ï¼Œéœ€è¦ç·¨è­¯å™¨ã€‚";
                is3GL = true;
                break;
            case 'D':
                content = "<strong>(D) Java</strong><br>âœ… é€™æ˜¯ç¬¬ä¸‰ä»£èªè¨€ã€‚<br>è‘—åçš„ç‰©ä»¶å°å‘é«˜éšèªè¨€ï¼Œå…·å‚™è·¨å¹³å°ç‰¹æ€§ (Write Once, Run Anywhere)ã€‚";
                is3GL = true;
                break;
            case 'E':
                content = "<strong>(E) Fortran</strong><br>âœ… é€™æ˜¯ç¬¬ä¸‰ä»£èªè¨€ã€‚<br>æœ€æ—©çš„é«˜éšèªè¨€ä¹‹ä¸€ï¼Œä¸»è¦ç”¨æ–¼ç§‘å­¸é‹ç®—èˆ‡å·¥ç¨‹è¨ˆç®—ã€‚";
                is3GL = true;
                break;
        }

        if (is3GL) {
            content += "<hr style='border:0; border-top:1px dashed #ccc; margin:10px 0;'><strong>âœ¨ é«˜éšèªè¨€ (3GL) å…±åŒç‰¹æ€§ï¼š</strong><br>1. å¯è®€æ€§é«˜ (åƒè‹±æ–‡)<br>2. å¯æ”œæ€§ä½³ (æ›é›»è…¦ä¹Ÿèƒ½è·‘)<br>3. éœ€é€éã€Œç·¨è­¯å™¨ã€æˆ–ã€Œç›´è­¯å™¨ã€ç¿»è­¯";
            display.style.background = "#d4edda";
            display.style.color = "#155724";
        } else {
            display.style.background = "#f8d7da";
            display.style.color = "#721c24";
        }

        display.innerHTML = content;
    }

    // --- é™·é˜±å¡é‚è¼¯ ---
    function dismissTrap(element) {
        element.style.opacity = '0';
        setTimeout(() => {
            element.style.display = 'none';
        }, 500);
    }

    // --- è‡ªæˆ‘æª¢æ¸¬æç¤º ---
    function toggleHint(id) {
        const hint = document.getElementById(id);
        if (hint.style.display === 'block') {
            hint.style.display = 'none';
        } else {
            hint.style.display = 'block';
        }
    }

    // --- é‡ç½®åŠŸèƒ½ ---
    function resetAll() {
        // 1. é‡ç½®æ‹–æ‹‰å¡ç‰‡
        const container = document.getElementById('card-container');
        const cards = document.querySelectorAll('.draggable-card');
        cards.forEach(card => container.appendChild(card));
        document.getElementById('sort-result').style.display = 'none';

        // 2. é‡ç½®è¤‡é¸é¡Œ
        const checkboxes = document.querySelectorAll('input[name="q42"]');
        checkboxes.forEach(cb => cb.checked = false);
        document.getElementById('quiz-result').style.display = 'none';

        // 3. é‡ç½®è§£æé¡¯ç¤º
        document.getElementById('analysis-display').innerHTML = "è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹è§£æ";
        document.getElementById('analysis-display').style.background = "#eee";
        document.getElementById('analysis-display').style.color = "#333";

        // 4. é‡ç½®é™·é˜±å¡
        const traps = document.querySelectorAll('.trap-card');
        traps.forEach(trap => {
            trap.style.display = 'block';
            setTimeout(() => trap.style.opacity = '1', 50);
        });

        // 5. é‡ç½®æç¤º
        const hints = document.querySelectorAll('.hint-text');
        hints.forEach(hint => hint.style.display = 'none');

        // æ²å‹•åˆ°é ‚éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>

</body>
</html>