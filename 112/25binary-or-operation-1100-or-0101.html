<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•æ•™å­¸ï¼šäºŒé€²ä½ OR é‹ç®— (1100 vs 0101)</title>
    <style>
        /* --- åŸºç¤è¨­å®š (Reset & Base) --- */
        :root {
            --primary-color: #2563eb; /* è—è‰²ä¸»èª¿ */
            --accent-color: #f59e0b;  /* æ©˜é»ƒè‰²å¼·èª¿ */
            --success-color: #10b981; /* ç¶ è‰²æˆåŠŸ */
            --error-color: #ef4444;   /* ç´…è‰²éŒ¯èª¤ */
            --bg-color: #f3f4f6;      /* æ·ºç°èƒŒæ™¯ */
            --text-color: #1f2937;    /* æ·±ç°æ–‡å­— */
            --card-bg: #ffffff;
            --bit-on: #3b82f6;        /* ä½å…ƒ 1 çš„é¡è‰² */
            --bit-off: #e5e7eb;       /* ä½å…ƒ 0 çš„é¡è‰² */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 50px;
        }

        /* --- ç‰ˆé¢çµæ§‹ (Layout) --- */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        h2 {
            border-left: 5px solid var(--primary-color);
            padding-left: 15px;
            margin-bottom: 20px;
            color: #111827;
        }

        h3 {
            margin: 15px 0 10px;
            color: #374151;
        }

        /* --- é¡Œç›®å€å¡Š --- */
        .question-box {
            background-color: #eff6ff;
            border: 2px solid #bfdbfe;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .code-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.5rem;
            background: #1f2937;
            color: #fbbf24;
            padding: 10px 20px;
            border-radius: 6px;
            display: inline-block;
            margin: 10px 0;
        }

        /* --- çœŸå€¼è¡¨èˆ‡è¦å‰‡ (Rules) --- */
        .truth-table-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .truth-table {
            border-collapse: collapse;
            width: 100%;
            max-width: 300px;
        }

        .truth-table th, .truth-table td {
            border: 1px solid #d1d5db;
            padding: 10px;
            text-align: center;
        }

        .truth-table th {
            background-color: #f9fafb;
        }

        .truth-table .highlight-row {
            background-color: #d1fae5; /* åªè¦æœ‰1å°±æ˜¯1çš„è¡Œ */
            font-weight: bold;
        }

        .rule-card {
            background: #fffbeb;
            border: 2px solid #fcd34d;
            padding: 15px;
            border-radius: 8px;
            flex: 1;
            min-width: 250px;
        }

        .rule-highlight {
            color: #b45309;
            font-weight: bold;
            font-size: 1.2rem;
            display: block;
            margin: 10px 0;
            text-align: center;
        }

        /* --- äº’å‹•æ¼”ç¤ºå€ (Interactive Demo) --- */
        .demo-area {
            background-color: #fafafa;
            border: 1px solid #e5e7eb;
            padding: 20px;
            border-radius: 8px;
        }

        .bit-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
            margin: 20px 0;
            font-family: monospace;
        }

        .bit-row {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .bit-label {
            width: 80px;
            text-align: right;
            font-weight: bold;
            color: #6b7280;
        }

        .bit-box {
            width: 50px;
            height: 50px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            background-color: white;
            transition: all 0.3s ease;
        }

        .bit-box.active {
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            transform: scale(1.1);
        }

        .bit-box.is-one {
            background-color: #dbeafe; /* æ·ºè—èƒŒæ™¯ */
            color: #1e40af;
        }

        .bit-box.is-zero {
            background-color: #f3f4f6;
            color: #9ca3af;
        }

        .bit-box.result-box {
            border-color: var(--primary-color);
        }

        .bit-box.result-box.filled {
            background-color: var(--primary-color);
            color: white;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        button:hover {
            opacity: 0.9;
        }

        button:active {
            transform: translateY(1px);
        }

        .btn-next { background-color: var(--primary-color); color: white; }
        .btn-auto { background-color: var(--accent-color); color: white; }
        .btn-reset { background-color: #9ca3af; color: white; }
        .btn-answer { background-color: var(--success-color); color: white; margin-top: 5px;}

        .step-explanation {
            margin-top: 15px;
            padding: 10px;
            background-color: #fff;
            border-left: 4px solid var(--accent-color);
            min-height: 60px;
            display: flex;
            align-items: center;
        }

        /* --- åé€²ä½å°ç…§ (Decimal Toggle) --- */
        .decimal-comparison {
            margin-top: 20px;
            padding: 15px;
            background: #eef2ff;
            border-radius: 8px;
            display: none; /* é è¨­éš±è— */
            animation: fadeIn 0.5s;
        }

        .decimal-toggle-btn {
            background: none;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            margin-top: 10px;
            width: 100%;
        }

        .decimal-toggle-btn:hover {
            background: #eff6ff;
        }

        /* --- é¸é …å¡ç‰‡ --- */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .option-card {
            border: 1px solid #e5e7eb;
            padding: 15px;
            border-radius: 8px;
            cursor: default;
        }

        .option-card.correct {
            border-color: var(--success-color);
            background-color: #ecfdf5;
        }
        
        .option-card.wrong {
            opacity: 0.7;
            background-color: #fef2f2;
        }

        .option-card h4 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .option-status {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .correct .option-status { color: var(--success-color); }
        .wrong .option-status { color: var(--error-color); }

        /* --- æ¸¬é©—å€ --- */
        .quiz-options button {
            display: block;
            width: 100%;
            margin-bottom: 10px;
            text-align: left;
            background: white;
            border: 2px solid #e5e7eb;
            color: var(--text-color);
            padding: 15px;
        }

        .quiz-options button:hover {
            border-color: var(--primary-color);
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.success { background-color: #d1fae5; color: #065f46; }
        .quiz-feedback.error { background-color: #fee2e2; color: #991b1b; }

        /* --- å»¶ä¼¸ç·´ç¿’ --- */
        .practice-item {
            background: #f9fafb;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #9ca3af;
        }

        .practice-answer {
            margin-top: 10px;
            font-weight: bold;
            color: var(--primary-color);
            display: none;
        }

        /* --- è¼”åŠ©é¡ --- */
        .hidden { display: none; }
        .badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            background: #e5e7eb;
            margin-left: 5px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ‰‹æ©Ÿç‰ˆå„ªåŒ– */
        @media (max-width: 600px) {
            .bit-box { width: 35px; height: 35px; font-size: 1.2rem; }
            .bit-label { width: 50px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

<div class="container">

    <!-- 1. Header -->
    <header>
        <h1>äº’å‹•æ•™å­¸ï¼šäºŒé€²ä½ OR é‹ç®—</h1>
        <p>ORï¼šåªè¦æœ‰ 1 å°±æ˜¯ 1</p>
    </header>

    <!-- 2. æœ¬é¡Œ -->
    <section>
        <h2><span style="border-bottom: 3px solid var(--accent-color);">æœ¬é¡Œ</span></h2>
        <div class="question-box">
            <p>äºŒé€²ä½ç³»çµ±ä¸­ï¼Œè«‹è¨ˆç®—ï¼š</p>
            <div class="code-display">1100 OR 0101 = ?</div>
            <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                è«‹é¸æ“‡æ­£ç¢ºç­”æ¡ˆï¼š
            </p>
            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 10px; font-weight: normal;">
                <span>(A) 0010</span>
                <span>(B) 1101</span>
                <span>(C) 1100</span>
                <span>(D) 1001</span>
            </div>
        </div>
    </section>

    <!-- 3. æ–°æ‰‹å¼•å°èˆ‡è¦å‰‡ -->
    <section id="rules-section">
        <h2>è§€å¿µå»ºç«‹ï¼šä»€éº¼æ˜¯ OR (é‚è¼¯æˆ–)ï¼Ÿ</h2>
        
        <p>æƒ³åƒé€™æ˜¯ä¸€å€‹ã€Œä¸¦è¯é›»è·¯ã€æˆ–æ˜¯å®¶è£¡çš„é›™é–‹é—œèµ°å»Šç‡ˆã€‚</p>
        <p style="margin: 10px 0; font-weight: bold; color: var(--primary-color);">
            ç”Ÿæ´»æ¯”å–»ï¼šæœ‰å…©å€‹é–‹é—œæ§åˆ¶åŒä¸€ç›ç‡ˆï¼Œ<br>
            åªè¦ã€Œä»»ä½•ä¸€å€‹é–‹é—œæ˜¯é–‹çš„ (1)ã€ï¼Œç‡ˆå°±æœƒäº® (1)ã€‚<br>
            åªæœ‰ç•¶ã€Œå…©å€‹é–‹é—œéƒ½é—œæ‰ (0)ã€ï¼Œç‡ˆæ‰æœƒæ»… (0)ã€‚
        </p>

        <div class="truth-table-container">
            <!-- çœŸå€¼è¡¨ -->
            <table class="truth-table">
                <thead>
                    <tr>
                        <th>è¼¸å…¥ A</th>
                        <th>è¼¸å…¥ B</th>
                        <th>A OR B</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                    <tr class="highlight-row">
                        <td>0</td>
                        <td>1</td>
                        <td>1</td>
                    </tr>
                    <tr class="highlight-row">
                        <td>1</td>
                        <td>0</td>
                        <td>1</td>
                    </tr>
                    <tr class="highlight-row">
                        <td>1</td>
                        <td>1</td>
                        <td>1</td>
                    </tr>
                </tbody>
            </table>

            <!-- å¿…èƒŒè¦å‰‡ -->
            <div class="rule-card">
                <h3>â­ å¿…èƒŒå£è¨£</h3>
                <span class="rule-highlight">ã€Œåªè¦æœ‰ 1ï¼Œå°±æ˜¯ 1ã€</span>
                <p>è£œå……è¨˜æ†¶ï¼šå…©å€‹éƒ½ 0ï¼Œæ‰æ˜¯ 0ã€‚</p>
            </div>
        </div>
    </section>

    <!-- 4. äº’å‹•æ¼”ç¤ºå€ -->
    <section id="demo-section">
        <h2>äº’å‹•æ¼”ç¤ºï¼šé€ä½å…ƒè¨ˆç®—</h2>
        <p>é›»è…¦åœ¨åš OR é‹ç®—æ™‚ï¼Œæ˜¯ã€Œä¸€å€‹ä½ç½®å°ä¸€å€‹ä½ç½®ã€æ¯”è¼ƒ (Bitwise Operation)ã€‚è®“æˆ‘å€‘å¾å·¦åˆ°å³ç®—ç®—çœ‹ã€‚</p>

        <div class="demo-area">
            <div class="bit-container">
                <!-- Row 1: 1100 -->
                <div class="bit-row">
                    <div class="bit-label">1100 <span class="badge">Bin</span></div>
                    <div class="bit-box is-one" id="a3">1</div>
                    <div class="bit-box is-one" id="a2">1</div>
                    <div class="bit-box is-zero" id="a1">0</div>
                    <div class="bit-box is-zero" id="a0">0</div>
                </div>

                <!-- Operator -->
                <div class="bit-row" style="justify-content: center; color: var(--accent-color); font-weight: bold;">
                    OR
                </div>

                <!-- Row 2: 0101 -->
                <div class="bit-row">
                    <div class="bit-label">0101 <span class="badge">Bin</span></div>
                    <div class="bit-box is-zero" id="b3">0</div>
                    <div class="bit-box is-one" id="b2">1</div>
                    <div class="bit-box is-zero" id="b1">0</div>
                    <div class="bit-box is-one" id="b0">1</div>
                </div>

                <!-- Divider -->
                <div style="width: 100%; border-bottom: 2px solid #d1d5db; margin: 10px 0;"></div>

                <!-- Row 3: Result -->
                <div class="bit-row">
                    <div class="bit-label">çµæœ</div>
                    <div class="bit-box result-box" id="r3">?</div>
                    <div class="bit-box result-box" id="r2">?</div>
                    <div class="bit-box result-box" id="r1">?</div>
                    <div class="bit-box result-box" id="r0">?</div>
                </div>
            </div>

            <!-- è§£èªªå€ -->
            <div class="step-explanation" id="step-text">
                è«‹é»æ“Šã€Œä¸‹ä¸€æ­¥ã€é–‹å§‹è¨ˆç®—...
            </div>

            <!-- æ§åˆ¶æŒ‰éˆ• -->
            <div class="controls">
                <button class="btn-next" onclick="nextStep()">ä¸‹ä¸€æ­¥ â–¶</button>
                <button class="btn-auto" onclick="autoPlay()">è‡ªå‹•å®Œæˆ â©</button>
                <button class="btn-reset" onclick="resetDemo()">é‡ç½® â†º</button>
            </div>
        </div>

        <!-- 5. åé€²ä½å°ç…§ (Toggle) -->
        <button class="decimal-toggle-btn" onclick="toggleDecimal()">
            ğŸ§ å°ç…§åé€²ä½ (Decimal) çœ‹çœ‹ï¼Ÿ(é»æˆ‘å±•é–‹)
        </button>
        <div id="decimal-panel" class="decimal-comparison">
            <p><strong>æ³¨æ„ï¼š</strong>OR é‹ç®—ä¸æ˜¯å–®ç´”çš„åé€²ä½åŠ æ³•ï¼</p>
            <ul>
                <li><strong>1100</strong> (äºŒé€²ä½) = <strong>12</strong> (åé€²ä½)</li>
                <li><strong>0101</strong> (äºŒé€²ä½) = <strong>5</strong> (åé€²ä½)</li>
                <li style="margin-top: 10px; border-top: 1px dashed #999; padding-top: 5px;">
                    <strong>çµæœ 1101</strong> (äºŒé€²ä½) = <strong>13</strong> (åé€²ä½)
                </li>
            </ul>
            <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                å¦‚æœæ˜¯åŠ æ³•ï¼Œ12+5=17 (10001)ï¼Œä½†åœ¨ OR é‹ç®—ä¸­ï¼Œçµæœæ˜¯ 13ã€‚é€™è­‰æ˜äº†ä½å…ƒé‹ç®—èˆ‡ç®—è¡“åŠ æ³•ä¸åŒã€‚
            </p>
        </div>
    </section>

    <!-- 6. é¸é …ç ´è§£ -->
    <section id="analysis-section" class="hidden">
        <h2>é¸é …ç ´è§£</h2>
        <p>æ ¹æ“šå‰›å‰›çš„è¨ˆç®—ï¼Œçµæœæ˜¯ <strong>1101</strong>ã€‚</p>
        
        <div class="options-grid">
            <!-- Option A -->
            <div class="option-card wrong">
                <div class="option-status">âŒ (A) 0010 - éŒ¯èª¤</div>
                <p>é€™çœ‹èµ·ä¾†æ¯”è¼ƒåƒ XOR æˆ–æ˜¯äº‚çŒœçš„ã€‚è¨˜å¾—å£è¨£ï¼šåªè¦æœ‰ 1 å°±æ˜¯ 1ã€‚</p>
            </div>

            <!-- Option B -->
            <div class="option-card correct">
                <div class="option-status">âœ… (B) 1101 - æ­£ç¢ºï¼</div>
                <p>å®Œå…¨ç¬¦åˆæ¯ä¸€ä½çš„è¨ˆç®—ï¼š<br>1 OR 0 = 1<br>1 OR 1 = 1<br>0 OR 0 = 0<br>0 OR 1 = 1</p>
            </div>

            <!-- Option C -->
            <div class="option-card wrong">
                <div class="option-status">âŒ (C) 1100 - éŒ¯èª¤</div>
                <p>ä½ å¿½ç•¥äº†æœ€å¾Œä¸€ä½ï¼<br>0 OR 1 æ‡‰è©²æ˜¯ 1ï¼Œä¸æ˜¯ 0ã€‚</p>
            </div>

            <!-- Option D -->
            <div class="option-card wrong">
                <div class="option-status">âŒ (D) 1001 - éŒ¯èª¤</div>
                <p>ä¸­é–“ç®—éŒ¯äº†ã€‚<br>ç¬¬äºŒä½çš„ 1 OR 1 ä»ç„¶æ˜¯ 1ï¼Œä¸æ˜¯ 0ã€‚</p>
            </div>
        </div>
    </section>

    <!-- 7. å¸¸è¦‹éŒ¯èª¤ -->
    <section>
        <h2>âš ï¸ åˆå­¸è€…å¸¸è¦‹éŒ¯èª¤</h2>
        <ul>
            <li style="margin-bottom: 10px;">
                <strong>èª¤ä»¥ç‚ºæ˜¯åŠ æ³•é€²ä½ï¼š</strong> çœ‹åˆ° 1 OR 1ï¼Œä»¥ç‚ºè¦é€²ä½è®Šæˆ 10ã€‚
                <br><span style="color: var(--error-color);">æ­£è§£ï¼š</span> OR ä¸æœƒé€²ä½ï¼Œ1 OR 1 é‚„æ˜¯ 1ã€‚
            </li>
            <li style="margin-bottom: 10px;">
                <strong>èª¤ä»¥ç‚ºæ˜¯ ANDï¼š</strong> çœ‹åˆ° 1 å’Œ 0ï¼Œä»¥ç‚ºé€™å…©å€‹éƒ½è¦æœ‰æ‰è¡Œã€‚
                <br><span style="color: var(--error-color);">æ­£è§£ï¼š</span> é‚£æ˜¯ ANDã€‚OR æ˜¯ã€Œåªè¦æœ‰ä¸€å€‹ 1 å°±ç®—æ•¸ã€ã€‚
            </li>
            <li>
                <strong>å°é½ŠéŒ¯èª¤ï¼š</strong> è¨ˆç®—æ™‚æ²’æœ‰æŠŠä½å…ƒä¸Šä¸‹å°é½Šå¥½ï¼ˆä¾‹å¦‚æŠŠ 4 ä½æ•¸å°åˆ° 3 ä½æ•¸ï¼‰ã€‚
            </li>
        </ul>
    </section>

    <!-- 8. å°æ¸¬é©— -->
    <section id="quiz-section">
        <h2>ğŸ“ å°æ¸¬é©—ï¼šå†æŒ‘æˆ°ä¸€æ¬¡</h2>
        <p>å›åˆ°æœ¬é¡Œï¼š1100 OR 0101 = ?</p>
        
        <div class="quiz-options">
            <button onclick="checkQuiz('A')">(A) 0010</button>
            <button onclick="checkQuiz('B')">(B) 1101</button>
            <button onclick="checkQuiz('C')">(C) 1100</button>
            <button onclick="checkQuiz('D')">(D) 1001</button>
        </div>

        <div id="quiz-feedback" class="quiz-feedback"></div>
        <button id="back-to-demo" class="hidden" style="margin-top: 10px; background-color: var(--primary-color); color: white;" onclick="scrollToDemo()">
            â¬…ï¸ ç­”éŒ¯äº†ï¼Ÿå¸¶æˆ‘çœ‹é€æ­¥æ¼”ç¤º
        </button>
    </section>

    <!-- 9. å»¶ä¼¸ç·´ç¿’ -->
    <section>
        <h2>ğŸ’ª å»¶ä¼¸ç·´ç¿’</h2>
        <p>è©¦è©¦çœ‹é€™å…©é¡Œï¼Œç¢ºä¿ä½ çœŸçš„æ‡‚äº†ï¼(å¿ƒä¸­é»˜ç®—å¾Œå†çœ‹ç­”æ¡ˆ)</p>

        <div class="practice-item">
            <p><strong>ç·´ç¿’ 1ï¼š</strong> 1010 OR 0011 = ?</p>
            <button class="btn-answer" onclick="toggleAnswer('p1')">é¡¯ç¤ºç­”æ¡ˆ</button>
            <div id="p1" class="practice-answer">
                ç­”æ¡ˆï¼š1011 <br>
                <small>ç†ç”±ï¼šåªè¦æœ‰ 1 å°±æ˜¯ 1ã€‚</small>
            </div>
        </div>

        <div class="practice-item">
            <p><strong>ç·´ç¿’ 2ï¼š</strong> 0110 OR 0101 = ?</p>
            <button class="btn-answer" onclick="toggleAnswer('p2')">é¡¯ç¤ºç­”æ¡ˆ</button>
            <div id="p2" class="practice-answer">
                ç­”æ¡ˆï¼š0111 <br>
                <small>ç†ç”±ï¼šç¬¬ä¸€ä½ 0|0=0ï¼Œå…¶ä»–ä½éƒ½æœ‰ 1 æ‰€ä»¥æ˜¯ 1ã€‚</small>
            </div>
        </div>
    </section>

    <footer>
        <p>Â© 2025 äº’å‹•å¼äºŒé€²ä½æ•™å­¸ | å°ˆç‚ºåˆå­¸è€…è¨­è¨ˆ</p>
    </footer>

</div>

<script>
    // --- è³‡æ–™è¨­å®š ---
    // é¡Œç›®ï¼š1100 OR 0101
    // é™£åˆ—é †åºï¼š[bit3, bit2, bit1, bit0] (å¾å·¦åˆ°å³)
    const opA = [1, 1, 0, 0];
    const opB = [0, 1, 0, 1];
    const result = [1, 1, 0, 1]; // æ­£ç¢ºç­”æ¡ˆ

    let currentStep = 0; // 0, 1, 2, 3 åˆ†åˆ¥ä»£è¡¨è™•ç†ç¬¬å¹¾ä½
    let isAutoPlaying = false;
    let timer = null;

    // DOM å…ƒç´ 
    const stepText = document.getElementById('step-text');
    const analysisSection = document.getElementById('analysis-section');

    // --- äº’å‹•æ¼”ç¤ºé‚è¼¯ ---

    function updateUI() {
        // é‡ç½®æ‰€æœ‰é‚Šæ¡†
        document.querySelectorAll('.bit-box').forEach(el => el.classList.remove('active'));

        if (currentStep < 4) {
            // é«˜äº®ç•¶å‰ä½å…ƒ
            const idx = currentStep; 
            // å› ç‚º ID æ˜¯å¾ a3 åˆ° a0 (å°æ‡‰ bit3 åˆ° bit0)
            // ä½†æˆ‘å€‘çš„ loop æ˜¯å¾ 0 åˆ° 3 (å°æ‡‰ index 0 åˆ° 3)
            // æ‰€ä»¥è¦è½‰æ›ä¸€ä¸‹: index 0 -> bit 3, index 1 -> bit 2...
            const bitIndex = 3 - currentStep; 
            
            const elA = document.getElementById(`a${bitIndex}`);
            const elB = document.getElementById(`b${bitIndex}`);
            const elR = document.getElementById(`r${bitIndex}`);

            elA.classList.add('active');
            elB.classList.add('active');
            elR.classList.add('active');

            const valA = opA[currentStep];
            const valB = opB[currentStep];
            const resVal = result[currentStep];

            // é¡¯ç¤ºé‚è¼¯æ–‡å­—
            let logicText = `<strong style="color: var(--primary-color)">ç¬¬ ${currentStep + 1} æ­¥ (å·¦æ•¸ç¬¬ ${currentStep + 1} ä½)ï¼š</strong><br>`;
            logicText += `${valA} OR ${valB} = <span style="font-size: 1.2rem; font-weight: bold; color: var(--accent-color)">${resVal}</span>`;
            
            if (resVal === 1) {
                logicText += ` (å› ç‚ºæœ‰ 1ï¼Œæ‰€ä»¥æ˜¯ 1)`;
            } else {
                logicText += ` (å› ç‚ºå…©å€‹éƒ½æ˜¯ 0ï¼Œæ‰€ä»¥æ˜¯ 0)`;
            }
            stepText.innerHTML = logicText;

            // å¡«å…¥çµæœ
            elR.textContent = resVal;
            elR.classList.add('filled');
        } else {
            // å®Œæˆ
            stepText.innerHTML = `<strong>è¨ˆç®—å®Œæˆï¼</strong> çµæœç‚º <span style="color: var(--success-color); font-size: 1.2rem; font-weight: bold;">1101</span>ã€‚<br>å°æ‡‰é¸é … (B)ã€‚`;
            analysisSection.classList.remove('hidden');
            // å¹³æ»‘æ²å‹•åˆ°è§£æå€
            if(isAutoPlaying) {
               // è‡ªå‹•æ’­æ”¾çµæŸä¸ä¸€å®šæ²å‹•ï¼Œé¿å…å¹²æ“¾
            }
        }
    }

    function nextStep() {
        if (currentStep >= 4) return;
        
        updateUI();
        currentStep++;
    }

    function autoPlay() {
        if (isAutoPlaying) return;
        isAutoPlaying = true;
        resetDemo();
        
        // ç«‹å³åŸ·è¡Œç¬¬ä¸€æ­¥
        nextStep();

        timer = setInterval(() => {
            if (currentStep >= 4) {
                clearInterval(timer);
                isAutoPlaying = false;
            } else {
                nextStep();
            }
        }, 800); // 800ms å»¶é²æ–¹ä¾¿é–±è®€
    }

    function resetDemo() {
        clearInterval(timer);
        isAutoPlaying = false;
        currentStep = 0;
        
        // æ¸…ç©ºçµæœæ ¼
        for(let i=0; i<4; i++) {
            const el = document.getElementById(`r${i}`);
            el.textContent = '?';
            el.classList.remove('filled');
            el.classList.remove('active');
        }
        document.querySelectorAll('.bit-box').forEach(el => el.classList.remove('active'));
        
        stepText.innerHTML = "è«‹é»æ“Šã€Œä¸‹ä¸€æ­¥ã€é–‹å§‹è¨ˆç®—...";
        analysisSection.classList.add('hidden');
    }

    // --- åé€²ä½åˆ‡æ› ---
    function toggleDecimal() {
        const panel = document.getElementById('decimal-panel');
        if (panel.style.display === 'block') {
            panel.style.display = 'none';
        } else {
            panel.style.display = 'block';
        }
    }

    // --- æ¸¬é©—é‚è¼¯ ---
    function checkQuiz(answer) {
        const feedback = document.getElementById('quiz-feedback');
        const backBtn = document.getElementById('back-to-demo');

        feedback.style.display = 'block';
        feedback.className = 'quiz-feedback'; // reset class

        if (answer === 'B') {
            feedback.classList.add('success');
            feedback.innerHTML = `<strong>ğŸ‰ ç­”å°äº†ï¼</strong><br>ç­”æ¡ˆå°±æ˜¯ 1101ã€‚<br>ä½ å·²ç¶“æŒæ¡ã€Œåªè¦æœ‰ 1 å°±æ˜¯ 1ã€çš„è¦å‰‡äº†ï¼`;
            backBtn.classList.add('hidden');
        } else {
            feedback.classList.add('error');
            feedback.innerHTML = `<strong>âš ï¸ ç­”éŒ¯å›‰</strong><br>é¸é … (${answer}) æ˜¯ä¸å°çš„ã€‚<br>è¨˜å¾—å£è¨£ï¼šOR é‹ç®—ä¸­ï¼Œåªè¦çœ‹åˆ° 1ï¼Œçµæœå°±æ˜¯ 1ã€‚`;
            backBtn.classList.remove('hidden');
        }
    }

    function scrollToDemo() {
        const demoSection = document.getElementById('demo-section');
        const rulesSection = document.getElementById('rules-section');
        
        // å…ˆé‡ç½®æ¼”ç¤º
        resetDemo();
        
        // æ»¾å‹•åˆ°ä¸Šé¢
        demoSection.scrollIntoView({ behavior: 'smooth' });
        
        // çŸ­æš«é«˜äº®è¦å‰‡
        rulesSection.style.transition = "background-color 0.5s";
        rulesSection.style.backgroundColor = "#fffbeb"; // æ·¡æ·¡é»ƒè‰²
        setTimeout(() => {
            rulesSection.style.backgroundColor = "#ffffff";
        }, 1500);
    }

    // --- å»¶ä¼¸ç·´ç¿’ç­”æ¡ˆåˆ‡æ› ---
    function toggleAnswer(id) {
        const el = document.getElementById(id);
        if (el.style.display === 'block') {
            el.style.display = 'none';
        } else {
            el.style.display = 'block';
        }
    }
</script>

</body>
</html>