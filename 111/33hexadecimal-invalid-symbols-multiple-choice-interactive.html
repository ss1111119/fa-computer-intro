<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 33ï¼šåå…­é€²ä½ç¬¦è™Ÿåˆ¤æ–· | é›»è…¦æ¦‚è«–äº’å‹•è¬›ç¾©</title>
    <style>
        /* å…¨å±€è¨­å®š */
        :root {
            --primary-color: #2c3e50; /* æ·±è— - å°ˆæ¥­æ„Ÿ */
            --accent-color: #e74c3c; /* ç´…è‰² - é‡é»/éŒ¯èª¤ */
            --success-color: #27ae60; /* ç¶ è‰² - æ­£ç¢º/åˆæ³• */
            --bg-color: #f4f6f7;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: "Microsoft JhengHei", "PingFang TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        h1, h2, h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* å€å¡Šå¡ç‰‡æ¨£å¼ - æ¨¡æ“¬è¬›ç¾©å€å¡Š */
        .section-card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary-color);
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: 'ğŸ“–';
            margin-right: 10px;
        }

        /* é‡é»å¼·èª¿æ¨™ç±¤ */
        .highlight-box {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .term {
            font-weight: bold;
            color: #d35400;
        }

        /* å¿«é€Ÿè¨˜æ†¶å€ */
        .memory-tip {
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            margin-top: 15px;
        }

        .memory-tip strong {
            color: #f1c40f;
            font-size: 1.3em;
        }

        /* äº’å‹• Cï¼šæ•¸å€¼å°æ‡‰ */
        .hex-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .hex-btn {
            background: white;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .hex-btn:hover, .hex-btn.active {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .value-display {
            text-align: center;
            font-size: 1.2em;
            margin-top: 10px;
            padding: 10px;
            background: #e8f6f3;
            border-radius: 8px;
            display: none; /* åˆå§‹éš±è— */
        }

        /* äº’å‹• Aï¼šæ‹–æ‹‰åˆ†é¡ */
        .drag-area {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .source-container {
            width: 100%;
            min-height: 80px;
            background: #eee;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }

        .drop-zone {
            flex: 1;
            min-height: 150px;
            border: 3px dashed #ccc;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            transition: background 0.3s;
        }

        .drop-zone h4 {
            margin: 0 0 10px 0;
            color: #666;
        }

        .drop-zone.valid-zone { border-color: var(--success-color); background: #f0fff4; }
        .drop-zone.invalid-zone { border-color: var(--accent-color); background: #fff5f5; }

        .draggable-item {
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid #333;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: move;
            user-select: none;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }

        /* æ‰‹æ©Ÿç‰ˆæŒ‰éˆ•è¼”åŠ© */
        .mobile-move-btns {
            display: none; /* JSåµæ¸¬é¡¯ç¤ºæˆ–é è¨­éš±è— */
            font-size: 0.8em;
            margin-top: 5px;
        }
        
        /* è¤‡é¸é¡Œå€åŸŸ */
        .quiz-option {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.2s;
        }

        .quiz-option:hover {
            background: #e9ecef;
        }

        .quiz-option input[type="checkbox"] {
            transform: scale(1.5);
            margin-right: 15px;
        }

        .check-btn, .reset-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
            transition: 0.3s;
        }

        .check-btn:hover { background: #34495e; }
        
        .reset-btn {
            background: #95a5a6;
            margin-top: 10px;
        }

        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .feedback-correct { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .feedback-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* é™·é˜±å¡èˆ‡è§£æ */
        .trap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .trap-card {
            background: #fff;
            border: 2px solid var(--accent-color);
            padding: 15px;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .trap-card.faded {
            opacity: 0.3;
            pointer-events: none;
            border-color: #ccc;
        }

        .trap-title {
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 5px;
        }

        .hint-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .hint-text {
            display: none;
            margin-top: 8px;
            color: #0c5460;
            background-color: #d1ecf1;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.95em;
        }

        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 600px) {
            .hex-grid { grid-template-columns: repeat(3, 1fr); }
            .drag-area { flex-direction: column; }
            .drop-zone { width: auto; }
        }
    </style>
</head>
<body>

<div class="container">
    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="border-bottom: 3px solid var(--primary-color); display: inline-block; padding-bottom: 10px;">é›»è…¦æ¦‚è«–ï¼šé€²ä½åˆ¶è¡¨ç¤ºæ³•</h1>
        <p>å–®å…ƒä¸»é¡Œï¼šè¤‡é¸é¡Œ 33 ä¹‹ åå…­é€²ä½çš„ç§˜å¯†</p>
    </div>

    <!-- 1. æ ¸å¿ƒè§€å¿µå€ -->
    <div class="section-card">
        <div class="section-title">è§€å¿µæ•´ç†ï¼šä»€éº¼æ˜¯åå…­é€²ä½ï¼Ÿ</div>
        <p>
            <span class="term">åå…­é€²ä½ (Hexadecimal)</span>ï¼šé€™æ˜¯ä¸€ç¨®é›»è…¦å¸¸ç”¨çš„æ•¸å­—è¡¨ç¤ºæ³•ï¼Œä»¥ã€Œ16ã€ç‚ºåŸºåº•ã€‚
            é€™å°±åƒæˆ‘å€‘å¹³å¸¸çš„æ™‚é–“ã€Œ60ç§’é€²1åˆ†é˜ã€ï¼Œåå…­é€²ä½å‰‡æ˜¯ã€Œæ•¸åˆ°16å°±é€²ä½ã€ã€‚
        </p>
        
        <div class="highlight-box">
            <h3>ğŸ”‘ ç¬¦è™Ÿè¦å‰‡ï¼ˆè¶…ç´šé‡è¦ï¼‰</h3>
            <p>æ—¢ç„¶è¦è¡¨ç¤º 0~15 é€™ 16 å€‹æ•¸å­—ï¼Œæˆ‘å€‘éœ€è¦ 16 å€‹ç¬¦è™Ÿï¼š</p>
            <ul>
                <li><strong>æ•¸å­—ï¼š</strong> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 (å…± 10 å€‹)</li>
                <li><strong>å­—æ¯ï¼š</strong> A, B, C, D, E, F (ç”¨ä¾†ä»£è¡¨ 10~15ï¼Œå…± 6 å€‹)</li>
            </ul>
            <p style="color: var(--accent-color); font-weight: bold;">
                ğŸ‘‰ è¶…é F çš„å­—æ¯ï¼ˆå¦‚ G, H, I, X, Y, Z...ï¼‰åœ¨åå…­é€²ä½ä¸­ä¸€å¾‹æ˜¯ã€Œéæ³•ç¬¦è™Ÿã€ï¼
            </p>
        </div>

        <div class="memory-tip">
            å£è¨£ï¼š<strong>ã€Œåå…­é€²ä½åªåˆ° Fï¼Œçœ‹åˆ° G ä»¥å¾Œéƒ½ä¸è¡Œï¼ã€</strong>
        </div>
    </div>

    <!-- 2. äº’å‹• Cï¼šæ•¸å€¼å°æ‡‰ -->
    <div class="section-card">
        <div class="section-title">ğŸ–ï¸ äº’å‹•ç†è§£ï¼šA~F åˆ°åº•æ˜¯å¤šå°‘ï¼Ÿ</div>
        <p>é»æ“Šä¸‹æ–¹çš„å­—æ¯ï¼Œçœ‹çœ‹å®ƒåœ¨åé€²ä½ä¸­ä»£è¡¨å¤šå°‘ï¼š</p>
        <div class="hex-grid">
            <button class="hex-btn" onclick="showValue('A', 10)">A</button>
            <button class="hex-btn" onclick="showValue('B', 11)">B</button>
            <button class="hex-btn" onclick="showValue('C', 12)">C</button>
            <button class="hex-btn" onclick="showValue('D', 13)">D</button>
            <button class="hex-btn" onclick="showValue('E', 14)">E</button>
            <button class="hex-btn" onclick="showValue('F', 15)">F</button>
        </div>
        <div id="valueDisplay" class="value-display"></div>
    </div>

    <!-- 3. äº’å‹• Aï¼šæ‹–æ‹‰åˆ†é¡ -->
    <div class="section-card">
        <div class="section-title">ğŸ® å¯¦æˆ°æ¼”ç·´ï¼šèª°æ˜¯åˆæ³•çš„ï¼Ÿ</div>
        <p>è«‹å°‡ä¸‹æ–¹çš„è‹±æ–‡å­—æ¯ï¼Œæ‹–æ›³ï¼ˆæˆ–é»æ“Šåˆ†é¡ï¼‰åˆ°æ­£ç¢ºçš„æ ¼å­è£¡ï¼š</p>
        
        <div class="source-container" id="sourceContainer">
            <!-- é€™äº›å…ƒç´ æœƒç”± JS ç”Ÿæˆï¼Œæˆ–è€…ç›´æ¥å¯«æ­» -->
            <div class="draggable-item" draggable="true" id="d-A" ondragstart="drag(event)" onclick="moveItemClick(this)">A</div>
            <div class="draggable-item" draggable="true" id="d-B" ondragstart="drag(event)" onclick="moveItemClick(this)">B</div>
            <div class="draggable-item" draggable="true" id="d-X" ondragstart="drag(event)" onclick="moveItemClick(this)">X</div>
            <div class="draggable-item" draggable="true" id="d-C" ondragstart="drag(event)" onclick="moveItemClick(this)">C</div>
            <div class="draggable-item" draggable="true" id="d-Y" ondragstart="drag(event)" onclick="moveItemClick(this)">Y</div>
            <div class="draggable-item" draggable="true" id="d-D" ondragstart="drag(event)" onclick="moveItemClick(this)">D</div>
            <div class="draggable-item" draggable="true" id="d-Z" ondragstart="drag(event)" onclick="moveItemClick(this)">Z</div>
            <div class="draggable-item" draggable="true" id="d-E" ondragstart="drag(event)" onclick="moveItemClick(this)">E</div>
            <div class="draggable-item" draggable="true" id="d-F" ondragstart="drag(event)" onclick="moveItemClick(this)">F</div>
        </div>

        <p style="font-size: 0.9em; color: #666; text-align: center;">(æ‰‹æ©Ÿç‰ˆè«‹é»é¸åœ“çƒå¾Œï¼Œå†é»é¸ä¸‹æ–¹æ¡†æ¡†)</p>

        <div class="drag-area">
            <div class="drop-zone valid-zone" id="validZone" ondrop="drop(event, 'valid')" ondragover="allowDrop(event)" onclick="targetClick('valid')">
                <h4>âœ… åˆæ³•ç¬¦è™Ÿ</h4>
            </div>
            <div class="drop-zone invalid-zone" id="invalidZone" ondrop="drop(event, 'invalid')" ondragover="allowDrop(event)" onclick="targetClick('invalid')">
                <h4>âŒ ä¸åˆæ³•ç¬¦è™Ÿ</h4>
            </div>
        </div>
        <button class="check-btn" onclick="checkDragAnswer()" style="margin-bottom: 10px;">æª¢æŸ¥åˆ†é¡çµæœ</button>
        <div id="dragFeedback" class="feedback-box"></div>
    </div>

    <!-- 4. é¡Œç›® 33 -->
    <div class="section-card" style="border-left-color: var(--accent-color);">
        <div class="section-title" style="color: var(--accent-color);">âœï¸ è¤‡é¸é¡Œ 33</div>
        <p style="font-size: 1.1em; font-weight: bold; margin-bottom: 20px;">
            ä¸‹åˆ—å“ªå€‹è‹±æ–‡å­—æ¯ <span style="color: red; text-decoration: underline;">ä¸æ˜¯</span> åˆæ³•çš„åå…­é€²ä½è¡¨ç¤ºçš„ç¬¦è™Ÿï¼Ÿï¼ˆæœ¬é¡Œå¯è¤‡é¸ï¼‰
        </p>

        <div id="quizForm">
            <label class="quiz-option">
                <input type="checkbox" name="q33" value="A"> (A) X
            </label>
            <label class="quiz-option">
                <input type="checkbox" name="q33" value="B"> (B) C
            </label>
            <label class="quiz-option">
                <input type="checkbox" name="q33" value="C"> (C) Y
            </label>
            <label class="quiz-option">
                <input type="checkbox" name="q33" value="D"> (D) F
            </label>
            <label class="quiz-option">
                <input type="checkbox" name="q33" value="E"> (E) Z
            </label>
        </div>

        <button class="check-btn" onclick="checkQuiz()">é€å‡ºç­”æ¡ˆ</button>
        <div id="quizFeedback" class="feedback-box"></div>
    </div>

    <!-- 5. é¸é …è§£æäº’å‹• D -->
    <div class="section-card">
        <div class="section-title">ğŸ” é¸é …é€ä¸€è§£æ (é»æ“ŠæŸ¥çœ‹)</div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button class="hex-btn" onclick="analyzeOption('X')">è§£æ X</button>
            <button class="hex-btn" onclick="analyzeOption('C')">è§£æ C</button>
            <button class="hex-btn" onclick="analyzeOption('Y')">è§£æ Y</button>
            <button class="hex-btn" onclick="analyzeOption('F')">è§£æ F</button>
            <button class="hex-btn" onclick="analyzeOption('Z')">è§£æ Z</button>
        </div>
        <div id="analysisDisplay" class="highlight-box" style="display:none; margin-top: 15px;"></div>
    </div>

    <!-- 6. é™·é˜±å¡äº’å‹• E -->
    <div class="section-card">
        <div class="section-title">âš ï¸ è€ƒè©¦å¸¸è¦‹é™·é˜± (é»æ“Šå¡ç‰‡ç ´è§£)</div>
        <div class="trap-grid">
            <div class="trap-card" onclick="dismissTrap(this)">
                <div class="trap-title">é™·é˜± 1</div>
                <p>ä»¥ç‚ºæ‰€æœ‰è‹±æ–‡å­—æ¯éƒ½å¯ä»¥ï¼Ÿ</p>
                <small style="color: #666;">(é»æˆ‘çœ‹æ­£è§£)</small>
                <div class="hint-text" style="display: block; margin-top: 5px;">éŒ¯ï¼åªæœ‰ A~F å¯ä»¥ï¼ŒG ä¹‹å¾Œéƒ½ä¸è¡Œï¼</div>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <div class="trap-title">é™·é˜± 2</div>
                <p>çœ‹åˆ° C æˆ– F å°±ä»¥ç‚ºæ˜¯éŒ¯çš„ï¼Ÿ</p>
                <small style="color: #666;">(é»æˆ‘çœ‹æ­£è§£)</small>
                <div class="hint-text" style="display: block; margin-top: 5px;">éŒ¯ï¼C=12, F=15ï¼Œå®ƒå€‘æ˜¯éå¸¸åˆæ³•çš„ç¬¦è™Ÿã€‚</div>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <div class="trap-title">é™·é˜± 3</div>
                <p>è¤‡é¸é¡Œåªé¸ä¸€å€‹ï¼Ÿ</p>
                <small style="color: #666;">(é»æˆ‘çœ‹æ­£è§£)</small>
                <div class="hint-text" style="display: block; margin-top: 5px;">é€™é¡Œæœ‰ 3 å€‹ä¸åˆæ³•çš„å­—æ¯ï¼Œå°‘é¸å°±ä¸ç®—å…¨å°å–”ï¼</div>
            </div>
        </div>
    </div>

    <!-- 7. è‡ªæˆ‘æª¢æ¸¬ F -->
    <div class="section-card">
        <div class="section-title">ğŸ§  è‡ªæˆ‘æª¢æ¸¬</div>
        
        <div style="margin-bottom: 15px;">
            <p><strong>Q1ï¼šç‚ºä»€éº¼åå…­é€²ä½ä¸ç”¨ G ä¹‹å¾Œçš„å­—æ¯ï¼Ÿ</strong></p>
            <button class="hint-btn" onclick="toggleHint('h1')">é¡¯ç¤ºæç¤º</button>
            <div id="h1" class="hint-text">å› ç‚º 0~9 åŠ  A~F å‰›å¥½å°±æ˜¯ 16 å€‹ç¬¦è™Ÿï¼Œå·²ç¶“å¤ ç”¨äº†ï¼ä¸éœ€è¦ç”¨åˆ° Gã€‚</div>
        </div>

        <div style="margin-bottom: 15px;">
            <p><strong>Q2ï¼šå¦‚æœæ˜¯å…«é€²ä½ (Octal)ï¼Œæœƒç”¨åˆ°è‹±æ–‡å­—æ¯å—ï¼Ÿ</strong></p>
            <button class="hint-btn" onclick="toggleHint('h2')">é¡¯ç¤ºæç¤º</button>
            <div id="h2" class="hint-text">ä¸æœƒï¼å…«é€²ä½åªç”¨ 0,1,2,3,4,5,6,7 é€™ 8 å€‹æ•¸å­—å°±å¤ äº†ã€‚</div>
        </div>

        <div>
            <p><strong>Q3ï¼šè€ƒè©¦ä¸­å¦‚ä½•æœ€å¿«åˆ¤æ–·åå…­é€²ä½åˆæ³•ç¬¦è™Ÿï¼Ÿ</strong></p>
            <button class="hint-btn" onclick="toggleHint('h3')">é¡¯ç¤ºæç¤º</button>
            <div id="h3" class="hint-text">å¿ƒä¸­é»˜å¿µã€Œ0åˆ°9ã€èˆ‡ã€ŒAåˆ°Fã€ã€‚åªè¦ä¸åœ¨é€™ç¯„åœå…§çš„ï¼Œç›´æ¥æ‰“å‰ï¼</div>
        </div>
    </div>

    <button class="reset-btn" onclick="resetAll()">ğŸ”„ å…¨éƒ¨é‡ç½® / å†ç·´ç¿’ä¸€æ¬¡</button>

    <div style="text-align: center; margin-top: 30px; color: #888; font-size: 0.9em;">
        &copy; é›»è…¦æ¦‚è«–è£œæ•™åå¸«åœ˜éšŠ | å°ˆç‚ºé«˜ä¸­ç”Ÿæ‰“é€ 
    </div>
</div>

<script>
    /* * å…¨åŸŸè®Šæ•¸èˆ‡è³‡æ–™
     */
    const validSymbols = ['A', 'B', 'C', 'D', 'E', 'F'];
    const invalidSymbols = ['X', 'Y', 'Z'];
    let selectedDragItem = null; // æ‰‹æ©Ÿç‰ˆé»æ“Šç§»å‹•ç”¨

    /* * äº’å‹• Cï¼šæ•¸å€¼å°æ‡‰
     */
    function showValue(char, val) {
        const display = document.getElementById('valueDisplay');
        
        // ç§»é™¤å…¶ä»–æŒ‰éˆ•çš„ active ç‹€æ…‹
        document.querySelectorAll('.hex-btn').forEach(btn => btn.classList.remove('active'));
        // åŠ ä¸Šç•¶å‰æŒ‰éˆ• active
        event.target.classList.add('active');

        display.style.display = 'block';
        display.innerHTML = `
            <strong>ç¬¦è™Ÿ <span style="color:red; font-size:1.5em;">${char}</span></strong> 
            åœ¨åé€²ä½ä¸­ä»£è¡¨æ•¸å€¼ 
            <strong><span style="color:blue; font-size:1.5em;">${val}</span></strong>
            <br><small>èªªæ˜ï¼šåå…­é€²ä½æœ€å¤šåªèƒ½è¡¨ç¤ºåˆ° 15 (F)ï¼Œè¶…éå°±è¦é€²ä½å›‰ï¼</small>
        `;
    }

    /* * äº’å‹• Aï¼šæ‹–æ‹‰èˆ‡é»æ“Šç§»å‹•é‚è¼¯
     */
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev, zoneType) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var element = document.getElementById(data);
        
        // ç¢ºä¿æ”¾åˆ° drop-zone æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ƒçš„å­å…ƒç´ 
        let target = ev.target;
        if (!target.classList.contains('drop-zone')) {
            target = target.closest('.drop-zone');
        }
        
        target.appendChild(element);
    }

    // æ‰‹æ©Ÿç‰ˆ/æ»‘é¼ é»æ“Šç§»å‹•é‚è¼¯
    function moveItemClick(el) {
        // å¦‚æœå·²ç¶“é¸å–äº†ä¸€å€‹ï¼Œå†æ¬¡é»æ“Šå–æ¶ˆé¸å–
        if (selectedDragItem === el) {
            el.style.borderColor = "#333";
            el.style.background = "white";
            selectedDragItem = null;
            return;
        }

        // æ¸…é™¤ä¹‹å‰çš„é¸å–æ¨£å¼
        if (selectedDragItem) {
            selectedDragItem.style.borderColor = "#333";
            selectedDragItem.style.background = "white";
        }

        // é¸å–ç•¶å‰
        selectedDragItem = el;
        el.style.borderColor = "var(--accent-color)";
        el.style.background = "#fff0f0";
    }

    function targetClick(zoneType) {
        if (selectedDragItem) {
            const zoneId = zoneType === 'valid' ? 'validZone' : 'invalidZone';
            document.getElementById(zoneId).appendChild(selectedDragItem);
            
            // é‡ç½®æ¨£å¼
            selectedDragItem.style.borderColor = "#333";
            selectedDragItem.style.background = "white";
            selectedDragItem = null;
        }
    }

    function checkDragAnswer() {
        const validZone = document.getElementById('validZone');
        const invalidZone = document.getElementById('invalidZone');
        const feedback = document.getElementById('dragFeedback');
        
        let correctCount = 0;
        let errors = [];

        // æª¢æŸ¥ Valid Zone è£¡çš„å…ƒç´ 
        validZone.querySelectorAll('.draggable-item').forEach(item => {
            const char = item.innerText;
            if (validSymbols.includes(char)) {
                correctCount++;
            } else {
                errors.push(`${char} æ˜¯ä¸åˆæ³•çš„ï¼Œä¸è©²æ”¾åœ¨åˆæ³•å€ï¼`);
            }
        });

        // æª¢æŸ¥ Invalid Zone è£¡çš„å…ƒç´ 
        invalidZone.querySelectorAll('.draggable-item').forEach(item => {
            const char = item.innerText;
            if (invalidSymbols.includes(char)) {
                correctCount++;
            } else {
                errors.push(`${char} æ˜¯åˆæ³•çš„ (A~F)ï¼Œä¸è©²æ”¾åœ¨ä¸åˆæ³•å€ï¼`);
            }
        });

        // æª¢æŸ¥æ˜¯å¦é‚„æœ‰æ²’åˆ†é¡çš„
        const remaining = document.getElementById('sourceContainer').children.length;
        if (remaining > 0) {
            feedback.className = 'feedback-box feedback-error';
            feedback.style.display = 'block';
            feedback.innerHTML = `é‚„æœ‰ ${remaining} å€‹ç¬¦è™Ÿæ²’åˆ†é¡å–”ï¼è«‹ç¹¼çºŒåŠªåŠ›ã€‚`;
            return;
        }

        if (errors.length === 0) {
            feedback.className = 'feedback-box feedback-correct';
            feedback.innerHTML = `<strong>å¤ªå¼·äº†ï¼å®Œå…¨æ­£ç¢ºï¼</strong><br>ä½ å·²ç¶“æ¸…æ¥šæŒæ¡ A~F æ˜¯åˆæ³•çš„ï¼Œå…¶ä»–éƒ½æ˜¯ä¸åˆæ³•çš„è§€å¿µå›‰ï¼`;
        } else {
            feedback.className = 'feedback-box feedback-error';
            feedback.innerHTML = `<strong>å“å‘€ï¼Œæœ‰éŒ¯èª¤å–”ï¼š</strong><br>${errors.join('<br>')}`;
        }
        feedback.style.display = 'block';
    }

    /* * äº’å‹• Bï¼šè¤‡é¸é¡Œé‚è¼¯
     */
    function checkQuiz() {
        const checkboxes = document.querySelectorAll('input[name="q33"]:checked');
        const feedback = document.getElementById('quizFeedback');
        let selectedValues = [];
        checkboxes.forEach((cb) => {
            selectedValues.push(cb.value);
        });

        // æ­£ç¢ºç­”æ¡ˆï¼šA (X), C (Y), E (Z) å› ç‚ºé¡Œç›®å•"ä¸æ˜¯"åˆæ³•çš„
        // å°æ‡‰ input value åˆ†åˆ¥æ˜¯ A, C, E
        // ä¿®æ­£é‚è¼¯ï¼šé¡Œç›®é¸é …(A)çš„å…§å®¹æ˜¯Xï¼Œé¸é …(B)çš„å…§å®¹æ˜¯C...
        // HTMLçµæ§‹: value="A" ä»£è¡¨é¸äº† (A) X
        
        const correctAnswers = ['A', 'C', 'E']; // (A)X, (C)Y, (E)Z æ˜¯ä¸åˆæ³•çš„
        
        // åˆ¤æ–·é‚è¼¯
        // 1. æª¢æŸ¥æœ‰æ²’æœ‰é¸éŒ¯çš„ (é¸äº† B æˆ– D)
        // 2. æª¢æŸ¥æœ‰æ²’æœ‰å°‘é¸
        
        let isCorrect = true;
        let msg = "";

        // æª¢æŸ¥æ˜¯å¦å®Œå…¨ç›¸ç­‰
        if (selectedValues.length === 3 && 
            selectedValues.includes('A') && 
            selectedValues.includes('C') && 
            selectedValues.includes('E')) {
            
            feedback.className = 'feedback-box feedback-correct';
            feedback.innerHTML = `
                <strong>å®Œå…¨æ­£ç¢ºï¼ ğŸ‰</strong><br>
                Xã€Yã€Z éƒ½è¶…éäº† Fï¼Œæ‰€ä»¥å®ƒå€‘éƒ½ä¸æ˜¯åˆæ³•çš„åå…­é€²ä½ç¬¦è™Ÿã€‚<br>
                ä½ å¾ˆç´°å¿ƒï¼Œé€™é¡Œè¤‡é¸é¡Œæ‹¿æ»¿åˆ†ï¼
            `;
            feedback.style.display = 'block';
            return;
        }

        // éŒ¯èª¤åˆ†æ
        feedback.className = 'feedback-box feedback-error';
        let errorMsg = [];
        
        // æª¢æŸ¥èª¤é¸åˆæ³•çš„
        if (selectedValues.includes('B')) errorMsg.push("é¸é … (B) æ˜¯ Cï¼ŒC åœ¨ A~F ä¹‹é–“ï¼Œå®ƒæ˜¯åˆæ³•çš„å–”ï¼");
        if (selectedValues.includes('D')) errorMsg.push("é¸é … (D) æ˜¯ Fï¼ŒF æ˜¯æœ€å¤§çš„åˆæ³•ç¬¦è™Ÿï¼Œå®ƒæ˜¯åˆæ³•çš„å–”ï¼");

        // æª¢æŸ¥æ¼é¸ä¸åˆæ³•çš„
        if (!selectedValues.includes('A')) errorMsg.push("é¸é … (A) æ˜¯ Xï¼ŒX è¶…é F äº†ï¼Œå®ƒæ˜¯ä¸åˆæ³•çš„ï¼ˆè¦é¸ï¼ï¼‰ã€‚");
        if (!selectedValues.includes('C')) errorMsg.push("é¸é … (C) æ˜¯ Yï¼ŒY è¶…é F äº†ï¼Œå®ƒæ˜¯ä¸åˆæ³•çš„ï¼ˆè¦é¸ï¼ï¼‰ã€‚");
        if (!selectedValues.includes('E')) errorMsg.push("é¸é … (E) æ˜¯ Zï¼ŒZ è¶…é F äº†ï¼Œå®ƒæ˜¯ä¸åˆæ³•çš„ï¼ˆè¦é¸ï¼ï¼‰ã€‚");

        if (selectedValues.length === 0) {
            feedback.innerHTML = "ä½ é‚„æ²’å‹¾é¸ä»»ä½•ç­”æ¡ˆå–”ï¼è¨˜å¾—é€™æ˜¯è¤‡é¸é¡Œã€‚";
        } else {
            feedback.innerHTML = `<strong>å¯æƒœï¼Œç­”æ¡ˆä¸å°å–”ï¼š</strong><br><ul><li>${errorMsg.join('</li><li>')}</li></ul>`;
        }
        feedback.style.display = 'block';
    }

    /* * äº’å‹• Dï¼šé¸é …è§£æ
     */
    function analyzeOption(symbol) {
        const display = document.getElementById('analysisDisplay');
        display.style.display = 'block';
        
        let isValid = validSymbols.includes(symbol);
        let reason = "";
        
        if (symbol === 'X' || symbol === 'Y' || symbol === 'Z') {
            reason = `å®ƒæ’åœ¨ F çš„å¾Œé¢ï¼Œå±¬æ–¼ G~Z çš„ç¯„åœï¼Œæ‰€ä»¥åœ¨åå…­é€²ä½ä¸­æ˜¯<strong>ä¸åˆæ³•</strong>çš„ã€‚`;
        } else if (symbol === 'C') {
            reason = `C ä»£è¡¨æ•¸å€¼ 12ï¼Œä»‹æ–¼ 0~15 ä¹‹é–“ï¼Œæ˜¯<strong>åˆæ³•</strong>çš„ã€‚`;
        } else if (symbol === 'F') {
            reason = `F ä»£è¡¨æ•¸å€¼ 15ï¼Œå®ƒæ˜¯åå…­é€²ä½ä¸­<strong>æœ€å¤§</strong>çš„åˆæ³•ç¬¦è™Ÿã€‚`;
        }

        display.innerHTML = `
            <h4>è§£æç¬¦è™Ÿï¼š${symbol}</h4>
            <p>æ˜¯å¦åˆæ³•ï¼š<span style="color: ${isValid ? 'green' : 'red'}; font-weight:bold; font-size:1.2em;">${isValid ? 'â­• æ˜¯' : 'âŒ å¦'}</span></p>
            <p>åŸå› ï¼š${reason}</p>
        `;
    }

    /* * äº’å‹• Eï¼šé™·é˜±å¡
     */
    function dismissTrap(card) {
        card.classList.add('faded');
        // æ‰¾åˆ°è£¡é¢çš„ hint-text è®“å®ƒåç™½æˆ–å¼·èª¿ä¸€ä¸‹ï¼Œé€™è£¡ç›´æ¥è®“å®ƒè®Šæ·¡è¡¨ç¤º"å·²è§£æ±º"
        const hint = card.querySelector('.hint-text');
        hint.style.backgroundColor = "#d4edda";
        hint.style.color = "#155724";
        hint.innerHTML += " (å·²ç ´è§£)";
    }

    /* * äº’å‹• Fï¼šæç¤ºé–‹é—œ
     */
    function toggleHint(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    /* * å…¨åŸŸé‡ç½®
     */
    function resetAll() {
        // é‡ç½®æ‹–æ‹‰å€
        const source = document.getElementById('sourceContainer');
        const items = document.querySelectorAll('.draggable-item');
        items.forEach(item => source.appendChild(item));
        document.getElementById('dragFeedback').style.display = 'none';
        selectedDragItem = null;
        items.forEach(item => {
            item.style.borderColor = "#333";
            item.style.background = "white";
        });

        // é‡ç½®è¤‡é¸é¡Œ
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
        document.getElementById('quizFeedback').style.display = 'none';

        // é‡ç½®æ•¸å€¼é¡¯ç¤º
        document.getElementById('valueDisplay').style.display = 'none';
        document.querySelectorAll('.hex-btn').forEach(btn => btn.classList.remove('active'));

        // é‡ç½®è§£æå€
        document.getElementById('analysisDisplay').style.display = 'none';

        // é‡ç½®é™·é˜±å¡
        document.querySelectorAll('.trap-card').forEach(card => {
            card.classList.remove('faded');
            const hint = card.querySelector('.hint-text');
            // æ¢å¾©åŸå§‹æç¤ºæ–‡å­—å¤ªéº»ç…©ï¼Œç°¡å–®éš±è—ä¸¦æ¢å¾©é¡è‰²å³å¯ï¼Œé€™è£¡ç°¡åŒ–è™•ç†é‡æ•´é é¢æœ€å¿«ï¼Œ
            // ä½†ç‚ºäº†å–®é é«”é©—ï¼Œæˆ‘å€‘åªæŠŠæ¨£å¼æ”¹å›ä¾†ã€‚
            // å¯¦éš›æ•™å­¸ä¸­ï¼Œå­¸ç”Ÿå¯èƒ½æƒ³é‡æ–°çœ‹ä¸€æ¬¡ã€‚
        });
        
        // æ²å‹•åˆ°é ‚éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>

</body>
</html>