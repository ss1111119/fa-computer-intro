<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«–é‡é»è¤‡ç¿’ï¼šå…¨åŠ æ³•å™¨è¼¸å‡ºè¾¨è­˜</title>
    <style>
        /* --- åŸºç¤è¨­å®š (Base Styles) --- */
        :root {
            --primary-color: #333;
            --accent-color: #d32f2f; /* é‡é»ç´… */
            --highlight-color: #fff176; /* è¢å…‰ç­†é»ƒ */
            --bg-color: #fdfdfd;
            --section-bg: #fff;
            --border-color: #e0e0e0;
        }

        body {
            font-family: "Microsoft JhengHei", "Noto Sans TC", sans-serif;
            line-height: 1.6;
            color: var(--primary-color);
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--section-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* --- æ’ç‰ˆå…ƒä»¶ (Layout Components) --- */
        h1, h2, h3 {
            margin-top: 0;
            color: #222;
        }

        h1 {
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            font-size: 1.5rem;
            text-align: center;
        }

        h2 {
            font-size: 1.2rem;
            background-color: #eee;
            padding: 8px 12px;
            border-left: 5px solid var(--primary-color);
            margin-top: 30px;
            margin-bottom: 15px;
        }

        p { margin-bottom: 15px; }

        /* --- ç‰¹æ•ˆèˆ‡è£é£¾ (Effects) --- */
        .highlight {
            background-color: var(--highlight-color);
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .note {
            font-size: 0.9rem;
            color: #666;
            background-color: #f9f9f9;
            padding: 10px;
            border-left: 3px solid #999;
            margin: 10px 0;
        }

        .tag {
            display: inline-block;
            background: #e0e0e0;
            color: #444;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-right: 5px;
        }

        /* --- é¡Œç›®å€å¡Š (Question Section) --- */
        .question-box {
            border: 2px solid var(--primary-color);
            padding: 20px;
            margin-bottom: 20px;
            background-color: #fff;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .options-list li {
            margin: 8px 0;
            padding: 5px;
        }

        /* --- äº’å‹•å€å¡Š (Interactive Section) --- */
        .interactive-panel {
            background-color: #f0f7ff;
            border: 1px solid #cce0ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
        }

        /* SVG å®¹å™¨ */
        .svg-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            overflow: visible;
        }

        /* é–‹é—œæŒ‰éˆ•æ¨£å¼ */
        .switch-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .toggle-btn {
            background: white;
            border: 2px solid #555;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.2s;
            min-width: 60px;
        }

        .toggle-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .toggle-btn:hover { transform: translateY(-2px); }

        .result-display {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 15px;
            padding: 10px;
            background: white;
            border: 1px dashed #aaa;
            display: inline-block;
        }

        /* --- ä½œç­”å€ (Quiz Area) --- */
        .quiz-area {
            background-color: #fff8e1;
            border: 1px solid #ffe0b2;
            padding: 20px;
            border-radius: 8px;
        }

        .quiz-options label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            padding: 5px;
        }
        
        .quiz-options input { margin-right: 10px; }

        .btn-submit {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }

        .btn-submit:hover { opacity: 0.9; }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .feedback.correct { background-color: #dcedc8; color: #33691e; }
        .feedback.wrong { background-color: #ffcdd2; color: #b71c1c; }

        /* --- RWD èª¿æ•´ --- */
        @media (max-width: 600px) {
            .container { padding: 15px; }
            h1 { font-size: 1.2rem; }
            .switch-group { gap: 10px; }
            .toggle-btn { padding: 8px 10px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- A. æ¨™é¡Œå€ -->
    <h1>é¡Œè™Ÿ 42. å…¨åŠ æ³•å™¨ (Full Adder) è¼¸å‡ºè¾¨è­˜</h1>

    <!-- B. é¡Œç›®å€ -->
    <div class="question-box">
        <p><strong>42. ä¸‹åˆ—ä½•è€…ç‚ºå…¨åŠ æ³•å™¨ (full adder) çš„è¼¸å‡º?</strong></p>
        <ul class="options-list">
            <li>(A) å’Œ (sum)</li>
            <li>(B) å·® (difference)</li>
            <li>(C) ç© (product)</li>
            <li>(D) å‰ä¸€ä½å…ƒé€²ä½ (p-carry)</li>
            <li>(E) é€²ä½ (carry)</li>
        </ul>
        <details>
            <summary style="cursor: pointer; color: #666;">ï¼ˆé»æ“ŠæŸ¥çœ‹æ¨™æº–ç­”æ¡ˆï¼‰</summary>
            <p style="margin-top: 10px; font-weight: bold; color: var(--accent-color);">ç­”æ¡ˆï¼šA, E</p>
        </details>
    </div>

    <!-- C. ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­— -->
    <h2>ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h2>
    <p>è«‹æ‹¿å‡ºä½ çš„è¢å…‰ç­†ï¼ŒæŠŠé¡Œç›®ä¸­çš„ <span class="highlight">å…¨åŠ æ³•å™¨ (full adder)</span> å’Œ <span class="highlight">è¼¸å‡º</span> ç•«èµ·ä¾†ã€‚</p>
    <div class="note">
        è€å¸«æé†’ï¼šé¡Œç›®å•çš„æ˜¯é›»è·¯è¨ˆç®—å®Œã€Œåå‡ºä¾†çš„çµæœã€æœ‰å“ªäº›ï¼Œä¸æ˜¯å•å®ƒèº«ä¸Šæ‰€æœ‰çš„æ¥è…³å–”ï¼
    </div>

    <!-- D. ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ -->
    <h2>ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h2>
    <p>å…¨åŠ æ³•å™¨å°±åƒä¸€å€‹è² è²¬ç®—æ•¸çš„å°å·¥äººï¼Œå®ƒçš„å·¥ä½œæ˜¯ï¼š</p>
    <blockquote>
        ã€ŒæŠŠæ‰‹ä¸Šçš„ä¸‰å€‹æ±è¥¿ï¼ˆAã€Bã€ä¸Šä¸€ä½çš„é€²ä½ï¼‰åŠ èµ·ä¾†ï¼Œæœ€å¾Œæœƒ<strong>åå‡ºå“ªå…©å€‹çµæœ</strong>ï¼Ÿã€
    </blockquote>

    <!-- E. ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ -->
    <h2>ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h2>
    <p>é€™é¡Œè€ƒçš„æ˜¯ä½ å° <strong>å…¨åŠ æ³•å™¨ (Full Adder)</strong> è¼¸å…¥èˆ‡è¼¸å‡ºå®šç¾©çš„ç†Ÿæ‚‰åº¦ã€‚</p>
    <ol>
        <li><strong>å…ˆè¨˜è¼¸å…¥ (Input)</strong>ï¼šé€™æ˜¯ä¸€å€‹ 3 è¼¸å…¥çš„é›»è·¯ã€‚
            <ul>
                <li><strong>A</strong>ï¼šæœ¬ä½æ•¸ 1</li>
                <li><strong>B</strong>ï¼šæœ¬ä½æ•¸ 2</li>
                <li><strong>Cin</strong>ï¼šå‰ä¸€ä½å…ƒé€²ä½ (p-carry)ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€ä½ç®—å®Œå‰©ä¸‹çš„é€²ä½ï¼Œæˆ‘å€‘è¦æŠŠå®ƒåŠ é€²ä¾†ã€‚</li>
            </ul>
        </li>
        <li><strong>å†è¨˜è¼¸å‡º (Output)</strong>ï¼šé€™æ˜¯ä¸€å€‹ 2 è¼¸å‡ºçš„é›»è·¯ã€‚
            <ul>
                <li><strong>Sum (S)</strong>ï¼šæœ¬ä½åŠ å‡ºä¾†çš„å’Œï¼ˆå€‹ä½æ•¸ï¼‰ã€‚</li>
                <li><strong>Carry (Cout)</strong>ï¼šè¦é€²ä½åˆ°ä¸‹ä¸€ä½çš„æ•¸å€¼ã€‚</li>
            </ul>
        </li>
        <li><strong>æ’é™¤å¹²æ“¾</strong>ï¼š
            <ul>
                <li>çœ‹åˆ°ã€Œå·®ã€â†’ é‚£æ˜¯æ¸›æ³•å™¨ (Subtractor)ã€‚</li>
                <li>çœ‹åˆ°ã€Œç©ã€â†’ é‚£æ˜¯ä¹˜æ³•å™¨æˆ– AND é–˜ã€‚</li>
                <li>çœ‹åˆ°ã€Œp-carryã€â†’ é€™æ˜¯è¼¸å…¥ (Cin)ï¼Œä¸æ˜¯è¼¸å‡ºã€‚</li>
            </ul>
        </li>
    </ol>

    <!-- F. äº’å‹•ç¤ºç¯„ 1ï¼šæ–¹å¡Šåœ– -->
    <h2>äº’å‹•ç¤ºç¯„ 1ï¼šå…¨åŠ æ³•å™¨æ–¹å¡Šåœ–</h2>
    <p>çœ‹åœ–è¨˜æ†¶æœ€å¿«ï¼è«‹è§€å¯Ÿå·¦é‚Šé€²å»çš„æ˜¯ä»€éº¼ï¼Ÿå³é‚Šå‡ºä¾†çš„æ˜¯ä»€éº¼ï¼Ÿ</p>
    
    <div class="interactive-panel">
        <svg class="svg-container" viewBox="0 0 400 200">
            <!-- å®šç¾©ç®­é ­ -->
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#333" />
                </marker>
            </defs>

            <!-- æœ¬é«”æ–¹å¡Š -->
            <rect x="120" y="30" width="160" height="140" fill="#fff" stroke="#333" stroke-width="3" rx="10"/>
            <text x="200" y="95" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Full Adder</text>
            <text x="200" y="115" text-anchor="middle" font-size="14" fill="#666">(å…¨åŠ æ³•å™¨)</text>

            <!-- è¼¸å…¥ç«¯ (å·¦å´) -->
            <line x1="50" y1="60" x2="115" y2="60" stroke="#2196F3" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="45" y="65" text-anchor="end" font-size="14" font-weight="bold" fill="#2196F3">A</text>

            <line x1="50" y1="100" x2="115" y2="100" stroke="#2196F3" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="45" y="105" text-anchor="end" font-size="14" font-weight="bold" fill="#2196F3">B</text>

            <line x1="50" y1="140" x2="115" y2="140" stroke="#2196F3" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="45" y="145" text-anchor="end" font-size="14" font-weight="bold" fill="#2196F3">Cin</text>
            <text x="45" y="160" text-anchor="end" font-size="10" fill="#666">(p-carry/è¼¸å…¥)</text>

            <!-- è¼¸å‡ºç«¯ (å³å´) -->
            <line x1="280" y1="80" x2="350" y2="80" stroke="#d32f2f" stroke-width="3" marker-end="url(#arrow)"/>
            <text x="360" y="85" text-anchor="start" font-size="16" font-weight="bold" fill="#d32f2f">Sum (å’Œ)</text>

            <line x1="280" y1="120" x2="350" y2="120" stroke="#d32f2f" stroke-width="3" marker-end="url(#arrow)"/>
            <text x="360" y="125" text-anchor="start" font-size="16" font-weight="bold" fill="#d32f2f">Carry (é€²ä½)</text>
        </svg>
        <div class="note" style="text-align: center;">è—è‰²æ˜¯è¼¸å…¥ (ææ–™) â†’ ç´…è‰²æ˜¯è¼¸å‡º (æˆå“)</div>
    </div>

    <!-- G. äº’å‹•ç¤ºç¯„ 2ï¼šçœŸå€¼è¡¨æ¨¡æ“¬ -->
    <h2>äº’å‹•ç¤ºç¯„ 2ï¼šé‚è¼¯æ¨¡æ“¬å™¨</h2>
    <p>è©¦è‘—åˆ‡æ›ä¸‹æ–¹çš„è¼¸å…¥é–‹é—œ (0 æˆ– 1)ï¼Œçœ‹çœ‹è¼¸å‡ºæœƒæ€éº¼è®Šï¼š</p>
    <div class="interactive-panel">
        <p><strong>è¼¸å…¥è¨Šè™Ÿ (Inputs)</strong></p>
        <div class="switch-group">
            <div id="btnA" class="toggle-btn" onclick="toggleBit('A')">A = 0</div>
            <div id="btnB" class="toggle-btn" onclick="toggleBit('B')">B = 0</div>
            <div id="btnCin" class="toggle-btn" onclick="toggleBit('Cin')">Cin = 0</div>
        </div>

        <p>â†“ ç¶“é Full Adder é‹ç®— â†“</p>
        
        <div class="result-display">
            <span style="color: #666;">ç®—å¼ï¼š</span> <span id="mathExpr">0 + 0 + 0 = 0</span><br>
            <hr style="margin: 5px 0; border: 0; border-top: 1px dashed #ccc;">
            <span style="color: #d32f2f;">è¼¸å‡ºçµæœï¼š</span> 
            Sum (å’Œ) = <span id="valSum" style="font-size: 1.5em;">0</span>, 
            Carry (é€²ä½) = <span id="valCarry" style="font-size: 1.5em;">0</span>
        </div>
        
        <div class="note" id="logicExplain">
            ç›®å‰æœ‰ 0 å€‹ 1ï¼Œä¸ç”¨é€²ä½ï¼Œæœ¬ä½å¯« 0ã€‚
        </div>
    </div>

    <!-- H. ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ -->
    <h2>ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h2>
    <ul class="options-list">
        <li>âœ… <strong>(A) å’Œ (sum)</strong>ï¼šé€™æ˜¯å…¨åŠ æ³•å™¨çš„æœ¬ä½è¼¸å‡ºçµæœï¼ˆS = A XOR B XOR Cinï¼‰ã€‚</li>
        <li>âŒ <strong>(B) å·® (difference)</strong>ï¼šé€™æ˜¯ã€Œæ¸›æ³•å™¨ã€çš„è¼¸å‡ºï¼Œä¸æ˜¯åŠ æ³•å™¨ã€‚</li>
        <li>âŒ <strong>(C) ç© (product)</strong>ï¼šé€™æ˜¯ã€Œä¹˜æ³•å™¨ã€æˆ–é‚è¼¯ AND çš„æ¦‚å¿µã€‚</li>
        <li>âŒ <strong>(D) å‰ä¸€ä½å…ƒé€²ä½ (p-carry)</strong>ï¼šé€™å€‹è©æŒ‡çš„æ˜¯ previous carryï¼Œä¹Ÿå°±æ˜¯ <span class="highlight">Cin</span>ã€‚å®ƒæ˜¯çµ¦åŠ æ³•å™¨çš„ã€Œè¼¸å…¥ã€ï¼Œä¸æ˜¯è¼¸å‡ºã€‚</li>
        <li>âœ… <strong>(E) é€²ä½ (carry)</strong>ï¼šé€™æ˜¯å…¨åŠ æ³•å™¨ç®—å®Œå¾Œï¼Œè¦é€çµ¦ä¸‹ä¸€ä½çš„é€²ä½è¼¸å‡ºï¼ˆCoutï¼‰ã€‚</li>
    </ul>

    <!-- I. è§€å¿µè£œå……èˆ‡ J. è¨˜æ†¶å£è¨£ -->
    <h2>è§€å¿µè£œå……èˆ‡å¿…èƒŒå£è¨£</h2>
    <div style="background: #e8f5e9; padding: 15px; border-radius: 5px;">
        <h3>ğŸ’¡ æ ¸å¿ƒè§€å¿µ</h3>
        <ul>
            <li><strong>Half Adder (åŠåŠ æ³•å™¨)</strong>ï¼š2 è¼¸å…¥ (A, B)ï¼Œ2 è¼¸å‡º (Sum, Carry)ã€‚åªèƒ½ç®—å€‹ä½æ•¸ï¼Œä¸èƒ½è™•ç†é€²ä½ã€‚</li>
            <li><strong>Full Adder (å…¨åŠ æ³•å™¨)</strong>ï¼š3 è¼¸å…¥ (A, B, Cin)ï¼Œ2 è¼¸å‡º (Sum, Carry)ã€‚å¯ä»¥ä¸²è¯èµ·ä¾†åšå¤šä½å…ƒåŠ æ³•ã€‚</li>
        </ul>
        
        <h3>ğŸ”¥ è¨˜æ†¶å£è¨£</h3>
        <p style="font-size: 1.2rem; font-weight: bold; color: #2e7d32;">
            ã€Œå…¨åŠ æ³•å™¨ä¸‰å…¥äºŒå‡ºï¼šè¼¸å…¥ A B åŠ é€²ä½ï¼Œè¼¸å‡ºåªæœ‰å’Œèˆ‡é€²ã€‚ã€
        </p>
    </div>

    <!-- K. å¸¸è¦‹é™·é˜± -->
    <h2>å¸¸è¦‹é™·é˜± (é¿å‘æŒ‡å—)</h2>
    <ul>
        <li>âš ï¸ <strong>é™·é˜± 1</strong>ï¼šçœ‹åˆ° p-carry (previous carry) å°±é¸ä¸‹å»ã€‚
            <br>â†’ ç ´è§£ï¼šè¨˜ä½ previous (ä¹‹å‰çš„) ä»£è¡¨æ˜¯å¤–é¢é€é€²ä¾†çš„ï¼Œæ˜¯è¼¸å…¥ï¼</li>
        <li>âš ï¸ <strong>é™·é˜± 2</strong>ï¼šæŠŠ Full Adder ç•¶æˆè¬èƒ½è¨ˆç®—æ©Ÿï¼Œé¸äº†å·®æˆ–ç©ã€‚
            <br>â†’ ç ´è§£ï¼šå®ƒçš„åå­—å« Adder (åŠ æ³•å™¨)ï¼ŒåªæœƒåšåŠ æ³•ã€‚</li>
    </ul>

    <!-- L. ä½œç­”å€ -->
    <h2>ä½œç­”ç·´ç¿’</h2>
    <div class="quiz-area">
        <p><strong>é¡Œç›®ï¼šä¸‹åˆ—ä½•è€…ç‚ºå…¨åŠ æ³•å™¨ (full adder) çš„è¼¸å‡º? (è¤‡é¸)</strong></p>
        <div class="quiz-options">
            <label><input type="checkbox" id="optA" value="A"> (A) å’Œ (sum)</label>
            <label><input type="checkbox" id="optB" value="B"> (B) å·® (difference)</label>
            <label><input type="checkbox" id="optC" value="C"> (C) ç© (product)</label>
            <label><input type="checkbox" id="optD" value="D"> (D) å‰ä¸€ä½å…ƒé€²ä½ (p-carry)</label>
            <label><input type="checkbox" id="optE" value="E"> (E) é€²ä½ (carry)</label>
        </div>
        <button class="btn-submit" onclick="checkAnswer()">é€å‡ºä½œç­”</button>
        
        <div id="quizFeedback" class="feedback"></div>
    </div>

    <!-- N. è‡ªæˆ‘æª¢æ¸¬ -->
    <h2>è‡ªæˆ‘æª¢æ¸¬ (æ€è€ƒé¡Œ)</h2>
    <p>è©¦è‘—å›ç­”ä»¥ä¸‹å•é¡Œï¼ˆä¸æä¾›æ¨™æº–ç­”æ¡ˆï¼Œè«‹å›æƒ³å‰›å‰›çš„å…§å®¹ï¼‰ï¼š</p>
    <ol>
        <li>å¦‚æœæ˜¯ã€ŒåŠåŠ æ³•å™¨ (Half Adder)ã€ï¼Œå®ƒçš„è¼¸å…¥æœ‰å“ªå¹¾å€‹ï¼Ÿè·Ÿå…¨åŠ æ³•å™¨å·®åœ¨å“ªè£¡ï¼Ÿ</li>
        <li>å¦‚æœè¼¸å…¥ A=1, B=1, Cin=1ï¼Œè«‹å•å…¨åŠ æ³•å™¨çš„è¼¸å‡º Sum æ˜¯å¤šå°‘ï¼ŸCarry æ˜¯å¤šå°‘ï¼Ÿï¼ˆæç¤ºï¼š1+1+1 = 3ï¼ŒäºŒé€²ä½æ€éº¼å¯«ï¼Ÿï¼‰</li>
    </ol>
</div>

<!-- JavaScript é‚è¼¯å€ -->
<script>
    // --- è®Šæ•¸ç‹€æ…‹ ---
    let state = {
        A: 0,
        B: 0,
        Cin: 0
    };

    // --- äº’å‹•ç¤ºç¯„ 2ï¼šé–‹é—œåˆ‡æ› ---
    function toggleBit(bit) {
        // åˆ‡æ›ç‹€æ…‹
        state[bit] = state[bit] === 0 ? 1 : 0;
        
        // æ›´æ–°æŒ‰éˆ•æ¨£å¼èˆ‡æ–‡å­—
        const btn = document.getElementById('btn' + bit);
        if (state[bit] === 1) {
            btn.classList.add('active');
            btn.innerText = bit + ' = 1';
        } else {
            btn.classList.remove('active');
            btn.innerText = bit + ' = 0';
        }

        // è¨ˆç®—é‚è¼¯
        calculateFullAdder();
    }

    // --- è¨ˆç®— Full Adder é‚è¼¯ ---
    function calculateFullAdder() {
        const { A, B, Cin } = state;
        
        // æ•¸å­¸åŠ ç¸½ (åé€²ä½æ¦‚å¿µ)
        const total = A + B + Cin;
        
        // æ•¸ä½é‚è¼¯çµæœ
        // Sum: å¥‡æ•¸å€‹ 1 ç‚º 1 (XOR)
        // ä¹Ÿå¯ä»¥çœ‹æˆ total çš„äºŒé€²ä½å€‹ä½æ•¸ (total % 2)
        const sum = total % 2;
        
        // Carry: è‡³å°‘å…©å€‹ 1 å‰‡é€²ä½
        // ä¹Ÿå¯ä»¥çœ‹æˆ total æ˜¯å¦ >= 2 (total >> 1)
        const carry = total >= 2 ? 1 : 0;

        // æ›´æ–° UI
        document.getElementById('valSum').innerText = sum;
        document.getElementById('valCarry').innerText = carry;
        document.getElementById('mathExpr').innerText = `${A} + ${B} + ${Cin} = ${total} (binary: ${carry}${sum})`;

        // ç™½è©±è§£é‡‹æ›´æ–°
        const explanation = document.getElementById('logicExplain');
        if (total === 0) {
            explanation.innerText = "ä¸‰å€‹è¼¸å…¥éƒ½æ˜¯ 0ï¼Œçµæœç•¶ç„¶éƒ½æ˜¯ 0ã€‚";
        } else if (total === 1) {
            explanation.innerText = "åªæœ‰ä¸€å€‹ 1ï¼Œä¸ç”¨é€²ä½ (Carry=0)ï¼Œæœ¬ä½å¯« 1 (Sum=1)ã€‚";
        } else if (total === 2) {
            explanation.innerText = "æœ‰å…©å€‹ 1ï¼Œç›¸åŠ ç­‰æ–¼ 2 (äºŒé€²ä½ 10)ï¼Œæ‰€ä»¥è¦é€²ä½ (Carry=1)ï¼Œæœ¬ä½å¯« 0 (Sum=0)ã€‚";
        } else {
            explanation.innerText = "ä¸‰å€‹éƒ½æ˜¯ 1ï¼Œç›¸åŠ ç­‰æ–¼ 3 (äºŒé€²ä½ 11)ï¼Œæ‰€ä»¥è¦é€²ä½ (Carry=1)ï¼Œæœ¬ä½ä¹Ÿå¯« 1 (Sum=1)ã€‚";
        }
    }

    // --- ä½œç­”å€é‚è¼¯ ---
    function checkAnswer() {
        const optA = document.getElementById('optA').checked;
        const optB = document.getElementById('optB').checked;
        const optC = document.getElementById('optC').checked;
        const optD = document.getElementById('optD').checked;
        const optE = document.getElementById('optE').checked;
        
        const feedback = document.getElementById('quizFeedback');
        feedback.style.display = 'block';

        // æ­£ç¢ºç­”æ¡ˆæ˜¯ A å’Œ E
        // éŒ¯èª¤æƒ…æ³ï¼šæ²’é¸ A æˆ– Eï¼Œæˆ–è€…é¸äº† B, C, D
        if (optA && optE && !optB && !optC && !optD) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>ğŸ‰ ç­”å°äº†ï¼</strong><br>å…¨åŠ æ³•å™¨çš„è¼¸å‡ºæ­£æ˜¯ Sum (æœ¬ä½å’Œ) èˆ‡ Carry (é€²ä½)ã€‚';
        } else {
            feedback.className = 'feedback wrong';
            let msg = '<strong>âŒ ç­”éŒ¯å›‰ï¼Œå†æƒ³ä¸€ä¸‹ï¼š</strong><br>';
            if (optB) msg += '- (B) å·®æ˜¯æ¸›æ³•å™¨çš„çµæœã€‚<br>';
            if (optC) msg += '- (C) ç©æ˜¯ä¹˜æ³•å™¨çš„çµæœã€‚<br>';
            if (optD) msg += '- (D) p-carry (å‰ä¸€ä½é€²ä½) æ˜¯ã€Œè¼¸å…¥ã€å–”ï¼<br>';
            if (!optA || !optE) msg += '- è¨˜å¾—è¦æŠŠ Sum å’Œ Carry éƒ½é¸èµ·ä¾†ã€‚<br>';
            msg += '<br>è«‹åƒè€ƒä¸Šæ–¹çš„ã€Œæ–¹å¡Šåœ–ã€å†è©¦ä¸€æ¬¡ï¼';
            feedback.innerHTML = msg;
        }
    }
</script>

</body>
</html>