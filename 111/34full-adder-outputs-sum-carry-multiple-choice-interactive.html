<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 34ï¼šå…¨åŠ æ³•å™¨è¼¸å‡ºè§£æ - äº’å‹•å¼æ•™å­¸è¬›ç¾©</title>
    <style>
        /* --- å…¨åŸŸè¨­å®š --- */
        :root {
            --primary-color: #2c3e50;
            --accent-color: #e74c3c; /* é‡é»ç´… */
            --highlight-color: #f1c40f; /* é‡é»é»ƒ */
            --success-color: #27ae60;
            --bg-color: #f4f6f7;
            --card-bg: #ffffff;
            --border-radius: 10px;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* --- æ¨™é¡Œèˆ‡ç« ç¯€ --- */
        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        h2 {
            font-size: 1.4rem;
            border-left: 5px solid var(--accent-color);
            padding-left: 10px;
            margin-top: 30px;
            background: #eecbc833;
            padding: 10px;
            border-radius: 0 5px 5px 0;
        }

        .subtitle {
            color: #7f8c8d;
            font-weight: bold;
        }

        /* --- é‡é»æç¤ºå¡ --- */
        .concept-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .keyword {
            color: var(--accent-color);
            font-weight: bold;
            background: #fff3cd;
            padding: 2px 5px;
            border-radius: 4px;
        }

        /* --- å…¨åŠ æ³•å™¨è¦–è¦ºåœ–è§£ --- */
        .diagram-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .wire-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .wire {
            position: relative;
            font-weight: bold;
            color: #555;
        }

        .wire::after {
            content: 'â†’';
            font-size: 1.2rem;
            margin-left: 5px;
        }

        .wire.output::after {
            content: '';
        }
        
        .wire.output::before {
            content: 'â†’';
            font-size: 1.2rem;
            margin-right: 5px;
        }

        .adder-box {
            background: var(--primary-color);
            color: white;
            padding: 30px 20px;
            border-radius: 8px;
            margin: 0 20px;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            min-width: 150px;
            position: relative;
        }
        
        .adder-box::before {
            content: "å…¨åŠ æ³•å™¨ (FA)";
            display: block;
            margin-bottom: 15px;
            font-size: 1.2rem;
            border-bottom: 1px dashed #aaa;
            padding-bottom: 5px;
        }

        .highlight-output {
            color: var(--highlight-color);
            font-weight: 900;
            font-size: 1.1em;
            text-shadow: 1px 1px 0px #000;
        }

        /* --- äº’å‹•å€ 1: æ‹–æ”¾åˆ†é¡ --- */
        .drag-area {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .drop-zone {
            flex: 1;
            min-height: 150px;
            border: 3px dashed #bdc3c7;
            border-radius: var(--border-radius);
            padding: 10px;
            background: #fafafa;
            position: relative;
        }

        .drop-zone h3 {
            text-align: center;
            margin-top: 0;
            color: #7f8c8d;
        }

        .source-zone {
            width: 100%;
            min-height: 60px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 10px;
            background: #e8e8e8;
            border-radius: var(--border-radius);
        }

        .draggable-item {
            background: white;
            border: 2px solid var(--primary-color);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: grab;
            font-weight: bold;
            user-select: none;
            transition: transform 0.2s;
        }

        .draggable-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        /* --- äº’å‹•å€ 2: è¤‡é¸é¡Œ --- */
        .quiz-section {
            background: #fff;
            border: 2px solid var(--primary-color);
            padding: 20px;
            border-radius: var(--border-radius);
            position: relative;
        }

        .question-number {
            background: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 10px;
        }

        .multi-choice-badge {
            background: var(--accent-color);
            color: white;
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 10px;
            vertical-align: middle;
            margin-left: 10px;
        }

        .options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .options label:hover {
            background: #f0f0f0;
        }

        .options input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* --- æŒ‰éˆ•æ¨£å¼ --- */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #34495e;
        }
        
        .btn-reset {
            background: #95a5a6;
        }

        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            font-weight: bold;
        }

        .feedback-correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback-wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* --- é™·é˜±å¡èˆ‡è§£æ --- */
        .analysis-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .analysis-btn {
            padding: 10px;
            border: 1px solid #bdc3c7;
            background: white;
            cursor: pointer;
            text-align: center;
            border-radius: 5px;
        }

        .analysis-btn:hover {
            background: #ecf0f1;
        }
        
        .analysis-detail {
            margin-top: 10px;
            padding: 10px;
            background: #fff3cd;
            border-radius: 5px;
            display: none;
        }

        .trap-cards {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .trap-card {
            min-width: 200px;
            background: #ffe6e6;
            border: 1px solid #ffcccc;
            padding: 15px;
            border-radius: 10px;
            position: relative;
        }

        .trap-btn {
            display: block;
            width: 100%;
            margin-top: 10px;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px;
            border-radius: 3px;
            cursor: pointer;
        }

        /* --- è‡ªæˆ‘æª¢æ¸¬ --- */
        .self-test-item {
            border-bottom: 1px solid #ddd;
            padding: 15px 0;
        }
        
        .hint-text {
            color: var(--success-color);
            margin-top: 5px;
            display: none;
            font-weight: bold;
        }

        /* --- æ‰‹æ©Ÿç‰ˆå„ªåŒ– --- */
        @media (max-width: 600px) {
            .diagram-container {
                flex-direction: column;
            }
            .wire::after {
                content: 'â†“';
                margin-left: 0;
            }
            .wire.output::before {
                content: 'â†“';
                margin-right: 0;
            }
            .adder-box {
                width: 80%;
                margin: 10px 0;
            }
            .wire-group {
                flex-direction: row;
                gap: 20px;
            }
            .drag-area {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>é›»è…¦æ¦‚è«–ï¼šæ•¸ä½é‚è¼¯èˆ‡åŠ æ³•å™¨</h1>
        <div class="subtitle">é«˜ä¸­è·è¨ˆç®—æ©Ÿæ¦‚è«– / è¤‡é¸é¡Œ 34 é‡é»çªç ´</div>
    </header>

    <!-- 1. è§€å¿µæ•™å­¸å€ -->
    <section>
        <h2>è§€å¿µ 1ï¼šä»€éº¼æ˜¯å…¨åŠ æ³•å™¨ (Full Adder)ï¼Ÿ</h2>
        <div class="concept-card">
            <p>åœ¨æˆ‘å€‘æ·±å…¥é¡Œç›®ä¹‹å‰ï¼Œå…ˆææ‡‚åè©å®šç¾©ï¼š</p>
            <ul>
                <li><span class="keyword">åŠ æ³•å™¨ (Adder)</span>ï¼šé›»è…¦å…§éƒ¨ç”¨ä¾†åšäºŒé€²ä½åŠ æ³•çš„é›»è·¯ã€‚</li>
                <li><span class="keyword">åŠåŠ æ³•å™¨ (Half Adder)</span>ï¼šåªèƒ½è™•ç†å…©å€‹ä½å…ƒç›¸åŠ ï¼Œ<strong>æ²’è¾¦æ³•</strong>è™•ç†ä¾†è‡ªå‰ä¸€ä½çš„é€²ä½ã€‚</li>
                <li><span class="keyword">å…¨åŠ æ³•å™¨ (Full Adder)</span>ï¼šå‡ç´šç‰ˆï¼é™¤äº†å…©å€‹ä½å…ƒï¼Œé‚„èƒ½è™•ç†<span class="keyword">å‰ä¸€ä½é€²ä½ (Cin)</span>ã€‚</li>
            </ul>
        </div>

        <div class="concept-card" style="border: 2px solid var(--primary-color);">
            <h3 style="text-align: center;">â˜… å…¨åŠ æ³•å™¨çš„é»‘ç›’å­ (Black Box) â˜…</h3>
            <p style="text-align: center;">è«‹è¨˜ä½ï¼šè¼¸å…¥æœ‰ 3 å€‹ï¼Œè¼¸å‡ºåªæœ‰ 2 å€‹ï¼</p>
            
            <div class="diagram-container">
                <!-- è¼¸å…¥ç«¯ -->
                <div class="wire-group">
                    <div class="wire">A (è¢«åŠ æ•¸)</div>
                    <div class="wire">B (åŠ æ•¸)</div>
                    <div class="wire" style="color: blue;">Cin (å‰ä¸€ä½é€²ä½)</div>
                </div>

                <!-- æ ¸å¿ƒç›’å­ -->
                <div class="adder-box">
                    <div>é‹ç®—è™•ç†ä¸­...</div>
                </div>

                <!-- è¼¸å‡ºç«¯ -->
                <div class="wire-group">
                    <div class="wire output highlight-output">Sum (æœ¬ä½å’Œ)</div>
                    <div class="wire output highlight-output">Carry (é€²ä½è¼¸å‡º)</div>
                </div>
            </div>
            <div style="text-align: center; font-size: 0.9em; color: #666; margin-top: 10px;">
                æ³¨æ„ï¼šCin (å‰ä¸€ä½é€²ä½) æ˜¯<strong>è¼¸å…¥</strong>ï¼Œå› ç‚ºæˆ‘å€‘è¦æ‹¿å®ƒä¾†é‹ç®—ï¼›<br>
                Carry (é€²ä½) æ‰æ˜¯ç®—å‡ºä¾†è¦çµ¦ä¸‹ä¸€ä½çš„<strong>è¼¸å‡º</strong>ã€‚
            </div>
        </div>
    </section>

    <!-- 2. åŠåŠ æ³•å™¨ vs å…¨åŠ æ³•å™¨ å°ç…§äº’å‹• -->
    <section>
        <h2>è§€å¿µ 2ï¼šåŠåŠ æ³•å™¨ vs å…¨åŠ æ³•å™¨ å·®åœ¨å“ªï¼Ÿ</h2>
        <div class="concept-card" style="text-align: center;">
            <div id="ha-fa-display">
                <h3 id="ha-fa-title">ç›®å‰é¡¯ç¤ºï¼šå…¨åŠ æ³•å™¨ (Full Adder)</h3>
                <p id="ha-fa-desc">è¼¸å…¥æœ‰ 3 å€‹ (A, B, Cin)ï¼Œè¼¸å‡ºæœ‰ 2 å€‹ (Sum, Carry)</p>
            </div>
            <button class="btn" onclick="toggleAdderType()">åˆ‡æ›ç‚ºåŠåŠ æ³•å™¨/å…¨åŠ æ³•å™¨</button>
            <p style="font-size: 0.9rem; color: #e74c3c; margin-top: 10px;">
                ğŸ’¡ è€å¸«æç¤ºï¼šä¸ç®¡å“ªç¨®åŠ æ³•å™¨ï¼Œ<strong>è¼¸å‡ºæ°¸é éƒ½æ˜¯ Sum (å’Œ) èˆ‡ Carry (é€²ä½)</strong>ï¼Œå·®åˆ¥åªåœ¨è¼¸å…¥ç«¯ï¼
            </p>
        </div>
    </section>

    <!-- 3. æ‹–æ‹‰ç·´ç¿’å€ -->
    <section>
        <h2>äº’å‹•ç·´ç¿’ï¼šè¼¸å…¥èˆ‡è¼¸å‡ºå¤§æ­¸é¡</h2>
        <div class="concept-card">
            <p>è«‹å°‡ä¸‹æ–¹çš„è¨Šè™Ÿå¡ç‰‡ï¼Œæ‹–æ‹‰åˆ°æ­£ç¢ºçš„åˆ†é¡æ¡†æ¡†ä¸­ï¼š</p>
            
            <div class="source-zone" id="sourceZone" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-A">A (ä½å…ƒ)</div>
                <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-Sum">Sum (å’Œ)</div>
                <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-Cin">Cin (å‰ä¸€ä½é€²ä½)</div>
                <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-Carry">Carry (é€²ä½)</div>
                <div class="draggable-item" draggable="true" ondragstart="drag(event)" id="drag-B">B (ä½å…ƒ)</div>
            </div>

            <div class="drag-area">
                <div class="drop-zone" id="inputZone" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <h3>ğŸ“¥ è¼¸å…¥ (Input)</h3>
                    <!-- æ”¾ç½®å€ -->
                </div>
                <div class="drop-zone" id="outputZone" ondrop="drop(event)" ondragover="allowDrop(event)" style="border-color: var(--accent-color);">
                    <h3>ğŸ“¤ è¼¸å‡º (Output)</h3>
                    <!-- æ”¾ç½®å€ -->
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="btn" onclick="checkDragAnswer()">æª¢æŸ¥åˆ†é¡</button>
                <button class="btn btn-reset" onclick="resetDragGame()">é‡ç½®</button>
            </div>
            <div id="dragFeedback" class="feedback-box"></div>
        </div>
    </section>

    <!-- 4. æ ¸å¿ƒé¡Œç›®å€ -->
    <section>
        <h2>å¯¦æˆ°æ¼”ç·´ï¼šè¤‡é¸é¡Œ 34</h2>
        <div class="quiz-section">
            <span class="question-number">é¡Œè™Ÿ 34</span>
            <span class="multi-choice-badge">æœ¬é¡Œå¯è¤‡é¸</span>
            
            <p style="font-size: 1.1rem; font-weight: bold;">
                ä¸‹åˆ—ä½•è€…ç‚ºå…¨åŠ æ³•å™¨ï¼ˆfull adderï¼‰çš„è¼¸å‡ºï¼Ÿ
            </p>

            <div class="options">
                <label><input type="checkbox" name="q34" value="A"> (A) å’Œï¼ˆsumï¼‰</label>
                <label><input type="checkbox" name="q34" value="B"> (B) å·®ï¼ˆdifferenceï¼‰</label>
                <label><input type="checkbox" name="q34" value="C"> (C) ç©ï¼ˆproductï¼‰</label>
                <label><input type="checkbox" name="q34" value="D"> (D) å‰ä¸€ä½å…ƒé€²ä½ï¼ˆp-carryï¼‰</label>
                <label><input type="checkbox" name="q34" value="E"> (E) é€²ä½ï¼ˆcarryï¼‰</label>
            </div>

            <button class="btn" onclick="checkQuizAnswer()">é€å‡ºç­”æ¡ˆ</button>
            <div id="quizFeedback" class="feedback-box"></div>
        </div>
    </section>

    <!-- 5. é™·é˜±èˆ‡è§£æ -->
    <section>
        <h2>é¸é …æ·±å…¥è§£æ & è€ƒå ´é™·é˜±</h2>
        
        <div class="concept-card">
            <h3>ğŸ” é»æ“Šé¸é …çœ‹è©³è§£ï¼š</h3>
            <div class="analysis-options">
                <div class="analysis-btn" onclick="showAnalysis('A')">(A) Sum</div>
                <div class="analysis-btn" onclick="showAnalysis('B')">(B) Difference</div>
                <div class="analysis-btn" onclick="showAnalysis('C')">(C) Product</div>
                <div class="analysis-btn" onclick="showAnalysis('D')">(D) p-carry</div>
                <div class="analysis-btn" onclick="showAnalysis('E')">(E) Carry</div>
            </div>
            <div id="analysisDisplay" class="analysis-detail">
                è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹èªªæ˜ã€‚
            </div>
        </div>

        <h3>ğŸš§ è€ƒå ´å¸¸è¦‹é™·é˜± (é»æ“Šã€Œæˆ‘æ‡‚äº†ã€æ¶ˆé™¤)</h3>
        <div class="trap-cards">
            <div class="trap-card" onclick="this.style.opacity='0'; setTimeout(()=>this.style.display='none', 300);">
                <h4>é™·é˜± 1ï¼šçœ‹åˆ°ã€Œé€²ä½ã€å°±å…¨é¸ï¼Ÿ</h4>
                <p>éŒ¯ï¼è¦åˆ†æ¸…æ¥šæ˜¯ã€Œè¼¸å…¥çš„é€²ä½ (p-carry/Cin)ã€é‚„æ˜¯ã€Œè¼¸å‡ºçš„é€²ä½ (Carry)ã€ã€‚</p>
                <button class="trap-btn">æˆ‘æ‡‚äº†</button>
            </div>
            <div class="trap-card" onclick="this.style.opacity='0'; setTimeout(()=>this.style.display='none', 300);">
                <h4>é™·é˜± 2ï¼šææ·· p-carry</h4>
                <p>p-carry (previous carry) æ˜¯ä¸Šä¸€ä½å‚³ä¾†çš„ï¼Œå°ç›®å‰çš„åŠ æ³•å™¨ä¾†èªªï¼Œå®ƒæ˜¯<strong>åŸæ–™ (è¼¸å…¥)</strong>ï¼</p>
                <button class="trap-btn">æˆ‘æ‡‚äº†</button>
            </div>
            <div class="trap-card" onclick="this.style.opacity='0'; setTimeout(()=>this.style.display='none', 300);">
                <h4>é™·é˜± 3ï¼šè¤‡é¸é¡Œåªé¸ä¸€å€‹</h4>
                <p>å…¨åŠ æ³•å™¨ç®—å®Œä¸€å®šæœƒæœ‰ã€Œæœ¬ä½å’Œã€è·Ÿã€Œæ˜¯å¦é€²ä½ã€å…©å€‹çµæœï¼Œç¼ºä¸€ä¸å¯ã€‚</p>
                <button class="trap-btn">æˆ‘æ‡‚äº†</button>
            </div>
        </div>
    </section>

    <!-- 6. è‡ªæˆ‘æª¢æ¸¬ -->
    <section>
        <h2>è‡ªæˆ‘æª¢æ¸¬ (ä¸çµ¦ç­”æ¡ˆï¼Œè‡ªå·±æƒ³ï¼)</h2>
        <div class="concept-card">
            <div class="self-test-item">
                <p><strong>å•é¡Œ 1ï¼š</strong>å…¨åŠ æ³•å™¨ç‚ºä»€éº¼ä¸€å®šè¦æœ‰ã€Œå‰ä¸€ä½é€²ä½ (Cin)ã€ç•¶è¼¸å…¥ï¼Ÿ</p>
                <button class="btn" style="padding: 5px 10px; font-size: 0.8rem;" onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
                <div id="hint1" class="hint-text">æç¤ºï¼šæƒ³æƒ³çœ‹å¤šä½æ•¸ç›´å¼åŠ æ³•ï¼Œå¦‚æœå€‹ä½æ•¸ç›¸åŠ è¶…é 10ï¼Œåä½æ•¸é‹ç®—æ™‚éœ€è¦åŠ ä¸Šä»€éº¼ï¼Ÿ</div>
            </div>
            <div class="self-test-item">
                <p><strong>å•é¡Œ 2ï¼š</strong>å¦‚æœæŠŠå…¨åŠ æ³•å™¨çš„ Cin æ‹¿æ‰ï¼Œé€™å€‹é›»è·¯æœƒé€€åŒ–æˆä»€éº¼ï¼Ÿ</p>
                <button class="btn" style="padding: 5px 10px; font-size: 0.8rem;" onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
                <div id="hint2" class="hint-text">æç¤ºï¼šè¼¸å…¥è®Šå›åªæœ‰ A èˆ‡ B å…©å€‹ï¼Œé€™æ˜¯å“ªç¨®åŠ æ³•å™¨ï¼Ÿ(åƒè€ƒè§€å¿µ 2)</div>
            </div>
            <div class="self-test-item" style="border-bottom: none;">
                <p><strong>å•é¡Œ 3ï¼š</strong>åš 4 ä½å…ƒåŠ æ³• (4-bit adder) éœ€è¦ä¸²é€£å¹¾å€‹å…¨åŠ æ³•å™¨ï¼Ÿ</p>
                <button class="btn" style="padding: 5px 10px; font-size: 0.8rem;" onclick="toggleHint('hint3')">é¡¯ç¤ºæç¤º</button>
                <div id="hint3" class="hint-text">æç¤ºï¼šæ¯ä¸€å€‹ä½å…ƒ (bit) éƒ½éœ€è¦ä¸€å€‹å…¨åŠ æ³•å™¨ä¾†è™•ç†è©²ä½çš„ Aã€B å’Œé€²ä½ã€‚</div>
            </div>
        </div>
    </section>

    <footer style="text-align: center; margin-top: 40px; color: #7f8c8d;">
        <p>åŠ æ²¹ï¼å¼„æ‡‚è¼¸å…¥èˆ‡è¼¸å‡ºï¼Œé‚è¼¯é›»è·¯å…¶å¯¦å¾ˆç°¡å–®ã€‚</p>
        <p>Â© äº’å‹•å¼æ•™å­¸è¬›ç¾©</p>
    </footer>

</div>

<script>
    // --- äº’å‹•åŠŸèƒ½ 1: åŠåŠ æ³•å™¨ vs å…¨åŠ æ³•å™¨ åˆ‡æ› ---
    let isFullAdder = true;
    function toggleAdderType() {
        const title = document.getElementById('ha-fa-title');
        const desc = document.getElementById('ha-fa-desc');
        isFullAdder = !isFullAdder;

        if (isFullAdder) {
            title.innerText = "ç›®å‰é¡¯ç¤ºï¼šå…¨åŠ æ³•å™¨ (Full Adder)";
            title.style.color = "var(--primary-color)";
            desc.innerHTML = "è¼¸å…¥æœ‰ 3 å€‹ (A, B, <span style='color:blue'>Cin</span>)ï¼Œè¼¸å‡ºæœ‰ 2 å€‹ (Sum, Carry)";
        } else {
            title.innerText = "ç›®å‰é¡¯ç¤ºï¼šåŠåŠ æ³•å™¨ (Half Adder)";
            title.style.color = "#d35400";
            desc.innerHTML = "è¼¸å…¥åªæœ‰ 2 å€‹ (A, B)ï¼Œ<span style='text-decoration:line-through'>æ²’æœ‰ Cin</span>ï¼Œè¼¸å‡ºé‚„æ˜¯ 2 å€‹ (Sum, Carry)";
        }
    }

    // --- äº’å‹•åŠŸèƒ½ 2: æ‹–æ”¾åˆ†é¡ (Drag & Drop) ---
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);
        
        // ç¢ºä¿æ”¾ç½®ç›®æ¨™æ˜¯ drop-zone æˆ– source-zoneï¼Œè€Œä¸æ˜¯è£¡é¢çš„ h3 æˆ–å…¶ä»–å…ƒç´ 
        let target = ev.target;
        while (!target.classList.contains('drop-zone') && !target.classList.contains('source-zone')) {
            target = target.parentNode;
            if(!target) return; // é¿å…æ‰¾ä¸åˆ°å±¤ç´š
        }
        target.appendChild(draggedElement);
    }

    function checkDragAnswer() {
        const inputZone = document.getElementById('inputZone');
        const outputZone = document.getElementById('outputZone');
        const feedback = document.getElementById('dragFeedback');
        
        // æ­£ç¢ºè§£ç­”
        // Input: drag-A, drag-B, drag-Cin
        // Output: drag-Sum, drag-Carry
        
        // å–å¾—ç›®å‰å„å€å…§çš„å…ƒç´  ID
        const inputs = Array.from(inputZone.children).map(el => el.id).filter(id => id);
        const outputs = Array.from(outputZone.children).map(el => el.id).filter(id => id);

        const correctInputs = ['drag-A', 'drag-B', 'drag-Cin'];
        const correctOutputs = ['drag-Sum', 'drag-Carry'];

        let isCorrect = true;
        let msg = "";

        // æª¢æŸ¥è¼¸å…¥å€
        correctInputs.forEach(id => {
            if (!inputs.includes(id)) isCorrect = false;
        });
        // æª¢æŸ¥è¼¸å‡ºå€
        correctOutputs.forEach(id => {
            if (!outputs.includes(id)) isCorrect = false;
        });
        // æª¢æŸ¥æ˜¯å¦æœ‰æ”¾éŒ¯çš„ (ä¾‹å¦‚æŠŠ Output æ”¾åˆ° Input)
        if (inputs.length !== 3 || outputs.length !== 2) isCorrect = false;

        feedback.style.display = 'block';
        if (isCorrect) {
            feedback.className = 'feedback-box feedback-correct';
            feedback.innerHTML = "ğŸ‰ å®Œå…¨æ­£ç¢ºï¼<br>è¼¸å…¥ï¼šA, B, Cin (å‰ä¸€ä½é€²ä½)<br>è¼¸å‡ºï¼šSum (å’Œ), Carry (é€²ä½)";
        } else {
            feedback.className = 'feedback-box feedback-wrong';
            feedback.innerHTML = "âŒ é‚„æœ‰éŒ¯èª¤å–”ï¼æç¤ºï¼š<br>1. Cin æ˜¯ã€Œå‰ä¸€ä½é€²ä½ã€ï¼Œæˆ‘å€‘è¦æ‹¿å®ƒä¾†ç®—ï¼Œæ‰€ä»¥æ˜¯ã€Œè¼¸å…¥ã€ã€‚<br>2. ç®—å‡ºä¾†çš„çµæœ (Sum, Carry) æ‰æ˜¯ã€Œè¼¸å‡ºã€ã€‚";
        }
    }

    function resetDragGame() {
        const sourceZone = document.getElementById('sourceZone');
        const items = ['drag-A', 'drag-B', 'drag-Cin', 'drag-Sum', 'drag-Carry'];
        items.forEach(id => {
            const el = document.getElementById(id);
            if(el) sourceZone.appendChild(el);
        });
        document.getElementById('dragFeedback').style.display = 'none';
    }

    // --- äº’å‹•åŠŸèƒ½ 3: è¤‡é¸é¡Œæª¢æŸ¥ ---
    function checkQuizAnswer() {
        const checkboxes = document.querySelectorAll('input[name="q34"]:checked');
        const selected = Array.from(checkboxes).map(cb => cb.value);
        const feedback = document.getElementById('quizFeedback');
        
        feedback.style.display = 'block';

        // æ’åºä»¥ä¾¿æ¯”è¼ƒ
        selected.sort();
        const correct = ['A', 'E'];
        
        if (JSON.stringify(selected) === JSON.stringify(correct)) {
            feedback.className = 'feedback-box feedback-correct';
            feedback.innerHTML = "ğŸ‰ æ­å–œç­”å°ï¼<br>å…¨åŠ æ³•å™¨çš„è¼¸å‡ºæ­£æ˜¯ï¼š(A) å’Œ (Sum) èˆ‡ (E) é€²ä½ (Carry)ã€‚";
        } else {
            feedback.className = 'feedback-box feedback-wrong';
            let errorMsg = "âŒ ç­”æ¡ˆä¸å®Œæ•´æˆ–æœ‰èª¤ï¼š<br>";
            
            if (selected.includes('D')) {
                errorMsg += "ğŸ‘‰ (D) å‰ä¸€ä½é€²ä½ (p-carry) æ˜¯æ‹¿ä¾†é‹ç®—çš„ã€Œè¼¸å…¥ã€ï¼Œä¸æ˜¯è¼¸å‡ºã€‚<br>";
            }
            if (selected.includes('B') || selected.includes('C')) {
                errorMsg += "ğŸ‘‰ (B) å·®æ˜¯æ¸›æ³•ã€(C) ç©æ˜¯ä¹˜æ³•ï¼Œé€™é¡Œæ˜¯åŠ æ³•å™¨å–”ã€‚<br>";
            }
            if (selected.length === 1 && (selected.includes('A') || selected.includes('E'))) {
                errorMsg += "ğŸ‘‰ æœ¬é¡Œæ˜¯ã€Œè¤‡é¸é¡Œã€ï¼Œè¼¸å‡ºæœ‰å…©å€‹ï¼Œä½ å°‘é¸äº†ä¸€å€‹ï¼<br>";
            }
            if (selected.length === 0) {
                errorMsg += "ğŸ‘‰ ä½ é‚„æ²’æœ‰å‹¾é¸ä»»ä½•é¸é …å–”ï¼";
            }
            
            feedback.innerHTML = errorMsg;
        }
    }

    // --- äº’å‹•åŠŸèƒ½ 4: é¸é …è§£æ ---
    function showAnalysis(option) {
        const display = document.getElementById('analysisDisplay');
        display.style.display = 'block';
        
        let content = "";
        switch(option) {
            case 'A':
                content = "<strong>(A) å’Œ (Sum)ï¼šâœ… æ­£ç¢ºè¼¸å‡ºã€‚</strong><br>é€™æ˜¯è©²ä½å…ƒç›¸åŠ å¾Œçš„æœ¬ä½çµæœ (ä¾‹å¦‚ 1+1=10ï¼Œ0 å°±æ˜¯ Sum)ã€‚";
                break;
            case 'B':
                content = "<strong>(B) å·® (Difference)ï¼šâŒ éŒ¯èª¤ã€‚</strong><br>é€™æ˜¯ã€Œæ¸›æ³•å™¨ (Subtractor)ã€çš„è¼¸å‡ºè¡“èªã€‚";
                break;
            case 'C':
                content = "<strong>(C) ç© (Product)ï¼šâŒ éŒ¯èª¤ã€‚</strong><br>é€™æ˜¯ã€Œä¹˜æ³•å™¨ (Multiplier)ã€çš„è¼¸å‡ºè¡“èªã€‚";
                break;
            case 'D':
                content = "<strong>(D) å‰ä¸€ä½é€²ä½ (p-carry)ï¼šâŒ éŒ¯èª¤ (é€™æ˜¯è¼¸å…¥)ã€‚</strong><br>é€™æ˜¯å¾ä½ä½å…ƒå‚³éä¾†çš„é€²ä½è¨Šè™Ÿï¼Œå°æ–¼ç›®å‰çš„åŠ æ³•å™¨ä¾†èªªï¼Œæ˜¯å¿…é ˆæ¥æ”¶çš„åŸæ–™ (Input)ã€‚";
                break;
            case 'E':
                content = "<strong>(E) é€²ä½ (Carry)ï¼šâœ… æ­£ç¢ºè¼¸å‡ºã€‚</strong><br>é€™æ˜¯ç›¸åŠ å¾Œç”¢ç”Ÿè¦å‚³çµ¦ä¸‹ä¸€ä½çš„é€²ä½ (ä¾‹å¦‚ 1+1=10ï¼Œ1 å°±æ˜¯ Carry)ã€‚";
                break;
        }
        display.innerHTML = content;
    }

    // --- äº’å‹•åŠŸèƒ½ 5: è‡ªæˆ‘æª¢æ¸¬æç¤º ---
    function toggleHint(id) {
        const el = document.getElementById(id);
        if (el.style.display === 'block') {
            el.style.display = 'none';
        } else {
            el.style.display = 'block';
        }
    }
</script>

</body>
</html>