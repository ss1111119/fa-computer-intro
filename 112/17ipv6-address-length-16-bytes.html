<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPv6 ä½å€é•·åº¦æ•™å­¸</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        :root {
            --primary-color: #3b82f6; /* è—è‰²ä¸»èª¿ */
            --primary-dark: #1d4ed8;
            --accent-color: #8b5cf6; /* ç´«è‰²å¼·èª¿ */
            --success-color: #10b981; /* ç¶ è‰²æˆåŠŸ */
            --error-color: #ef4444;   /* ç´…è‰²éŒ¯èª¤ */
            --bg-color: #f3f4f6;      /* æ·ºç°èƒŒæ™¯ */
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-sub: #4b5563;
            --border-radius: 12px;
            --spacing-unit: 1rem;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "PingFang TC", "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            line-height: 1.6;
            color: var(--text-main);
            background-color: var(--bg-color);
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: transparent;
        }

        /* --- é€šç”¨å…ƒä»¶ --- */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        h1, h2, h3 {
            color: var(--text-main);
            margin-bottom: 12px;
            font-weight: 700;
        }

        h1 { font-size: 1.8rem; text-align: center; color: var(--primary-color); }
        h2 { font-size: 1.4rem; border-left: 5px solid var(--primary-color); padding-left: 12px; margin-top: 10px; }
        h3 { font-size: 1.1rem; color: var(--text-sub); }

        p { margin-bottom: 16px; }
        ul { margin-left: 24px; margin-bottom: 16px; }
        li { margin-bottom: 8px; }

        .highlight { color: var(--primary-dark); font-weight: bold; background-color: #dbeafe; padding: 2px 6px; border-radius: 4px; }
        .tag { font-size: 0.9em; color: #666; margin-left: 4px; }

        /* --- é¡Œç›®å€å¡Š --- */
        .question-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 30px;
        }
        .question-header h1 { color: white; margin-bottom: 8px; }
        .question-text { font-size: 1.2rem; font-weight: bold; margin: 20px 0; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; }
        .options-preview { list-style: none; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .options-preview li { background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; }

        /* --- æ ¸å¿ƒè§€å¿µå€ --- */
        .concept-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        .concept-box {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        @media (max-width: 600px) {
            .concept-grid { grid-template-columns: 1fr; }
        }

        /* --- äº’å‹•æ¼”ç¤ºå€ (é‡é») --- */
        #interactive-demo {
            border: 2px solid var(--primary-color);
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }

        button {
            cursor: pointer;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-primary:hover { background-color: var(--primary-dark); }
        
        .btn-secondary { background-color: white; border: 2px solid var(--primary-color); color: var(--primary-color); }
        .btn-secondary:hover { background-color: #eff6ff; }

        .btn-action { background-color: var(--accent-color); color: white; }
        .btn-action:hover { background-color: #7c3aed; }

        .display-area {
            background-color: #111827; /* æ·±è‰²çµ‚ç«¯æ©Ÿé¢¨æ ¼ */
            color: #10b981;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
        }

        .addr-segment { display: inline-block; padding: 2px; transition: all 0.3s; border: 1px solid transparent; }
        .addr-segment.highlight-group { border-color: #fbbf24; color: #fbbf24; background: rgba(251, 191, 36, 0.1); margin: 0 2px; border-radius: 4px; }
        .addr-segment.compressed { color: #60a5fa; font-weight: bold; }

        .byte-label {
            display: block;
            font-size: 0.7rem;
            color: #9ca3af;
            text-align: center;
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.5s;
        }
        .show-bytes .byte-label { opacity: 1; }

        .info-panel {
            background-color: #fffbeb;
            border-left: 5px solid #fbbf24;
            padding: 15px;
            margin-top: 15px;
        }
        .math-display {
            font-size: 1.5rem;
            text-align: center;
            color: var(--primary-dark);
            margin: 10px 0;
            font-weight: bold;
        }

        /* --- é¸é …ç ´è§£ Accordion --- */
        details {
            background: #f9fafb;
            margin-bottom: 10px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e5e7eb;
        }
        summary {
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            list-style: none; /* éš±è—é è¨­ç®­é ­ */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        summary::after { content: '+'; font-size: 1.2rem; }
        details[open] summary::after { content: '-'; }
        details[open] summary { background-color: #e5e7eb; }
        .details-content { padding: 15px; border-top: 1px solid #e5e7eb; color: var(--text-sub); }
        
        .correct-badge { background-color: var(--success-color); color: white; font-size: 0.8rem; padding: 2px 8px; border-radius: 12px; margin-left: 10px; }
        .wrong-badge { background-color: var(--error-color); color: white; font-size: 0.8rem; padding: 2px 8px; border-radius: 12px; margin-left: 10px; }

        /* --- å°æ¸¬é©— --- */
        .quiz-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .quiz-btn {
            background: white;
            border: 2px solid #d1d5db;
            color: var(--text-main);
            padding: 15px;
            font-size: 1.1rem;
            text-align: left;
        }
        .quiz-btn:hover { border-color: var(--primary-color); background-color: #f0f9ff; }
        
        .feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none; /* åˆå§‹éš±è— */
            text-align: center;
        }
        .feedback-success { background-color: #d1fae5; color: #065f46; border: 1px solid #10b981; }
        .feedback-error { background-color: #fee2e2; color: #991b1b; border: 1px solid #ef4444; }

        .back-to-demo-btn {
            display: inline-block;
            margin-top: 10px;
            background-color: var(--primary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.9rem;
            cursor: pointer;
            border: none;
        }

        /* å‹•ç•« */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .highlight-pulse {
            animation: pulse 0.5s ease-in-out 2;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
            border-color: var(--primary-color);
        }

    </style>
</head>
<body>

    <div class="container">
        <!-- 1. Header èˆ‡ é¡Œç›®å€ -->
        <header class="question-header">
            <h1>IPv6 ä½å€é•·åº¦è§£æ</h1>
            <p>ä¸€å¥è©±æ‘˜è¦ï¼šIPv6 æœ‰ 128 bitsï¼Œæ‰€ä»¥æ˜¯ 16 bytesã€‚</p>
            
            <div class="question-text">
                æœ¬é¡Œï¼šåœ¨ IPv6 ç’°å¢ƒä¸­ï¼Œä¸€å€‹ IP ä½å€çš„é•·åº¦ç‚ºå¤šå°‘ bytesï¼Ÿ
            </div>
            <ul class="options-preview">
                <li>(A) 4</li>
                <li>(B) 6</li>
                <li>(C) 12</li>
                <li>(D) 16</li>
            </ul>
        </header>

        <!-- 2. æ ¸å¿ƒè§€å¿µå€ -->
        <section class="card" id="concepts">
            <h2>æ ¸å¿ƒè§€å¿µï¼šBits èˆ‡ Bytes</h2>
            <p>è¦å›ç­”é€™å€‹å•é¡Œï¼Œå¿…é ˆå…ˆäº†è§£é›»è…¦å„²å­˜å–®ä½çš„åŸºæœ¬æ›ç®—ï¼Œä»¥åŠä¸åŒç¶²éš›ç¶²è·¯å”å®šï¼ˆInternet Protocol, IPï¼‰çš„è¦æ ¼å·®ç•°ã€‚</p>
            
            <div class="concept-grid">
                <div class="concept-box">
                    <h3>åŸºæœ¬æ›ç®—å…¬å¼</h3>
                    <ul style="list-style-type: none; margin-left: 0;">
                        <li>ğŸ’¾ <strong>1 Byte (ä½å…ƒçµ„)</strong> = 8 bits (ä½å…ƒ)</li>
                        <li>â— è¨ˆç®—æ–¹å¼ï¼š<strong>bits Ã· 8 = bytes</strong></li>
                    </ul>
                </div>
                <div class="concept-box">
                    <h3>å”å®šå°ç…§</h3>
                    <ul style="list-style-type: none; margin-left: 0;">
                        <li>ğŸ”µ <strong>IPv4</strong>ï¼š32 bits = <strong>4 bytes</strong></li>
                        <li>ğŸŸ£ <strong>IPv6</strong>ï¼š128 bits = <strong>16 bytes</strong></li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 3. äº’å‹•æ¼”ç¤ºå€ (Core Interaction) -->
        <section class="card" id="interactive-demo">
            <h2>äº’å‹•å¯¦é©—å®¤ï¼šIPv6 çµæ§‹æ‹†è§£</h2>
            <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•ï¼Œè§€å¯Ÿ IPv6 çš„é•·åº¦èˆ‡çµæ§‹è®ŠåŒ–ã€‚</p>

            <!-- A: åˆ‡æ›æ¨¡å¼ -->
            <div class="controls">
                <button class="btn-primary" onclick="setMode('ipv4')">é¡¯ç¤º IPv4</button>
                <button class="btn-primary" onclick="setMode('ipv6')">é¡¯ç¤º IPv6</button>
            </div>

            <!-- è¦–è¦ºåŒ–é¡¯ç¤ºå€ -->
            <div id="visual-container" class="display-area">
                <!-- å…§å®¹ç”± JS å‹•æ…‹ç”Ÿæˆ -->
                <span style="color: #6b7280;">è«‹é¸æ“‡ä¸Šæ–¹æŒ‰éˆ•é–‹å§‹...</span>
            </div>

            <!-- B: IPv6 æ“ä½œæŒ‰éˆ• (é è¨­éš±è—ï¼Œé¸ IPv6 å¾Œé¡¯ç¤º) -->
            <div id="ipv6-controls" class="controls" style="display: none; margin-top: 15px; border-bottom: none; border-top: 1px solid #374151; padding-top: 15px;">
                <button class="btn-action" onclick="visualizeGroups()">1. æ‹†æˆ 8 çµ„</button>
                <button class="btn-action" onclick="showBytes()">2. é¡¯ç¤º Bytes è¨ˆç®—</button>
                <button class="btn-action" onclick="toggleCompression()">3. å£“ç¸®ç¤ºç¯„ (::)</button>
            </div>

            <!-- C: èªªæ˜èˆ‡ Log é¢æ¿ -->
            <div class="info-panel">
                <h3 style="margin-top: 0; color: #92400e;">ğŸ’¡ è§€å¯Ÿç­†è¨˜</h3>
                <div id="log-text">æº–å‚™å°±ç·’ï¼Œè«‹é¸æ“‡ IP é¡å‹ã€‚</div>
                <div id="math-result" class="math-display"></div>
            </div>
        </section>

        <!-- 4. é¸é …é€ä¸€ç ´è§£ -->
        <section class="card" id="analysis">
            <h2>é¸é …è©³ç´°è§£æ</h2>
            <p>ç‚ºä»€éº¼ç­”æ¡ˆæ˜¯ (D)ï¼Ÿè®“æˆ‘å€‘çœ‹çœ‹å…¶ä»–é¸é …éŒ¯åœ¨å“ªè£¡ã€‚</p>

            <details>
                <summary>(A) 4 bytes <span class="wrong-badge">IPv4</span></summary>
                <div class="details-content">
                    é€™å…¶å¯¦æ˜¯ <strong>IPv4</strong> çš„é•·åº¦ã€‚IPv4 ç”± 32 å€‹ä½å…ƒï¼ˆbitsï¼‰çµ„æˆï¼Œè¨ˆç®—æ–¹å¼ç‚ºï¼š<br>
                    <code>32 bits Ã· 8 = 4 bytes</code>ã€‚<br>
                    é¡Œç›®å•çš„æ˜¯ IPv6ï¼Œæ‰€ä»¥æ­¤é¸é …éŒ¯èª¤ã€‚
                </div>
            </details>

            <details>
                <summary>(B) 6 bytes <span class="wrong-badge">é™·é˜±</span></summary>
                <div class="details-content">
                    é€™æ˜¯å¸¸è¦‹çš„è¦–è¦ºé™·é˜±ï¼å¾ˆå¤šäººçœ‹åˆ° IPv<strong>6</strong> å°±ç›´è¦ºé¸ 6 bytesï¼Œæˆ–è€…æ˜¯ MAC ä½å€ï¼ˆ48 bits = 6 bytesï¼‰çš„é•·åº¦ï¼Œä½†åœ¨ IP å”å®šæ¨™æº–ä¸­ï¼Œæ²’æœ‰ 6 bytes é•·åº¦çš„ IP ä½å€ã€‚
                </div>
            </details>

            <details>
                <summary>(C) 12 bytes <span class="wrong-badge">éŒ¯èª¤</span></summary>
                <div class="details-content">
                    é€™æ˜¯ä¸€å€‹éŒ¯èª¤çš„æ•¸å€¼ã€‚IPv6 çš„é•·åº¦æ˜¯å›ºå®šçš„ï¼Œä¸æœƒæ˜¯ 12 bytesã€‚
                </div>
            </details>

            <details open>
                <summary>(D) 16 bytes <span class="correct-badge">æ­£ç¢ºç­”æ¡ˆ</span></summary>
                <div class="details-content">
                    <strong>å®Œå…¨æ­£ç¢ºï¼</strong><br>
                    IPv6 è¨­è¨ˆä¹‹åˆç‚ºäº†æä¾›è¿‘ä¹ç„¡é™çš„ä½å€ç©ºé–“ï¼Œå°‡é•·åº¦è¨­å®šç‚º <strong>128 bits</strong>ã€‚<br>
                    æ›ç®—å…¬å¼ï¼š<code>128 bits Ã· 8 bits/byte = 16 bytes</code>ã€‚<br>
                    å¦å¤–ï¼ŒIPv6 é€šå¸¸å¯«æˆ 8 çµ„åå…­é€²ä½æ•¸å­—ï¼ˆæ¯çµ„ 2 bytesï¼‰ï¼Œä¹Ÿæ˜¯ <code>8 Ã— 2 = 16 bytes</code>ã€‚
                </div>
            </details>
        </section>

        <!-- 5. å°æ¸¬é©—å€ -->
        <section class="card" id="quiz-section">
            <h2>ğŸš€ éš¨å ‚å°æ¸¬é©—</h2>
            <p class="question-text" style="font-size: 1rem; margin-top: 0;">
                é¡Œç›®ï¼šåœ¨ IPv6 ç’°å¢ƒä¸­ï¼Œä¸€å€‹ IP ä½å€çš„é•·åº¦ç‚ºå¤šå°‘ bytesï¼Ÿ
            </p>
            
            <div class="quiz-options">
                <button class="quiz-btn" onclick="checkAnswer('A')">(A) 4</button>
                <button class="quiz-btn" onclick="checkAnswer('B')">(B) 6</button>
                <button class="quiz-btn" onclick="checkAnswer('C')">(C) 12</button>
                <button class="quiz-btn" onclick="checkAnswer('D')">(D) 16</button>
            </div>

            <!-- å›é¥‹å€ -->
            <div id="quiz-feedback" class="feedback-area">
                <h3 id="feedback-title" style="margin: 0 0 10px 0;"></h3>
                <p id="feedback-text"></p>
                <button id="retry-demo-btn" class="back-to-demo-btn" onclick="scrollToDemo()">å¸¶æˆ‘å›äº’å‹•æ¼”ç¤ºè¤‡ç¿’ â†º</button>
            </div>
        </section>

        <!-- 6. å»¶ä¼¸çŸ¥è­˜ (Accordion) -->
        <section class="card">
            <details>
                <summary>ğŸ“š å»¶ä¼¸çŸ¥è­˜ï¼šIPv6 çš„å¯«æ³•èˆ‡å°ˆæœ‰åè©</summary>
                <div class="details-content">
                    <ul>
                        <li><strong>åå…­é€²ä½ (Hexadecimal)ï¼š</strong> IPv6 ä½¿ç”¨ 0-9 å’Œ a-f ä¾†è¡¨ç¤ºæ•¸å€¼ã€‚</li>
                        <li><strong>Hextetï¼š</strong> IPv6 è¢«å†’è™Ÿåˆ†æˆ 8 å€‹å€å¡Šï¼Œæ¯å€‹å€å¡Šç¨±ç‚ºä¸€å€‹ "hextet" (16 bits)ã€‚</li>
                        <li><strong>å£“ç¸®è¦å‰‡ (::)ï¼š</strong> ç‚ºäº†æ›¸å¯«æ–¹ä¾¿ï¼Œé€£çºŒçš„ä¸€ä¸² 0 å¯ä»¥ç¸®å¯«ç‚ºé›™å†’è™Ÿ <code>::</code>ï¼Œä½†ä¸€å€‹ä½å€ä¸­<strong>åªèƒ½å‡ºç¾ä¸€æ¬¡</strong>ã€‚</li>
                        <li><strong>å‰ç½®é›¶çœç•¥ï¼š</strong> æ¯çµ„é–‹é ­çš„ 0 å¯ä»¥çœç•¥ï¼Œä¾‹å¦‚ <code>0db8</code> å¯ä»¥å¯«æˆ <code>db8</code>ã€‚</li>
                    </ul>
                </div>
            </details>
        </section>
        
        <footer style="text-align: center; color: #6b7280; font-size: 0.9rem; margin-top: 40px;">
            <p>IPv6 æ•™å­¸äº’å‹•ç¶²é  | å­¸ç¿’ç›®æ¨™ï¼šç†è§£ 128 bits = 16 bytes</p>
        </footer>
    </div>

    <!-- JavaScript é‚è¼¯ -->
    <script>
        // --- å…¨åŸŸè®Šæ•¸èˆ‡è³‡æ–™ ---
        const ipv4Address = "192.168.1.1";
        const ipv6Full = "2001 : 0db8 : 0000 : 0000 : 0000 : ff00 : 0042 : 8329";
        const ipv6Compressed = "2001 : db8 : : ff00 : 42 : 8329";
        
        // ç‹€æ…‹æ¨™è¨˜
        let currentMode = null; // 'ipv4' or 'ipv6'
        let isGroupsShown = false;
        let isBytesShown = false;
        let isCompressed = false;

        // --- 1. äº’å‹•æ¼”ç¤ºé‚è¼¯ ---

        function setMode(mode) {
            currentMode = mode;
            const container = document.getElementById('visual-container');
            const logText = document.getElementById('log-text');
            const mathDisplay = document.getElementById('math-result');
            const ipv6Controls = document.getElementById('ipv6-controls');

            // é‡ç½®ç‹€æ…‹
            isGroupsShown = false;
            isBytesShown = false;
            isCompressed = false;

            if (mode === 'ipv4') {
                // IPv4 æ¨¡å¼
                container.innerHTML = `
                    <div style="text-align:center;">
                        <span style="font-size: 2rem;">${ipv4Address}</span>
                        <div style="margin-top:10px; color:#9ca3af;">(åé€²ä½è¡¨ç¤ºæ³•)</div>
                    </div>
                `;
                logText.innerHTML = "é€™æ˜¯ IPv4 ä½å€ã€‚ç¸½å…± 32 å€‹ä½å…ƒ (bits)ã€‚";
                mathDisplay.innerHTML = "32 bits Ã· 8 = 4 bytes";
                ipv6Controls.style.display = 'none';
            } else {
                // IPv6 æ¨¡å¼
                // ç”¢ç”Ÿ 8 å€‹åˆ†çµ„çš„ HTML çµæ§‹
                const parts = ipv6Full.split(' : ');
                let html = '<div id="ipv6-wrapper" style="font-size: 1.1rem; display:flex; flex-wrap:wrap; justify-content:center;">';
                parts.forEach((part, index) => {
                    html += `
                        <div class="addr-group-box" style="margin: 5px; text-align:center;">
                            <span class="addr-segment" id="seg-${index}">${part}</span>
                            ${index < 7 ? '<span class="colon" style="margin:0 5px;">:</span>' : ''}
                            <span class="byte-label" id="byte-${index}">2 bytes</span>
                        </div>
                    `;
                });
                html += '</div>';
                
                container.innerHTML = html;
                logText.innerHTML = "é€™æ˜¯æ¨™æº–çš„ IPv6 ä½å€ã€‚ç”± 8 çµ„åå…­é€²ä½æ•¸å­—çµ„æˆã€‚<br>ç¸½é•·åº¦ï¼š<strong>128 bits</strong>ã€‚";
                mathDisplay.innerHTML = "128 bits = ?";
                ipv6Controls.style.display = 'flex'; // é¡¯ç¤º IPv6 å°ˆç”¨æŒ‰éˆ•
            }
        }

        function visualizeGroups() {
            if (currentMode !== 'ipv6') return;
            
            const segments = document.querySelectorAll('.addr-segment');
            segments.forEach(seg => {
                seg.classList.add('highlight-group');
            });

            document.getElementById('log-text').innerHTML = 
                "å·²å°‡ä½å€æ‹†è§£ç‚º <strong>8 çµ„ (Hextets)</strong>ã€‚<br>" +
                "æ¯çµ„åŒ…å« 4 å€‹åå…­é€²ä½æ•¸å­—ã€‚";
            
            isGroupsShown = true;
        }

        function showBytes() {
            if (currentMode !== 'ipv6') return;
            if (!isGroupsShown) visualizeGroups(); // ç¢ºä¿å…ˆåˆ†çµ„

            const wrapper = document.getElementById('ipv6-wrapper');
            wrapper.classList.add('show-bytes');

            document.getElementById('log-text').innerHTML = 
                "æ¯çµ„ 16 bitsï¼Œæ›ç®—å°±æ˜¯ <strong>2 bytes</strong>ã€‚<br>" +
                "ç®—ç®—çœ‹ï¼š8 çµ„ Ã— 2 bytes = ?";
            
            document.getElementById('math-result').innerHTML = 
                "8 çµ„ Ã— 2 bytes = <span style='color:#ef4444; font-size: 2rem;'>16 bytes</span>";
            
            isBytesShown = true;
        }

        function toggleCompression() {
            if (currentMode !== 'ipv6') return;
            
            const container = document.getElementById('visual-container');
            const logText = document.getElementById('log-text');
            
            if (!isCompressed) {
                // åˆ‡æ›åˆ°å£“ç¸®æ¨¡å¼ (ç°¡å–®æ›¿æ›é¡¯ç¤ºæ–‡å­—ï¼Œä¸é‡ç¹ªæ•´å€‹ DOM ä»¥ä¿æŒç°¡å–®)
                container.innerHTML = `
                    <div style="text-align:center;">
                        <span style="font-size: 1.5rem; color: #60a5fa;">2001 : db8 <span style="font-size:2rem; color:white;">::</span> ff00 : 42 : 8329</span>
                        <div style="margin-top:15px; color:#9ca3af; font-size:0.9rem;">
                            ä¸­é–“é€£çºŒçš„ 0000 : 0000 : 0000 è¢«å£“ç¸®æˆäº† "::"
                        </div>
                    </div>
                `;
                logText.innerHTML = "å£“ç¸®å¯«æ³• (Compressed)ï¼šå°‡é€£çºŒçš„ 0 çœç•¥ç‚ºé›™å†’è™Ÿã€‚<br>æ³¨æ„ï¼š<strong>ä½å€å¯¦éš›é•·åº¦ä¸è®Šï¼Œä»ç„¶æ˜¯ 128 bits (16 bytes)</strong>ï¼Œåªæ˜¯å¯«æ³•è®ŠçŸ­äº†ã€‚";
                document.getElementById('math-result').innerHTML = "é•·åº¦ä»ç‚º 16 bytes";
                isCompressed = true;
            } else {
                // é‚„åŸ
                setMode('ipv6');
                // å¦‚æœä¹‹å‰æœ‰é–‹ç‰¹æ•ˆï¼Œé‚„åŸæ™‚é †ä¾¿é–‹å›å»
                if(isGroupsShown) visualizeGroups();
                if(isBytesShown) showBytes();
                isCompressed = false;
            }
        }

        // --- 2. å°æ¸¬é©—é‚è¼¯ ---

        function checkAnswer(option) {
            const feedbackArea = document.getElementById('quiz-feedback');
            const title = document.getElementById('feedback-title');
            const text = document.getElementById('feedback-text');
            const retryBtn = document.getElementById('retry-demo-btn');

            feedbackArea.style.display = 'block';
            feedbackArea.className = 'feedback-area'; // reset class

            if (option === 'D') {
                // ç­”å°
                feedbackArea.classList.add('feedback-success');
                title.innerText = "ğŸ‰ ç­”å°äº†ï¼";
                text.innerText = "IPv6 ç‚º 128 bitsï¼Œé™¤ä»¥ 8 ç­‰æ–¼ 16 bytesã€‚";
                retryBtn.style.display = 'none'; // ç­”å°ä¸ç”¨é¡¯ç¤ºå›çœ‹æŒ‰éˆ•
            } else {
                // ç­”éŒ¯
                feedbackArea.classList.add('feedback-error');
                title.innerText = "âŒ ç­”éŒ¯å›‰";
                let reason = "";
                if (option === 'A') reason = "4 bytes æ˜¯ IPv4 çš„é•·åº¦å–”ï¼";
                if (option === 'B') reason = "6 bytes æ˜¯ MAC ä½å€æˆ–æ˜¯é™·é˜±é¸é …ã€‚";
                if (option === 'C') reason = "12 bytes ä¸ç¬¦åˆ IPv6 è¦æ ¼ã€‚";
                
                text.innerText = `${reason} è¨˜å¾—å£è¨£ï¼š128 bits Ã· 8 = 16 bytesã€‚`;
                retryBtn.style.display = 'inline-block';
            }
        }

        function scrollToDemo() {
            const demoSection = document.getElementById('interactive-demo');
            demoSection.scrollIntoView({ behavior: 'smooth' });
            
            // çµ¦äºˆè¦–è¦ºæç¤º
            demoSection.classList.add('highlight-pulse');
            setTimeout(() => {
                demoSection.classList.remove('highlight-pulse');
            }, 1000);

            // è‡ªå‹•åˆ‡æ›åˆ° IPv6 æ¨¡å¼ä¸¦å±•ç¤ºè¨ˆç®—
            setMode('ipv6');
            setTimeout(visualizeGroups, 500);
            setTimeout(showBytes, 1200);
        }

        // åˆå§‹åŒ–
        window.onload = function() {
            console.log("IPv6 Tutorial Loaded");
        };

    </script>
</body>
</html>