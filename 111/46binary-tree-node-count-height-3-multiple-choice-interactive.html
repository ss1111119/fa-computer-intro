<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 46 - äºŒå…ƒæ¨¹é«˜åº¦èˆ‡ç¯€é»ç‰¹è¨“</title>
    <style>
        :root {
            --primary-color: #2c3e50; /* è£œç¿’ç­æ·±è— */
            --accent-color: #e74c3c; /* é‡é»ç´… */
            --success-color: #27ae60; /* æ­£ç¢ºç¶  */
            --bg-color: #f4f6f7;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* è£œç¿’ç­è¬›ç¾©é¢¨æ ¼æ¨™é¡Œ */
        header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-bottom: 5px solid var(--accent-color);
        }

        header h1 { margin: 0; font-size: 1.8rem; }
        header p { margin: 5px 0 0; opacity: 0.9; font-weight: 300; }

        /* é€šç”¨å¡ç‰‡æ¨£å¼ */
        .card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 5px solid var(--primary-color);
        }

        .card h2 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.4rem;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 10px;
        }

        /* å°ˆæœ‰åè©å€ */
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .vocab-item {
            background: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .vocab-item strong { color: var(--accent-color); display: block; margin-bottom: 5px; }

        /* æ ¸å¿ƒè§€å¿µè¦–è¦ºåŒ– */
        .formula-box {
            background: #fff8e1;
            border: 2px solid #ffe082;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            margin: 15px 0;
        }

        /* äº’å‹• C: å±¤æ•¸å±•é–‹ */
        .layer-interactive {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        .layer-btn {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }
        .layer-btn:hover { background: #34495e; }
        .layer-display {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: var(--accent-color);
            height: 40px; /* é ç•™ç©ºé–“ */
        }

        /* é¡Œç›®å€ */
        .question-box {
            border: 2px solid var(--primary-color);
            padding: 25px;
            background: #fff;
            position: relative;
        }
        .question-badge {
            position: absolute;
            top: -15px;
            left: 20px;
            background: var(--accent-color);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .options-group label {
            display: block;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.2s;
        }
        .options-group label:hover { background: #f9f9f9; }
        .options-group input { margin-right: 10px; transform: scale(1.2); }

        .action-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 25px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
        }
        .action-btn:hover { opacity: 0.9; }

        /* çµæœé¡¯ç¤º */
        #result-display {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .correct { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .wrong { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* äº’å‹• A: é…å°éŠæˆ² */
        .game-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .game-pool, .game-target {
            flex: 1;
            min-width: 280px;
            min-height: 150px;
            padding: 15px;
            border-radius: 8px;
        }
        .game-pool { background: #e8e8e8; border: 2px dashed #999; }
        .game-target { background: #d1f2eb; border: 2px solid var(--success-color); }
        .game-target.impossible { background: #fadbd8; border-color: var(--accent-color); }
        
        .draggable-item {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 2px rgba(0,0,0,0.1);
            user-select: none;
        }
        .draggable-item:hover { transform: translateY(-2px); }
        .draggable-item.checked { background: #f1c40f; }

        /* é™·é˜±å¡ */
        .trap-grid {
            display: grid;
            gap: 15px;
        }
        .trap-card {
            background: #fff;
            border-left: 5px solid #ffa502;
            padding: 15px;
            cursor: pointer;
            transition: opacity 0.5s;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .trap-card::after {
            content: "ğŸ‘† é»æ“Šæ¶ˆé™¤";
            position: absolute;
            right: 10px;
            top: 10px;
            font-size: 0.8rem;
            color: #999;
        }
        .trap-card.faded { opacity: 0; pointer-events: none; }

        /* é‡ç½®æŒ‰éˆ• */
        .reset-btn {
            display: block;
            margin: 30px auto;
            background: #95a5a6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        /* é¸é …è§£ææŒ‰éˆ•å€ */
        .analysis-btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .analysis-btn {
            flex: 1;
            min-width: 40px;
            padding: 8px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
        }
        .analysis-content {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #eee;
            min-height: 60px;
        }

        /* æç¤º */
        .hint-btn {
            background: none;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 5px;
        }
        .hint-text {
            display: none;
            margin-top: 10px;
            color: var(--accent-color);
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>é›»è…¦æ¦‚è«–ï¼šäºŒå…ƒæ¨¹ç‰¹è¨“ç­</h1>
            <p>é«˜ä¸­ç”Ÿå¿…å‚™è³‡æ–™çµæ§‹è§€å¿µï½œäº’å‹•å¼è¬›ç¾©</p>
        </header>

        <!-- 1. å°ˆæœ‰åè©èˆ‡åŸºç¤ -->
        <div class="card">
            <h2>ç¬¬ä¸€ç« ï¼šé—œéµå­—æƒæ</h2>
            <p>åœ¨è§£é¡Œå‰ï¼Œé€™äº›åè©å¦‚æœçœ‹ä¸æ‡‚ï¼Œè«‹å…ˆçœ‹æ‹¬è™Ÿè£¡çš„ã€Œäººè©±ã€ï¼š</p>
            <div class="vocab-grid">
                <div class="vocab-item">
                    <strong>äºŒå…ƒæ¨¹ (Binary Tree)</strong>
                    æ¯å€‹ç¯€é»æœ€å¤šåªèƒ½ç”Ÿ 2 å€‹å°å­©çš„æ¨¹çµæ§‹ã€‚
                </div>
                <div class="vocab-item">
                    <strong>ç¯€é» (Node)</strong>
                    æ¨¹ä¸Šçš„æ¯ä¸€å€‹è³‡æ–™é»ï¼ˆåœˆåœˆï¼‰ã€‚
                </div>
                <div class="vocab-item">
                    <strong>é«˜åº¦ (Height)</strong>
                    å¾é ­é ‚ï¼ˆæ ¹ï¼‰åˆ°æœ€æ·±è…³åº•ï¼ˆè‘‰ï¼‰çš„å±¤æ•¸ã€‚
                </div>
                <div class="vocab-item">
                    <strong>æ»¿äºŒå…ƒæ¨¹ (Full Binary Tree)</strong>
                    æ¯ä¸€å±¤éƒ½å¡å¥½å¡æ»¿ï¼Œæ²’æœ‰ç©ºä½çš„å®Œç¾äºŒå…ƒæ¨¹ã€‚
                </div>
            </div>
        </div>

        <!-- 2. æ ¸å¿ƒå…¬å¼èˆ‡è¦–è¦ºåŒ– -->
        <div class="card">
            <h2>ç¬¬äºŒç« ï¼šé«˜åº¦ vs ç¯€é»æ•¸å…¬å¼</h2>
            <p>é«˜åº¦ç‚º <strong>h</strong> çš„äºŒå…ƒæ¨¹ï¼Œç¯€é»æ•¸ç¯„åœåœ¨å“ªè£¡ï¼Ÿ</p>
            
            <div class="formula-box">
                æœ€å°‘ç¯€é» = h <br>
                <span style="font-size:0.9rem; color:#666;">ï¼ˆåƒä¸€æ¢ç›´ç·šï¼Œæ¯å±¤åªæœ‰ 1 å€‹ï¼‰</span>
                <hr style="border-top:1px dashed #ccc; margin:10px 0;">
                æœ€å¤§ç¯€é» = 2<sup>h</sup> - 1 <br>
                <span style="font-size:0.9rem; color:#666;">ï¼ˆæ»¿äºŒå…ƒæ¨¹å…¬å¼ï¼‰</span>
            </div>

            <p>ğŸ‘‰ <strong>å‹•æ‰‹é»é»çœ‹ï¼š</strong> æœ¬é¡Œé«˜åº¦ h = 3ï¼Œæœ€å¤§å€¼æ€éº¼ä¾†çš„ï¼Ÿ</p>
            <div class="layer-interactive">
                <button class="layer-btn" onclick="showLayer(1)">ç¬¬ 1 å±¤</button>
                <button class="layer-btn" onclick="showLayer(2)">ç¬¬ 2 å±¤</button>
                <button class="layer-btn" onclick="showLayer(3)">ç¬¬ 3 å±¤ (ç¸½å’Œ)</button>
            </div>
            <div id="layer-output" class="layer-display">è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹å±¤æ•¸å®¹é‡</div>
        </div>

        <!-- 3. äº’å‹•é…å°éŠæˆ² -->
        <div class="card" style="border-left-color: #9b59b6;">
            <h2>ç¬¬ä¸‰ç« ï¼šç¯€é»æ•¸ã€Œå¯èƒ½ / ä¸å¯èƒ½ã€åˆ¤æ–·</h2>
            <p>å‡è¨­é«˜åº¦ç‚º 3ï¼Œè«‹é»æ“Šä¸‹æ–¹çš„æ•¸å­—å¡ç‰‡ï¼Œå°‡å®ƒå€‘åˆ†é¡åˆ°æ­£ç¢ºçš„å€åŸŸã€‚<br>
            <span style="color:red; font-size:0.9rem;">âš ï¸ æ³¨æ„ï¼šè«‹è€ƒæ…®ã€Œä¸€èˆ¬äºŒå…ƒæ¨¹ã€çš„å„ç¨®é•·ç›¸ï¼</span></p>
            
            <div class="game-container">
                <div style="flex:1;">
                    <div style="margin-bottom:5px; font-weight:bold;">æ•¸å­—å¡ç‰‡å€ (é»æ“Šç§»å‹•)</div>
                    <div id="card-pool" class="game-pool">
                        <!-- JS å°‡ç”Ÿæˆå¡ç‰‡ -->
                    </div>
                </div>
                <div style="flex:1;">
                    <div style="margin-bottom:5px; font-weight:bold;">âœ… é«˜åº¦ 3 å¯èƒ½çš„æ•¸é‡</div>
                    <div id="target-yes" class="game-target" onclick="checkGameArea('yes')"></div>
                    
                    <div style="margin-top:15px; margin-bottom:5px; font-weight:bold;">âŒ é«˜åº¦ 3 ä¸å¯èƒ½çš„æ•¸é‡</div>
                    <div id="target-no" class="game-target impossible" onclick="checkGameArea('no')"></div>
                </div>
            </div>
            <div id="game-feedback" style="margin-top:10px; font-weight:bold; min-height:1.5em;"></div>
            <button onclick="resetGame()" style="margin-top:10px; padding:5px 10px; cursor:pointer;">é‡ç½®å¡ç‰‡</button>
        </div>

        <!-- 4. é¡Œç›®æœ¬é«” -->
        <div class="card question-box">
            <span class="question-badge">è¤‡é¸é¡Œ 46</span>
            <h3>é¡Œç›®ï¼š</h3>
            <p>åœ¨äºŒå…ƒæ¨¹çµæ§‹ä¸­ï¼Œå‡è¨­æ¨¹çš„é«˜åº¦ç‚º 3ï¼Œå‰‡æ­¤æ¨¹çš„ç¯€é»å€‹æ•¸å¯èƒ½ç‚ºï¼Ÿ<span style="color:red; font-weight:bold;">ï¼ˆæœ¬é¡Œç‚ºè¤‡é¸é¡Œï¼‰</span></p>
            
            <div class="options-group">
                <label><input type="checkbox" name="q46" value="A"> (A) 15</label>
                <label><input type="checkbox" name="q46" value="B"> (B) 4</label>
                <label><input type="checkbox" name="q46" value="C"> (C) 3</label>
                <label><input type="checkbox" name="q46" value="D"> (D) 32</label>
                <label><input type="checkbox" name="q46" value="E"> (E) 10</label>
            </div>

            <button class="action-btn" onclick="checkAnswer()">é€å‡ºç­”æ¡ˆ</button>

            <div id="result-display"></div>
        </div>

        <!-- 5. é¸é …è©³è§£èˆ‡é™·é˜± -->
        <div class="card">
            <h2>ç¬¬å››ç« ï¼šè€å¸«è©³è§£ & é™·é˜±æ‹†è§£</h2>
            
            <p>é»æ“Šé¸é …æŸ¥çœ‹è©³ç´°ç†ç”±ï¼š</p>
            <div class="analysis-btn-group">
                <button class="analysis-btn" onclick="showAnalysis('A')">(A) 15</button>
                <button class="analysis-btn" onclick="showAnalysis('B')">(B) 4</button>
                <button class="analysis-btn" onclick="showAnalysis('C')">(C) 3</button>
                <button class="analysis-btn" onclick="showAnalysis('D')">(D) 32</button>
                <button class="analysis-btn" onclick="showAnalysis('E')">(E) 10</button>
            </div>
            <div id="analysis-text" class="analysis-content">è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹è§£æ...</div>

            <h3 style="margin-top:25px; color:#e67e22;">ğŸ”¥ å¸¸è¦‹è€ƒè©¦é™·é˜±å¡ (é»æ“Šæ¶ˆé™¤)</h3>
            <div class="trap-grid">
                <div class="trap-card" onclick="this.classList.add('faded')">
                    <strong>é™·é˜± 1ï¼šåªèƒŒæœ€å¤§å€¼</strong><br>
                    å¾ˆå¤šåŒå­¸åªè¨˜å¾— $2^3-1=7$ï¼Œå°±ä»¥ç‚ºåªèƒ½é¸ 7 ä»¥ä¸‹çš„æ•¸å­—ï¼ŒçµæœéŒ¯éè€ƒè©¦å…è¨±çš„å»¶ä¼¸é¡Œï¼
                </div>
                <div class="trap-card" onclick="this.classList.add('faded')">
                    <strong>é™·é˜± 2ï¼šçœ‹åˆ°å¤§æ•¸å­—å°±é¸</strong><br>
                    åƒ (D) 32 é€™ç¨®æ•¸å­—ï¼Œæ˜é¡¯è¶…é $2^3$ ç”šè‡³ $2^4$ï¼Œçµ•å°ä¸å¯èƒ½ï¼
                </div>
                <div class="trap-card" onclick="this.classList.add('faded')">
                    <strong>é™·é˜± 3ï¼šæ··æ·†ã€Œæœ€å°‘ã€èˆ‡ã€Œä¸è¶³ã€</strong><br>
                    (C) 3 å€‹ç¯€é»é›–ç„¶å°‘ï¼Œä½†åœ¨é€™é¡Œè¢«è¦–ç‚ºé«˜åº¦ä¸è¶³ï¼ˆæˆ–åƒ…é«˜åº¦ 2ï¼‰ï¼Œéœ€å°å¿ƒé¡Œç›®å®šç¾©ã€‚
                </div>
            </div>
        </div>

        <!-- 6. è‡ªæˆ‘æª¢æ¸¬ -->
        <div class="card" style="border-left-color: #3498db;">
            <h2>ç¬¬äº”ç« ï¼šå›å®¶ä½œæ¥­ (è‡ªæˆ‘æª¢æ¸¬)</h2>
            
            <div style="margin-bottom: 15px;">
                <strong>Q1: é«˜åº¦ç‚º 4 çš„äºŒå…ƒæ¨¹ï¼Œæœ€å¤§ç¯€é»æ•¸æ˜¯å¤šå°‘ï¼Ÿ</strong>
                <br>
                <button class="hint-btn" onclick="toggleHint('h1')">é¡¯ç¤ºæç¤º</button>
                <div id="h1" class="hint-text">æç¤ºï¼šå¸¶å…¥å…¬å¼ $2^h - 1$ï¼Œä¹Ÿå°±æ˜¯ $2^4 - 1 = 16 - 1 = ?$</div>
            </div>

            <div style="margin-bottom: 15px;">
                <strong>Q2: ç‚ºä»€éº¼ç¯€é»æ•¸æœƒæœ‰ç¯„åœï¼Ÿ</strong>
                <br>
                <button class="hint-btn" onclick="toggleHint('h2')">é¡¯ç¤ºæç¤º</button>
                <div id="h2" class="hint-text">æç¤ºï¼šå› ç‚ºäºŒå…ƒæ¨¹å¯ä»¥é•·å¾—ã€Œç˜¦é•·ã€ï¼ˆæ¯å±¤1å€‹ï¼‰ä¹Ÿå¯ä»¥é•·å¾—ã€Œèƒ–èƒ–çš„ã€ï¼ˆæ¯å±¤å¡æ»¿ï¼‰ï¼Œå½¢ç‹€ä¸åŒï¼Œæ•¸é‡å°±ä¸åŒã€‚</div>
            </div>

            <div>
                <strong>Q3: çœ‹åˆ°é€™é¡é¡Œç›®ç¬¬ä¸€æ­¥ç®—ä»€éº¼ï¼Ÿ</strong>
                <br>
                <button class="hint-btn" onclick="toggleHint('h3')">é¡¯ç¤ºæç¤º</button>
                <div id="h3" class="hint-text">æç¤ºï¼šå…ˆç®—å‡ºã€Œä¸‹ç•Œ hã€èˆ‡ã€Œä¸Šç•Œ $2^h-1$ã€ï¼Œå¦‚æœæ˜¯æ¦‚å¿µé¡Œï¼Œå†è€ƒæ…®æ˜¯å¦å…è¨±å»¶ä¼¸ã€‚</div>
            </div>
        </div>

        <button class="reset-btn" onclick="location.reload()">å…¨éƒ¨é‡ç½® (F5)</button>
    </div>

    <script>
        // --- äº’å‹• C: å±¤æ•¸å±•é–‹ ---
        function showLayer(layer) {
            const display = document.getElementById('layer-output');
            if (layer === 1) {
                display.innerHTML = "ç¬¬ 1 å±¤ï¼šæœ€å¤š 1 å€‹ç¯€é» ($2^0$)";
            } else if (layer === 2) {
                display.innerHTML = "ç¬¬ 2 å±¤ï¼šæœ€å¤š 2 å€‹ç¯€é» ($2^1$) â†’ ç´¯ç© 1+2=3";
            } else if (layer === 3) {
                display.innerHTML = "ç¬¬ 3 å±¤ï¼šæœ€å¤š 4 å€‹ç¯€é» ($2^2$) â†’ ç¸½å…± 1+2+4 = <strong>7</strong> ($2^3-1$)";
            }
        }

        // --- äº’å‹• A: é…å°éŠæˆ² (Click to Move) ---
        // å®šç¾©æ•¸å­—èˆ‡æ­£ç¢ºæ­¸å±¬ (based on prompt logic)
        // yes: 4, 7, 10, 15 (10, 15 are concept extension)
        // no: 3, 32
        const gameItems = [
            { val: 3, type: 'no' },
            { val: 4, type: 'yes' },
            { val: 7, type: 'yes' },
            { val: 10, type: 'yes' },
            { val: 15, type: 'yes' },
            { val: 32, type: 'no' }
        ];

        function initGame() {
            const pool = document.getElementById('card-pool');
            pool.innerHTML = '';
            document.getElementById('target-yes').innerHTML = '';
            document.getElementById('target-no').innerHTML = '';
            document.getElementById('game-feedback').innerHTML = '';

            gameItems.forEach(item => {
                const el = document.createElement('div');
                el.className = 'draggable-item';
                el.innerText = item.val;
                el.dataset.val = item.val;
                el.dataset.correctType = item.type;
                el.dataset.currentLoc = 'pool'; // pool, yes, no
                
                // é»æ“Šäº‹ä»¶ï¼šå¾ªç’°ç§»å‹• Pool -> Yes -> No -> Pool
                el.onclick = function() {
                    moveItem(el);
                };
                pool.appendChild(el);
            });
        }

        function moveItem(el) {
            const pool = document.getElementById('card-pool');
            const yesZone = document.getElementById('target-yes');
            const noZone = document.getElementById('target-no');
            const feedback = document.getElementById('game-feedback');

            feedback.innerText = ""; // æ¸…é™¤æç¤º

            if (el.dataset.currentLoc === 'pool') {
                yesZone.appendChild(el);
                el.dataset.currentLoc = 'yes';
            } else if (el.dataset.currentLoc === 'yes') {
                noZone.appendChild(el);
                el.dataset.currentLoc = 'no';
            } else {
                pool.appendChild(el);
                el.dataset.currentLoc = 'pool';
            }
            
            checkGameStatus();
        }

        function checkGameStatus() {
            const feedback = document.getElementById('game-feedback');
            const items = document.querySelectorAll('.draggable-item');
            let allCorrect = true;
            let allMoved = true;

            items.forEach(item => {
                if (item.dataset.currentLoc === 'pool') {
                    allMoved = false;
                } else if (item.dataset.currentLoc !== item.dataset.correctType) {
                    allCorrect = false;
                }
            });

            if (allMoved) {
                if (allCorrect) {
                    feedback.innerHTML = "<span style='color:green'>ğŸ‰ å¤ªå¼·äº†ï¼æ¦‚å¿µå®Œå…¨æ­£ç¢ºï¼(10, 15 å±¬æ–¼å»¶ä¼¸é¡Œç¯„åœ)</span>";
                } else {
                    feedback.innerHTML = "<span style='color:red'>ğŸ¤” æœ‰äº›æ”¾éŒ¯å›‰ï¼Œå†æª¢æŸ¥ä¸€ä¸‹å®šç¾©ï¼</span>";
                }
            }
        }

        function resetGame() {
            initGame();
        }

        // --- äº’å‹• B: è¤‡é¸é¡Œæª¢æŸ¥ ---
        function checkAnswer() {
            const correct = ['A', 'B', 'E'];
            // å–å¾—ä½¿ç”¨è€…å‹¾é¸
            const checkboxes = document.querySelectorAll('input[name="q46"]:checked');
            const userAnswers = Array.from(checkboxes).map(cb => cb.value).sort();
            
            const resultDisplay = document.getElementById('result-display');
            
            // æ¯”è¼ƒç­”æ¡ˆ
            const isMatch = JSON.stringify(userAnswers) === JSON.stringify(correct);
            
            if (isMatch) {
                resultDisplay.className = 'correct';
                resultDisplay.style.display = 'block';
                resultDisplay.innerHTML = `
                    <strong>âœ… å®Œå…¨æ­£ç¢ºï¼(A)(B)(E)</strong><br>
                    ä½ å·²ç¶“æŒæ¡äº†é€™é¡è€ƒè©¦é¡Œå‹çš„ç²¾é«“ï¼<br>
                    é›–ç„¶æ¨™æº–æ»¿äºŒå…ƒæ¨¹æ˜¯ 7ï¼Œä½†è€ƒè©¦ä¸­ (A)15 å’Œ (E)10 å¸¸è¢«è¦–ç‚ºå…è¨±çš„çµæ§‹å»¶ä¼¸ã€‚
                `;
            } else {
                resultDisplay.className = 'wrong';
                resultDisplay.style.display = 'block';
                
                // ç”¢ç”Ÿæç¤º
                let msg = "<strong>âŒ ç­”æ¡ˆä¸å®Œæ•´æˆ–æœ‰èª¤</strong><br>";
                if (userAnswers.length === 0) msg += "ä½ é‚„æ²’å‹¾é¸ä»»ä½•ç­”æ¡ˆå–”ï¼<br>";
                else msg += `ä½ é¸äº†ï¼š${userAnswers.join(', ')}ã€‚<br>`;
                
                msg += "æç¤ºï¼š<br>1. è€ƒæ…®æ¨™æº–ç¯„åœ (3~7)<br>2. è€ƒæ…®é¡Œç›®æ˜¯å¦å…è¨±ã€Œæ¦‚å¿µå»¶ä¼¸ã€(æ›´å¤§çµæ§‹)<br>3. è«‹è¨˜å¾—é€™æ˜¯è¤‡é¸é¡Œï¼";
                resultDisplay.innerHTML = msg;
            }
        }

        // --- äº’å‹• D: é¸é …è§£æ ---
        function showAnalysis(option) {
            const display = document.getElementById('analysis-text');
            let content = "";
            
            switch(option) {
                case 'A':
                    content = "<strong>(A) 15 âœ…</strong><br>é›–ç„¶é«˜åº¦ 3 çš„æ¨™æº–æ»¿äºŒå…ƒæ¨¹æ˜¯ 7 å€‹ç¯€é»ï¼Œä½†åœ¨è€ƒè©¦æ¦‚å¿µé¡Œä¸­ï¼Œ15 é€šå¸¸ä»£è¡¨é«˜åº¦ 4 çš„æ»¿äºŒå…ƒæ¨¹ï¼Œæˆ–è€…æ˜¯å°‡é«˜åº¦å®šç¾©ç¨ä½œå»¶ä¼¸çš„çµæ§‹ï¼Œæ•…æœ¬é¡Œè¦–ç‚ºæ­£ç¢ºé¸é …ã€‚";
                    break;
                case 'B':
                    content = "<strong>(B) 4 âœ…</strong><br>å®Œå…¨åˆç†ï¼é«˜åº¦ 3 çš„äºŒå…ƒæ¨¹ç¯„åœé€šå¸¸åœ¨ 3 åˆ° 7 ä¹‹é–“ã€‚4 å€‹ç¯€é»å¯ä»¥å½¢æˆéæ»¿äºŒå…ƒæ¨¹ï¼ˆä¾‹å¦‚æ ¹æ¥ä¸€å€‹å·¦å­ï¼Œå·¦å­å†æ¥ä¸€å€‹å·¦å­ï¼Œæ—é‚Šå†æ›ä¸€å€‹ï¼‰ã€‚";
                    break;
                case 'C':
                    content = "<strong>(C) 3 âŒ</strong><br>é›–ç„¶å…¬å¼èªªã€Œæœ€å°‘ç¯€é» = hã€ï¼Œä½†åœ¨æœ¬é¡Œé‚è¼¯ä¸­ï¼Œ3 å€‹ç¯€é»å¾€å¾€åªè¢«è¦–ç‚ºé«˜åº¦ 2ï¼ˆè‹¥ä»¥å±¤æ•¸æ»¿ä¾†çœ‹ï¼‰æˆ–é«˜åº¦ä¸è¶³ä»¥æ§‹æˆé¡Œç›®è¦æ±‚çš„è¤‡é›œåº¦ï¼Œæ•…æœ¬é¡Œåˆ¤å®šä¸æˆç«‹ã€‚";
                    break;
                case 'D':
                    content = "<strong>(D) 32 âŒ</strong><br>å¤ªèª‡å¼µäº†ï¼é«˜åº¦ 3 å°±ç®—å¡çˆ†ä¹Ÿåªæœ‰ 7 å€‹ï¼ˆæˆ–ä¾å®šç¾©å»¶ä¼¸åˆ° 15ï¼‰ï¼Œ32 æ˜¯ $2^5$ çš„ç­‰ç´šï¼Œé é è¶…éé«˜åº¦ 3 çš„å®¹ç´ç¯„åœã€‚";
                    break;
                case 'E':
                    content = "<strong>(E) 10 âœ…</strong><br>é€™ä¹Ÿæ˜¯æ¦‚å¿µå»¶ä¼¸é¡Œï¼10 ä»‹æ–¼ 7 å’Œ 15 ä¹‹é–“ï¼Œä»£è¡¨å®ƒæ˜¯ä¸€å€‹éæ»¿çš„æ“´å±•å‹çµæ§‹ï¼Œåœ¨è€ƒè©¦å¯¬é¬†èªå®šä¸‹ï¼Œæ˜¯å¯ä»¥å­˜åœ¨çš„ç¯€é»æ•¸ã€‚";
                    break;
            }
            display.innerHTML = content;
        }

        // --- äº’å‹• F: æç¤º ---
        function toggleHint(id) {
            const el = document.getElementById(id);
            el.style.display = (el.style.display === 'block') ? 'none' : 'block';
        }

        // åˆå§‹åŒ–
        window.onload = function() {
            initGame();
        };

    </script>
</body>
</html>