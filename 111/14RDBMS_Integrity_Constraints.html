<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q14_é—œè¯å¼è³‡æ–™åº«_å®Œæ•´æ€§é™åˆ¶_èª°ä¸è¢«å…è¨±</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --accent-color: #ff6b6b;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-color: #333333;
            --correct-color: #4cd964;
            --wrong-color: #ff3b30;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "PingFang TC", "Microsoft JhengHei", "Heiti TC", sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 80px;
        }

        /* é é¦– */
        header {
            background: linear-gradient(135deg, var(--primary-color), #357abd);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        header h1 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        header .sub-title {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* å°è¦½æµç¨‹æ¢ */
        .progress-bar {
            display: flex;
            justify-content: center;
            background: white;
            padding: 10px;
            font-size: 0.8rem;
            white-space: nowrap;
            overflow-x: auto;
            border-bottom: 1px solid #ddd;
        }

        .step {
            margin: 0 5px;
            padding: 5px 10px;
            border-radius: 15px;
            background: #eee;
            color: #777;
        }

        .step.active {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        /* é€šç”¨å®¹å™¨ */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        /* å¡ç‰‡æ¨£å¼ */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            border-left: 5px solid var(--primary-color);
        }

        .card h2 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        /* é¡Œç›®å€å¡Š */
        .question-box {
            background: #eef5fc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 8px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            width: 100%;
            max-width: 300px;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        /* äº’å‹• A: åè©é‡æ¸… */
        .choice-btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        /* äº’å‹• B: å››é¸ä¸€ */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .option-card {
            background: white;
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .option-card:hover {
            border-color: var(--primary-color);
            background: #f9fcff;
        }

        .option-card.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* äº’å‹• C: åˆ†é¡éŠæˆ² */
        .drag-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .drop-zone {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 15px;
            min-height: 80px;
            background: #fafafa;
            position: relative;
        }

        .drop-zone h3 {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 10px;
            text-align: center;
            pointer-events: none;
        }

        .draggable-item {
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            display: inline-block;
            cursor: pointer;
            font-size: 0.9rem;
            user-select: none;
        }

        .draggable-item.active {
            background: var(--accent-color);
            transform: scale(1.1);
        }

        /* äº’å‹• D: SQL ç¿»ç‰Œ */
        .sql-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .sql-card {
            background: #333;
            color: #00ff00;
            font-family: monospace;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .sql-card .answer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--card-bg);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: sans-serif;
            font-weight: bold;
            transform: translateY(100%);
            transition: transform 0.3s;
            font-size: 0.9rem;
        }

        .sql-card.revealed .answer {
            transform: translateY(0);
        }

        /* äº’å‹• E: O/X */
        .ox-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        .ox-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            font-weight: bold;
            cursor: pointer;
            margin-left: 5px;
        }
        .btn-o { background: #eee; color: var(--correct-color); }
        .btn-x { background: #eee; color: var(--wrong-color); }

        /* å›é¥‹èˆ‡æç¤º */
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            animation: fadeIn 0.5s;
        }
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* æ¨¡æ…‹æ¡† (Modal) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        .reason-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
        }
        .reason-btn:hover { background: #e0e0e0; }

        /* ç”Ÿæ´»åŒ–æ¯”å–»èˆ‡å£è¨£ */
        .analogy-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
        }

        .mnemonic-card {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* è­¦ç¤ºæ¡† */
        .warning-box {
            border: 2px solid var(--accent-color);
            background: #fff5f5;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            position: relative;
        }
        .warning-box::before {
            content: 'âš ï¸ é™·é˜±æ³¨æ„';
            position: absolute;
            top: -12px;
            left: 15px;
            background: var(--accent-color);
            color: white;
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        /* æ•™å¸«å‚™è¨» */
        .teacher-note {
            margin-top: 40px;
            border-top: 2px dashed #ccc;
            padding-top: 20px;
        }
        .teacher-note details summary {
            cursor: pointer;
            color: #666;
            font-weight: bold;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ¨™ç±¤ Badge */
        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            color: white;
            margin-right: 5px;
        }
        .bg-pk { background: #e91e63; }
        .bg-fk { background: #9c27b0; }
        .bg-check { background: #ff9800; }

    </style>
</head>
<body>

<header>
    <h1>Q14. é—œè¯å¼è³‡æ–™åº«çš„å®Œæ•´æ€§é™åˆ¶</h1>
    <div class="sub-title">é«˜ä¸­è³‡è¨Šç§‘æŠ€ï¼šè³‡æ–™åº«æ¦‚è«–</div>
</header>

<div class="progress-bar">
    <div class="step active">1. åè©é‡æ¸…</div>
    <div class="step">2. æ¦‚å¿µ vs è¦å‰‡</div>
    <div class="step">3. å®Œæ•´æ€§åˆ†é¡</div>
    <div class="step">4. é¸é …åˆ†æ</div>
    <div class="step">5. ç¸½çµ</div>
</div>

<div class="container">

    <!-- é¡Œç›®å±•ç¤º -->
    <div class="card">
        <h2>é¡Œç›®é è¦½</h2>
        <div class="question-box">
            <p>å°æ–¼é—œè¯å¼è³‡æ–™åº«è€Œè¨€ï¼Œæ‰€è¬‚è³‡æ–™å®Œæ•´æ€§ï¼ˆdata integrityï¼‰æ˜¯ç”¨ä¾†ç¢ºä¿è³‡æ–™åº«ä¸­è³‡æ–™çš„æ­£ç¢ºæ€§åŠå¯é æ€§ã€‚<br>
            ä¸‹åˆ—ä½•è€…<strong>ä¸¦é</strong>é—œè¯æ¨¡å‹æ‰€å…è¨±å®šç¾©ä¹‹å®Œæ•´æ€§é™åˆ¶æ¢ä»¶ï¼ˆconstraintsï¼‰ï¼Ÿ</p>
        </div>
        <div class="options-grid" style="pointer-events: none; opacity: 0.6;">
            <div class="option-card">(A) å¯¦é«”å®Œæ•´æ€§</div>
            <div class="option-card">(B) è³‡æ–™å®Œæ•´æ€§</div>
            <div class="option-card">(C) åƒç…§å®Œæ•´æ€§</div>
            <div class="option-card">(D) ä½¿ç”¨è€…å®šç¾©çš„å®Œæ•´æ€§</div>
        </div>
        <p style="text-align: center; margin-top: 10px; color: #888;">(åˆ¥æ€¥è‘—é¸ï¼Œæˆ‘å€‘å…ˆææ‡‚è§€å¿µï¼)</p>
    </div>

    <!-- 1. åè©é‡æ¸…äº’å‹• -->
    <div class="card" id="part1">
        <h2>1. åè©å¤§æŒ‘æˆ°ï¼šç›®æ¨™ vs æ‰‹æ®µ</h2>
        <p>é¦–å…ˆï¼Œæˆ‘å€‘å¾—å…ˆåˆ†æ¸…æ¥šã€Œç›®çš„ã€è·Ÿã€Œæ–¹æ³•ã€ã€‚</p>
        <div class="question-box" style="text-align: center;">
            è«‹å•ï¼šã€Œè³‡æ–™å®Œæ•´æ€§ (Data Integrity)ã€é€™äº”å€‹å­—<br>
            æ˜¯æŒ‡ä¸€ç¨®ã€Œè¦å‰‡é¡å‹ã€ï¼Œé‚„æ˜¯ä¸€å€‹ã€Œç¸½é«”ç›®æ¨™ã€ï¼Ÿ
        </div>
        
        <div class="choice-btn-group">
            <button class="btn btn-outline" onclick="checkTerm(1)">â‘  ä¸€ç¨®å…·é«”çš„å®Œæ•´æ€§é™åˆ¶ (Rule)</button>
            <button class="btn btn-outline" onclick="checkTerm(2)">â‘¡ ä¸€å€‹æ•´é«”çš„æ¦‚å¿µèˆ‡ç›®çš„ (Goal)</button>
        </div>

        <div id="term-feedback" class="feedback"></div>
        
        <div class="analogy-box" id="term-analogy" style="display:none;">
            <strong>ğŸ« å­¸æ ¡ç”Ÿæ´»æ¯”å–»ï¼š</strong><br>
            ã€Œè³‡æ–™å®Œæ•´æ€§ã€å°±åƒæ˜¯<strong>ã€Œç¶­è­·æ ¡åœ’ç§©åºã€</strong>é€™å€‹å¤§ç›®æ¨™ã€‚<br>
            è€Œã€Œä¸èƒ½é²åˆ°ã€ã€ã€Œè¦ç©¿åˆ¶æœã€é€™äº›æ‰æ˜¯å…·é«”çš„<strong>ã€Œæ ¡è¦ (Constraints)ã€</strong>ã€‚<br>
            æˆ‘å€‘é€ééµå®ˆæ ¡è¦ï¼Œä¾†é”æˆæ ¡åœ’ç§©åºã€‚<br>
            æ‰€ä»¥ï¼Œã€Œæ ¡åœ’ç§©åºã€æœ¬èº«ä¸æ˜¯ä¸€æ¢æ ¡è¦ï¼Œå®ƒæ˜¯ç›®æ¨™ï¼
        </div>
    </div>

    <!-- 2. åˆ†é¡äº’å‹• -->
    <div class="card" id="part2" style="display:none;">
        <h2>2. æ­¸ç´åˆ†é¡ï¼šèª°æ˜¯è¦å‰‡ï¼Ÿèª°æ˜¯æ¦‚å¿µï¼Ÿ</h2>
        <p>è«‹é»æ“Šä¸‹æ–¹çš„åè©ï¼Œç„¶å¾Œé»æ“Šå®ƒè©²å»çš„ç®±å­ã€‚</p>
        
        <div class="drag-container">
            <!-- ä¾†æºå€ -->
            <div class="drop-zone" id="source-zone">
                <h3>å¾…åˆ†é¡åè© (é»æ“Šé¸å–)</h3>
                <span class="draggable-item" onclick="selectItem(this)" data-type="constraint">å¯¦é«”å®Œæ•´æ€§</span>
                <span class="draggable-item" onclick="selectItem(this)" data-type="goal">è³‡æ–™å®Œæ•´æ€§</span>
                <span class="draggable-item" onclick="selectItem(this)" data-type="constraint">åƒç…§å®Œæ•´æ€§</span>
                <span class="draggable-item" onclick="selectItem(this)" data-type="constraint">ä½¿ç”¨è€…å®šç¾©å®Œæ•´æ€§</span>
            </div>

            <!-- ç›®æ¨™å€ -->
            <div class="drop-zone" id="target-constraint" onclick="moveToZone(this, 'constraint')" style="background: #e3f2fd; border-color: #2196f3;">
                <h3>ğŸ“¦ å…·é«”çš„é™åˆ¶è¦å‰‡ (Constraints)</h3>
            </div>

            <div class="drop-zone" id="target-goal" onclick="moveToZone(this, 'goal')" style="background: #fff3e0; border-color: #ff9800;">
                <h3>ğŸ¯ æŠ½è±¡çš„ç¸½é«”ç›®æ¨™ (Goal)</h3>
            </div>
        </div>

        <button class="btn" style="margin-top:15px;" onclick="checkClassification()">æª¢æŸ¥ç­”æ¡ˆ</button>
        <div id="class-feedback" class="feedback"></div>
    </div>

    <!-- 3. SQL è¦å‰‡å°æ‡‰ -->
    <div class="card" id="part3" style="display:none;">
        <h2>3. SQL å¯¦æˆ°å°æ‡‰</h2>
        <p>åœ¨å¯« SQL èªæ³•æ™‚ï¼Œæˆ‘å€‘æœƒç”¨åˆ°ä»¥ä¸‹é—œéµå­—ï¼Œè©¦è‘—é»é–‹çœ‹çœ‹å®ƒå€‘å±¬æ–¼å“ªç¨®å®Œæ•´æ€§ï¼Ÿ</p>
        
        <div class="sql-grid">
            <div class="sql-card" onclick="this.classList.toggle('revealed')">
                PRIMARY KEY<br>(ä¸»éµ)
                <div class="answer"><span class="badge bg-pk">å¯¦é«”å®Œæ•´æ€§</span><br>ç¢ºä¿æ¯ç­†è³‡æ–™å”¯ä¸€ä¸”ä¸ç‚ºç©º</div>
            </div>
            <div class="sql-card" onclick="this.classList.toggle('revealed')">
                FOREIGN KEY<br>(å¤–ä¾†éµ)
                <div class="answer"><span class="badge bg-fk">åƒç…§å®Œæ•´æ€§</span><br>ç¢ºä¿è³‡æ–™é—œè¯æ­£ç¢ºå­˜åœ¨</div>
            </div>
            <div class="sql-card" onclick="this.classList.toggle('revealed')">
                CHECK / UNIQUE<br>(æª¢æŸ¥æ¢ä»¶)
                <div class="answer"><span class="badge bg-check">ä½¿ç”¨è€…å®šç¾©</span><br>è‡ªè¨‚è¦å‰‡(å¦‚:åˆ†æ•¸0-100)</div>
            </div>
            <div class="sql-card" onclick="this.classList.toggle('revealed')">
                DATA INTEGRITY<br>(è³‡æ–™å®Œæ•´æ€§)
                <div class="answer" style="background: #ffcccc; color: #cc0000;">âŒ æ²’é€™èªæ³•<br>é€™æ˜¯ç›®æ¨™ï¼Œä¸æ˜¯æŒ‡ä»¤ï¼</div>
            </div>
        </div>
    </div>

    <!-- 4. é¸ç­”æ¡ˆäº’å‹• -->
    <div class="card" id="part4" style="display:none;">
        <h2>4. æœ€çµ‚è§£é¡Œ</h2>
        <div class="question-box">
            ä¸‹åˆ—ä½•è€…<strong>ä¸¦é</strong>é—œè¯æ¨¡å‹æ‰€å…è¨±å®šç¾©ä¹‹å®Œæ•´æ€§é™åˆ¶æ¢ä»¶ï¼ˆconstraintsï¼‰ï¼Ÿ
        </div>
        
        <div class="options-grid">
            <div class="option-card" onclick="openReasonModal('A', 'å¯¦é«”å®Œæ•´æ€§')">(A) å¯¦é«”å®Œæ•´æ€§</div>
            <div class="option-card" onclick="openReasonModal('B', 'è³‡æ–™å®Œæ•´æ€§')">(B) è³‡æ–™å®Œæ•´æ€§</div>
            <div class="option-card" onclick="openReasonModal('C', 'åƒç…§å®Œæ•´æ€§')">(C) åƒç…§å®Œæ•´æ€§</div>
            <div class="option-card" onclick="openReasonModal('D', 'ä½¿ç”¨è€…å®šç¾©çš„å®Œæ•´æ€§')">(D) ä½¿ç”¨è€…å®šç¾©çš„å®Œæ•´æ€§</div>
        </div>

        <div id="final-answer-feedback" class="feedback"></div>
    </div>

    <!-- 5. è¿·æ€ç ´è§£èˆ‡ç¸½çµ -->
    <div class="card" id="part5" style="display:none;">
        <h2>5. è§€å¿µç¸½çµèˆ‡æª¢æ¸¬</h2>
        
        <div class="warning-box">
            <p><strong>å¸¸è¦‹é™·é˜±ï¼š</strong>çœ‹åˆ°é¡Œç›®å•ã€Œå®Œæ•´æ€§ã€ï¼Œå¾ˆå®¹æ˜“è¢«é¸é …ä¸­æœ‰ã€Œè³‡æ–™å®Œæ•´æ€§ã€é€™äº”å€‹å­—é¨™èµ°ã€‚è«‹è¨˜ä½ï¼Œå¤§æ¨™é¡Œé€šå¸¸ä¸æ˜¯åˆ†é¡é …ç›®ä¹‹ä¸€ï¼</p>
        </div>

        <div class="mnemonic-card">
            å£è¨£ä¸€ï¼šã€Œè³‡æ–™å®Œæ•´æ€§æ˜¯ç›®æ¨™ï¼Œä¸æ˜¯è¦å‰‡ã€<br>
            å£è¨£äºŒï¼šã€Œå¯¦é«”ã€åƒç…§ã€ä½¿ç”¨è€…ï¼Œæ‰æ˜¯ä¸‰å¤§è­·æ³•ã€
        </div>

        <h3 style="margin-top:20px;">å¿«é€Ÿæ˜¯éé¡Œ</h3>
        <div class="ox-row">
            <span>Q1: ã€Œè³‡æ–™å®Œæ•´æ€§ã€æ˜¯ä¸€ç¨® Constraint çš„åç¨±ï¼Ÿ</span>
            <div>
                <button class="ox-btn btn-o" onclick="checkOX(this, false)">O</button>
                <button class="ox-btn btn-x" onclick="checkOX(this, true)">X</button>
            </div>
        </div>
        <div class="ox-row">
            <span>Q2: PRIMARY KEY æ˜¯ç”¨ä¾†ç¶­è­·ã€Œå¯¦é«”å®Œæ•´æ€§ã€ï¼Ÿ</span>
            <div>
                <button class="ox-btn btn-o" onclick="checkOX(this, true)">O</button>
                <button class="ox-btn btn-x" onclick="checkOX(this, false)">X</button>
            </div>
        </div>
        <div class="ox-row">
            <span>Q3: ç‚ºäº†ç¢ºä¿æˆç¸¾è¡¨ä¸€å®šå°æ‡‰åˆ°å­˜åœ¨çš„å­¸ç”Ÿï¼Œéœ€è¦ã€Œåƒç…§å®Œæ•´æ€§ã€ï¼Ÿ</span>
            <div>
                <button class="ox-btn btn-o" onclick="checkOX(this, true)">O</button>
                <button class="ox-btn btn-x" onclick="checkOX(this, false)">X</button>
            </div>
        </div>

        <div class="teacher-note">
            <details>
                <summary>ğŸ‘¨â€ğŸ« æ•™å¸«å‚™è¨» (é»æ“Šå±•é–‹)</summary>
                <p style="margin-top:10px; font-size: 0.9rem; color: #555;">
                    1. æœ¬é¡Œæ˜¯ã€Œåè©é™·é˜±å‹ã€è¶…é«˜é »è€ƒé¡Œã€‚<br>
                    2. å­¸ç”Ÿå¸¸æ··æ·†ã€Œç›®çš„ã€èˆ‡ã€Œæ‰‹æ®µã€ã€‚<br>
                    3. åœ¨æ•™å­¸ç¾å ´ï¼Œå»ºè­°ç”¨ã€Œæ³•å¾‹(å®Œæ•´æ€§) vs æ†²æ³•ç²¾ç¥(è³‡æ–™æ­£ç¢º)ã€ä¾†æ¯”å–»ã€‚<br>
                    4. (A)(C)(D) æ˜¯ Codd é—œè¯æ¨¡å‹ä¸­å®šç¾©çš„ä¸‰é¡å®Œæ•´æ€§é™åˆ¶ï¼Œå¿…é ˆæ­»è¨˜ã€‚
                </p>
            </details>
        </div>
    </div>

</div>

<!-- æ¨¡æ…‹æ¡†ï¼šè©¢å•ç†ç”± -->
<div id="reasonModal" class="modal-overlay">
    <div class="modal-content">
        <h3 id="modal-title">ä½ é¸æ“‡äº†...</h3>
        <p>ç‚ºä»€éº¼é¸é€™å€‹ç­”æ¡ˆï¼Ÿ</p>
        <button class="reason-btn" onclick="submitAnswer('looks_like')">ğŸ¤” åå­—çœ‹èµ·ä¾†æœ€åƒæ­£ç¢ºç­”æ¡ˆ</button>
        <button class="reason-btn" onclick="submitAnswer('memorized')">ğŸ“š æˆ‘è¨˜å¾—æ›¸ä¸Šæ˜¯é€™æ¨£åˆ†é¡çš„</button>
        <button class="reason-btn" onclick="submitAnswer('rule_vs_goal')">ğŸ’¡ å› ç‚ºå®ƒæ˜¯ç›®æ¨™ï¼Œä¸æ˜¯è¦å‰‡ç¨®é¡</button>
        <button class="reason-btn" onclick="submitAnswer('guess')">ğŸ² æˆ‘æ˜¯ç”¨çŒœçš„</button>
        <button class="btn btn-outline" style="margin-top:10px; width:auto;" onclick="closeModal()">å–æ¶ˆ</button>
    </div>
</div>

<script>
    let currentSelectedOption = '';
    let selectedDragItem = null;

    // 1. åè©é‡æ¸…é‚è¼¯
    function checkTerm(option) {
        const feedback = document.getElementById('term-feedback');
        const analogy = document.getElementById('term-analogy');
        
        feedback.style.display = 'block';
        if (option === 2) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>âœ… ç­”å°äº†ï¼</strong><br>ã€Œè³‡æ–™å®Œæ•´æ€§ã€æ˜¯æˆ‘å€‘æƒ³è¦é”åˆ°çš„<strong>æœ€çµ‚ç‹€æ…‹ï¼ˆç›®æ¨™ï¼‰</strong>ï¼Œè€Œä¸æ˜¯æŸä¸€æ¢å…·é«”çš„è¦å‰‡ã€‚';
            analogy.style.display = 'block';
            // è§£é–ä¸‹ä¸€é—œ
            setTimeout(() => { document.getElementById('part2').style.display = 'block'; scrollSmooth('part2'); }, 1500);
        } else {
            feedback.className = 'feedback wrong';
            feedback.innerHTML = '<strong>âŒ ç­”éŒ¯å›‰ï¼</strong><br>è³‡æ–™å®Œæ•´æ€§æ˜¯ä¸€å€‹ã€Œå¤§æ¦‚å¿µã€ï¼Œä¸¦ä¸æ˜¯å…¶ä¸­ä¸€ç¨®é™åˆ¶è¦å‰‡çš„åå­—å–”ã€‚è«‹å†æƒ³ä¸€ä¸‹ï¼';
        }
    }

    // 2. åˆ†é¡éŠæˆ²é‚è¼¯ (Click-Select-Move)
    function selectItem(element) {
        // æ¸…é™¤å…¶ä»–é¸å–ç‹€æ…‹
        document.querySelectorAll('.draggable-item').forEach(el => el.classList.remove('active'));
        // é¸å–ç•¶å‰
        element.classList.add('active');
        selectedDragItem = element;
    }

    function moveToZone(zone, zoneType) {
        if (!selectedDragItem) return;
        
        // ç§»å‹•å…ƒç´ 
        zone.appendChild(selectedDragItem);
        selectedDragItem.classList.remove('active');
        
        // æš«å­˜ç›®å‰çš„æ”¾ç½®ç‹€æ…‹ï¼ˆç”¨æ–¼æª¢æŸ¥ï¼‰
        selectedDragItem.dataset.currentZone = zoneType;
        selectedDragItem = null;
    }

    function checkClassification() {
        const items = document.querySelectorAll('.draggable-item');
        let allCorrect = true;
        let feedbackHTML = "";

        items.forEach(item => {
            const correctType = item.dataset.type;
            const currentZone = item.parentElement.id === 'target-constraint' ? 'constraint' : 
                                item.parentElement.id === 'target-goal' ? 'goal' : 'source';

            if (currentZone === 'source') {
                allCorrect = false;
                feedbackHTML += `âš ï¸ è«‹å°‡ <strong>${item.innerText}</strong> æ”¾å…¥ç®±å­ä¸­ã€‚<br>`;
            } else if (correctType !== currentZone) {
                allCorrect = false;
                item.style.backgroundColor = '#ff3b30'; // éŒ¯èª¤æ¨™ç¤ºç´…
                setTimeout(() => item.style.backgroundColor = 'var(--primary-color)', 1000);
            }
        });

        const feedback = document.getElementById('class-feedback');
        feedback.style.display = 'block';

        if (allCorrect) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>ğŸ‰ å…¨å°ï¼æ¦‚å¿µå¾ˆæ¸…æ¥šå–”ï¼</strong><br>åªæœ‰ã€Œè³‡æ–™å®Œæ•´æ€§ã€æ˜¯ç›®æ¨™ï¼Œå…¶ä»–ä¸‰å€‹éƒ½æ˜¯å…·é«”çš„è¦å‰‡(Constraints)ã€‚';
            // è§£é–ä¸‹ä¸€é—œ
            document.getElementById('part3').style.display = 'block';
            document.getElementById('part4').style.display = 'block';
            scrollSmooth('part3');
        } else {
            feedback.className = 'feedback wrong';
            if (feedbackHTML === "") feedbackHTML = "âŒ é‚„æœ‰æ”¾éŒ¯ä½ç½®çš„å–”ï¼Œå†æª¢æŸ¥ä¸€ä¸‹ï¼(æç¤ºï¼šåªæœ‰ä¸€å€‹æ˜¯ç›®æ¨™)";
            feedback.innerHTML = feedbackHTML;
        }
    }

    // 4. é¸é …åˆ†æé‚è¼¯
    function openReasonModal(option, text) {
        currentSelectedOption = option;
        document.getElementById('modal-title').innerText = `ä½ é¸æ“‡äº† (${option}) ${text}`;
        document.getElementById('reasonModal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('reasonModal').style.display = 'none';
    }

    function submitAnswer(reason) {
        closeModal();
        const feedback = document.getElementById('final-answer-feedback');
        feedback.style.display = 'block';

        let analysis = "";

        if (currentSelectedOption === 'B') {
            feedback.className = 'feedback correct';
            analysis = `
                <h3>âœ… æ­£ç¢ºç­”æ¡ˆï¼</h3>
                <p><strong>(B) è³‡æ–™å®Œæ•´æ€§</strong> æ˜¯æ­£ç¢ºç­”æ¡ˆã€‚</p>
                <hr style="margin:10px 0; border:0; border-top:1px dashed #ccc;">
                <strong>è©³ç´°è§£æï¼š</strong><br>
                <ul>
                    <li>(A) <strong>å¯¦é«”å®Œæ•´æ€§ (Entity Integrity)</strong>ï¼šé—œè¯æ¨¡å‹å…è¨±ã€‚ä¾‹å¦‚ï¼šä¸»éµ (Primary Key) ä¸èƒ½æ˜¯ Nullï¼Œç¢ºä¿æ¯ç­†è³‡æ–™èƒ½è¢«è­˜åˆ¥ã€‚</li>
                    <li>(C) <strong>åƒç…§å®Œæ•´æ€§ (Referential Integrity)</strong>ï¼šé—œè¯æ¨¡å‹æ ¸å¿ƒã€‚ä¾‹å¦‚ï¼šå¤–ä¾†éµ (Foreign Key) å°æ‡‰çš„å€¼å¿…é ˆå­˜åœ¨ï¼Œç¢ºä¿è³‡æ–™é—œè¯æ­£ç¢ºã€‚</li>
                    <li>(D) <strong>ä½¿ç”¨è€…å®šç¾©å®Œæ•´æ€§ (User-defined Integrity)</strong>ï¼šé—œè¯æ¨¡å‹å…è¨±ã€‚ä¾‹å¦‚ï¼šæˆç¸¾å¿…é ˆåœ¨ 0-100 ä¹‹é–“ (CHECK)ï¼Œé€™æ˜¯ä¾ç…§éœ€æ±‚è‡ªè¨‚çš„è¦å‰‡ã€‚</li>
                    <li>(B) <strong>è³‡æ–™å®Œæ•´æ€§</strong>ï¼šé€™æ˜¯æ‰€æœ‰è¦å‰‡åŸ·è¡Œå¾Œçš„<strong>ã€Œçµæœèˆ‡ç›®æ¨™ã€</strong>ï¼Œæœ¬èº«ä¸æ˜¯ä¸€ç¨®è¦å‰‡çš„åç¨±ã€‚</li>
                </ul>
            `;
            // è§£é–æœ€å¾Œä¸€é—œ
            document.getElementById('part5').style.display = 'block';
            scrollSmooth('part5');
        } else {
            feedback.className = 'feedback wrong';
            analysis = `
                <h3>âŒ ç­”éŒ¯å›‰ï¼</h3>
                <p><strong>(${currentSelectedOption})</strong> æ˜¯ä¸€ç¨®è¢«å…è¨±çš„å®Œæ•´æ€§é™åˆ¶ã€‚</p>
                <p>é¡Œç›®å•çš„æ˜¯ã€Œ<strong>ä¸¦é</strong>ã€å…è¨±çš„é™åˆ¶æ¢ä»¶ã€‚</p>
                <p>æç¤ºï¼šè«‹å›æƒ³å‰›å‰›çš„åˆ†é¡éŠæˆ²ï¼Œå“ªä¸€å€‹æ˜¯ã€Œç›®æ¨™ã€è€Œä¸æ˜¯ã€Œè¦å‰‡ã€ï¼Ÿ</p>
                <p>å†è©¦ä¸€æ¬¡å§ï¼</p>
            `;
        }
        feedback.innerHTML = analysis;
    }

    // 5. O/X é‚è¼¯
    function checkOX(btn, isCorrect) {
        // é‡ç½®åŒåˆ—æŒ‰éˆ•æ¨£å¼
        const siblings = btn.parentElement.children;
        for (let s of siblings) {
            s.style.opacity = '0.5';
            s.style.transform = 'scale(1)';
        }
        
        btn.style.opacity = '1';
        btn.style.transform = 'scale(1.2)';

        if (isCorrect) {
            btn.style.border = '2px solid #4cd964';
            // å¯ä»¥åœ¨é€™è£¡åŠ ä¸€é»éŸ³æ•ˆæˆ–è¦–è¦ºå›é¥‹
        } else {
            btn.style.border = '2px solid #ff3b30';
            btn.classList.add('shake'); // å‡è¨­æœ‰ shake å‹•ç•«
            setTimeout(() => btn.classList.remove('shake'), 500);
        }
    }

    // å¹³æ»‘æ²å‹•å·¥å…·
    function scrollSmooth(id) {
        document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    }

</script>

</body>
</html>