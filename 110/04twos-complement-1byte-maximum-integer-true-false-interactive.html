<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«–äº’å‹•è¬›ç¾© - æ˜¯éé¡Œ ç¬¬ 4 é¡Œ</title>
    <style>
        /* * å…¨åŸŸè¨­å®š
         * ä½¿ç”¨ç³»çµ±é è¨­ç„¡è¥¯ç·šå­—é«”ï¼Œæ¨¡æ“¬è¬›ç¾©çš„æ¸…æ™°æ„Ÿ
         */
        :root {
            --primary-color: #2c3e50;    /* æ·±è—è‰²ï¼šä¸»æ¨™é¡Œ */
            --accent-color: #e74c3c;     /* ç´…è‰²ï¼šéŒ¯èª¤/é‡é» */
            --success-color: #27ae60;    /* ç¶ è‰²ï¼šæ­£ç¢º */
            --highlight-color: #f1c40f;  /* é»ƒè‰²ï¼šè¢å…‰ç­†æ•ˆæœ */
            --bg-color: #fdfdfd;         /* å¾®å¾®ç°çš„ç™½ç´™èƒŒæ™¯ */
            --card-bg: #ffffff;
            --border-radius: 8px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        /* * å®¹å™¨è¨­å®šï¼šé™åˆ¶å¯¬åº¦ä»¥é”åˆ°è¬›ç¾©é–±è®€çš„æœ€ä½³é«”é©— 
         */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 5px solid var(--primary-color); /* è¬›ç¾©é ‚éƒ¨æ¢ç´‹ */
        }

        /* * æ¨™é¡Œå€ 
         */
        h1, h2, h3 {
            color: var(--primary-color);
            margin-top: 1.5em;
        }
        
        .header-section {
            text-align: center;
            border-bottom: 2px dashed #ddd;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .header-section h1 {
            margin: 0;
            font-size: 1.8rem;
        }

        .sub-title {
            color: #7f8c8d;
            font-size: 1rem;
        }

        /* * é¡Œç›®å€å¡Š 
         */
        .question-box {
            background-color: #eaf2f8;
            border-left: 5px solid #3498db;
            padding: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 30px;
            border-radius: 4px;
        }

        .keyword {
            color: #d35400;
            background-color: #fad7a0; /* è¢å…‰ç­†æ•ˆæœ */
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* * äº’å‹•æŒ‰éˆ•å€ (O/X) 
         */
        .interaction-area {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .btn-option {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: none;
            font-size: 3rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-o {
            background-color: white;
            border: 4px solid var(--success-color);
            color: var(--success-color);
        }

        .btn-x {
            background-color: white;
            border: 4px solid var(--accent-color);
            color: var(--accent-color);
        }

        .btn-option:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .btn-option:active {
            transform: scale(0.95);
        }

        /* * çµæœå›é¥‹å€ 
         */
        #result-area {
            display: none; /* é è¨­éš±è— */
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border-radius: var(--border-radius);
            animation: fadeIn 0.5s;
        }

        .correct-msg {
            background-color: #d5f5e3;
            color: #196f3d;
            border: 1px solid #abebc6;
        }

        .wrong-msg {
            background-color: #fadbd8;
            color: #943126;
            border: 1px solid #f5b7b1;
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        /* * é‡é»æ•™å­¸å…§å®¹å€ (é è¨­éš±è—ï¼Œç­”é¡Œå¾Œé¡¯ç¤º) 
         */
        #explanation-content {
            display: none;
            margin-top: 40px;
        }

        .concept-card {
            background: #fff;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .concept-title {
            font-weight: bold;
            color: var(--primary-color);
            border-bottom: 2px solid var(--highlight-color);
            display: inline-block;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        /* * è¡¨æ ¼æ¨£å¼ 
         */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        th {
            background-color: #f2f6f8;
            color: var(--primary-color);
        }

        .highlight-row {
            background-color: #fff9c4; /* æ·¡æ·¡çš„é»ƒè‰²èƒŒæ™¯å¼·èª¿ */
            font-weight: bold;
        }

        /* * ä½å…ƒè¨ˆç®—äº’å‹•å€ 
         */
        .calculator-box {
            background-color: #2c3e50;
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .slider-container {
            margin: 20px 0;
        }

        input[type=range] {
            width: 80%;
            cursor: pointer;
        }

        .calc-display {
            font-size: 1.8rem;
            margin: 20px 0;
            font-family: monospace;
            color: var(--highlight-color);
        }

        .radio-group {
            margin-bottom: 15px;
        }

        .radio-group label {
            margin: 0 10px;
            cursor: pointer;
            font-size: 1.1rem;
        }

        /* * é™·é˜±å¡ç‰‡ 
         */
        .trap-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .trap-card {
            background-color: #fff;
            border: 2px solid #e74c3c;
            padding: 15px;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .trap-card h4 {
            color: #c0392b;
            margin-top: 0;
        }

        .trap-dismiss {
            font-size: 0.8rem;
            color: #999;
            text-align: right;
            margin-top: 10px;
            font-style: italic;
        }

        /* * ç¯„ä¾‹äº’å‹•å€ 
         */
        .binary-example {
            background-color: #f8f9f9;
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            border-radius: 4px;
            border-left: 3px solid #95a5a6;
        }
        
        .binary-example:hover {
            background-color: #ecf0f1;
        }
        
        .example-detail {
            display: none;
            color: #555;
            font-size: 0.9rem;
            margin-top: 5px;
            padding-left: 10px;
        }

        /* * è‡ªæˆ‘æª¢æ¸¬æç¤ºå€ 
         */
        .quiz-item {
            margin-bottom: 15px;
            border-bottom: 1px dotted #ccc;
            padding-bottom: 10px;
        }

        .hint-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .hint-text {
            display: none;
            color: #e67e22;
            margin-top: 5px;
            font-weight: bold;
        }

        /* é‡ç½®æŒ‰éˆ• */
        .reset-btn {
            display: block;
            margin: 40px auto 0;
            background-color: #95a5a6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
        }

        .reset-btn:hover {
            background-color: #7f8c8d;
        }

        /* è¨»è…³ */
        .footer {
            text-align: center;
            margin-top: 50px;
            color: #aaa;
            font-size: 0.8rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ‰‹æ©Ÿç‰ˆå„ªåŒ– */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            .btn-option {
                width: 100px;
                height: 100px;
            }
            .trap-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- é é¢æ¨™é¡Œ -->
    <div class="header-section">
        <h1>é›»è…¦æ¦‚è«– - æ•¸å€¼è¡¨ç¤ºæ³•</h1>
        <div class="sub-title">æ˜¯éé¡Œ è§€å¿µé‡æ¸…èˆ‡é™·é˜±ç ´è§£</div>
    </div>

    <!-- é¡Œç›®å€åŸŸ -->
    <div class="question-box">
        <div>ç¬¬ 4 é¡Œï¼š</div>
        <p>ä»¥ <span class="keyword">2 çš„è£œæ•¸æ³•</span> ä¾†è¡¨ç¤ºæ•´æ•¸ï¼Œä¸€å€‹ <span class="keyword">ä½å…ƒçµ„ï¼ˆByteï¼‰</span> å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§æ•´æ•¸ç‚º 256ã€‚</p>
        <div style="font-weight: normal; margin-top: 15px; font-size: 1rem; color: #555;">
            è«‹åˆ¤æ–·ï¼š
            <br>(A) O
            <br>(B) X
        </div>
    </div>

    <!-- äº’å‹•ç­”é¡ŒæŒ‰éˆ• -->
    <div class="interaction-area" id="button-area">
        <button class="btn-option btn-o" onclick="checkAnswer('O')">O</button>
        <button class="btn-option btn-x" onclick="checkAnswer('X')">X</button>
    </div>

    <!-- ç­”é¡Œçµæœå›é¥‹ -->
    <div id="result-area"></div>

    <!-- === ä»¥ä¸‹å…§å®¹åœ¨ç­”é¡Œå¾Œæ‰æœƒé¡¯ç¤º === -->
    <div id="explanation-content">

        <!-- 1. æ ¸å¿ƒè§€å¿µèªªæ˜ -->
        <div class="concept-card">
            <div class="concept-title">ğŸ’¡ æ ¸å¿ƒè§€å¿µï¼šç‚ºä»€éº¼ä¸æ˜¯ 256ï¼Ÿ</div>
            <p>é¦–å…ˆï¼Œæˆ‘å€‘è¦å…ˆæ‹†è§£é¡Œç›®ä¸­çš„å°ˆæœ‰åè©ï¼š</p>
            <ul>
                <li><strong>ä½å…ƒ (bit)</strong>ï¼šé›»è…¦æœ€å°å–®ä½ï¼Œä¸€å€‹æ ¼å­ï¼Œåªèƒ½æ”¾ 0 æˆ– 1ã€‚</li>
                <li><strong>ä½å…ƒçµ„ (Byte)</strong>ï¼š1 Byte = 8 bitsï¼ˆ8 å€‹æ ¼å­ï¼‰ã€‚</li>
                <li><strong>äºŒçš„è£œæ•¸ (Two's Complement)</strong>ï¼šæœ€å¸¸ç”¨çš„<strong>æœ‰è™Ÿæ•´æ•¸</strong>è¡¨ç¤ºæ³•ã€‚</li>
            </ul>
            
            <p>ç‚ºä»€éº¼ç­”æ¡ˆæ˜¯éŒ¯çš„ï¼Ÿå› ç‚ºã€ŒäºŒçš„è£œæ•¸ã€éœ€è¦ä¸€å€‹æ ¼å­ä¾†ç•¶æ­£è² è™Ÿï¼</p>
            <div style="background-color: #eee; padding: 10px; border-radius: 5px; font-family: monospace; text-align: center;">
                [ç¬¦è™Ÿä½] [æ•¸å€¼] [æ•¸å€¼] [æ•¸å€¼] [æ•¸å€¼] [æ•¸å€¼] [æ•¸å€¼] [æ•¸å€¼]<br>
                â†‘ æœ€é«˜ä½ (ç¬¬8ä½) è¢«æ‹¿å»æ±ºå®šæ­£è² äº†ï¼
            </div>
            
            <p>ğŸ‘‰ <strong>ä¸€å¥è©±çµè«–ï¼š</strong> 1 Byteï¼ˆäºŒè£œæ•¸ï¼‰æœ€å¤§æ•´æ•¸æ˜¯ <strong>127</strong>ï¼Œä¸æ˜¯ 256ã€‚</p>
        </div>

        <!-- 2. å°ç…§è¡¨ -->
        <div class="concept-card">
            <div class="concept-title">ğŸ“Š è¶…ç´šæ¯”ä¸€æ¯”ï¼šæœ‰ç„¡è™Ÿæ•¸çš„å·®åˆ¥</div>
            <table>
                <thead>
                    <tr>
                        <th>é¡å‹</th>
                        <th>æ„ç¾©</th>
                        <th>ä½å…ƒåˆ†é…</th>
                        <th>ç¯„åœ</th>
                        <th>æœ€å¤§å€¼</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ç„¡è™Ÿæ•´æ•¸<br>(Unsigned)</td>
                        <td>åªæœ‰æ­£æ•¸</td>
                        <td>8 ä½å…¨æ˜¯æ•¸å€¼</td>
                        <td>0 ~ 255</td>
                        <td>255</td>
                    </tr>
                    <tr class="highlight-row">
                        <td>æœ‰è™Ÿæ•´æ•¸<br>(äºŒçš„è£œæ•¸)</td>
                        <td>æœ‰æ­£æœ‰è² </td>
                        <td>1 ä½ç¬¦è™Ÿ + 7 ä½æ•¸å€¼</td>
                        <td>-128 ~ 127</td>
                        <td style="color:red; font-size:1.2rem;">127</td>
                    </tr>
                </tbody>
            </table>
            <p style="font-size: 0.9rem; color: #666;">
                âš ï¸ é¡Œç›®é™·é˜±ï¼šé¡Œç›®æ˜ç¢ºèªªäº†ã€Œä»¥ 2 çš„è£œæ•¸æ³•è¡¨ç¤ºã€ï¼Œå°±ä»£è¡¨æ˜¯ã€Œæœ‰è™Ÿæ•´æ•¸ã€ï¼Œæ‰€ä»¥æœ€å¤§å€¼çµ•å°ä¸å¯èƒ½æ˜¯ 256 æˆ– 255ã€‚
            </p>
        </div>

        <!-- 3. äº’å‹•æ¨¡æ“¬å™¨ -->
        <div class="calculator-box">
            <h3 style="margin-top:0; color:#f1c40f;">ğŸ§® ä½å…ƒæ•¸ç¯„åœæ¨¡æ“¬å™¨</h3>
            <p>å‹•æ‰‹æ‹‰æ‹‰çœ‹ï¼Œè§€å¯Ÿæœ€å¤§å€¼çš„è®ŠåŒ–</p>

            <div class="radio-group">
                <label>
                    <input type="radio" name="signType" value="signed" checked onchange="updateCalculator()"> 
                    æœ‰è™Ÿæ•¸ (äºŒè£œæ•¸)
                </label>
                <label>
                    <input type="radio" name="signType" value="unsigned" onchange="updateCalculator()"> 
                    ç„¡è™Ÿæ•¸ (Unsigned)
                </label>
            </div>

            <div class="slider-container">
                <label for="bitRange">ä½å…ƒæ•¸ (n)ï¼š<span id="bitDisplay" style="font-weight:bold;">8</span> bits</label><br>
                <input type="range" id="bitRange" min="1" max="16" value="8" oninput="updateCalculator()">
            </div>

            <div class="calc-display">
                ç¯„åœï¼š<span id="rangeDisplay">-128 ~ 127</span>
            </div>
            <div id="calc-explanation" style="font-size: 0.9rem; color: #bdc3c7;">
                å…¬å¼ï¼š-2^(8-1) ~ 2^(8-1)-1
            </div>
        </div>

        <!-- 4. äºŒè£œæ•¸ 8-bit å¯¦ä¾‹ -->
        <div class="concept-card">
            <div class="concept-title">ğŸ” 8 bits äºŒè£œæ•¸å¸¸è¦‹ç·¨ç¢¼ (é»æ“Šå±•é–‹)</div>
            
            <div class="binary-example" onclick="toggleDetail(this)">
                <code>01111111</code> â” <strong>127</strong> (æœ€å¤§æ­£æ•´æ•¸)
                <div class="example-detail">
                    é¦–ä½æ˜¯ 0 (æ­£æ•¸)ï¼Œå¾Œé¢ 7 å€‹ 1 å…¨æ»¿ã€‚<br>
                    è¨ˆç®—ï¼š2^0 + 2^1 + ... + 2^6 = 127ã€‚
                </div>
            </div>

            <div class="binary-example" onclick="toggleDetail(this)">
                <code>10000000</code> â” <strong>-128</strong> (æœ€å°è² æ•´æ•¸)
                <div class="example-detail">
                    é¦–ä½æ˜¯ 1 (è² æ•¸)ã€‚é€™æ˜¯äºŒè£œæ•¸ç‰¹æœ‰çš„å®šç¾©ï¼Œä»£è¡¨æœ€å°å€¼ã€‚<br>
                    å…¬å¼ï¼š-2^(8-1) = -128ã€‚
                </div>
            </div>

            <div class="binary-example" onclick="toggleDetail(this)">
                <code>11111111</code> â” <strong>-1</strong>
                <div class="example-detail">
                    åˆ¥çœ‹åˆ°å¾ˆå¤š 1 å°±ä»¥ç‚ºå¾ˆå¤§ï¼<br>
                    é¦–ä½æ˜¯ 1 (è² æ•¸)ã€‚é€™æ˜¯æœ€å¤§çš„è² æ•´æ•¸ -1ã€‚
                </div>
            </div>
        </div>

        <!-- 5. è€ƒè©¦é™·é˜±å¡ -->
        <h3>ğŸš§ å¸¸è¦‹è€ƒè©¦é™·é˜± (é»æ“Šå¡ç‰‡è¡¨ç¤ºã€Œæˆ‘æ‡‚äº†ã€ä¸¦æ¶ˆé™¤)</h3>
        <div class="trap-container">
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 1ï¼šæ··æ·†æ•¸é‡èˆ‡æœ€å¤§å€¼</h4>
                <p>2^8 = 256 æ˜¯ã€Œç¸½å…±èƒ½è¡¨ç¤ºå¤šå°‘å€‹æ•¸å­—ã€ï¼Œä½†å› ç‚ºè¦åŒ…å« 0ï¼Œæ‰€ä»¥æœ€å¤§å€¼è¦æ¸› 1ã€‚</p>
                <div class="trap-dismiss">(é»æ“Šæ¶ˆé™¤)</div>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 2ï¼šå¿˜è¨˜ç¬¦è™Ÿä½</h4>
                <p>é¡Œç›®å¯«ã€Œ2 çš„è£œæ•¸ã€å°±æ˜¯è¦æŠŠç¬¬ 1 å€‹ bit æ‹¿å»ç•¶æ­£è² è™Ÿï¼Œå‰©ä¸‹çš„ 7 bits æ‰èƒ½å­˜æ•¸å€¼ã€‚</p>
                <div class="trap-dismiss">(é»æ“Šæ¶ˆé™¤)</div>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 3ï¼šè¨˜éŒ¯ Unsigned</h4>
                <p>ç„¡è™Ÿæ•¸ (Unsigned) æœ€å¤§æ˜¯ 255 (11111111)ï¼Œä¹Ÿä¸æ˜¯ 256 å–”ï¼256 éœ€è¦ç¬¬ 9 å€‹ bit (100000000)ã€‚</p>
                <div class="trap-dismiss">(é»æ“Šæ¶ˆé™¤)</div>
            </div>
        </div>

        <!-- 6. è‡ªæˆ‘æª¢æ¸¬ -->
        <div class="concept-card" style="margin-top: 30px; border-top: 3px solid #f1c40f;">
            <div class="concept-title">ğŸ“ è‡ªæˆ‘æª¢æ¸¬ (ä¸çµ¦ç­”æ¡ˆï¼Œè«‹æ€è€ƒ)</div>
            
            <div class="quiz-item">
                <p><strong>Q1ï¼š</strong>å¦‚æœæ˜¯ 16 bits çš„äºŒè£œæ•¸ï¼Œæœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
                <button class="hint-btn" onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
                <div id="hint1" class="hint-text">æç¤ºï¼šå…¬å¼æ˜¯ 2^(n-1) - 1ï¼Œç¾åœ¨ n=16ï¼Œæ‰€ä»¥æ˜¯ 2^15 - 1 = 32767ã€‚</div>
            </div>

            <div class="quiz-item">
                <p><strong>Q2ï¼š</strong>ç‚ºä»€éº¼äºŒè£œæ•¸æœ€å¤§å€¼å…¬å¼æ˜¯æŒ‡æ•¸æ¸› 1 (n-1)ï¼Ÿ</p>
                <button class="hint-btn" onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
                <div id="hint2" class="hint-text">æç¤ºï¼šå› ç‚º 1 å€‹ bit æ‹¿å»ç•¶ç¬¦è™Ÿäº†ï¼Œå‰©ä¸‹çš„ (n-1) å€‹ bit æ‰èƒ½è¡¨ç¤ºæ•¸å€¼å¤§å°ã€‚</div>
            </div>

            <div class="quiz-item">
                <p><strong>Q3ï¼š</strong>é¡Œç›®è‹¥æ”¹æˆã€Œç„¡è™Ÿæ•´æ•¸ã€ï¼Œæœ€å¤§å€¼æ˜¯ 256 å—ï¼Ÿ</p>
                <button class="hint-btn" onclick="toggleHint('hint3')">é¡¯ç¤ºæç¤º</button>
                <div id="hint3" class="hint-text">æç¤ºï¼šé‚„æ˜¯éŒ¯ï¼ç„¡è™Ÿæ•¸ 8 bits æœ€å¤§æ˜¯ 2^8 - 1 = 255ã€‚256 æ°¸é éœ€è¦ç¬¬ 9 å€‹ bitã€‚</div>
            </div>
        </div>

        <button class="reset-btn" onclick="resetPage()">ğŸ”„ é‡æ–°ç·´ç¿’</button>
    </div>

    <div class="footer">
        Â© é›»è…¦æ¦‚è«–äº’å‹•è¬›ç¾© | å°ˆç‚ºé«˜ä¸­ç”Ÿè¨­è¨ˆ
    </div>
</div>

<script>
    /**
     * æª¢æŸ¥ç­”æ¡ˆä¸¦é¡¯ç¤ºçµæœ
     * @param {string} choice - ä½¿ç”¨è€…é¸æ“‡ 'O' æˆ– 'X'
     */
    function checkAnswer(choice) {
        const resultArea = document.getElementById('result-area');
        const contentArea = document.getElementById('explanation-content');
        const btnO = document.querySelector('.btn-o');
        const btnX = document.querySelector('.btn-x');

        // é–å®šæŒ‰éˆ•é¿å…é‡è¤‡é»æ“Š
        btnO.disabled = true;
        btnX.disabled = true;
        btnO.style.opacity = "0.5";
        btnX.style.opacity = "0.5";

        resultArea.style.display = 'block';

        if (choice === 'X') {
            // ç­”å°äº†
            resultArea.className = 'correct-msg';
            resultArea.innerHTML = `
                <div class="result-title">âœ… ç­”å°äº†ï¼</div>
                <p>å¤ªæ£’äº†ï¼ä½ æ²’æœ‰æ‰é€²é™·é˜±ã€‚<br><strong>1 Byte çš„äºŒè£œæ•¸æœ€å¤§å€¼æ˜¯ 127ã€‚</strong></p>
                <p>å¾€ä¸‹çœ‹è©³ç´°è§£æ ğŸ‘‡</p>
            `;
            // å¼·èª¿æ­£ç¢ºæŒ‰éˆ•
            btnX.style.opacity = "1";
            btnX.style.transform = "scale(1.1)";
        } else {
            // ç­”éŒ¯äº†
            resultArea.className = 'wrong-msg';
            resultArea.innerHTML = `
                <div class="result-title">âŒ ç­”éŒ¯å›‰ï¼</div>
                <p>åˆ¥ç°å¿ƒï¼é€™é¡Œæ˜¯ç¶“å…¸é™·é˜±é¡Œã€‚<br>256 å…¶å¯¦æ˜¯ã€Œç¸½æ•¸é‡ã€ï¼Œä¸æ˜¯æœ€å¤§å€¼å–”ã€‚</p>
                <p>è¶•å¿«å¾€ä¸‹çœ‹ç‚ºä»€éº¼ ğŸ‘‡</p>
            `;
            // å¼·èª¿éŒ¯èª¤æŒ‰éˆ•
            btnO.style.opacity = "1";
        }

        // é¡¯ç¤ºæ•™å­¸å…§å®¹
        contentArea.style.display = 'block';
        
        // æ»¾å‹•åˆ°çµæœå€
        resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    /**
     * æ›´æ–°ä½å…ƒç¯„åœè¨ˆç®—æ©Ÿ
     */
    function updateCalculator() {
        const bits = parseInt(document.getElementById('bitRange').value);
        const signType = document.querySelector('input[name="signType"]:checked').value;
        const bitDisplay = document.getElementById('bitDisplay');
        const rangeDisplay = document.getElementById('rangeDisplay');
        const calcExplanation = document.getElementById('calc-explanation');

        bitDisplay.textContent = bits;

        let min, max, explanation;

        if (signType === 'signed') {
            // äºŒè£œæ•¸ (æœ‰è™Ÿ)
            // æœ€å°: -2^(n-1), æœ€å¤§: 2^(n-1) - 1
            const power = bits - 1;
            min = -(Math.pow(2, power));
            max = Math.pow(2, power) - 1;
            explanation = `å…¬å¼ (æœ‰è™Ÿ)ï¼š -2^(${bits}-1) ~ 2^(${bits}-1) - 1`;
        } else {
            // ç„¡è™Ÿæ•¸
            // æœ€å°: 0, æœ€å¤§: 2^n - 1
            min = 0;
            max = Math.pow(2, bits) - 1;
            explanation = `å…¬å¼ (ç„¡è™Ÿ)ï¼š 0 ~ 2^${bits} - 1`;
        }

        rangeDisplay.textContent = `${min} ~ ${max}`;
        calcExplanation.textContent = explanation;

        // ç‰¹æ•ˆï¼šå¦‚æœæ˜¯ 8 bits ä¸”æœ‰è™Ÿï¼Œç‰¹åˆ¥æ¨™ç¤ºé¡è‰²
        if (bits === 8 && signType === 'signed') {
            rangeDisplay.style.color = '#e74c3c'; // ç´…è‰²å¼·èª¿
            rangeDisplay.style.fontWeight = 'bold';
        } else {
            rangeDisplay.style.color = '#f1c40f'; // é è¨­é»ƒè‰²
        }
    }

    /**
     * åˆ‡æ›é¡¯ç¤ºç¯„ä¾‹è©³è§£
     */
    function toggleDetail(element) {
        const detail = element.querySelector('.example-detail');
        if (detail.style.display === 'block') {
            detail.style.display = 'none';
        } else {
            detail.style.display = 'block';
        }
    }

    /**
     * æ¶ˆé™¤é™·é˜±å¡ç‰‡
     */
    function dismissTrap(element) {
        element.style.opacity = '0';
        setTimeout(() => {
            element.style.display = 'none';
        }, 300); // ç­‰å¾…å‹•ç•«çµæŸ
    }

    /**
     * é¡¯ç¤ºè‡ªæˆ‘æª¢æ¸¬æç¤º
     */
    function toggleHint(id) {
        const hint = document.getElementById(id);
        if (hint.style.display === 'block') {
            hint.style.display = 'none';
        } else {
            hint.style.display = 'block';
        }
    }

    /**
     * é‡ç½®é é¢
     */
    function resetPage() {
        // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
        document.querySelector('.btn-o').disabled = false;
        document.querySelector('.btn-x').disabled = false;
        document.querySelector('.btn-o').style.opacity = "1";
        document.querySelector('.btn-x').style.opacity = "1";
        document.querySelector('.btn-x').style.transform = "scale(1)";

        // éš±è—çµæœèˆ‡å…§å®¹
        document.getElementById('result-area').style.display = 'none';
        document.getElementById('explanation-content').style.display = 'none';
        
        // é‡ç½®è¨ˆç®—æ©Ÿ
        document.getElementById('bitRange').value = 8;
        document.querySelectorAll('input[name="signType"]')[0].checked = true;
        updateCalculator();

        // é‡ç½®é™·é˜±å¡ (é¡¯ç¤ºå›ä¾†)
        const traps = document.querySelectorAll('.trap-card');
        traps.forEach(trap => {
            trap.style.display = 'block';
            trap.style.opacity = '1';
        });

        // éš±è—æç¤º
        const hints = document.querySelectorAll('.hint-text');
        hints.forEach(hint => hint.style.display = 'none');

        // æ»¾å‹•å›é ‚éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // åˆå§‹åŒ–è¨ˆç®—æ©Ÿ
    updateCalculator();
</script>

</body>
</html>