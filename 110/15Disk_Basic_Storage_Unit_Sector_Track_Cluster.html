<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«–ï¼šç£ç¢Ÿçµæ§‹èˆ‡åŸºæœ¬å„²å­˜å–®ä½</title>
    <style>
        /* --- CSS reset èˆ‡ åŸºç¤è¨­å®š --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* --- æ¨™é¡Œå€ --- */
        header {
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        h1 {
            font-size: 1.5rem;
            color: #222;
        }

        h2 {
            font-size: 1.2rem;
            color: #444;
            margin-top: 20px;
            margin-bottom: 10px;
            border-left: 5px solid #2c3e50;
            padding-left: 10px;
            background-color: #eee;
        }

        /* --- é¡Œç›®å€ --- */
        .question-box {
            background-color: #fafafa;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .option {
            display: block;
            margin: 5px 0;
        }

        /* --- é‡é»æ¨™ç¤º --- */
        .highlight {
            background-color: #fff9c4; /* æ·¡é»ƒè‰²è¢å…‰ç­† */
            padding: 0 4px;
            border-radius: 2px;
            font-weight: bold;
        }

        .explanation-text {
            margin-bottom: 15px;
            color: #555;
        }

        /* --- äº’å‹•åœ–è§£å€ (Canvas) --- */
        .interactive-area {
            background-color: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }

        canvas {
            background-color: #fff;
            border: 1px solid #eee;
            border-radius: 50%; /* è®“ç•«å¸ƒçœ‹èµ·ä¾†åƒåœ“ç›¤èƒŒæ™¯ */
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .controls {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        button {
            padding: 8px 16px;
            cursor: pointer;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        button:hover {
            background-color: #e9e9e9;
        }

        button.active {
            background-color: #2c3e50;
            color: white;
            border-color: #2c3e50;
        }

        /* --- ç¢ç‰‡æ¨¡æ“¬å€ --- */
        .fragmentation-sim {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed #ccc;
            text-align: left;
        }

        .slider-container {
            margin: 15px 0;
        }

        input[type="range"] {
            width: 100%;
        }

        .bar-container {
            height: 30px;
            background-color: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-top: 10px;
            display: flex;
        }

        .bar-used {
            background-color: #4caf50; /* ç¶ è‰²ï¼šå¯¦éš›è³‡æ–™ */
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            transition: width 0.3s;
        }

        .bar-wasted {
            background-color: #f44336; /* ç´…è‰²ï¼šæµªè²»ç©ºé–“ */
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            transition: width 0.3s;
        }

        /* --- äº’å‹•ç­”é¡Œå€ --- */
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        @media (max-width: 600px) {
            .quiz-options {
                grid-template-columns: 1fr;
            }
        }

        .quiz-btn {
            padding: 15px;
            text-align: left;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .quiz-btn.correct {
            border-color: #4caf50;
            background-color: #e8f5e9;
            color: #2e7d32;
        }

        .quiz-btn.wrong {
            border-color: #f44336;
            background-color: #ffebee;
            color: #c62828;
        }

        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .feedback-correct {
            background-color: #e8f5e9;
            border: 1px solid #c8e6c9;
            color: #2e7d32;
        }

        .feedback-wrong {
            background-color: #ffebee;
            border: 1px solid #ffcdd2;
            color: #c62828;
        }

        /* --- è£œå……å€å¡Š --- */
        .info-card {
            background-color: #fff;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .mnemonic {
            background-color: #e3f2fd;
            border: 2px dashed #2196f3;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            margin: 20px 0;
            border-radius: 8px;
            color: #0d47a1;
        }

        .trap-list li {
            margin-bottom: 8px;
            list-style-type:  "âš ï¸ ";
            padding-left: 5px;
        }

        /* è‡ªæˆ‘æª¢æ¸¬æ¨£å¼ */
        .self-check li {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>é¡Œè™Ÿ 15ï¼šç£ç¢Ÿçµæ§‹èˆ‡åŸºæœ¬å„²å­˜å–®ä½</h1>
    </header>

    <!-- B. ã€é¡Œç›®ã€‘å€ -->
    <section>
        <div class="question-box">
            <p>15. ç£ç¢Ÿçš„åŸºæœ¬å„²å­˜å–®ä½ç‚º</p>
            <span class="option">(A) ç£å€(sector)</span>
            <span class="option">(B) è®€å¯«é ­(r/w head)</span>
            <span class="option">(C) ç£è»Œ(track)</span>
            <span class="option">(D) ç£æŸ±(cluster)</span>
        </div>
    </section>

    <!-- C. ã€ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—ã€‘ -->
    <section>
        <h2>ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h2>
        <p class="explanation-text">
            è«‹åœˆå‡ºé¡Œç›®ä¸­çš„ï¼š<span class="highlight">åŸºæœ¬å„²å­˜å–®ä½</span>ã€‚<br>
            <strong>ç‚ºä½•é€™æ˜¯ç·šç´¢ï¼Ÿ</strong> å› ç‚ºç£ç¢Ÿè£¡æœ‰å¾ˆå¤šçµæ§‹ï¼ˆåƒè·‘é“ã€åƒæ‰‹è‡‚ï¼‰ï¼Œä½†é¡Œç›®å•çš„æ˜¯ç”¨ä¾†ã€Œè£è³‡æ–™ã€çš„æœ€å°æ ¼å­ï¼Œè€Œä¸æ˜¯é›¶ä»¶æˆ–æ’åˆ—å½¢ç‹€ã€‚
        </p>
    </section>

    <!-- D. ã€ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ã€‘ -->
    <section>
        <h2>ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h2>
        <p class="explanation-text">
            ç”¨é«˜ä¸­ç”Ÿè½å¾—æ‡‚çš„è©±ä¾†èªªï¼Œé€™é¡Œåœ¨å•ï¼š<br>
            <strong>ã€Œç¡¬ç¢Ÿé€™å¼µå¤§æŠ«è–©ï¼Œåˆ‡ä¸‹ä¾†æœ€å°ã€å¯ä»¥æ‹¿ä¾†å¯«è³‡æ–™çš„é‚£ä¸€å°ç‰‡å«åšä»€éº¼ï¼Ÿã€</strong>
        </p>
    </section>

    <!-- E. ã€ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ã€‘ -->
    <section>
        <h2>ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h2>
        <div class="info-card">
            <p><strong>è€ƒé»è§€å¿µï¼š</strong> ç¡¬é«”å±¤é¢çš„è³‡æ–™å„²å­˜æœ€å°å–®ä½ã€‚</p>
            <ol style="margin-left: 20px; margin-top: 10px;">
                <li><strong>æƒ³åƒæŠ«è–©ï¼š</strong> ç£ç¢Ÿç›¤é¢åƒä¸€å€‹åœ“å½¢æŠ«è–©ã€‚</li>
                <li><strong>åˆ‡æ ¼å­ï¼š</strong> æˆ‘å€‘å…ˆç•«ä¸€åœˆåœˆçš„åŒå¿ƒåœ“ï¼ˆç£è»Œ Trackï¼‰ï¼Œå†åƒåˆ‡è›‹ç³•ä¸€æ¨£åˆ‡æˆæ‰‡å½¢ã€‚</li>
                <li><strong>é–å®šç›®æ¨™ï¼š</strong> é€™ä¸€åœˆåœˆåˆ‡ä¸‹ä¾†çš„ã€Œæ‰‡å½¢å°å€å¡Šã€ï¼Œå°±æ˜¯ç¡¬é«”èƒ½è®€å¯«çš„æœ€å°å–®ä½ã€‚</li>
            </ol>
        </div>
    </section>

    <!-- F. ã€äº’å‹•åœ–è§£ã€‘å€ -->
    <section>
        <h2>äº’å‹•åœ–è§£ï¼šç£ç¢Ÿçµæ§‹å¯è¦–åŒ–</h2>
        <div class="interactive-area">
            <canvas id="diskCanvas" width="300" height="300"></canvas>
            
            <div class="controls">
                <button onclick="drawDisk('track')" id="btn-track">é¡¯ç¤º Track (ç£è»Œ)</button>
                <button onclick="drawDisk('sector')" id="btn-sector">é¡¯ç¤º Sector (ç£å€)</button>
                <button onclick="drawDisk('cluster')" id="btn-cluster">é¡¯ç¤º Cluster (å¢é›†)</button>
                <button onclick="drawDisk('head')" id="btn-head">é¡¯ç¤º R/W Head (è®€å¯«é ­)</button>
                <button onclick="drawDisk('reset')" id="btn-reset">é‡ç½®</button>
            </div>

            <div class="fragmentation-sim">
                <h3>ğŸ’¾ æª”æ¡ˆå„²å­˜æ¨¡æ“¬ (å…§éƒ¨ç¢ç‰‡æ¦‚å¿µ)</h3>
                <p style="font-size: 0.9rem; margin-bottom: 10px;">
                    å‡è¨­ 1 å€‹ Cluster (å¢é›†) = 4KBã€‚<br>
                    è‹¥æª”æ¡ˆå¤§å°ä¸è¶³ 4KBï¼Œç³»çµ±é‚„æ˜¯æœƒçµ¦å®ƒä¸€æ•´å€‹ Clusterï¼Œå‰©ä¸‹çš„ç©ºé–“å°±æµªè²»äº†ï¼ˆå…§éƒ¨ç¢ç‰‡ï¼‰ã€‚
                </p>
                <div class="slider-container">
                    <label for="fileSizeSlider">æª”æ¡ˆå¤§å°: <span id="fileSizeDisplay">2.5</span> KB</label>
                    <input type="range" id="fileSizeSlider" min="0.1" max="8" step="0.1" value="2.5">
                </div>
                <div class="bar-container">
                    <div id="barUsed" class="bar-used" style="width: 62.5%;">è³‡æ–™ 2.5KB</div>
                    <div id="barWasted" class="bar-wasted" style="width: 37.5%;">æµªè²» 1.5KB</div>
                </div>
                <p id="simText" style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                    ä½”ç”¨ 1 å€‹ Cluster (4KB)ã€‚
                </p>
            </div>
        </div>
    </section>

    <!-- G. ã€ç¬¬å››æ­¥ï¼šé¸é …åˆ†æã€‘ -->
    <section>
        <h2>ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h2>
        <ul>
            <li class="explanation-text">
                <span class="highlight">(A) ç£å€ (Sector)</span>ï¼š<strong>æ­£ç¢ºï¼</strong> é€™æ˜¯ç£è»Œä¸Šåˆ‡åˆ†å‡ºä¾†çš„æ‰‡å½¢å€å¡Šã€‚å®ƒæ˜¯ç¡¬é«”è®€å¯«è³‡æ–™çš„<strong>æœ€å°ç‰©ç†å–®ä½</strong>ï¼Œå‚³çµ±å®¹é‡é€šå¸¸ç‚º 512 Bytesã€‚
            </li>
            <li class="explanation-text">
                (B) è®€å¯«é ­ (R/W Head)ï¼š<strong>éŒ¯èª¤ã€‚</strong> é€™æ˜¯è² è²¬è®€å–èˆ‡å¯«å…¥è³‡æ–™çš„ã€Œé›¶ä»¶ã€ï¼ˆåƒå”±ç‰‡æ©Ÿçš„å”±é‡ï¼‰ï¼Œä¸æ˜¯å„²å­˜å–®ä½ã€‚
            </li>
            <li class="explanation-text">
                (C) ç£è»Œ (Track)ï¼š<strong>éŒ¯èª¤ã€‚</strong> é€™æ˜¯ç›¤é¢ä¸Šçš„ã€ŒåŒå¿ƒåœ“è·‘é“ã€ã€‚ä¸€å€‹ Track åŒ…å«å¾ˆå¤šå€‹ Sectorï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ã€Œæœ€å°ã€å–®ä½ã€‚
            </li>
            <li class="explanation-text">
                (D) ç£æŸ± (Cluster)ï¼š<strong>éŒ¯èª¤ã€‚</strong>
                <br><small style="color:#666;">è¨»ï¼šé€™è£¡é¡Œç›®ä¸­æ–‡å¯«ç£æŸ±ï¼Œè‹±æ–‡å¯« Clusterã€‚æ­£ç¢ºå°ç…§æ‡‰ç‚ºï¼šCylinder=ç£æŸ±ï¼ŒCluster=å¢é›†ã€‚</small>
                <br>ä¸ç®¡æ˜¯å“ªå€‹ç¿»è­¯ï¼Œ<strong>Cluster (å¢é›†)</strong> æ˜¯ä½œæ¥­ç³»çµ±ï¼ˆæª”æ¡ˆç³»çµ±ï¼‰ç‚ºäº†ç®¡ç†æ–¹ä¾¿ï¼ŒæŠŠå¹¾å€‹ Sector æ‰“åŒ…åœ¨ä¸€èµ·çš„å–®ä½ï¼ˆé‚è¼¯å–®ä½ï¼‰ã€‚é€šå¸¸ Cluster > Sectorï¼Œæ‰€ä»¥æœ€ã€ŒåŸºæœ¬ã€çš„é‚„æ˜¯ Sectorã€‚
            </li>
        </ul>
    </section>

    <!-- H. ã€è§€å¿µè£œå……èˆ‡å»¶ä¼¸ã€‘ -->
    <section>
        <h2>è§€å¿µè£œå……ï¼šSector vs Cluster</h2>
        <div class="info-card">
            <p>é€™å…©å€‹å¾ˆå®¹æ˜“ææ··ï¼Œè«‹é€™æ¨£è¨˜ï¼š</p>
            <ul>
                <li><strong>Sector (ç£å€) - ç¡¬é«”å±¤é¢ï¼š</strong> å·¥å» å‡ºå» æ™‚åˆ‡å¥½çš„æœ€å°æ ¼å­ï¼Œå°±åƒä½œæ–‡ç´™ä¸Šçš„ä¸€å°æ ¼ã€‚</li>
                <li><strong>Cluster (å¢é›†) - è»Ÿé«”å±¤é¢ï¼š</strong> ä½œæ¥­ç³»çµ±ï¼ˆå¦‚ Windowsï¼‰è¦ºå¾—ä¸€æ ¼ä¸€æ ¼ç®¡å¤ªç´¯ï¼Œæ±ºå®šã€Œä¸€æ¬¡æŠ“ä¸€æŠŠã€ä¾†ç”¨ã€‚é€™ä¸€æŠŠï¼ˆé€šå¸¸æ˜¯ 2/4/8 å€‹ sectorsï¼‰å°±å« Clusterã€‚</li>
            </ul>
        </div>
    </section>

    <!-- I. ã€è¨˜æ†¶å£è¨£ã€‘ -->
    <section>
        <div class="mnemonic">
            âœ¨ å£è¨£ï¼šæœ€å°ä¸€æ ¼å«ã€Œç£å€ã€ï¼Œä½œæ¥­ç³»çµ±ç”¨ã€Œå¢é›†ã€ï¼
        </div>
    </section>

    <!-- J. ã€å¸¸è¦‹é™·é˜±ã€‘ -->
    <section>
        <h2>å¸¸è¦‹é™·é˜± âš ï¸</h2>
        <ul class="trap-list">
            <li><strong>æ··æ·†ç¡¬é«”èˆ‡é›¶ä»¶ï¼š</strong> çœ‹åˆ°ã€Œè®€å¯«é ­ã€ä»¥ç‚ºæ˜¯å–®ä½ï¼Œå…¶å¯¦å®ƒæ˜¯å·¥å…·ã€‚</li>
            <li><strong>æ··æ·† Sector èˆ‡ Clusterï¼š</strong> é¡Œç›®å•ã€ŒåŸºæœ¬ã€æˆ–ã€Œæœ€å°ã€ï¼Œç­”æ¡ˆé¸ Sectorã€‚è‹¥é¡Œç›®å•ã€Œä½œæ¥­ç³»çµ±æª”æ¡ˆé…ç½®å–®ä½ã€æˆ–ã€Œé€ æˆå…§éƒ¨ç¢ç‰‡çš„åŸå› ã€ï¼Œç­”æ¡ˆé¸ Clusterã€‚</li>
            <li><strong>ä¸­è‹±ç¿»è­¯é™·é˜±ï¼š</strong> æ³¨æ„é¡Œç›®é¸é … (D) æŠŠ Cluster ç¿»æˆç£æŸ±ï¼ˆé€šå¸¸æ˜¯æŒ‡ Cylinderï¼‰ï¼Œä½†è€ƒè©¦è«‹ä»¥è‹±æ–‡å–®å­—ç‚ºä¸»ï¼ŒCluster æ˜¯ã€Œå¢é›†ã€ã€‚</li>
        </ul>
    </section>

    <!-- K. ã€ä½œç­”å€ã€‘ -->
    <section>
        <h2>äº’å‹•è©¦é¡Œ</h2>
        <p>ç¢ºèªä½ æ‡‚äº†å—ï¼Ÿè«‹é»é¸æ­£ç¢ºç­”æ¡ˆï¼š</p>
        <div class="quiz-options">
            <button class="quiz-btn" onclick="checkAnswer('A', this)">(A) ç£å€ (sector)</button>
            <button class="quiz-btn" onclick="checkAnswer('B', this)">(B) è®€å¯«é ­ (r/w head)</button>
            <button class="quiz-btn" onclick="checkAnswer('C', this)">(C) ç£è»Œ (track)</button>
            <button class="quiz-btn" onclick="checkAnswer('D', this)">(D) ç£æŸ± (cluster)</button>
        </div>
        
        <div id="quizFeedback" class="feedback-box">
            <h3 id="feedbackTitle"></h3>
            <p id="feedbackContent"></p>
        </div>

        <button onclick="toggleAnswer()" style="margin-top: 15px; font-size: 0.8rem; background: #ddd;">é¡¯ç¤º/éš±è—æ­£ç¢ºç­”æ¡ˆ</button>
        <div id="correctAnswerArea" style="display:none; margin-top: 10px; color: green; font-weight: bold;">
            æ­£ç¢ºç­”æ¡ˆï¼š(A)
        </div>
    </section>

    <!-- M. ã€è‡ªæˆ‘æª¢æ¸¬ã€‘ -->
    <section>
        <h2>è‡ªæˆ‘æª¢æ¸¬ (æƒ³ä¸€æƒ³ï¼Œä¸çµ¦ç­”æ¡ˆ)</h2>
        <ul class="self-check">
            <li>1. å¦‚æœä¸€å€‹ Cluster å¤§å°æ˜¯ 4KBï¼Œæˆ‘å­˜ä¸€å€‹ 1KB çš„æ–‡å­—æª”ï¼Œå¯¦éš›ä¸Šæœƒä½”ç”¨ç¡¬ç¢Ÿå¤šå°‘ç©ºé–“ï¼Ÿ(æç¤ºï¼šå…§éƒ¨ç¢ç‰‡)</li>
            <li>2. ç£ç¢Ÿæ ¼å¼åŒ–æ™‚ï¼Œä¸»è¦æ˜¯åœ¨åŠƒåˆ† Track é‚„æ˜¯ Clusterï¼Ÿ</li>
        </ul>
    </section>

</div>

<script>
    // --- Canvas ç¹ªåœ–é‚è¼¯ ---
    const canvas = document.getElementById('diskCanvas');
    const ctx = canvas.getContext('2d');
    const centerX = 150;
    const centerY = 150;
    
    // åˆå§‹åŒ–ç¹ªè£½
    window.onload = function() {
        drawDisk('reset');
        updateFragmentation(); // åˆå§‹åŒ–æ»‘æ¡¿
    };

    function drawDisk(mode) {
        // é‡ç½®æŒ‰éˆ•æ¨£å¼
        document.querySelectorAll('.controls button').forEach(btn => btn.classList.remove('active'));
        if(mode !== 'reset') {
            document.getElementById('btn-' + mode).classList.add('active');
        }

        // æ¸…é™¤ç•«å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 1. ç•«åº•ç›¤ (ç°è‰²åœ“)
        ctx.beginPath();
        ctx.arc(centerX, centerY, 140, 0, 2 * Math.PI);
        ctx.fillStyle = '#f0f0f0';
        ctx.fill();
        ctx.lineWidth = 2;
        ctx.strokeStyle = '#999';
        ctx.stroke();

        // 2. ç•«ç£è»Œ (Tracks) - åŒå¿ƒåœ“
        // ç„¡è«–ä»€éº¼æ¨¡å¼éƒ½æ·¡æ·¡åœ°é¡¯ç¤º Track çµæ§‹ï¼Œä»¥ä¾¿å®šä½
        const tracks = [40, 70, 100, 130];
        tracks.forEach((radius, index) => {
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = (mode === 'track') ? '#ff5722' : '#ddd'; // Track æ¨¡å¼è®Šæ©˜è‰²
            ctx.lineWidth = (mode === 'track') ? 3 : 1;
            ctx.stroke();
            
            if (mode === 'track' && index === 2) {
                // æ¨™ç¤º Track æ–‡å­—
                ctx.fillStyle = '#ff5722';
                ctx.font = '14px Arial';
                ctx.fillText('Track (ç£è»Œ)', centerX - 30, centerY - radius - 5);
            }
        });

        // 3. ç•«ç£å€ (Sectors)
        if (mode === 'sector' || mode === 'cluster' || mode === 'reset') {
            const numSectors = 8;
            for (let i = 0; i < numSectors; i++) {
                const angle = (i * 2 * Math.PI) / numSectors;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + 140 * Math.cos(angle), centerY + 140 * Math.sin(angle));
                ctx.strokeStyle = '#ccc';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
        }

        // ç‰¹æ•ˆï¼šSector æ¨¡å¼ - é«˜äº®ä¸€å€‹ Sector
        if (mode === 'sector') {
            highlightSector(100, 130, 0, Math.PI / 4, '#4caf50', 'Sector (åŸºæœ¬å–®ä½)');
        }

        // ç‰¹æ•ˆï¼šCluster æ¨¡å¼ - é«˜äº®ä¸€çµ„ Sector (ä¾‹å¦‚ 2 å€‹ sector çµ„æˆä¸€å€‹ cluster)
        if (mode === 'cluster') {
            // é€™è£¡æ¨¡æ“¬ä¸€å€‹ Cluster åŒ…å«åŒç£è»Œçš„å…©å€‹ç›¸é„° Sector
            highlightSector(100, 130, 0, Math.PI / 2, '#2196f3', 'Cluster (æª”æ¡ˆé…ç½®)');
            // ç•«å€‹æ¡†æ¡†è¡¨ç¤ºæ‰“åŒ…
            ctx.beginPath();
            ctx.arc(centerX, centerY, 100, 0, Math.PI / 2);
            ctx.arc(centerX, centerY, 130, Math.PI / 2, 0, true);
            ctx.closePath();
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#0d47a1';
            ctx.stroke();
        }

        // ç‰¹æ•ˆï¼šR/W Head
        if (mode === 'head') {
            // ç•«ä¸€å€‹ç°¡å–®çš„è®€å¯«è‡‚
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(-Math.PI / 4); // è½‰ä¸€ä¸‹è§’åº¦
            
            // è‡‚
            ctx.fillStyle = '#607d8b';
            ctx.fillRect(20, -10, 140, 20);
            
            // é ­ (ä¸‰è§’å½¢)
            ctx.beginPath();
            ctx.moveTo(100, 10);
            ctx.lineTo(110, 20);
            ctx.lineTo(120, 10);
            ctx.fillStyle = '#000';
            ctx.fill();
            
            ctx.fillStyle = '#000';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('R/W Head', 40, -15);
            ctx.fillText('(é›¶ä»¶éå–®ä½)', 40, 0);

            ctx.restore();
            
            // ä¸­å¿ƒè»¸
            ctx.beginPath();
            ctx.arc(centerX, centerY, 10, 0, 2 * Math.PI);
            ctx.fillStyle = '#333';
            ctx.fill();
        }
    }

    // è¼”åŠ©å‡½å¼ï¼šç•«æ‰‡å½¢ä¸¦å¡«è‰²
    function highlightSector(innerR, outerR, startAngle, endAngle, color, text) {
        ctx.beginPath();
        ctx.arc(centerX, centerY, outerR, startAngle, endAngle);
        ctx.arc(centerX, centerY, innerR, endAngle, startAngle, true);
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
        ctx.strokeStyle = '#fff';
        ctx.stroke();

        // æ¨™ç¤ºæ–‡å­—
        ctx.fillStyle = '#333';
        ctx.font = 'bold 12px Arial';
        // ç°¡å–®è¨ˆç®—æ–‡å­—ä½ç½®
        const midAngle = (startAngle + endAngle) / 2;
        const textR = (innerR + outerR) / 2;
        const textX = centerX + textR * Math.cos(midAngle);
        const textY = centerY + textR * Math.sin(midAngle);
        
        ctx.save();
        ctx.translate(textX, textY);
        // é¿å…æ–‡å­—å€’è‘—
        ctx.fillText(text, -30, 5);
        ctx.restore();
    }

    // --- ç¢ç‰‡æ¨¡æ“¬é‚è¼¯ ---
    const slider = document.getElementById('fileSizeSlider');
    const fileSizeDisplay = document.getElementById('fileSizeDisplay');
    const barUsed = document.getElementById('barUsed');
    const barWasted = document.getElementById('barWasted');
    const simText = document.getElementById('simText');
    const clusterSize = 4; // 4KB

    slider.oninput = updateFragmentation;

    function updateFragmentation() {
        const size = parseFloat(slider.value);
        fileSizeDisplay.textContent = size.toFixed(1);

        // è¨ˆç®—é‚è¼¯
        // ä½”ç”¨çš„ Cluster æ•¸é‡ = ç„¡æ¢ä»¶é€²ä½(æª”æ¡ˆå¤§å° / 4)
        const clustersNeeded = Math.ceil(size / clusterSize);
        const allocatedSpace = clustersNeeded * clusterSize;
        const wastedSpace = allocatedSpace - size;

        // æ›´æ–°é•·æ¢åœ– (ä»¥ 2 å€‹ Cluster max ç‚ºé¡¯ç¤ºåŸºæº–ï¼Œæ¯”è¼ƒå¥½ demo)
        // ç‚ºäº†é¡¯ç¤ºæ•ˆæœï¼Œæˆ‘å€‘å‡è¨­æœ€å¤§é¡¯ç¤ºç¯„åœæ˜¯ allocation
        const totalWidthPercent = 100; 
        const usedPercent = (size / allocatedSpace) * 100;
        const wastedPercent = 100 - usedPercent;

        barUsed.style.width = usedPercent + '%';
        barUsed.textContent = `è³‡æ–™ ${size.toFixed(1)}KB`;
        
        barWasted.style.width = wastedPercent + '%';
        barWasted.textContent = `æµªè²» ${wastedSpace.toFixed(1)}KB`;

        simText.innerHTML = `æª”æ¡ˆ ${size.toFixed(1)} KB âœ éœ€è¦ ${clustersNeeded} å€‹ Cluster (${allocatedSpace} KB)ã€‚<br>å…¶ä¸­ç´…è‰²éƒ¨åˆ†å°±æ˜¯ <span class="highlight">å…§éƒ¨ç¢ç‰‡ (Internal Fragmentation)</span>ã€‚`;
    }

    // --- ç­”é¡Œäº’å‹•é‚è¼¯ ---
    function checkAnswer(option, btnElement) {
        const feedbackBox = document.getElementById('quizFeedback');
        const feedbackTitle = document.getElementById('feedbackTitle');
        const feedbackContent = document.getElementById('feedbackContent');
        
        // é‡ç½®æŒ‰éˆ•æ¨£å¼
        document.querySelectorAll('.quiz-btn').forEach(b => {
            b.classList.remove('correct', 'wrong');
        });

        feedbackBox.style.display = 'block';
        feedbackBox.className = 'feedback-box'; // reset class

        if (option === 'A') {
            btnElement.classList.add('correct');
            feedbackBox.classList.add('feedback-correct');
            feedbackTitle.textContent = 'âœ… ç­”å°äº†ï¼';
            feedbackContent.textContent = 'å¤ªæ£’äº†ï¼ç£å€ (Sector) å°±æ˜¯ç¡¬ç¢ŸåŠƒåˆ†æ ¼å­çš„æœ€å°ç‰©ç†å–®ä½ã€‚';
        } else {
            btnElement.classList.add('wrong');
            feedbackBox.classList.add('feedback-wrong');
            feedbackTitle.textContent = 'âŒ ç­”éŒ¯å›‰ï¼';
            
            if(option === 'B') feedbackContent.textContent = 'è®€å¯«é ­æ˜¯é›¶ä»¶ï¼Œä¸æ˜¯å„²å­˜å–®ä½å–”ã€‚';
            if(option === 'C') feedbackContent.textContent = 'ç£è»Œæ˜¯é‚£ä¸€æ•´åœˆè·‘é“ï¼Œè£¡é¢é‚„åŒ…å«å¾ˆå¤šå€‹ç£å€ï¼Œæ‰€ä»¥ä¸æ˜¯ã€Œæœ€å°ã€å–®ä½ã€‚';
            if(option === 'D') feedbackContent.textContent = 'Cluster æ˜¯ä½œæ¥­ç³»çµ±æŠŠå¥½å¹¾å€‹ Sector åŒ…åœ¨ä¸€èµ·ç”¨çš„ï¼Œæ¯” Sector å¤§ï¼Œä¸æ˜¯æœ€åŸºæœ¬çš„å–®ä½ã€‚';
        }
    }

    function toggleAnswer() {
        const area = document.getElementById('correctAnswerArea');
        if (area.style.display === 'none') {
            area.style.display = 'block';
        } else {
            area.style.display = 'none';
        }
    }
</script>

</body>
</html>