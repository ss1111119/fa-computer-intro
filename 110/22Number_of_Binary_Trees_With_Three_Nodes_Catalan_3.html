<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«–äº’å‹•è¬›ç¾©ï¼šä¸‰ç¯€é»äºŒå…ƒæ¨¹æ•¸é‡</title>
    <style>
        /* * å…¨åŸŸæ¨£å¼è¨­å®š 
         * ä½¿ç”¨ç°¡å–®çš„é»‘ã€ç™½ã€ç°é…è‰²ï¼Œå¼·èª¿é–±è®€èˆ’é©åº¦
         */
        :root {
            --primary-color: #333;
            --accent-color: #2563eb; /* è—è‰²ç”¨æ–¼æŒ‰éˆ• */
            --highlight-bg: #fff3cd; /* æ·¡é»ƒè‰²è¢å…‰ç­† */
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --success-color: #10b981;
            --error-color: #ef4444;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            line-height: 1.6;
            color: var(--primary-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
        }

        /* å®¹å™¨é™åˆ¶å¯¬åº¦ï¼Œç½®ä¸­é¡¯ç¤º */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        /* æ¨™é¡Œå€å¡Š */
        header {
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 25px;
            text-align: center;
        }

        h1 {
            font-size: 1.5rem;
            margin: 0;
            color: #1f2937;
        }

        h2 {
            font-size: 1.2rem;
            color: #4b5563;
            margin-top: 5px;
            border-left: 4px solid var(--accent-color);
            padding-left: 10px;
        }

        h3 {
            font-size: 1.1rem;
            margin-top: 25px;
            margin-bottom: 10px;
            color: #374151;
            display: flex;
            align-items: center;
        }

        /* é¡Œç›®æ¨£å¼ */
        .question-box {
            background-color: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
            font-weight: bold;
        }

        .option-list {
            list-style-type: none;
            padding: 0;
            margin-top: 10px;
        }

        .option-list li {
            margin: 5px 0;
        }

        /* è¢å…‰ç­†æ•ˆæœ */
        .highlight {
            background-color: var(--highlight-bg);
            padding: 0 4px;
            border-radius: 2px;
            font-weight: bold;
        }

        /* è§£èªªå€å¡Šæ¨£å¼ */
        .section-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        /* äº’å‹•è¦–è¦ºåŒ–å€å¡Š (é‡é») */
        .visualization-area {
            background-color: #ffffff;
            border: 2px dashed var(--accent-color);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        /* SVG å®¹å™¨ */
        .tree-container {
            min-height: 220px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        /* ç¶²æ ¼ä½ˆå±€ç”¨æ–¼é¡¯ç¤ºå…¨éƒ¨ */
        .tree-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            width: 100%;
        }

        .tree-card {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            background: #fafafa;
        }

        svg circle {
            fill: #fff;
            stroke: #333;
            stroke-width: 2;
        }
        
        svg line {
            stroke: #333;
            stroke-width: 2;
        }
        
        svg text {
            font-size: 12px;
            text-anchor: middle;
            alignment-baseline: middle;
        }

        /* æ§åˆ¶æŒ‰éˆ• */
        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: #1d4ed8;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
        }

        .btn-outline:hover {
            background-color: #eff6ff;
        }

        /* é¸é …åˆ†æ */
        .analysis-item {
            margin-bottom: 8px;
            padding-left: 10px;
            border-left: 3px solid #ddd;
        }

        .analysis-item.correct {
            border-left-color: var(--success-color);
            background-color: #ecfdf5;
        }

        /* äº’å‹•ç­”é¡Œå€ */
        .quiz-area {
            background-color: #eff6ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .quiz-btn {
            padding: 12px;
            border: 1px solid var(--border-color);
            background: white;
            cursor: pointer;
            border-radius: 4px;
            text-align: left;
            transition: all 0.2s;
        }

        .quiz-btn:hover {
            background-color: #f3f4f6;
        }

        .quiz-btn.selected-correct {
            background-color: #d1fae5;
            border-color: var(--success-color);
            color: #065f46;
        }

        .quiz-btn.selected-wrong {
            background-color: #fee2e2;
            border-color: var(--error-color);
            color: #991b1b;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }

        /* æŠ˜ç–Šå…§å®¹ */
        details {
            margin-top: 10px;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #eee;
        }
        
        summary {
            cursor: pointer;
            font-weight: bold;
            color: var(--accent-color);
        }

        /* RWD é©æ‡‰æ‰‹æ©Ÿ */
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            .quiz-options {
                grid-template-columns: 1fr;
            }
            header h1 {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>22. é›»è…¦æ¦‚è«– / è³‡æ–™çµæ§‹</h1>
        <p style="color: #666; margin-top: 5px;">ä¸»é¡Œï¼šäºŒå…ƒæ¨¹çš„æ•¸é‡èˆ‡å¡ç‰¹è˜­æ•¸</p>
    </header>

    <!-- B. é¡Œç›®å€ -->
    <div class="question-box">
        <div>22. æœ‰ä¸‰å€‹ç¯€é»çš„æ¨¹ï¼Œçµ„æˆäºŒå…ƒæ¨¹çš„å€‹æ•¸æœ€å¤šç‚ºä½•?</div>
        <ul class="option-list">
            <li>(A) 3</li>
            <li>(B) 4</li>
            <li>(C) 5</li>
            <li>(D) 6</li>
        </ul>
        <details>
            <summary>é¡¯ç¤ºç­”æ¡ˆ</summary>
            <p>ç­”æ¡ˆï¼š<span style="color: var(--success-color); font-weight: bold; font-size: 1.2em;">C</span></p>
        </details>
    </div>

    <!-- C. ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­— -->
    <div class="section-card">
        <h2>ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h2>
        <p>
            <span class="highlight">ä¸‰å€‹ç¯€é»</span>ã€<span class="highlight">äºŒå…ƒæ¨¹</span>ã€<span class="highlight">å€‹æ•¸æœ€å¤š</span>
        </p>
        <p style="font-size: 0.9rem; color: #555;">
            ğŸ’¡ <strong>è€å¸«çš„è©±ï¼š</strong> é€™è£¡æœ€å¤§çš„é™·é˜±åœ¨æ–¼ã€ŒäºŒå…ƒæ¨¹ã€é€™ä¸‰å€‹å­—ã€‚ä¸€èˆ¬çš„æ¨¹å½¢å¯èƒ½ä¸åˆ†å·¦å³ï¼Œä½†äºŒå…ƒæ¨¹çš„å®šç¾©éå¸¸åš´æ ¼ï¼Œå½¢ç‹€ç¨å¾®ä¸åŒå°±ç®—ä¸åŒæ£µã€‚
        </p>
    </div>

    <!-- D. ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ -->
    <div class="section-card">
        <h2>ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h2>
        <p>ã€Œçµ¦ä½  3 å€‹å°åœ“é»ï¼ŒæŒ‰ç…§äºŒå…ƒæ¨¹çš„è¦å‰‡ï¼ˆæ¯å€‹é»æœ€å¤šå…©å€‹å°å­©ï¼Œé‚„è¦åˆ†å·¦é‚Šå°å­©æˆ–å³é‚Šå°å­©ï¼‰ï¼Œè«‹å•ä½ å¯ä»¥æ‹¼å‡ºå¹¾ç¨®å®Œå…¨ä¸åŒå½¢ç‹€çš„æ¨¹ï¼Ÿã€</p>
    </div>

    <!-- E. ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ -->
    <div class="section-card">
        <h2>ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h2>
        <ul>
            <li><strong>è§€å¿µï¼š</strong> äºŒå…ƒæ¨¹ï¼ˆBinary Treeï¼‰æ˜¯éå¸¸è¬›ç©¶ã€Œæ–¹å‘ã€çš„è³‡æ–™çµæ§‹ã€‚å·¦é‚Šçš„å°å­©è·Ÿå³é‚Šçš„å°å­©æ˜¯ä¸ä¸€æ¨£çš„ã€‚</li>
            <li><strong>æ­¥é©Ÿï¼š</strong>
                <ol>
                    <li>å…ˆå›ºå®šä¸€å€‹é»ç•¶ä½œé ­ï¼ˆRootï¼Œæ ¹ç¯€é»ï¼‰ã€‚</li>
                    <li>å‰©ä¸‹ 2 å€‹é»ï¼Œå¯ä»¥æ€éº¼æ“ºï¼Ÿ
                        <ul>
                            <li>éƒ½åœ¨å·¦é‚Š</li>
                            <li>éƒ½åœ¨å³é‚Š</li>
                            <li>ä¸€å·¦ä¸€å³</li>
                        </ul>
                    </li>
                    <li>ç•«å‡ºä¾†æ•¸æ•¸çœ‹ï¼</li>
                </ol>
            </li>
        </ul>
    </div>

    <!-- F. äº’å‹•åˆ—èˆ‰ï¼š5 ç¨®æ¨¹å½¢ä¸€éµå±•ç¤º (æ ¸å¿ƒåŠŸèƒ½) -->
    <div class="section-card">
        <h2 style="color: var(--accent-color);">ç¬¬å››æ­¥ï¼šäº’å‹•åˆ—èˆ‰ï¼ˆå¿…çœ‹ï¼ï¼‰</h2>
        <p>è®“æˆ‘å€‘ç›´æ¥æŠŠ 3 å€‹ç¯€é»èƒ½çµ„æˆçš„ 5 ç¨®å½¢ç‹€ç•«å‡ºä¾†ã€‚è«‹é»æ“ŠæŒ‰éˆ•åˆ‡æ›ã€‚</p>
        
        <div class="visualization-area">
            <div id="treeDisplayArea" class="tree-container">
                <!-- SVG æœƒåœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                <svg width="200" height="150" id="singleTreeSvg"></svg>
            </div>
            <!-- å°‡æ–‡å­—æè¿°ç§»åˆ° treeDisplayArea å¤–é¢ï¼Œé¿å…è¢« innerHTML æ¸…é™¤ -->
            <p id="treeDescription" style="font-weight: bold; margin-top: 10px;">è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹</p>
            
            <div style="margin-top: 15px;">
                <button class="btn" onclick="showNextTree()">ä¸‹ä¸€ç¨®å½¢ç‹€ â–¶</button>
                <button class="btn btn-outline" onclick="toggleShowAll()">é¡¯ç¤ºå…¨éƒ¨ / åˆ‡æ›å–®å¼µ</button>
            </div>
            <p id="counterText" style="font-size: 0.8rem; color: #888; margin-top: 5px;">ç›®å‰ï¼šå°šæœªé–‹å§‹</p>
        </div>
    </div>

    <!-- G. é¸é …åˆ†æ -->
    <div class="section-card">
        <h2>é¸é …åˆ†æ</h2>
        <div class="analysis-item">
            <strong>(A) 3ï¼š</strong> é€™æ˜¯æœ€å¸¸è¦‹çš„éŒ¯èª¤ã€‚é€™æ˜¯å› ç‚ºåªç®—åˆ°ã€Œå…¨éƒ¨å‘å·¦ã€ã€ã€Œå…¨éƒ¨å‘å³ã€ã€ã€Œå·¦å³å¹³è¡¡ã€é€™ä¸‰ç¨®ï¼Œå¿˜è¨˜äº†ã€Œå…ˆå·¦å†å³ã€é€™ç¨®æŠ˜å½çš„æƒ…æ³ã€‚
        </div>
        <div class="analysis-item">
            <strong>(B) 4ï¼š</strong> é€šå¸¸æ˜¯æ¼ç®—äº†å…¶ä¸­ä¸€ç¨®æŠ˜å½çš„å½¢ç‹€ã€‚
        </div>
        <div class="analysis-item correct">
            <strong>(C) 5ï¼š</strong> æ­£ç¢ºã€‚åŒ…å«ï¼š1ç¨®å¹³è¡¡ã€2ç¨®ç›´éˆï¼ˆå…¨å·¦/å…¨å³ï¼‰ã€2ç¨®æŠ˜å½ï¼ˆå·¦å³/å³å·¦ï¼‰ã€‚
        </div>
        <div class="analysis-item">
            <strong>(D) 6ï¼š</strong> 3 å€‹ç¯€é»å·²ç¶“æ²’æœ‰å…¶ä»–çµ„åˆæ–¹å¼äº†ã€‚
        </div>
    </div>

    <!-- H. è§€å¿µè£œå……èˆ‡å»¶ä¼¸ -->
    <div class="section-card" style="background-color: #fffaf0; border-color: #fbd38d;">
        <h2>è§€å¿µè£œå……ï¼šCatalan Number</h2>
        <p>é€™ç¨®ã€Œè¨ˆç®—äºŒå…ƒæ¨¹å½¢ç‹€æ•¸é‡ã€çš„å•é¡Œï¼Œåœ¨æ•¸å­¸ä¸Šæœ‰å€‹å°ˆæœ‰åè©å«åš <strong>Catalan Numberï¼ˆå¡ç‰¹è˜­æ•¸ï¼‰</strong>ã€‚</p>
        <ul>
            <li><strong>å®šç¾©ï¼š</strong> ç”¨ä¾†è¨ˆç®—å¹¾ä½•å½¢ç‹€çµ„åˆæˆ–æ‹¬è™Ÿé…å°æ•¸é‡çš„æ•¸åˆ—ã€‚</li>
            <li><strong>æ•¸åˆ—ï¼š</strong> 1, 1, 2, 5, 14, 42... (åˆ†åˆ¥å°æ‡‰ 0, 1, 2, 3, 4, 5 å€‹ç¯€é»)</li>
            <li><strong>æœ¬é¡Œï¼š</strong> ç•¶ç¯€é»æ•¸ n=3 æ™‚ï¼Œå¡ç‰¹è˜­æ•¸å°±æ˜¯ 5ã€‚</li>
            <li><strong>å»¶ä¼¸æ€è€ƒï¼š</strong> å¦‚æœé¡Œç›®æ”¹æˆ 2 å€‹ç¯€é»ï¼Ÿç­”æ¡ˆæ˜¯ 2 (å·¦æ–œã€å³æ–œ)ã€‚</li>
        </ul>
    </div>

    <!-- I. è¨˜æ†¶å£è¨£ & J. å¸¸è¦‹é™·é˜± -->
    <div class="section-card">
        <h2>è¨˜æ†¶å£è¨£ & é¿å‘æŒ‡å—</h2>
        <p>âš¡ <strong>å£è¨£ï¼š</strong> ã€Œä¸‰é»äºŒå…ƒæ¨¹ï¼Œå½¢ç‹€å‰›å¥½äº”ã€</p>
        <p>ğŸ’£ <strong>å¸¸è¦‹é™·é˜±ï¼š</strong> 
            <ul>
                <li>ä¸è¦æŠŠã€ŒäºŒå…ƒæ¨¹ã€ç•¶æˆä¸€èˆ¬çš„æ¨¹ï¼Œå·¦å³æ–¹å‘ä¸€å®šè¦åˆ†æ¸…æ¥šã€‚</li>
                <li>ä¸è¦æ­»èƒŒå…¬å¼ï¼Œè€ƒè©¦æ™‚ç”¨ç•«çš„æœ€ä¿éšªï¼ˆåæ­£åªæœ‰ 5 ç¨®ï¼‰ã€‚</li>
            </ul>
        </p>
    </div>

    <!-- K. ä½œç­”å€äº’å‹•é¡Œ -->
    <div class="quiz-area">
        <h3 style="margin-top: 0;">ğŸ¯ ç«‹å³ç·´ç¿’</h3>
        <p>é¡Œç›®ï¼šæœ‰ä¸‰å€‹ç¯€é»çš„æ¨¹ï¼Œçµ„æˆäºŒå…ƒæ¨¹çš„å€‹æ•¸æœ€å¤šç‚ºä½•?</p>
        <div class="quiz-options">
            <button class="quiz-btn" onclick="checkAnswer('A', this)">(A) 3</button>
            <button class="quiz-btn" onclick="checkAnswer('B', this)">(B) 4</button>
            <button class="quiz-btn" onclick="checkAnswer('C', this)">(C) 5</button>
            <button class="quiz-btn" onclick="checkAnswer('D', this)">(D) 6</button>
        </div>
        <div id="quizFeedback" class="feedback"></div>
    </div>

    <!-- M. è‡ªæˆ‘æª¢æ¸¬ -->
    <div class="section-card">
        <h2>è‡ªæˆ‘æª¢æ¸¬ (æƒ³ä¸€æƒ³ï¼Œä¸çœ‹ç­”æ¡ˆ)</h2>
        <ol>
            <li>å¦‚æœåªæœ‰ 2 å€‹ç¯€é»ï¼ŒäºŒå…ƒæ¨¹æœƒæœ‰å¹¾ç¨®å½¢ç‹€ï¼Ÿä½ èƒ½ç”¨æ‰‹ç•«å‡ºä¾†å—ï¼Ÿ</li>
            <li>ã€ŒäºŒå…ƒæœå°‹æ¨¹ (BST)ã€è·Ÿé€™è£¡è¬›çš„ã€ŒäºŒå…ƒæ¨¹ã€å½¢ç‹€è¨ˆç®—æœ‰ä»€éº¼é—œä¿‚ï¼Ÿ(æç¤ºï¼šå¦‚æœæŠŠæ•¸å­— 1,2,3 å¡«é€²å»ï¼Œæœ‰å¹¾ç¨®å¡«æ³•ï¼Ÿ)</li>
        </ol>
    </div>

</div>

<!-- äº’å‹•é‚è¼¯ Script -->
<script>
    /* * å®šç¾© 5 ç¨®äºŒå…ƒæ¨¹çš„çµæ§‹è³‡æ–™ 
     * ä½¿ç”¨ç°¡å–®çš„åº§æ¨™ç³»çµ± (0-200, 0-150)
     * nodes: æ¯å€‹ç¯€é»çš„åº§æ¨™ {x, y}
     * lines: é€£æ¥ç·šçš„èµ·é»èˆ‡çµ‚é»ç´¢å¼• [fromIndex, toIndex]
     */
    const treeShapes = [
        {
            name: "1. å¹³è¡¡å‹ (äººå­—å½¢)",
            desc: "æ ¹ç¯€é»æœ‰å·¦å°å­©ï¼Œä¹Ÿæœ‰å³å°å­©",
            nodes: [{x: 100, y: 30}, {x: 60, y: 80}, {x: 140, y: 80}],
            lines: [[0, 1], [0, 2]]
        },
        {
            name: "2. å·¦æ–œéŠ (Left Skewed)",
            desc: "å…¨éƒ¨å¾€å·¦é‚Šé•·",
            nodes: [{x: 100, y: 30}, {x: 70, y: 70}, {x: 40, y: 110}],
            lines: [[0, 1], [1, 2]]
        },
        {
            name: "3. å·¦æ‹å³ (Left-Right)",
            desc: "å…ˆå¾€å·¦ï¼Œå·¦å°å­©å†å¾€å³é•·",
            nodes: [{x: 100, y: 30}, {x: 60, y: 70}, {x: 90, y: 110}],
            lines: [[0, 1], [1, 2]]
        },
        {
            name: "4. å³æ–œéŠ (Right Skewed)",
            desc: "å…¨éƒ¨å¾€å³é‚Šé•·",
            nodes: [{x: 100, y: 30}, {x: 130, y: 70}, {x: 160, y: 110}],
            lines: [[0, 1], [1, 2]]
        },
        {
            name: "5. å³æ‹å·¦ (Right-Left)",
            desc: "å…ˆå¾€å³ï¼Œå³å°å­©å†å¾€å·¦é•·",
            nodes: [{x: 100, y: 30}, {x: 140, y: 70}, {x: 110, y: 110}],
            lines: [[0, 1], [1, 2]]
        }
    ];

    let currentTreeIndex = -1; // å°šæœªé–‹å§‹
    let isShowAllMode = false;

    // ç¹ªè£½å–®ä¸€æ£µæ¨¹çš„å‡½æ•¸
    function generateTreeSVG(treeData, width=200, height=150) {
        let svgContent = '';
        
        // ç•«ç·š
        treeData.lines.forEach(line => {
            const start = treeData.nodes[line[0]];
            const end = treeData.nodes[line[1]];
            svgContent += `<line x1="${start.x}" y1="${start.y}" x2="${end.x}" y2="${end.y}" />`;
        });

        // ç•«é» (ç¯€é»)
        treeData.nodes.forEach((node, index) => {
            svgContent += `<circle cx="${node.x}" cy="${node.y}" r="10" />`;
            // å¯ä»¥åœ¨é€™è£¡åŠ ç¯€é»ç·¨è™Ÿï¼Œä½†é¡Œç›®å¼·èª¿å½¢ç‹€ï¼Œæ•…ç•™ç™½
        });

        return `<svg width="${width}" height="${height}" viewBox="0 0 200 150">${svgContent}</svg>`;
    }

    // é¡¯ç¤ºä¸‹ä¸€æ£µæ¨¹
    function showNextTree() {
        // å¦‚æœåœ¨é¡¯ç¤ºå…¨éƒ¨æ¨¡å¼ï¼Œå…ˆåˆ‡å›å–®å¼µæ¨¡å¼
        if (isShowAllMode) {
            toggleShowAll();
        }

        currentTreeIndex = (currentTreeIndex + 1) % treeShapes.length;
        renderSingleTree(currentTreeIndex);
    }

    // æ¸²æŸ“å–®å¼µæ¨¹è¦–åœ–
    function renderSingleTree(index) {
        const tree = treeShapes[index];
        const displayArea = document.getElementById('treeDisplayArea');
        const descText = document.getElementById('treeDescription');
        const counterText = document.getElementById('counterText');

        // æ¸…ç©ºä¸¦é‡ç¹ª (ä¸æœƒå†æ¸…é™¤åˆ° treeDescription äº†)
        displayArea.innerHTML = generateTreeSVG(tree);
        displayArea.className = "tree-container"; // æ¢å¾©å–®å¼µæ¨£å¼
        
        // æ›´æ–°æ–‡å­—
        descText.innerHTML = `<span style="color:#2563eb">${tree.name}</span><br><span style="font-weight:normal; font-size:0.9em">${tree.desc}</span>`;
        counterText.innerText = `ç›®å‰é¡¯ç¤ºï¼šç¬¬ ${index + 1} / 5 ç¨®`;
    }

    // åˆ‡æ›ã€Œé¡¯ç¤ºå…¨éƒ¨ã€æ¨¡å¼
    function toggleShowAll() {
        const displayArea = document.getElementById('treeDisplayArea');
        const descText = document.getElementById('treeDescription');
        const counterText = document.getElementById('counterText');

        isShowAllMode = !isShowAllMode;

        if (isShowAllMode) {
            // é€²å…¥é¡¯ç¤ºå…¨éƒ¨æ¨¡å¼
            let gridHtml = '<div class="tree-grid">';
            treeShapes.forEach((tree, idx) => {
                gridHtml += `
                    <div class="tree-card">
                        ${generateTreeSVG(tree, 120, 100)}
                        <div style="font-size: 12px; margin-top:5px;">${idx + 1}. ${tree.name.split(' ')[1] || tree.name}</div>
                    </div>
                `;
            });
            gridHtml += '</div>';
            
            displayArea.innerHTML = gridHtml;
            displayArea.style.display = "block"; // ç¢ºä¿ Grid æ­£å¸¸é¡¯ç¤º
            descText.innerText = "å·²åˆ—å‡ºæ‰€æœ‰ 5 ç¨®å¯èƒ½çš„äºŒå…ƒæ¨¹å½¢ç‹€";
            counterText.innerText = "æ¨¡å¼ï¼šç¸½è¦½";
        } else {
            // å›åˆ°å–®å¼µæ¨¡å¼
            displayArea.style.display = "flex";
            if(currentTreeIndex === -1) currentTreeIndex = 0;
            renderSingleTree(currentTreeIndex);
        }
    }

    // æª¢æŸ¥ç­”æ¡ˆåŠŸèƒ½
    function checkAnswer(option, btnElement) {
        const feedback = document.getElementById('quizFeedback');
        const allBtns = document.querySelectorAll('.quiz-btn');
        
        // é‡ç½®æŒ‰éˆ•æ¨£å¼
        allBtns.forEach(btn => {
            btn.classList.remove('selected-correct', 'selected-wrong');
        });

        if (option === 'C') {
            btnElement.classList.add('selected-correct');
            feedback.style.display = 'block';
            feedback.style.backgroundColor = '#d1fae5';
            feedback.style.color = '#065f46';
            feedback.innerHTML = `
                <strong>âœ… ç­”å°äº†ï¼</strong><br>
                3 å€‹ç¯€é»çš„äºŒå…ƒæ¨¹å½¢ç‹€å°±æ˜¯ 5 ç¨® (Catalan Number)ã€‚<br>
                å¦‚æœä½ é‚„è¨˜å¾—åœ–å½¢é•·ä»€éº¼æ¨£å­ï¼Œé€™é¡Œå°±æ˜¯é€åˆ†é¡Œï¼
            `;
        } else {
            btnElement.classList.add('selected-wrong');
            feedback.style.display = 'block';
            feedback.style.backgroundColor = '#fee2e2';
            feedback.style.color = '#991b1b';
            
            let hint = "";
            if(option === 'A') hint = "3 æ˜¯å°‘ç®—äº†æŠ˜å½çš„æƒ…æ³å–”ï¼å†è©¦è©¦çœ‹ã€‚";
            if(option === 'B') hint = "4 é€šå¸¸æ˜¯å°‘ç•«äº†ä¸€ç¨®ï¼Œå†æª¢æŸ¥ä¸€ä¸‹ï¼";
            if(option === 'D') hint = "3 å€‹é»æ‹¼ä¸å‡º 6 ç¨®å½¢ç‹€å•¦ï¼Œå¤ªå¤šäº†ã€‚";
            
            feedback.innerHTML = `<strong>âŒ ç­”éŒ¯å›‰ï¼</strong> ${hint}`;
        }
    }
</script>

</body>
</html>