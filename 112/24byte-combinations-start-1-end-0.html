<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•æ•™å­¸ï¼šByte çµ„åˆè¨ˆç®— (ä»¥1é–‹é ­ï¼Œä»¥0çµæŸ)</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #10b981;
            --bg-color: #f3f4f6;
            --text-color: #1f2937;
            --card-bg: #ffffff;
            --accent-red: #ef4444;
            --fixed-gray: #9ca3af;
            --border-radius: 12px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .subtitle {
            color: #6b7280;
            font-size: 1.1rem;
        }

        /* Card Styles */
        section {
            background: var(--card-bg);
            padding: 25px;
            margin-bottom: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: transform 0.2s;
        }

        h2 {
            border-left: 5px solid var(--primary-color);
            padding-left: 15px;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        /* Question Box */
        .question-box {
            background: #eef2ff;
            border: 2px solid var(--primary-color);
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-options ul {
            list-style: none;
            padding-left: 0;
        }

        .question-options li {
            padding: 5px 0;
            font-family: monospace;
            font-size: 1.1rem;
        }

        /* Core Concepts */
        .concepts ul {
            padding-left: 20px;
        }
        
        .highlight {
            background-color: #fef3c7;
            padding: 0 4px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Interactive Section - The Heart */
        .interactive-area {
            border: 2px solid var(--secondary-color);
        }

        .bit-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .bit-box {
            width: 45px;
            height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-weight: bold;
            position: relative;
            background: white;
            transition: all 0.3s;
        }

        .bit-box.fixed {
            background-color: #e5e7eb;
            border-color: #9ca3af;
            color: #4b5563;
        }

        .bit-box.free {
            background-color: #d1fae5; /* Green-100 */
            border-color: var(--secondary-color);
            color: #065f46;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        .bit-label {
            font-size: 0.7rem;
            position: absolute;
            top: -20px;
            color: #6b7280;
        }

        .bit-status {
            font-size: 0.6rem;
            position: absolute;
            bottom: 2px;
        }

        .bit-val {
            font-size: 1.2rem;
            font-family: monospace;
        }

        .controls {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f9fafb;
            border-radius: 8px;
        }

        input[type=range] {
            width: 100%;
            max-width: 300px;
            margin: 10px 0;
            cursor: pointer;
        }

        .result-display {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
        }

        .big-number {
            font-size: 2.5rem;
            color: var(--primary-color);
            font-weight: bold;
            display: block;
            margin: 10px 0;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 10px;
            transition: background 0.2s;
        }

        .btn:hover {
            background-color: #1d4ed8;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background: #eef2ff;
        }

        .combinations-list {
            margin-top: 15px;
            background: #1f2937;
            color: #10b981;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
            display: none; /* Hidden by default */
            text-align: left;
        }

        .hint-text {
            text-align: center;
            color: #6b7280;
            margin-top: 15px;
            font-style: italic;
            border-top: 1px solid #e5e7eb;
            padding-top: 10px;
        }

        /* Option Breakdown */
        .option-card {
            border: 1px solid #e5e7eb;
            margin-bottom: 10px;
            border-radius: 6px;
            overflow: hidden;
        }

        .option-header {
            padding: 10px 15px;
            background: #f9fafb;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }
        
        .option-header:hover {
            background-color: #f3f4f6;
        }

        .option-content {
            padding: 15px;
            display: none;
            border-top: 1px solid #e5e7eb;
        }
        
        .option-content.show {
            display: block;
        }

        .correct-badge {
            color: var(--secondary-color);
            font-weight: bold;
        }
        
        .wrong-badge {
            color: var(--accent-red);
            font-weight: bold;
        }

        /* Quiz Section */
        .quiz-option {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            border-color: var(--primary-color);
            background-color: #eef2ff;
        }

        .quiz-option input {
            margin-right: 10px;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        
        .feedback.success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #34d399;
        }
        
        .feedback.error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #f87171;
        }

        /* Accordion / Details */
        details {
            background: #f9fafb;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
        }

        summary {
            font-weight: bold;
            padding: 5px;
        }
        
        .details-content {
            padding: 10px;
            border-top: 1px solid #e5e7eb;
            margin-top: 10px;
        }

        /* Utility */
        .bit-highlight {
            animation: highlight-pulse 1s 3;
        }

        @keyframes highlight-pulse {
            0% { transform: scale(1); border-color: var(--secondary-color); }
            50% { transform: scale(1.1); border-color: var(--accent-red); }
            100% { transform: scale(1); border-color: var(--secondary-color); }
        }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            .bit-box {
                width: 35px;
                height: 50px;
            }
            .bit-val { font-size: 1rem; }
            .bit-label { font-size: 0.6rem; }
            .bit-status { display: none; } /* Hide status text on small screens */
            .big-number { font-size: 2rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ä½å…ƒçµ„çµ„åˆè¨ˆç®—</h1>
        <div class="subtitle">å›ºå®šé ­å°¾ï¼Œçœ‹ä¸­é–“å¹¾æ ¼èƒ½è®Š</div>
    </header>

    <!-- 1. é¡Œç›®å€ -->
    <section class="question-box">
        <h2>æœ¬é¡Œ</h2>
        <div class="question-text">
            ä¸€å€‹ä»¥ 1 é–‹é ­ï¼Œä»¥ 0 çµæŸ çš„ä½å…ƒçµ„ï¼ˆbyteï¼‰ï¼Œå¯ä»¥æœ‰å¤šå°‘ç¨®çµ„åˆï¼Ÿ
        </div>
        <div class="question-options">
            <ul>
                <li>(A) 2</li>
                <li>(B) 32</li>
                <li>(C) 64</li>
                <li>(D) 128</li>
            </ul>
        </div>
    </section>

    <!-- 2. æ ¸å¿ƒè§€å¿µ -->
    <section class="concepts">
        <h2>æ ¸å¿ƒè§€å¿µ</h2>
        <ul>
            <li><strong>ä½å…ƒ (Bit)</strong>ï¼šé›»è…¦æœ€å°å–®ä½ï¼Œåªæœ‰ 0 æˆ– 1 å…©ç¨®ç‹€æ…‹ã€‚</li>
            <li><strong>ä½å…ƒçµ„ (Byte)</strong>ï¼šç”± 8 å€‹ bits çµ„æˆã€‚</li>
            <li><strong>å›ºå®šä½å…ƒ (Fixed Bit)</strong>ï¼šé¡Œç›®è¦å®šä¸èƒ½å‹•çš„æ ¼å­ï¼ˆæœ¬é¡Œç‚ºé ­èˆ‡å°¾ï¼‰ã€‚</li>
            <li><strong>è‡ªç”±ä½å…ƒ (Free Bit)</strong>ï¼šå¯ä»¥ä»»æ„å¡«å…¥ 0 æˆ– 1 çš„æ ¼å­ã€‚</li>
            <li><strong>çµ„åˆå…¬å¼</strong>ï¼šçµ„åˆæ•¸ = $2^{\text{è‡ªç”±ä½å…ƒæ•¸é‡}}$ (2 çš„è‡ªç”±ä½å…ƒæ¬¡æ–¹)ã€‚</li>
        </ul>
    </section>

    <!-- 3. äº’å‹•æ“ä½œå€ -->
    <section class="interactive-area" id="interactive">
        <h2>äº’å‹•å¯¦é©—å®¤</h2>
        <p style="margin-bottom: 15px;">è«‹è§€å¯Ÿä¸‹æ–¹ 8 å€‹ä½å…ƒã€‚ç°è‰²ä»£è¡¨é¡Œç›®å·²å›ºå®šï¼Œ<span style="color:var(--secondary-color); font-weight:bold;">ç¶ è‰²</span>ä»£è¡¨å¯ä»¥è‡ªç”±è®ŠåŒ–çš„ä½ç½®ã€‚</p>
        
        <!-- Bit Visualization -->
        <div class="bit-container" id="bitContainer">
            <!-- Will be populated by JS -->
        </div>

        <!-- Controls -->
        <div class="controls">
            <label for="freeBitSlider">
                èª¿æ•´ä¸­é–“è‡ªç”±ä½å…ƒæ•¸é‡ (æ¨¡æ“¬æ¸¬è©¦)ï¼š<span id="sliderValue" style="font-weight:bold; color:var(--primary-color);">6</span> å€‹
            </label>
            <br>
            <input type="range" id="freeBitSlider" min="0" max="6" value="6" step="1">
            <div style="font-size: 0.9rem; color: #666;">(æœ¬é¡Œé ­å°¾å›ºå®šï¼Œæ•…ä¸­é–“æœ€å¤š 6 å€‹è‡ªç”±ä½å…ƒ)</div>
        </div>

        <!-- Result Display -->
        <div class="result-display">
            <div>çµ„åˆæ•¸è¨ˆç®—å…¬å¼ï¼š</div>
            <div style="font-family: monospace; font-size: 1.5rem;">
                2 <sup id="exponentVal">6</sup> = <span class="big-number" id="resultVal">64</span>
            </div>
        </div>

        <!-- Enumeration -->
        <div style="text-align: center;">
            <button class="btn btn-outline" onclick="toggleCombinations()">é¡¯ç¤ºéƒ¨åˆ†çµ„åˆç¤ºæ„</button>
        </div>
        <div class="combinations-list" id="comboList">
            <!-- Populated by JS -->
        </div>

        <!-- Teaching Hint -->
        <div class="hint-text">
            ğŸ’¡ æç¤ºï¼šé ­å°¾å„å›ºå®š 1 å€‹ bit â†’ 8 æ¸› 2 = å‰©ä¸‹ 6 å€‹ bit å¯è‡ªç”±è®ŠåŒ– â†’ çµ„åˆæ•¸ = 2â¶
        </div>
    </section>

    <!-- 4. é¸é …ç ´è§£ -->
    <section class="breakdown">
        <h2>é¸é …é€ä¸€è§£æ</h2>
        <p style="margin-bottom: 15px;">é»æ“Šé¸é …æŸ¥çœ‹è©³ç´°èªªæ˜ï¼š</p>
        
        <div class="option-card">
            <div class="option-header" onclick="toggleOption('optA')">
                (A) 2 <span class="wrong-badge">âœ• éŒ¯èª¤</span>
            </div>
            <div class="option-content" id="optA">
                é€™æ˜¯ $2^1$ã€‚åªæœ‰ç•¶é¡Œç›®èªªã€Œåªæœ‰ 1 å€‹ä½å…ƒå¯ä»¥å‹•ã€çš„æ™‚å€™æ‰æ˜¯é€™å€‹ç­”æ¡ˆã€‚æœ¬é¡Œä¸­é–“æœ‰ 6 å€‹ä½å…ƒå¯ä»¥å‹•ã€‚
            </div>
        </div>

        <div class="option-card">
            <div class="option-header" onclick="toggleOption('optB')">
                (B) 32 <span class="wrong-badge">âœ• éŒ¯èª¤</span>
            </div>
            <div class="option-content" id="optB">
                é€™æ˜¯ $2^5$ã€‚å¦‚æœä½ èª¤ä»¥ç‚ºå›ºå®šäº† 3 å€‹ bitï¼Œæˆ–è€…è¨ˆç®—éŒ¯èª¤ï¼Œå¯èƒ½æœƒé¸é€™å€‹ã€‚
            </div>
        </div>

        <div class="option-card">
            <div class="option-header" onclick="toggleOption('optC')">
                (C) 64 <span class="correct-badge">âœ“ æ­£ç¢º</span>
            </div>
            <div class="option-content" id="optC">
                <strong>å®Œå…¨æ­£ç¢ºï¼</strong><br>
                1 Byte = 8 bitsã€‚<br>
                æ‰£æ‰é–‹é ­(1)å’Œçµå°¾(1)ï¼Œå…±æ‰£æ‰ 2 å€‹ã€‚<br>
                è‡ªç”±ä½å…ƒ = $8 - 2 = 6$ã€‚<br>
                çµ„åˆæ•¸ = $2^6 = 64$ã€‚
            </div>
        </div>

        <div class="option-card">
            <div class="option-header" onclick="toggleOption('optD')">
                (D) 128 <span class="wrong-badge">âœ• éŒ¯èª¤</span>
            </div>
            <div class="option-content" id="optD">
                é€™æ˜¯ $2^7$ã€‚é€™ä»£è¡¨åªæœ‰ 1 å€‹ bit è¢«å›ºå®šã€‚ä½†é¡Œç›®èªªã€Œé–‹é ­ã€è·Ÿã€Œçµå°¾ã€éƒ½å›ºå®šäº†ï¼Œæ‰€ä»¥æ‡‰è©²è¦æ‰£æ‰ 2 å€‹ bitã€‚
            </div>
        </div>
    </section>

    <!-- 5. å°æ¸¬é©— -->
    <section class="quiz">
        <h2>éš¨å ‚å°æ¸¬é©—</h2>
        <p>ç¢ºèªä½ æ˜¯å¦çœŸçš„ç†è§£äº†ï¼</p>
        <div style="margin-top: 15px;">
            <p><strong>é¡Œç›®ï¼šä¸€å€‹ä»¥ 1 é–‹é ­ï¼Œä»¥ 0 çµæŸ çš„ä½å…ƒçµ„ï¼Œå¯ä»¥æœ‰å¤šå°‘ç¨®çµ„åˆï¼Ÿ</strong></p>
            
            <label class="quiz-option">
                <input type="radio" name="quiz" value="2"> (A) 2
            </label>
            <label class="quiz-option">
                <input type="radio" name="quiz" value="32"> (B) 32
            </label>
            <label class="quiz-option">
                <input type="radio" name="quiz" value="64"> (C) 64
            </label>
            <label class="quiz-option">
                <input type="radio" name="quiz" value="128"> (D) 128
            </label>
            
            <button class="btn" onclick="checkAnswer()">é€å‡ºç­”æ¡ˆ</button>
        </div>

        <div id="quizFeedback" class="feedback"></div>
    </section>

    <!-- 6. å»¶ä¼¸çŸ¥è­˜ -->
    <section class="extensions">
        <details>
            <summary>ğŸ“š å»¶ä¼¸çŸ¥è­˜ï¼šé€šç”¨å…¬å¼ï¼ˆé»æ“Šå±•é–‹ï¼‰</summary>
            <div class="details-content">
                <h3>é€šç”¨å…¬å¼</h3>
                <p>è‹¥ä¸€å€‹ $n$-bit çš„è³‡æ–™ä¸­ï¼Œæœ‰ $k$ å€‹ bit è¢«å›ºå®šï¼ˆä¸èƒ½å‹•ï¼‰ï¼š</p>
                <p style="background:#e0e7ff; padding:10px; border-radius:4px; margin: 10px 0; font-weight:bold;">
                    çµ„åˆæ•¸ = $2^{(n - k)}$
                </p>
                
                <h4>èˆ‰ä¾‹èªªæ˜ï¼š</h4>
                <ul style="margin-left:20px;">
                    <li><strong>8-bitï¼Œå›ºå®š 3 å€‹ bitï¼š</strong><br>
                        è‡ªç”±ä½å…ƒ = $8 - 3 = 5$ã€‚<br>
                        çµ„åˆæ•¸ = $2^5 = 32$ã€‚
                    </li>
                    <li><strong>16-bitï¼Œå›ºå®š 4 å€‹ bitï¼š</strong><br>
                        è‡ªç”±ä½å…ƒ = $16 - 4 = 12$ã€‚<br>
                        çµ„åˆæ•¸ = $2^{12} = 4096$ã€‚
                    </li>
                </ul>
            </div>
        </details>
    </section>
</div>

<script>
    // åˆå§‹åŒ–
    const bitContainer = document.getElementById('bitContainer');
    const slider = document.getElementById('freeBitSlider');
    const sliderValue = document.getElementById('sliderValue');
    const exponentVal = document.getElementById('exponentVal');
    const resultVal = document.getElementById('resultVal');
    const comboList = document.getElementById('comboList');
    
    // é è¨­ç‹€æ…‹ (é¡Œç›®ç‹€æ…‹)
    // Bit 7 å›ºå®š (1), Bit 0 å›ºå®š (0), ä¸­é–“ 6 å€‹è‡ªç”±
    // ç‚ºäº†é…åˆ Slider é‚è¼¯ï¼Œæˆ‘å€‘å®šç¾©ï¼š
    // Slider å€¼ = ä¸­é–“è‡ªç”±ä½å…ƒçš„æ•¸é‡ (0~6)
    // ç¸½ bits = 8
    // é ­å°¾å§‹çµ‚å›ºå®š
    
    function renderBits(freeCount) {
        bitContainer.innerHTML = '';
        
        // Bit 7 (MSB) - Fixed
        addBit(7, '1', true);
        
        // Middle bits (6 down to 1)
        // é‚è¼¯ï¼šSlider æ§åˆ¶æœ‰å¤šå°‘å€‹æ˜¯ "Free"ã€‚
        // é¡Œç›®æ˜¯ 6 å€‹ Freeã€‚å¦‚æœ Slider < 6ï¼Œä»£è¡¨æˆ‘å€‘"æ¨¡æ“¬"å›ºå®šäº†æ›´å¤š bitã€‚
        // ç‚ºäº†è¦–è¦ºç°¡å–®ï¼Œæˆ‘å€‘å¾å·¦é‚Šé–‹å§‹å›ºå®šé¡å¤–çš„ bitã€‚
        
        const totalMiddleSlots = 6;
        const fixedInMiddle = totalMiddleSlots - freeCount;
        
        for (let i = 6; i >= 1; i--) {
            // å‰é¢ fixedInMiddle å€‹è¨­ç‚ºå›ºå®š(æ¨¡æ“¬)ï¼Œå‰©ä¸‹çš„è¨­ç‚º Free
            // æ³¨æ„è¿´åœˆæ˜¯å¾ 6 é™åˆ° 1
            // ç´¢å¼• 6 æ˜¯å·¦é‚Šç¬¬ä¸€å€‹ä¸­é–“ä½
            
            // åˆ¤æ–·ç•¶å‰ bit æ˜¯å¦å±¬æ–¼è¢«é¡å¤–å›ºå®šçš„ç¯„åœ
            // æ¯”å¦‚ free=6, fixedInMiddle=0 -> å…¨éƒ¨ free
            // free=4, fixedInMiddle=2 -> Bit 6, 5 å›ºå®š, 4,3,2,1 free
            
            if (i > (6 - fixedInMiddle)) {
                // æ¨¡æ“¬å›ºå®š (è¨­ç‚º 0 æˆ– 1 éƒ½å¯ä»¥ï¼Œé€™é‚Šè¨­ç‚º 0 ä»¥ç¤ºå€åˆ¥)
                addBit(i, '0', true);
            } else {
                // è‡ªç”±ä½å…ƒ
                addBit(i, '0/1', false);
            }
        }
        
        // Bit 0 (LSB) - Fixed
        addBit(0, '0', true);
    }

    function addBit(index, value, isFixed) {
        const div = document.createElement('div');
        div.className = `bit-box ${isFixed ? 'fixed' : 'free'}`;
        div.id = `bit-${index}`; // ç”¨æ–¼å‹•ç•«é«˜äº®
        
        const label = document.createElement('span');
        label.className = 'bit-label';
        label.innerText = `bit${index}`;
        
        const valSpan = document.createElement('span');
        valSpan.className = 'bit-val';
        valSpan.innerText = isFixed ? (value === '0/1' ? '?' : value) : '?';
        
        // å¦‚æœæ˜¯è‡ªç”±ä½å…ƒï¼Œè®“æ•¸å­—è·³å‹•æ¨¡æ“¬
        if (!isFixed) {
            valSpan.innerText = Math.round(Math.random());
            // ç°¡å–®çš„éš¨æ©Ÿè·³å‹•æ•ˆæœ
            setInterval(() => {
                if(div.classList.contains('free')) {
                    valSpan.innerText = Math.round(Math.random());
                }
            }, 800 + Math.random() * 500);
        } else {
            // åŠ å…¥é–é ­åœ–ç¤ºæˆ–æ–‡å­—
             const status = document.createElement('span');
             status.className = 'bit-status';
             status.innerText = 'ğŸ”’ å›ºå®š';
             div.appendChild(status);
        }

        div.appendChild(label);
        div.appendChild(valSpan);
        bitContainer.appendChild(div);
    }

    function updateCalculation(val) {
        sliderValue.innerText = val;
        exponentVal.innerText = val;
        resultVal.innerText = Math.pow(2, val);
        
        // éš±è—åˆ—è¡¨ä¸¦é‡ç½®æŒ‰éˆ•æ–‡å­—ï¼Œå› ç‚ºåƒæ•¸è®Šäº†
        comboList.style.display = 'none';
        document.querySelector('#interactive button').innerText = 'é¡¯ç¤ºéƒ¨åˆ†çµ„åˆç¤ºæ„';
    }

    // Slider Event
    slider.addEventListener('input', (e) => {
        const val = parseInt(e.target.value);
        renderBits(val);
        updateCalculation(val);
    });

    // åˆå§‹æ¸²æŸ“
    renderBits(6);

    // é¡¯ç¤ºçµ„åˆåˆ—è¡¨é‚è¼¯
    function toggleCombinations() {
        if (comboList.style.display === 'block') {
            comboList.style.display = 'none';
            return;
        }

        const freeBits = parseInt(slider.value);
        const totalCombos = Math.pow(2, freeBits);
        let html = `<p>è‡ªç”±ä½å…ƒæ•¸ï¼š${freeBits}ï¼Œç¸½çµ„åˆæ•¸ï¼š${totalCombos}</p>`;
        html += `<p>æ ¼å¼ï¼š<strong>1</strong> (ä¸­é–“è‡ªç”±) <strong>0</strong></p><hr style="border-color:#374151; margin:10px 0;">`;
        
        // ç‚ºäº†é¿å…ç•¶æ©Ÿï¼Œæœ€å¤šé¡¯ç¤ºå‰ 16 ç­†
        const limit = Math.min(totalCombos, 16);
        
        for (let i = 0; i < limit; i++) {
            // å°‡æ•¸å­—è½‰ç‚ºäºŒé€²ä½å­—ä¸²ï¼Œä¸¦è£œé›¶
            let binaryMid = i.toString(2).padStart(freeBits, '0');
            
            // å¦‚æœ slider < 6ï¼Œä»£è¡¨æœ‰é¡å¤–å›ºå®šçš„ 0 åœ¨å‰é¢
            const fixedPadding = 6 - freeBits;
            let prefixFixed = "";
            for(let k=0; k<fixedPadding; k++) prefixFixed += "0";

            html += `<div>#${i+1}: <span style="color:#9ca3af">1</span> <span style="color:#9ca3af">${prefixFixed}</span><span style="color:#10b981">${binaryMid}</span> <span style="color:#9ca3af">0</span></div>`;
        }

        if (totalCombos > limit) {
            html += `<div>... (é‚„æœ‰ ${totalCombos - limit} ç¨®) ...</div>`;
        }

        comboList.innerHTML = html;
        comboList.style.display = 'block';
    }

    // é¸é … Accordion
    function toggleOption(id) {
        const content = document.getElementById(id);
        const isShown = content.classList.contains('show');
        
        // é—œé–‰æ‰€æœ‰
        document.querySelectorAll('.option-content').forEach(el => el.classList.remove('show'));
        
        // å¦‚æœåŸæœ¬æ²’é–‹ï¼Œå°±æ‰“é–‹é»æ“Šçš„é€™å€‹
        if (!isShown) {
            content.classList.add('show');
        }
    }

    // æ¸¬é©—é‚è¼¯
    function checkAnswer() {
        const selected = document.querySelector('input[name="quiz"]:checked');
        const feedback = document.getElementById('quizFeedback');
        
        if (!selected) {
            alert('è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼');
            return;
        }

        if (selected.value === '64') {
            feedback.className = 'feedback success';
            feedback.innerHTML = `
                <h3>ğŸ‰ ç­”å°äº†ï¼</h3>
                <p>é‚è¼¯å®Œå…¨æ­£ç¢ºï¼š8 bits - 2 å€‹å›ºå®š = 6 å€‹è‡ªç”±ä½å…ƒã€‚</p>
                <p>çµ„åˆæ•¸ = $2^6 = 64$ã€‚</p>
            `;
            feedback.style.display = 'block';
        } else {
            feedback.className = 'feedback error';
            feedback.innerHTML = `
                <h3>âŒ å†æƒ³ä¸€ä¸‹...</h3>
                <p>ä½ é¸æ“‡äº† ${selected.value}ï¼Œé€™ä¸æ˜¯æ­£ç¢ºç­”æ¡ˆã€‚</p>
                <p>è¨˜å¾—å£è¨£ï¼š<strong>åªæœ‰ä¸­é–“ç¶ è‰²çš„æ ¼å­å¯ä»¥è®Š</strong>ã€‚</p>
                <button class="btn btn-outline" style="margin-top:10px; background:white;" onclick="scrollToInteractive()">å¸¶æˆ‘å›äº’å‹•æ“ä½œå€çœ‹ä¸€æ¬¡</button>
            `;
            feedback.style.display = 'block';
        }
    }

    function scrollToInteractive() {
        const section = document.getElementById('interactive');
        section.scrollIntoView({ behavior: 'smooth' });
        
        // é‡ç½® slider åˆ°é¡Œç›®ç‹€æ…‹
        slider.value = 6;
        renderBits(6);
        updateCalculation(6);

        // é«˜äº®ä¸­é–“è‡ªç”±ä½å…ƒ
        setTimeout(() => {
            document.querySelectorAll('.bit-box.free').forEach(el => {
                el.classList.add('bit-highlight');
                // å‹•ç•«çµæŸå¾Œç§»é™¤ class ä»¥ä¾¿ä¸‹æ¬¡è§¸ç™¼
                setTimeout(() => el.classList.remove('bit-highlight'), 3000);
            });
        }, 800);
    }
</script>

</body>
</html>