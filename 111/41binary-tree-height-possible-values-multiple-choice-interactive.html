<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 41ï¼šäºŒå…ƒæ¨¹çš„é«˜åº¦åˆ¤å®š - äº’å‹•æ•™å­¸è¬›ç¾©</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        :root {
            --primary-color: #2c3e50; /* æ·±è— - å°ˆæ¥­æ„Ÿ */
            --accent-color: #e67e22;  /* æ©˜è‰² - é‡é» */
            --success-color: #27ae60; /* ç¶ è‰² - æ­£ç¢º */
            --error-color: #c0392b;   /* ç´…è‰² - éŒ¯èª¤ */
            --bg-color: #f4f7f6;      /* æ·ºç° - èƒŒæ™¯ */
            --card-bg: #ffffff;
            --border-radius: 8px;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        h1, h2, h3 {
            color: var(--primary-color);
            font-weight: bold;
        }

        /* --- è£œç¿’ç­è¬›ç¾©é¢¨æ ¼å€å¡Š --- */
        .section-card {
            background: var(--card-bg);
            padding: 25px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary-color);
        }

        .badge {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .question-box {
            background-color: #e8f6f3;
            border: 2px dashed #1abc9c;
            padding: 20px;
            margin: 15px 0;
        }

        /* --- è§€å¿µé‡é»å€ --- */
        .concept-highlight {
            background-color: #fff3cd;
            border-left: 5px solid var(--accent-color);
            padding: 15px;
            margin: 10px 0;
        }

        .definition-term {
            font-weight: bold;
            color: #d35400;
        }

        /* --- äº’å‹•æ‹–æ‹‰å€ (æ¨¹å½¢é…å°) --- */
        .drag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: space-between;
            margin-top: 15px;
        }

        .draggable-item {
            background: white;
            border: 2px solid #bdc3c7;
            padding: 10px;
            width: 30%;
            cursor: move;
            text-align: center;
            border-radius: var(--border-radius);
            user-select: none;
            touch-action: none; /* é˜²æ­¢æ‰‹æ©Ÿæ»¾å‹•å¹²æ“¾æ‹–æ›³ */
        }
        
        .draggable-item:active {
            opacity: 0.6;
            border-color: var(--accent-color);
        }

        .drop-zone {
            background: #ecf0f1;
            border: 2px dashed #95a5a6;
            width: 30%;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
            transition: background 0.3s;
        }

        .drop-zone.drag-over {
            background: #d5dbdb;
            border-color: var(--primary-color);
        }
        
        /* æ‰‹æ©Ÿç‰ˆé©é… */
        @media (max-width: 600px) {
            .draggable-item, .drop-zone {
                width: 100%;
                margin-bottom: 10px;
            }
        }

        /* --- è¤‡é¸é¡Œä½œç­”å€ --- */
        .option-group {
            margin: 15px 0;
        }

        .option-label {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            background: #e9ecef;
        }

        .option-label input {
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* --- æŒ‰éˆ•æ¨£å¼ --- */
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background-color: #34495e;
        }

        .btn-reset {
            background-color: #95a5a6;
        }

        .btn-check {
            background-color: var(--accent-color);
        }

        /* --- çµæœå›é¥‹ --- */
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            display: none; /* é è¨­éš±è— */
        }
        .feedback.success {
            background-color: #d4edda;
            color: #155724;
            display: block;
        }
        .feedback.error {
            background-color: #f8d7da;
            color: #721c24;
            display: block;
        }

        /* --- é™·é˜±å¡èˆ‡è§£æ --- */
        .trap-card {
            background: #ffeaa7;
            border: 1px solid #fdcb6e;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
        }
        .trap-card h4 { margin: 0 0 5px 0; color: #d35400; }
        .trap-done { opacity: 0.5; text-decoration: line-through; }

        .analysis-btn {
            background: white;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            margin: 5px;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
        }
        .analysis-btn:hover { background: var(--bg-color); }
        .analysis-content {
            margin-top: 10px;
            padding: 10px;
            background: #eee;
            border-radius: 4px;
            display: none;
        }

        /* æ¨¹ç‹€åœ–äº’å‹•æ¼”ç¤º */
        .tree-node {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin: 5px auto;
            position: relative;
        }
        .tree-line {
            width: 2px;
            height: 20px;
            background: #ccc;
            margin: 0 auto;
        }
        
        .correct-answer-highlight {
            font-weight: bold;
            color: var(--success-color);
            background: #e8f8f5;
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div class="container">
    <header style="text-align: center; margin-bottom: 30px;">
        <h1>é›»è…¦æ¦‚è«– - è³‡æ–™çµæ§‹ç¯‡</h1>
        <p>å–®å…ƒï¼šäºŒå…ƒæ¨¹ (Binary Tree) çš„æ€§è³ªèˆ‡é‹ç®—</p>
    </header>

    <!-- é¡Œç›®å€ -->
    <div class="section-card">
        <span class="badge">è¤‡é¸é¡Œ 41</span>
        <h2>é¡Œç›®è³‡è¨Š</h2>
        <div class="question-box">
            <p style="font-size: 1.1em; font-weight: bold;">æœ‰å››å€‹ç¯€é»çš„äºŒå…ƒæ¨¹é€£æ¥åœ–ï¼ˆconnected binary treeï¼‰çµæ§‹ä¸­ï¼Œæ¨¹çš„é«˜åº¦æœ‰å¯èƒ½ç‚ºï¼Ÿ</p>
            <p style="color: #666; font-size: 0.9em;">ï¼ˆæç¤ºï¼šæœ¬é¡Œç‚ºè¤‡é¸é¡Œï¼Œè«‹é¸å‡ºæ‰€æœ‰å¯èƒ½çš„æƒ…æ³ï¼‰</p>
            <ul style="list-style: none; padding: 0;">
                <li>(A) 1</li>
                <li>(B) 2</li>
                <li>(C) 3</li>
                <li>(D) 4</li>
                <li>(E) 5</li>
            </ul>
        </div>
    </div>

    <!-- æ ¸å¿ƒè§€å¿µæ•™å­¸ -->
    <div class="section-card">
        <h3>ğŸ“– æ ¸å¿ƒè§€å¿µèªªæ˜ (å¿…è®€)</h3>
        
        <div class="concept-highlight">
            <h4>1. åè©è§£é‡‹ (ç™½è©±ç¿»è­¯)</h4>
            <ul>
                <li><span class="definition-term">æ¨¹ (Tree)</span>ï¼šä¸€ç¨®åƒå®¶è­œä¸€æ¨£ï¼Œæœ‰å±¤æ¬¡é—œä¿‚çš„è³‡æ–™çµæ§‹ã€‚</li>
                <li><span class="definition-term">äºŒå…ƒæ¨¹ (Binary Tree)</span>ï¼šé€™æ£µæ¨¹è¦å®šå¾ˆåš´æ ¼ï¼Œæ¯å€‹çˆ¸çˆ¸æœ€å¤šåªèƒ½æœ‰å…©å€‹å°å­©ï¼ˆå·¦å­ç¯€é»ã€å³å­ç¯€é»ï¼‰ã€‚</li>
                <li><span class="definition-term">ç¯€é» (Node)</span>ï¼šæ¨¹ä¸Šé¢çš„æ¯ä¸€å€‹åœ“åœˆåœˆï¼ˆè³‡æ–™é»ï¼‰ã€‚æœ¬é¡Œæœ‰ 4 å€‹ã€‚</li>
                <li><span class="definition-term">æ¨¹çš„é«˜åº¦ (Height)</span>ï¼šå¾æ ¹ç¯€é»ç®—åˆ°æœ€åº•ä¸‹è‘‰ç¯€é»çš„ã€Œå±¤æ•¸ã€ã€‚</li>
                <li><span class="definition-term">é€£æ¥åœ– (Connected)</span>ï¼šæ•´æ£µæ¨¹æ˜¯é€£åœ¨ä¸€èµ·çš„ï¼Œæ²’æœ‰æ–·é–‹ã€‚</li>
            </ul>
        </div>

        <div class="concept-highlight">
            <h4>2. é«˜åº¦æ€éº¼ç®—ï¼Ÿ (é—œéµï¼)</h4>
            <ul>
                <li>æ¨¹çš„é«˜åº¦ = <strong>å±¤æ•¸</strong></li>
                <li>æ ¹ç¯€é»(æœ€ä¸Šé¢é‚£å€‹)æ‰€åœ¨é‚£ä¸€å±¤ï¼Œé«˜åº¦ç®— <strong>1</strong>ã€‚</li>
                <li>å¾€ä¸‹æ•¸ï¼Œçœ‹ã€Œæœ€æ·±ã€çš„é‚£æ¢è·¯å¾‘æœ‰å¹¾å±¤ã€‚</li>
            </ul>
        </div>

        <div class="concept-highlight">
            <h4>3. åˆ¤æ–·åŸå‰‡</h4>
            <p>ç¯€é»æ•¸å›ºå®š(4å€‹)æ™‚ï¼š</p>
            <ul>
                <li>æ’å¾—è¶Š<strong>ã€Œå¹³å‡ã€</strong>ï¼ˆå¤§å®¶æ“ åœ¨ä¸€èµ·ï¼‰ï¼Œå±¤æ•¸è¶Šå°‘ â†’ é«˜åº¦è¶Šå°ã€‚</li>
                <li>æ’å¾—è¶Š<strong>ã€Œç´°é•·ã€</strong>ï¼ˆåƒä¸€æ¢ç·šï¼‰ï¼Œå±¤æ•¸è¶Šå¤š â†’ é«˜åº¦è¶Šå¤§ã€‚</li>
            </ul>
        </div>
    </div>

    <!-- äº’å‹• 1ï¼šæ¨¹å½¢çµæ§‹è§£æ -->
    <div class="section-card">
        <h3>ğŸ¨ åœ–åƒåŒ–æ€è€ƒï¼šå››å€‹ç¯€é»æ€éº¼æ’ï¼Ÿ</h3>
        <p>è«‹å˜—è©¦å°‡ä¸‹æ–¹çš„ã€Œæ¨¹å½¢æè¿°å¡ç‰‡ã€æ‹–æ‹‰æ”¾åˆ°å°æ‡‰çš„ã€Œé«˜åº¦æ ¼å­ã€ä¸­ï¼Œçœ‹çœ‹é€™ä¸‰ç¨®å½¢ç‹€åˆ†åˆ¥å°æ‡‰å“ªç¨®é«˜åº¦ã€‚</p>
        <p style="font-size:0.8em; color:#888;">(è‹¥ä½¿ç”¨æ‰‹æ©Ÿï¼Œè«‹é»æ“Šå¡ç‰‡å¾Œï¼Œå†é»æ“Šç›®æ¨™æ ¼å­)</p>

        <div class="drag-container" id="dragSource">
            <!-- å¯æ‹–æ›³é …ç›® -->
            <div class="draggable-item" draggable="true" id="tree1" data-height="3">
                <strong>æƒ…æ³ 1ï¼šæœ€å¹³å‡</strong><br>
                <small>æ ¹ç¯€é» 1<br>ç¬¬äºŒå±¤ 2 å€‹<br>ç¬¬ä¸‰å±¤ 1 å€‹</small>
            </div>
            <div class="draggable-item" draggable="true" id="tree2" data-height="2">
                <strong>æƒ…æ³ 2ï¼šæ¬¡å¹³å‡</strong><br>
                <small>æ ¹ç¯€é» 1<br>ç¬¬äºŒå±¤ 2 å€‹<br>(å‡è¨­å‰›å¥½æ’æ»¿)</small>
            </div>
            <div class="draggable-item" draggable="true" id="tree3" data-height="4">
                <strong>æƒ…æ³ 3ï¼šæœ€ç´°é•·</strong><br>
                <small>è®Šæˆä¸€æ¢éˆ<br>æ¯å€‹ç¯€é»åªæœ‰1å€‹å­ç¯€é»</small>
            </div>
        </div>

        <div class="drag-container">
            <!-- æ”¾ç½®å€ -->
            <div class="drop-zone" data-target="2">
                <strong>é«˜åº¦ = 2</strong>
                <span style="font-size:0.8em; color:#aaa;">(é€™è£¡æ”¾å¯èƒ½çš„çµæ§‹)</span>
            </div>
            <div class="drop-zone" data-target="3">
                <strong>é«˜åº¦ = 3</strong>
                <span style="font-size:0.8em; color:#aaa;">(é€™è£¡æ”¾å¯èƒ½çš„çµæ§‹)</span>
            </div>
            <div class="drop-zone" data-target="4">
                <strong>é«˜åº¦ = 4</strong>
                <span style="font-size:0.8em; color:#aaa;">(é€™è£¡æ”¾å¯èƒ½çš„çµæ§‹)</span>
            </div>
        </div>
        <div id="dragFeedback" class="feedback"></div>
    </div>

    <!-- äº’å‹• 2ï¼šè¤‡é¸é¡Œä½œç­”å€ -->
    <div class="section-card">
        <h3>âœï¸ é–‹å§‹ä½œç­” (è¤‡é¸é¡Œ 41)</h3>
        <p style="color: var(--accent-color); font-weight: bold;">âš ï¸ æ³¨æ„ï¼šæœ¬é¡Œå¯è¤‡é¸ï¼è«‹å‹¾é¸æ‰€æœ‰æ­£ç¢ºç­”æ¡ˆã€‚</p>
        
        <form id="quizForm">
            <div class="option-group">
                <label class="option-label">
                    <input type="checkbox" name="ans" value="A"> (A) 1
                </label>
                <label class="option-label">
                    <input type="checkbox" name="ans" value="B"> (B) 2
                </label>
                <label class="option-label">
                    <input type="checkbox" name="ans" value="C"> (C) 3
                </label>
                <label class="option-label">
                    <input type="checkbox" name="ans" value="D"> (D) 4
                </label>
                <label class="option-label">
                    <input type="checkbox" name="ans" value="E"> (E) 5
                </label>
            </div>
            <button type="button" class="btn btn-check" onclick="checkAnswer()">é€å‡ºç­”æ¡ˆ</button>
            <button type="button" class="btn btn-reset" onclick="resetAll()">é‡ç½®é¡Œç›®</button>
        </form>

        <div id="quizResult" class="feedback"></div>
    </div>

    <!-- é¸é …è§£æå€ -->
    <div class="section-card">
        <h3>ğŸ” é¸é …é€ä¸€è§£æ</h3>
        <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•æŸ¥çœ‹æ¯å€‹é¸é …çš„è©³ç´°èªªæ˜ï¼š</p>
        <div>
            <button class="analysis-btn" onclick="showAnalysis('A')">(A) 1</button>
            <button class="analysis-btn" onclick="showAnalysis('B')">(B) 2</button>
            <button class="analysis-btn" onclick="showAnalysis('C')">(C) 3</button>
            <button class="analysis-btn" onclick="showAnalysis('D')">(D) 4</button>
            <button class="analysis-btn" onclick="showAnalysis('E')">(E) 5</button>
        </div>
        <div id="analysisText" class="analysis-content">è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•...</div>
    </div>

    <!-- è€ƒè©¦é™·é˜±å¡ -->
    <div class="section-card">
        <h3>ğŸ’£ è€ƒè©¦å¸¸è¦‹é™·é˜± (é»æ“Šå¡ç‰‡æ¨™è¨˜ç‚ºã€Œæˆ‘æ‡‚äº†ã€)</h3>
        <div class="trap-card" onclick="this.classList.add('trap-done')">
            <h4>é™·é˜± 1ï¼šç¯€é»æ•¸ â‰  é«˜åº¦</h4>
            <p>å¾ˆå¤šåŒå­¸çœ‹åˆ°ã€Œ4å€‹ç¯€é»ã€å°±æƒ³é¸ 4ï¼Œé€™æ˜¯éŒ¯çš„ï¼é«˜åº¦æ˜¯ã€Œå±¤æ•¸ã€ï¼Œä¸æ˜¯é»çš„æ•¸é‡ã€‚</p>
        </div>
        <div class="trap-card" onclick="this.classList.add('trap-done')">
            <h4>é™·é˜± 2ï¼šå¿˜è¨˜é«˜åº¦å®šç¾©</h4>
            <p>æœ¬é¡Œå®šç¾©æ ¹ç¯€é»ç®—ç¬¬ 1 å±¤ã€‚å¦‚æœå¾ 0 é–‹å§‹ç®—ï¼Œç­”æ¡ˆæœƒå®Œå…¨ä¸åŒã€‚è€ƒè©¦è¦çœ‹æ¸…æ¥šå®šç¾©ï¼</p>
        </div>
        <div class="trap-card" onclick="this.classList.add('trap-done')">
            <h4>é™·é˜± 3ï¼šè¤‡é¸é¡Œåªé¸ä¸€å€‹</h4>
            <p>é€™é¡Œæœ‰å…©ç¨®å¯èƒ½çš„æ’åˆ—æ–¹å¼ï¼Œåªé¸ (B) æˆ–åªé¸ (C) éƒ½æ˜¯éŒ¯çš„ï¼Œè¦å…¨å°æ‰çµ¦åˆ†ï¼</p>
        </div>
    </div>

    <!-- è‡ªæˆ‘æª¢æ¸¬ -->
    <div class="section-card">
        <h3>ğŸ§  è‡ªæˆ‘æª¢æ¸¬ (æ€è€ƒé¡Œ)</h3>
        
        <details>
            <summary style="cursor: pointer; color: var(--primary-color);"><strong>Q1: ç‚ºä»€éº¼é«˜åº¦ä¸å¯èƒ½æ˜¯ 1ï¼Ÿ</strong> (é»æ“Šçœ‹æç¤º)</summary>
            <p style="padding-left: 20px; color: #555;">æç¤ºï¼šé«˜åº¦ 1 ä»£è¡¨åªæœ‰ 1 å±¤ï¼Œä¹Ÿå°±æ˜¯åªæœ‰æ ¹ç¯€é»ã€‚ä½†æ˜¯æˆ‘å€‘æœ‰ 4 å€‹ç¯€é»ï¼Œä¸€å®šæ”¾ä¸ä¸‹ï¼Œå¿…é ˆå¾€ä¸‹é•·ã€‚</p>
        </details>
        
        <div style="margin-top: 10px;"></div>
        
        <details>
            <summary style="cursor: pointer; color: var(--primary-color);"><strong>Q2: é«˜åº¦æœ€å¤§èˆ‡æœ€å°åˆ†åˆ¥ä»£è¡¨ä»€éº¼æ¨¹å½¢ï¼Ÿ</strong> (é»æ“Šçœ‹æç¤º)</summary>
            <p style="padding-left: 20px; color: #555;">æç¤ºï¼šæœ€å°é«˜åº¦ = æœ€èƒ–ã€æœ€å¹³å‡çš„æ¨¹ï¼›æœ€å¤§é«˜åº¦ = æœ€ç˜¦ã€æœ€ç´°é•·çš„æ¨¹ï¼ˆåƒéˆæ¢ï¼‰ã€‚</p>
        </details>
    </div>

</div>

<script>
    // --- äº’å‹• 1ï¼šæ‹–æ‹‰é…å°é‚è¼¯ ---
    const draggables = document.querySelectorAll('.draggable-item');
    const dropZones = document.querySelectorAll('.drop-zone');
    const dragFeedback = document.getElementById('dragFeedback');

    // æ¡Œé¢ç‰ˆ Drag events
    draggables.forEach(draggable => {
        draggable.addEventListener('dragstart', () => {
            draggable.classList.add('dragging');
        });

        draggable.addEventListener('dragend', () => {
            draggable.classList.remove('dragging');
        });
    });

    dropZones.forEach(zone => {
        zone.addEventListener('dragover', e => {
            e.preventDefault();
            zone.classList.add('drag-over');
        });

        zone.addEventListener('dragleave', () => {
            zone.classList.remove('drag-over');
        });

        zone.addEventListener('drop', e => {
            e.preventDefault();
            zone.classList.remove('drag-over');
            const draggable = document.querySelector('.dragging');
            if(draggable) {
                checkPlacement(draggable, zone);
            }
        });
    });

    // æ‰‹æ©Ÿç‰ˆï¼šé»æ“Šé¸å– -> é»æ“Šæ”¾ç½® (Click-to-Place)
    let selectedItem = null;
    draggables.forEach(item => {
        item.addEventListener('click', () => {
            // æ¸…é™¤ä¹‹å‰çš„é¸å–
            draggables.forEach(d => d.style.borderColor = '#bdc3c7');
            
            if (selectedItem === item) {
                selectedItem = null; // å–æ¶ˆé¸å–
                item.style.borderColor = '#bdc3c7';
            } else {
                selectedItem = item;
                item.style.borderColor = '#e67e22'; // æ©˜è‰²æ¨™ç¤ºé¸ä¸­
            }
        });
    });

    dropZones.forEach(zone => {
        zone.addEventListener('click', () => {
            if (selectedItem) {
                checkPlacement(selectedItem, zone);
                selectedItem.style.borderColor = '#bdc3c7';
                selectedItem = null;
            }
        });
    });

    function checkPlacement(item, zone) {
        const itemHeight = item.getAttribute('data-height');
        const targetHeight = zone.getAttribute('data-target');

        zone.appendChild(item); // ç§»å‹•å…ƒç´ 

        // æª¢æŸ¥é‚è¼¯
        if (itemHeight === targetHeight) {
            dragFeedback.className = "feedback success";
            if(targetHeight === '4') {
                dragFeedback.innerHTML = `<strong>æ”¾ç½®æ­£ç¢ºï¼</strong><br>ä¸éè¦æ³¨æ„ï¼šé›–ç„¶é€™å€‹çµæ§‹é«˜åº¦æ˜¯ 4ï¼Œä½†åœ¨æœ¬é¡Œçš„è€ƒè©¦å®šç¾©ä¸­ï¼Œé€™å€‹é¸é …è¢«æ’é™¤ (D âŒ)ã€‚`;
            } else {
                dragFeedback.innerHTML = `<strong>å®Œå…¨æ­£ç¢ºï¼</strong><br>é€™å°±æ˜¯é«˜åº¦ç‚º ${targetHeight} çš„æƒ…æ³ã€‚`;
            }
        } else {
            dragFeedback.className = "feedback error";
            dragFeedback.innerHTML = `<strong>ä½ç½®ä¸å¤ªå°å–”ï¼</strong><br>å†æƒ³ä¸€ä¸‹ï¼Œé€™å€‹å½¢ç‹€æ‡‰è©²æœ‰å¹¾å±¤ï¼Ÿ`;
        }
    }


    // --- äº’å‹• 2ï¼šè¤‡é¸é¡Œæª¢æŸ¥é‚è¼¯ ---
    function checkAnswer() {
        const checkboxes = document.querySelectorAll('input[name="ans"]:checked');
        const userAnswers = Array.from(checkboxes).map(cb => cb.value).sort();
        const resultDiv = document.getElementById('quizResult');
        
        // æ­£ç¢ºç­”æ¡ˆ (B)(C)
        const correctAnswers = ['B', 'C'];
        
        // åˆ¤æ–·æ˜¯å¦å®Œå…¨å»åˆ
        const isCorrect = JSON.stringify(userAnswers) === JSON.stringify(correctAnswers);

        if (userAnswers.length === 0) {
            resultDiv.className = "feedback error";
            resultDiv.innerHTML = "âŒ ä½ é‚„æ²’å‹¾é¸ä»»ä½•ç­”æ¡ˆå–”ï¼";
            return;
        }

        if (isCorrect) {
            resultDiv.className = "feedback success";
            resultDiv.innerHTML = `
                <h3>ğŸ‰ æ­å–œç­”å°ï¼å®Œå…¨æ­£ç¢ºï¼</h3>
                <p>æ­£ç¢ºç­”æ¡ˆå°±æ˜¯ <strong>(B) 2</strong> å’Œ <strong>(C) 3</strong>ã€‚</p>
                <p>è§€å¿µæ­£ç¢ºï¼š4å€‹ç¯€é»çš„äºŒå…ƒæ¨¹ï¼Œé«˜åº¦ç¯„åœé€šå¸¸è½åœ¨ 2 åˆ° 3 ä¹‹é–“ï¼ˆè¦–æ’åˆ—çš„å¹³å‡ç¨‹åº¦è€Œå®šï¼‰ã€‚</p>
            `;
        } else {
            // åˆ†æéŒ¯èª¤é¡å‹
            let msg = "<h3>âŒ ç­”æ¡ˆä¸å®Œæ•´æˆ–æœ‰èª¤</h3>";
            
            // æª¢æŸ¥æ˜¯å¦é¸äº† A, D, E
            if (userAnswers.includes('A')) msg += "<p>â€¢ (A) 1 æ˜¯ä¸å¯èƒ½çš„ï¼Œ4 å€‹ç¯€é»æ²’è¾¦æ³•å…¨éƒ¨æ“ åœ¨ç¬¬ 1 å±¤ã€‚</p>";
            if (userAnswers.includes('D')) msg += "<p>â€¢ (D) 4 é›–ç„¶æ˜¯éˆç‹€çµæ§‹çš„é«˜åº¦ï¼Œä½†åœ¨æœ¬é¡Œå®šç¾©æˆ–è€ƒè©¦ç¯„åœä¸­ä¸åˆ—å…¥é¸é … (è©³è¦‹é¡Œç›®èªªæ˜)ã€‚</p>";
            if (userAnswers.includes('E')) msg += "<p>â€¢ (E) 5 å¤ªèª‡å¼µå›‰ï¼4 å€‹ç¯€é»æœ€å¤šæ’æˆä¸€ç›´ç·šä¹Ÿæ‰ 4 å±¤ã€‚</p>";
            
            // æª¢æŸ¥æ˜¯å¦æ¼é¸
            if ((!userAnswers.includes('B') || !userAnswers.includes('C')) && !userAnswers.includes('A') && !userAnswers.includes('D') && !userAnswers.includes('E')) {
                 msg += "<p>âš ï¸ é€™æ˜¯è¤‡é¸é¡Œå–”ï¼ä½ å¯èƒ½å°‘é¸äº†ä¸€å€‹å¯èƒ½çš„ç‹€æ³ã€‚</p>";
            }

            msg += "<p>ğŸ’¡ è«‹é‡æ–°æ€è€ƒï¼šæ’åˆ—æœ€å¹³å‡(çŸ®)èˆ‡æœ€ç´°é•·(é«˜)çš„æƒ…æ³ã€‚</p>";
            
            resultDiv.className = "feedback error";
            resultDiv.innerHTML = msg;
        }
    }


    // --- äº’å‹• 3ï¼šé¸é …è©³ç´°è§£æ ---
    function showAnalysis(option) {
        const display = document.getElementById('analysisText');
        let content = "";
        let isPossible = false;

        switch(option) {
            case 'A':
                content = "<strong>(A) 1ï¼šä¸å¯èƒ½</strong><br>åŸå› ï¼šé«˜åº¦ 1 ä»£è¡¨åªæœ‰æ ¹ç¯€é» 1 å±¤ã€‚ä½†æˆ‘å€‘æœ‰ 4 å€‹è³‡æ–™é»ï¼Œä¸€å®šéœ€è¦å¾€ä¸‹é•·å‡ºå­ç¯€é»ã€‚";
                break;
            case 'B':
                content = "<span class='correct-answer-highlight'>(B) 2ï¼šå¯èƒ½ (æ­£ç¢ºé¸é …)</span><br>åŸå› ï¼šé€™æ˜¯ã€Œæ¬¡å¹³å‡ã€çš„æƒ…æ³ã€‚è‹¥æ ¹ç¯€é»åœ¨ç¬¬1å±¤ï¼Œç¬¬2å±¤å¯ä»¥æ”¾å­ç¯€é»ï¼Œé›–ç„¶æœ‰äº›å®šç¾©ä¸‹æ»¿äºŒå…ƒæ¨¹é«˜åº¦2åªèƒ½æ”¾3å€‹ç¯€é»ï¼Œä½†åœ¨æœ¬é¡Œçš„è€ƒè©¦å¯¬é¬†å®šç¾©ä¸‹ï¼Œé€™æ˜¯å¯é¸çš„ç­”æ¡ˆã€‚";
                isPossible = true;
                break;
            case 'C':
                content = "<span class='correct-answer-highlight'>(C) 3ï¼šå¯èƒ½ (æ­£ç¢ºé¸é …)</span><br>åŸå› ï¼šé€™æ˜¯æœ€å¸¸è¦‹çš„æƒ…æ³ã€‚æ ¹ç¯€é»(1) -> ç¬¬äºŒå±¤(2) -> ç¬¬ä¸‰å±¤(1)ã€‚æˆ–æ˜¯ç¨å¾®ä¸å¹³è¡¡çš„æ’åˆ—ï¼Œéƒ½æœƒè½åœ¨é«˜åº¦ 3ã€‚";
                isPossible = true;
                break;
            case 'D':
                content = "<strong>(D) 4ï¼šä¸é¸</strong><br>åŸå› ï¼šé›–ç„¶è‹¥æ’æˆä¸€ç›´ç·šï¼ˆéˆç‹€ï¼‰ï¼Œé«˜åº¦ç¢ºå¯¦æ˜¯ 4ã€‚ä½†é¡Œç›®è¦æ±‚ã€ŒäºŒå…ƒæ¨¹é€£æ¥åœ–ã€ä¸”ä¾æ“šæ­£ç¢ºç­”æ¡ˆ (B)(C) æ¨æ–·ï¼Œæ­¤é¸é …è¢«è¦–ç‚ºè¶…å‡ºå®šç¾©æˆ–æ¥µç«¯æƒ…æ³è€Œä¸é¸ã€‚";
                break;
            case 'E':
                content = "<strong>(E) 5ï¼šä¸å¯èƒ½</strong><br>åŸå› ï¼šåªæœ‰ 4 å€‹ç¯€é»ï¼Œå°±ç®—æ¯ä¸€å€‹ç¯€é»éƒ½å–®ç¨ä¸€å±¤ï¼Œæœ€å¤šä¹Ÿåªæœ‰ 4 å±¤ï¼Œä¸å¯èƒ½è®Šå‡ºç¬¬ 5 å±¤ã€‚";
                break;
        }

        display.innerHTML = content;
        display.style.display = 'block';
        display.style.borderLeft = isPossible ? "5px solid var(--success-color)" : "5px solid var(--error-color)";
    }


    // --- å…¨å±€é‡ç½®åŠŸèƒ½ ---
    function resetAll() {
        // é‡ç½® Checkbox
        document.querySelectorAll('input[name="ans"]').forEach(cb => cb.checked = false);
        
        // é‡ç½®å›é¥‹è¨Šæ¯
        document.getElementById('quizResult').style.display = 'none';
        document.getElementById('dragFeedback').style.display = 'none';
        document.getElementById('analysisText').style.display = 'none';
        
        // é‡ç½®é™·é˜±å¡
        document.querySelectorAll('.trap-card').forEach(card => card.classList.remove('trap-done'));
        
        // é‡ç½®æ‹–æ‹‰é …ç›®ä½ç½® (ç°¡å–®åœ°é‡æ–°æ•´ç†é é¢ï¼Œæˆ–æ˜¯æ‰‹å‹•ç§»å›)
        // ç‚ºæ±‚ç°¡å–®é«”é©—ï¼Œé€™è£¡å°‡å¡ç‰‡ç§»å›åŸä½
        const source = document.getElementById('dragSource');
        source.appendChild(document.getElementById('tree1'));
        source.appendChild(document.getElementById('tree2'));
        source.appendChild(document.getElementById('tree3'));
        
        alert("å·²é‡ç½®æ‰€æœ‰ç·´ç¿’ç‹€æ…‹ï¼");
    }
</script>

</body>
</html>