<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 45ï¼šäºŒé€²ä½é‚è¼¯é‹ç®—è¾¨æ</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        * {
            box-sizing: border-box;
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
        }

        body {
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1, h2, h3 {
            color: var(--primary-color);
        }

        h1 {
            text-align: center;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        .teacher-note {
            background-color: #e8f4fc;
            border-left: 5px solid var(--accent-color);
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 4px;
        }

        .highlight {
            color: var(--error-color);
            font-weight: bold;
        }

        /* è§€å¿µå°ç…§è¡¨ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        .comparison-table th {
            background-color: var(--primary-color);
            color: white;
        }

        .logic-col { background-color: #eafaf1; }
        .arith-col { background-color: #fdedec; }

        /* äº’å‹•å€é€šç”¨æ¨£å¼ */
        .interactive-section {
            border: 2px dashed #bdc3c7;
            padding: 20px;
            margin: 30px 0;
            border-radius: 10px;
            background-color: #fafafa;
        }

        .section-title {
            text-align: center;
            background: var(--primary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 15px;
        }

        /* (A) æ‹–æ”¾éŠæˆ² */
        .drag-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }

        .draggable {
            background: var(--accent-color);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: move;
            user-select: none;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .draggable:active {
            opacity: 0.6;
        }

        .drop-zone {
            width: 45%;
            min-height: 120px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            background: white;
            transition: background 0.3s;
        }

        .drop-zone h4 {
            margin-top: 0;
            pointer-events: none;
        }

        .drop-zone.drag-over {
            background-color: #ecf0f1;
            border-color: var(--accent-color);
        }

        /* (B) è¤‡é¸é¡Œå€ */
        .quiz-box {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .option-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }

        .option-item:hover {
            background-color: #f9f9f9;
        }

        .option-item input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.5);
            cursor: pointer;
        }

        .feedback-msg {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            font-weight: bold;
        }

        .feedback-correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback-wrong {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
            margin: 5px;
        }

        .btn:hover {
            background-color: #34495e;
        }

        .btn-check {
            background-color: var(--success-color);
        }

        .btn-reset {
            background-color: var(--warning-color);
        }

        /* (C) è¿·ä½ æ¸¬è©¦ */
        .mini-test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .test-card {
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            transition: transform 0.2s;
        }

        .test-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .test-card .result {
            display: none;
            color: var(--accent-color);
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 5px;
        }

        /* (E) é™·é˜±å¡ */
        .trap-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .trap-card {
            flex: 1;
            min-width: 200px;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            padding: 15px;
            border-radius: 8px;
            position: relative;
        }

        .trap-title {
            color: #856404;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .close-trap {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            color: #856404;
            font-size: 1.2em;
        }

        /* (F) è‡ªæˆ‘æª¢æ¸¬ */
        .self-check-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .hint-box {
            display: none;
            margin-top: 10px;
            color: var(--accent-color);
            font-style: italic;
        }

        /* è©³ç´°è§£æå€ */
        .analysis-box {
            margin-top: 20px;
            display: none;
        }
        
        .analysis-item {
            margin: 5px 0;
            padding: 8px;
            border-left: 3px solid #ccc;
        }
        
        .analysis-correct-opt {
            border-left-color: var(--success-color);
            background-color: #f0fff4;
        }

        .analysis-wrong-opt {
            border-left-color: var(--error-color);
            background-color: #fff5f5;
        }

        /* é å°¾ */
        footer {
            text-align: center;
            margin-top: 50px;
            font-size: 0.9em;
            color: #7f8c8d;
        }

        @media (max-width: 600px) {
            .drag-container {
                flex-direction: column;
                align-items: center;
            }
            .drop-zone {
                width: 100%;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“ é›»è…¦æ¦‚è«–ï¼šè¤‡é¸é¡Œ 45 å°ˆé¡Œè¬›åº§</h1>

    <!-- è€å¸«çš„é–‹å ´ç™½ -->
    <div class="teacher-note">
        <h3>ğŸ‘‹ åŒå­¸å€‘å¥½ï¼</h3>
        <p>æ­¡è¿ä¾†åˆ°äºŒé€²ä½é‹ç®—çš„é‡é»è¤‡ç¿’ã€‚ä»Šå¤©æˆ‘å€‘è¦æ”»ç ´ä¸€å€‹è€ƒè©¦è¶…å¸¸è€ƒçš„é™·é˜±ï¼š<strong>ã€Œåˆ°åº•å“ªäº›æ˜¯é‚è¼¯é‹ç®—ï¼Ÿå“ªäº›æ˜¯ç®—è¡“é‹ç®—ï¼Ÿã€</strong></p>
        <p>å¾ˆå¤šäººçœ‹åˆ°è‹±æ–‡ä»£è™Ÿå°±æšˆäº†ï¼Œå…¶å¯¦é—œéµåªæœ‰ä¸€å¥è©±ï¼š</p>
        <p style="font-size: 1.1em; text-align: center;">
            <span class="highlight">é‚è¼¯é‹ç®—</span>åªåœ¨ä¹ 0 èˆ‡ 1 çš„é—œä¿‚ï¼›<br>
            <span class="highlight">ç®—è¡“é‹ç®—</span>å°±æ˜¯åœ¨ç®—åœ‹å°æ•¸å­¸ï¼ˆåŠ æ¸›ä¹˜é™¤ï¼‰ã€‚
        </p>
    </div>

    <!-- æ ¸å¿ƒè§€å¿µå€ -->
    <section id="concept">
        <h2>ğŸ“š æ ¸å¿ƒè§€å¿µé€Ÿè¨˜</h2>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>é‹ç®—é¡å‹</th>
                    <th>é—œéµå­— (Keyword)</th>
                    <th>åŠŸèƒ½èªªæ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr class="logic-col">
                    <td rowspan="3"><strong>é‚è¼¯é‹ç®—<br>(Logic)</strong><br><small>åˆ¤æ–· 0/1 é—œä¿‚</small></td>
                    <td><strong>AND</strong> (ä¸”)</td>
                    <td>å…©å€‹éƒ½æ˜¯ 1 æ‰æ˜¯ 1</td>
                </tr>
                <tr class="logic-col">
                    <td><strong>OR</strong> (æˆ–)</td>
                    <td>åªè¦æœ‰ä¸€å€‹ 1 å°±æ˜¯ 1</td>
                </tr>
                <tr class="logic-col">
                    <td><strong>XOR</strong> (äº’æ–¥æˆ–)</td>
                    <td>å…©å€‹ä¸åŒæ‰æ˜¯ 1</td>
                </tr>
                <tr class="arith-col">
                    <td rowspan="2"><strong>ç®—è¡“é‹ç®—<br>(Arithmetic)</strong><br><small>æ•¸å€¼è¨ˆç®—</small></td>
                    <td><strong>DIV</strong> (é™¤æ³•)</td>
                    <td>ä¸€èˆ¬çš„é™¤æ³•é‹ç®—</td>
                </tr>
                <tr class="arith-col">
                    <td><strong>MOD</strong> (é¤˜æ•¸)</td>
                    <td>å–é™¤æ³•å¾Œçš„é¤˜æ•¸</td>
                </tr>
            </tbody>
        </table>
        <p style="text-align: center; font-weight: bold; color: var(--accent-color);">
            ğŸ‘‰ å£è¨£ï¼šAND/OR/XOR æ˜¯é‚è¼¯ï¼ŒDIV/MOD æ˜¯æ•¸å­¸ï¼
        </p>
    </section>

    <!-- äº’å‹•ä¸€ï¼šæ‹–æ”¾åˆ†é¡ -->
    <div class="interactive-section">
        <div style="text-align: center;"><span class="section-title">ä»»å‹™ 1ï¼šåˆ†é¡å¤§ä½œæˆ°</span></div>
        <p style="text-align: center;">è«‹å°‡ä¸Šæ–¹çš„é‹ç®—å¡ç‰‡ï¼Œæ‹–æ‹‰åˆ°ä¸‹æ–¹æ­£ç¢ºçš„ç±ƒå­è£¡ï¼</p>
        
        <div class="drag-container" id="source-container">
            <!-- å¡ç‰‡ -->
            <div class="draggable" draggable="true" id="card-xor" data-type="logic">XOR</div>
            <div class="draggable" draggable="true" id="card-and" data-type="logic">AND</div>
            <div class="draggable" draggable="true" id="card-div" data-type="arithmetic">DIV</div>
            <div class="draggable" draggable="true" id="card-or" data-type="logic">OR</div>
            <div class="draggable" draggable="true" id="card-mod" data-type="arithmetic">MOD</div>
        </div>

        <div class="drag-container">
            <div class="drop-zone" id="zone-logic" data-accept="logic">
                <h4>ğŸ§  äºŒé€²ä½é‚è¼¯é‹ç®—</h4>
                <small>(åˆ¤æ–·é—œä¿‚)</small>
            </div>
            <div class="drop-zone" id="zone-arithmetic" data-accept="arithmetic">
                <h4>â— éé‚è¼¯ (ç®—è¡“) é‹ç®—</h4>
                <small>(æ•¸å­¸è¨ˆç®—)</small>
            </div>
        </div>
        
        <div style="text-align: center;">
            <button class="btn btn-check" onclick="checkDragGame()">æª¢æŸ¥åˆ†é¡</button>
            <p id="drag-feedback" class="feedback-msg"></p>
        </div>
    </div>

    <!-- äº’å‹•äºŒï¼šé‚è¼¯å°æ¸¬è©¦ -->
    <div class="interactive-section">
        <div style="text-align: center;"><span class="section-title">ä»»å‹™ 2ï¼šé‚è¼¯é‹ç®—çµæœå°æ¸¬è©¦</span></div>
        <p>é»æ“Šä¸‹æ–¹å¡ç‰‡ï¼Œçœ‹çœ‹é‚è¼¯é‹ç®—å¦‚ä½•åªé‡å° 0 (å‡) èˆ‡ 1 (çœŸ) åšåˆ¤æ–·ï¼š</p>
        <div class="mini-test-grid">
            <div class="test-card" onclick="toggleResult(this)">
                <div>1 AND 0</div>
                <div class="result">0 (å‡)</div>
            </div>
            <div class="test-card" onclick="toggleResult(this)">
                <div>1 OR 0</div>
                <div class="result">1 (çœŸ)</div>
            </div>
            <div class="test-card" onclick="toggleResult(this)">
                <div>1 XOR 0</div>
                <div class="result">1 (çœŸ)</div>
            </div>
            <div class="test-card" onclick="toggleResult(this)">
                <div>1 XOR 1</div>
                <div class="result">0 (å‡)</div>
            </div>
        </div>
    </div>

    <!-- äº’å‹•ä¸‰ï¼šä¸»è¦é¡Œç›® -->
    <div class="interactive-section" id="quiz-section">
        <div style="text-align: center;"><span class="section-title">ä»»å‹™ 3ï¼šè§£é¡ŒæŒ‘æˆ°</span></div>
        
        <div class="quiz-box">
            <p style="color: #666;">é¡Œè™Ÿï¼šè¤‡é¸é¡Œ 45</p>
            <div class="question-text">ä¸‹åˆ—ä½•è€… <span class="highlight">ä¸æ˜¯</span> äºŒé€²ä½ç³»çµ±çš„é‚è¼¯é‹ç®—ï¼Ÿ</div>
            <p style="font-size: 0.9em; color: var(--accent-color);">ï¼ˆğŸ“¢ æç¤ºï¼šæœ¬é¡Œç‚ºè¤‡é¸é¡Œï¼Œè«‹é¸å‡ºæ‰€æœ‰æ­£ç¢ºç­”æ¡ˆï¼‰</p>

            <ul class="options-list">
                <li class="option-item"><label><input type="checkbox" name="q45" value="A"> (A) XOR (äº’æ–¥æˆ–)</label></li>
                <li class="option-item"><label><input type="checkbox" name="q45" value="B"> (B) AND (ä¸”)</label></li>
                <li class="option-item"><label><input type="checkbox" name="q45" value="C"> (C) DIV (é™¤æ³•)</label></li>
                <li class="option-item"><label><input type="checkbox" name="q45" value="D"> (D) OR (æˆ–)</label></li>
                <li class="option-item"><label><input type="checkbox" name="q45" value="E"> (E) MOD (å–é¤˜æ•¸)</label></li>
            </ul>

            <button class="btn btn-check" onclick="submitQuiz()">é€å‡ºç­”æ¡ˆ</button>
            <button class="btn btn-reset" onclick="resetAll()">å…¨éƒ¨é‡ç½®</button>

            <div id="quiz-feedback" class="feedback-msg"></div>

            <!-- è©³ç´°è§£æ (ç­”å°å¾Œé¡¯ç¤º) -->
            <div id="analysis-section" class="analysis-box">
                <h3>ğŸ” é¸é …é€ä¸€è§£æ</h3>
                <div class="analysis-item analysis-wrong-opt">
                    <strong>(A) XOR</strong>ï¼šâŒ é€™æ˜¯é‚è¼¯é‹ç®—ã€‚åˆ¤æ–·å…©å€‹ä½å…ƒæ˜¯å¦ã€Œä¸åŒã€ã€‚
                </div>
                <div class="analysis-item analysis-wrong-opt">
                    <strong>(B) AND</strong>ï¼šâŒ é€™æ˜¯é‚è¼¯é‹ç®—ã€‚åˆ¤æ–·å…©å€‹ä½å…ƒæ˜¯å¦ã€ŒåŒæ™‚ç‚º 1ã€ã€‚
                </div>
                <div class="analysis-item analysis-correct-opt">
                    <strong>(C) DIV</strong>ï¼šâœ… <strong>æ­£ç¢ºç­”æ¡ˆï¼</strong> é€™æ˜¯é™¤æ³•ï¼ˆDivisionï¼‰ï¼Œå±¬æ–¼ç®—è¡“é‹ç®—ã€‚
                </div>
                <div class="analysis-item analysis-wrong-opt">
                    <strong>(D) OR</strong>ï¼šâŒ é€™æ˜¯é‚è¼¯é‹ç®—ã€‚åˆ¤æ–·å…©å€‹ä½å…ƒæ˜¯å¦ã€Œè‡³å°‘æœ‰ä¸€å€‹ 1ã€ã€‚
                </div>
                <div class="analysis-item analysis-correct-opt">
                    <strong>(E) MOD</strong>ï¼šâœ… <strong>æ­£ç¢ºç­”æ¡ˆï¼</strong> é€™æ˜¯å–é¤˜æ•¸ï¼ˆModuloï¼‰ï¼Œå±¬æ–¼ç®—è¡“é‹ç®—ã€‚
                </div>
            </div>
        </div>
    </div>

    <!-- é™·é˜±å¡å€ -->
    <section id="traps">
        <h3>âš ï¸ è€ƒè©¦å¸¸è¦‹é™·é˜± (é»æ“Šé—œé–‰)</h3>
        <div class="trap-container">
            <div class="trap-card" onclick="this.style.opacity='0'; setTimeout(()=>this.style.display='none', 300);">
                <span class="close-trap">Ã—</span>
                <div class="trap-title">é™·é˜± 1ï¼šçœ‹åˆ°è‹±æ–‡å°±é¸ï¼Ÿ</div>
                <p>ä¸è¦çœ‹åˆ°å…¨å¤§å¯«è‹±æ–‡å°±ä»¥ç‚ºæ˜¯é‚è¼¯ï¼DIV å’Œ MOD ä¹Ÿæ˜¯è‹±æ–‡ï¼Œä½†å®ƒå€‘æ˜¯ç®—è¡“ã€‚</p>
                <button class="btn" style="font-size:0.8em; padding:5px;">æˆ‘æ‡‚äº†</button>
            </div>
            <div class="trap-card" onclick="this.style.opacity='0'; setTimeout(()=>this.style.display='none', 300);">
                <span class="close-trap">Ã—</span>
                <div class="trap-title">é™·é˜± 2ï¼šMOD æ˜¯ä»€éº¼ï¼Ÿ</div>
                <p>å¾ˆå¤šåŒå­¸æŠŠ MOD ç•¶æˆé‚è¼¯ã€Œæ¨¡å¼ã€ã€‚éŒ¯ï¼å®ƒæ˜¯ Modulo (é¤˜æ•¸) çš„ç¸®å¯«ï¼Œæ˜¯æ•¸å­¸é‹ç®—ï¼</p>
                <button class="btn" style="font-size:0.8em; padding:5px;">æˆ‘æ‡‚äº†</button>
            </div>
            <div class="trap-card" onclick="this.style.opacity='0'; setTimeout(()=>this.style.display='none', 300);">
                <span class="close-trap">Ã—</span>
                <div class="trap-title">é™·é˜± 3ï¼šé¡Œç›®å•ã€Œä¸æ˜¯ã€</div>
                <p>é¡Œç›®æœ‰ã€Œä¸æ˜¯ã€å…©å€‹å­—è¦åœˆèµ·ä¾†ï¼é€™é¡Œè¦é¸çš„æ˜¯ã€Œç®—è¡“é‹ç®—ã€ã€‚</p>
                <button class="btn" style="font-size:0.8em; padding:5px;">æˆ‘æ‡‚äº†</button>
            </div>
        </div>
    </section>

    <!-- è‡ªæˆ‘æª¢æ¸¬ -->
    <section id="self-check" style="margin-top: 30px;">
        <h3>ğŸ§ èª²å¾Œè‡ªæˆ‘æª¢æ¸¬</h3>
        
        <div class="self-check-item">
            <p><strong>Q1: ç‚ºä»€éº¼ DIVã€MOD ä¸èƒ½ç®—é‚è¼¯é‹ç®—ï¼Ÿ</strong></p>
            <button class="btn" style="font-size: 0.8em;" onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
            <div id="hint1" class="hint-box">æç¤ºï¼šé‚è¼¯é‹ç®—åªçœ‹ 0 å’Œ 1 çš„é—œä¿‚ï¼ˆçœŸ/å‡ï¼‰ï¼Œä½† DIV å’Œ MOD æœƒç®—å‡ºå…·é«”çš„æ•¸å€¼ï¼ˆä¾‹å¦‚é¤˜æ•¸æ˜¯ 3ï¼‰ï¼Œæ¶‰åŠæ•¸å€¼å¤§å°è¨ˆç®—å°±æ˜¯ç®—è¡“ã€‚</div>
        </div>

        <div class="self-check-item">
            <p><strong>Q2: è€ƒè©¦ä¸­çœ‹åˆ°ã€Œé‚è¼¯ã€å…©å€‹å­—ï¼Œç¬¬ä¸€æ™‚é–“è©²æƒ³åˆ°ä»€éº¼ï¼Ÿ</strong></p>
            <button class="btn" style="font-size: 0.8em;" onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
            <div id="hint2" class="hint-box">æç¤ºï¼šæƒ³åˆ° ANDã€ORã€XORã€NOTï¼Œé‚„æœ‰ã€Œ0 èˆ‡ 1 çš„åˆ¤æ–·ã€ã€‚</div>
        </div>
    </section>

    <footer>
        <p>Copyright Â© 2024 é›»è…¦æ¦‚è«–è£œæ•™åå¸«åœ˜éšŠ | å°ˆç‚ºé«˜ä¸­ç”Ÿæ‰“é€ çš„äº’å‹•è¬›ç¾©</p>
    </footer>

</div>

<script>
    /* ========== å…¨åŸŸè®Šæ•¸ ========== */
    const draggables = document.querySelectorAll('.draggable');
    const dropZones = document.querySelectorAll('.drop-zone');
    const sourceContainer = document.getElementById('source-container');

    /* ========== 1. æ‹–æ”¾éŠæˆ²é‚è¼¯ (Drag and Drop) ========== */
    
    draggables.forEach(draggable => {
        draggable.addEventListener('dragstart', () => {
            draggable.classList.add('dragging');
        });

        draggable.addEventListener('dragend', () => {
            draggable.classList.remove('dragging');
        });
    });

    dropZones.forEach(zone => {
        zone.addEventListener('dragover', e => {
            e.preventDefault(); // å…è¨±æ”¾ç½®
            zone.classList.add('drag-over');
            const draggable = document.querySelector('.dragging');
            zone.appendChild(draggable);
        });

        zone.addEventListener('dragleave', () => {
            zone.classList.remove('drag-over');
        });
        
        zone.addEventListener('drop', () => {
            zone.classList.remove('drag-over');
        });
    });

    // å…è¨±æ‹–å›åŸè™•
    sourceContainer.addEventListener('dragover', e => {
        e.preventDefault();
        const draggable = document.querySelector('.dragging');
        sourceContainer.appendChild(draggable);
    });

    function checkDragGame() {
        const logicZone = document.getElementById('zone-logic');
        const arithZone = document.getElementById('zone-arithmetic');
        const feedback = document.getElementById('drag-feedback');
        
        // å–å¾—å„å€åŸŸå…§çš„å¡ç‰‡
        const logicCards = Array.from(logicZone.querySelectorAll('.draggable'));
        const arithCards = Array.from(arithZone.querySelectorAll('.draggable'));
        
        // æª¢æŸ¥æ˜¯å¦æœ‰æœªåˆ†é¡çš„
        const remaining = sourceContainer.querySelectorAll('.draggable').length;
        if (remaining > 0) {
            feedback.className = 'feedback-msg feedback-wrong';
            feedback.style.display = 'block';
            feedback.innerHTML = 'âš ï¸ é‚„æœ‰å¡ç‰‡æ²’åˆ†é¡å®Œå–”ï¼è«‹å°‡æ‰€æœ‰å¡ç‰‡æ‹–å…¥ç±ƒå­ã€‚';
            return;
        }

        let errors = [];

        // æª¢æŸ¥é‚è¼¯å€
        logicCards.forEach(card => {
            if (card.dataset.type !== 'logic') {
                errors.push(`âŒ ${card.innerText} æ˜¯ç®—è¡“é‹ç®—ï¼Œè·‘éŒ¯æ£šå›‰ï¼`);
            }
        });

        // æª¢æŸ¥ç®—è¡“å€
        arithCards.forEach(card => {
            if (card.dataset.type !== 'arithmetic') {
                errors.push(`âŒ ${card.innerText} æ˜¯é‚è¼¯é‹ç®—ï¼Œå®ƒä¸å±¬æ–¼é€™è£¡ï¼`);
            }
        });

        if (errors.length === 0) {
            feedback.className = 'feedback-msg feedback-correct';
            feedback.style.display = 'block';
            feedback.innerHTML = 'ğŸ‰ å¤ªæ£’äº†ï¼åˆ†é¡å®Œå…¨æ­£ç¢ºï¼è§€å¿µå¾ˆæ¸…æ¥šå–”ï¼';
        } else {
            feedback.className = 'feedback-msg feedback-wrong';
            feedback.style.display = 'block';
            feedback.innerHTML = errors.join('<br>');
        }
    }

    /* ========== 2. è¿·ä½ æ¸¬è©¦é‚è¼¯ (Mini Test) ========== */
    function toggleResult(element) {
        const resultDiv = element.querySelector('.result');
        if (resultDiv.style.display === 'block') {
            resultDiv.style.display = 'none';
        } else {
            resultDiv.style.display = 'block';
        }
    }

    /* ========== 3. è¤‡é¸é¡Œä½œç­”é‚è¼¯ (Quiz) ========== */
    function submitQuiz() {
        const checkboxes = document.querySelectorAll('input[name="q45"]:checked');
        const feedback = document.getElementById('quiz-feedback');
        const analysis = document.getElementById('analysis-section');
        
        let selectedValues = [];
        checkboxes.forEach((checkbox) => {
            selectedValues.push(checkbox.value);
        });

        // æ’åºä»¥ä¾¿æ¯”è¼ƒ
        selectedValues.sort();
        const correctAnswers = ['C', 'E'];
        
        // æ¯”å°ç­”æ¡ˆ
        const isCorrect = JSON.stringify(selectedValues) === JSON.stringify(correctAnswers);

        feedback.style.display = 'block';
        
        if (isCorrect) {
            feedback.className = 'feedback-msg feedback-correct';
            feedback.innerHTML = 'âœ¨ æ­å–œç­”å°ï¼å®Œå…¨æ­£ç¢ºï¼<br>ä½ å·²ç¶“æŒæ¡äº†ã€Œç®—è¡“ã€èˆ‡ã€Œé‚è¼¯ã€çš„å€åˆ¥ã€‚';
            analysis.style.display = 'block'; // é¡¯ç¤ºè§£æ
            // è‡ªå‹•æ²å‹•åˆ°è§£æå€
            setTimeout(() => {
                 analysis.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        } else {
            feedback.className = 'feedback-msg feedback-wrong';
            
            // æ ¹æ“šéŒ¯èª¤çµ¦äºˆæç¤º
            if (selectedValues.length === 0) {
                feedback.innerHTML = 'âš ï¸ ä½ é‚„æ²’é¸æ“‡ä»»ä½•é¸é …å–”ï¼';
                return;
            }
            
            let msg = 'âŒ ç­”æ¡ˆä¸å°å–”ï¼<br>';
            
            // æª¢æŸ¥æ˜¯å¦é¸åˆ°äº†é‚è¼¯é‹ç®— (A, B, D)
            if (selectedValues.includes('A') || selectedValues.includes('B') || selectedValues.includes('D')) {
                msg += 'ğŸ‘‰ ä½ é¸åˆ°äº† XORã€AND æˆ– ORï¼Œé€™äº›æ˜¯ã€Œé‚è¼¯é‹ç®—ã€ã€‚é¡Œç›®å•çš„æ˜¯ã€Œä¸æ˜¯ã€å–”ï¼<br>';
            }
            
            // æª¢æŸ¥æ˜¯å¦æ¼é¸
            if ((selectedValues.includes('C') && !selectedValues.includes('E')) || (!selectedValues.includes('C') && selectedValues.includes('E'))) {
                msg += 'ğŸ‘‰ ä½ åªé¸å°äº†ä¸€åŠï¼Œé€™é¡Œæ˜¯è¤‡é¸é¡Œï¼Œé‚„æœ‰å¦ä¸€å€‹ä¹Ÿæ˜¯ç®—è¡“é‹ç®—ï¼<br>';
            }
            
            msg += '<br>å†è©¦ä¸€æ¬¡çœ‹çœ‹ï¼';
            feedback.innerHTML = msg;
            analysis.style.display = 'none'; // ç­”éŒ¯å…ˆä¸é¡¯ç¤ºè§£æ
        }
    }

    /* ========== 4. è‡ªæˆ‘æª¢æ¸¬èˆ‡é‡ç½® (Utils) ========== */
    function toggleHint(id) {
        const hint = document.getElementById(id);
        if (hint.style.display === 'block') {
            hint.style.display = 'none';
        } else {
            hint.style.display = 'block';
        }
    }

    function resetAll() {
        // é‡ç½®æ‹–æ”¾
        const cards = document.querySelectorAll('.draggable');
        cards.forEach(card => sourceContainer.appendChild(card));
        document.getElementById('drag-feedback').style.display = 'none';

        // é‡ç½®é¡Œç›®
        const checkboxes = document.querySelectorAll('input[name="q45"]');
        checkboxes.forEach(cb => cb.checked = false);
        document.getElementById('quiz-feedback').style.display = 'none';
        document.getElementById('analysis-section').style.display = 'none';
        
        // é‡ç½®é™·é˜±å¡ (å¦‚æœè¢«é—œæ‰çš„è©±)
        const traps = document.querySelectorAll('.trap-card');
        traps.forEach(trap => {
            trap.style.display = 'block';
            trap.style.opacity = '1';
        });

        // é‡ç½®æç¤º
        const hints = document.querySelectorAll('.hint-box');
        hints.forEach(hint => hint.style.display = 'none');
        
        // é‡ç½®å°æ¸¬è©¦
        const testResults = document.querySelectorAll('.test-card .result');
        testResults.forEach(res => res.style.display = 'none');

        alert('ğŸ”„ é é¢å·²é‡ç½®ï¼Œè«‹é‡æ–°æŒ‘æˆ°ï¼');
    }
</script>

</body>
</html>