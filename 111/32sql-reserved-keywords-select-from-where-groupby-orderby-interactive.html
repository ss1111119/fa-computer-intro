<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¤‡é¸é¡Œ 32ï¼šSQL ä¿ç•™é—œéµå­—äº’å‹•æ•™å­¸</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        :root {
            --primary-color: #2c3e50; /* æ·±è—è‰²ï¼Œå°ˆæ¥­æ„Ÿ */
            --accent-color: #e74c3c; /* ç´…è‰²ï¼Œé‡é»å¼·èª¿ */
            --success-color: #27ae60; /* ç¶ è‰²ï¼Œæ­£ç¢º */
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --border-radius: 8px;
        }

        body {
            font-family: "Microsoft JhengHei", "PingFang TC", sans-serif;
            background-color: var(--bg-color);
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* --- æ¨™é¡Œå€ --- */
        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 1.1em;
            color: #666;
        }

        /* --- é€šç”¨å¡ç‰‡æ¨£å¼ --- */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary-color);
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }

        /* --- é‡é»å¼·èª¿ --- */
        .highlight {
            color: var(--accent-color);
            font-weight: bold;
            background-color: #fff3cd;
            padding: 2px 5px;
            border-radius: 4px;
        }

        .term {
            font-weight: bold;
            color: #2980b9;
        }

        /* --- äº’å‹•å€ï¼šSQL æ‹¼åœ– --- */
        .sql-builder-area {
            background-color: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: var(--border-radius);
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .drop-zone {
            display: inline-block;
            width: 120px;
            height: 30px;
            background-color: #3e4451;
            border: 2px dashed #5c6370;
            border-radius: 4px;
            vertical-align: middle;
            text-align: center;
            line-height: 30px;
            color: #fff;
            margin-right: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .drop-zone.filled {
            background-color: var(--success-color);
            border-style: solid;
        }

        .word-bank {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 10px;
        }

        .draggable {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: grab;
            user-select: none;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .draggable:active {
            cursor: grabbing;
        }

        .draggable.used {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #95a5a6;
        }

        #sql-feedback {
            margin-top: 10px;
            font-weight: bold;
            text-align: center;
            height: 24px;
        }

        /* --- äº’å‹•å€ï¼šè¤‡é¸é¡Œ --- */
        .quiz-option {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            transition: background 0.2s;
            cursor: pointer;
        }

        .quiz-option:hover {
            background-color: #f9f9f9;
        }

        .quiz-option label {
            cursor: pointer;
            display: block;
            width: 100%;
        }

        .quiz-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        .quiz-btn:hover {
            opacity: 0.9;
        }

        #quiz-result {
            margin-top: 15px;
            font-weight: bold;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }

        /* --- é—œéµå­—è§£ææŒ‰éˆ• --- */
        .keyword-btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .keyword-btn {
            background-color: #ecf0f1;
            border: 1px solid #bdc3c7;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            color: var(--primary-color);
            transition: all 0.2s;
        }

        .keyword-btn:hover, .keyword-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .explanation-box {
            background-color: #e8f6f3;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid var(--success-color);
            min-height: 40px;
        }

        /* --- é™·é˜±å¡èˆ‡è‡ªæˆ‘æª¢æ¸¬ --- */
        .trap-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .trap-card {
            background-color: #fff0f0;
            border: 1px solid #ffcccc;
            padding: 15px;
            border-radius: 8px;
            position: relative;
        }

        .trap-close {
            display: block;
            width: 100%;
            margin-top: 10px;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px;
            border-radius: 4px;
            cursor: pointer;
        }

        .self-check-item {
            margin-bottom: 15px;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 10px;
        }

        .hint-btn {
            background-color: #f39c12;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .hint-text {
            display: none;
            margin-top: 5px;
            color: #d35400;
            font-style: italic;
        }

        /* --- é‡ç½®æŒ‰éˆ• --- */
        .reset-section {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 40px;
        }

        .reset-btn {
            background-color: #95a5a6;
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 30px;
            cursor: pointer;
        }

        /* --- æ‰‹æ©Ÿç‰ˆé©é… --- */
        @media (max-width: 600px) {
            .sql-builder-area {
                font-size: 0.9em;
            }
            .drop-zone {
                width: 90px;
            }
        }
    </style>
</head>
<body>

<div class="container">

    <header>
        <h1>é›»è…¦æ¦‚è«– - è³‡æ–™åº«å–®å…ƒ</h1>
        <div class="subtitle">è¤‡é¸é¡Œ 32ï¼šSQL ä¿ç•™é—œéµå­—å®Œå…¨æ”»ç•¥</div>
    </header>

    <!-- 1. æ ¸å¿ƒè§€å¿µå€ -->
    <section class="card">
        <h2>ğŸ”¥ è¶…é‡è¦æ ¸å¿ƒè§€å¿µæ•´ç†</h2>
        <p>åœ¨å­¸ç¿’æ­¤é¡Œå‰ï¼Œè«‹å…ˆææ‡‚é€™äº›å°ˆæœ‰åè©ï¼š</p>
        <ul>
            <li><span class="term">SQL</span> (æ“ä½œè³‡æ–™åº«ç”¨çš„æ¨™æº–èªè¨€)ï¼šè·Ÿè³‡æ–™åº«æºé€šçš„å”¯ä¸€èªè¨€ã€‚</li>
            <li><span class="term">ä¿ç•™é—œéµå­—</span> (SQL å·²ç¶“å®šç¾©å¥½ç”¨é€”çš„å­—)ï¼šé€™äº›å­—å°±åƒæ˜¯ç¨‹å¼çš„ã€ŒæŒ‡ä»¤ã€ï¼Œä¸èƒ½éš¨ä¾¿æ‹¿ä¾†ç•¶ä½œæ¬„ä½åç¨±æˆ–è³‡æ–™è¡¨åç¨±ã€‚</li>
            <li><span class="term">æŸ¥è©¢ Query</span> (å‘è³‡æ–™åº«è¦è³‡æ–™)ï¼šæœ€å¸¸è¦‹çš„å‹•ä½œã€‚</li>
            <li><span class="term">å­å¥ Clause</span> (SQL æŒ‡ä»¤çš„çµ„æˆç‰‡æ®µ)ï¼šä¾‹å¦‚ WHERE å­å¥è² è²¬ç¯©é¸ã€‚</li>
        </ul>

        <div style="background-color: #fff8e1; padding: 15px; border-radius: 5px; border: 2px solid #ffcc00; margin-top: 15px;">
            <strong style="font-size: 1.2em; color: #d35400;">ğŸ’¡ è€å¸«çš„è€ƒè©¦å¯†æŠ€ï¼š</strong><br>
            åªè¦æ˜¯ SQL æŒ‡ä»¤æœ¬èº«ç”¨ä¾†ã€Œä¸‹æŒ‡ä»¤ã€çš„å­—ï¼Œå…¨éƒ¨éƒ½æ˜¯ä¿ç•™é—œéµå­—ï¼<br>
            çœ‹åˆ° <strong>SELECT, FROM, WHERE, GROUP BY, ORDER BY</strong> é€™ä¸€çµ„ï¼Œè€ƒè©¦æ™‚å¹¾ä¹éƒ½æ˜¯<span class="highlight">ã€Œå…¨é¸ã€</span>ã€‚
        </div>

        <h3 style="margin-top:20px;">æ¨™æº– SQL æŸ¥è©¢çµæ§‹ç¤ºæ„ï¼š</h3>
        <p>ä¸‹é¢å‡ºç¾çš„æ¯ä¸€å€‹ç²—é«”å­—ï¼Œéƒ½æ˜¯<strong>ä¿ç•™é—œéµå­—</strong>ï¼š</p>
        <div style="font-family: monospace; background: #eee; padding: 15px; border-radius: 5px;">
            <strong>SELECT</strong> æ¬„ä½åç¨± (æˆ‘è¦çœ‹ä»€éº¼è³‡æ–™)<br>
            <strong>FROM</strong> è³‡æ–™è¡¨ä¾†æº (å¾å“ªå¼µè¡¨æ‰¾)<br>
            <strong>WHERE</strong> ç¯©é¸æ¢ä»¶ (åªè¦ç¬¦åˆæ¢ä»¶çš„)<br>
            <strong>GROUP BY</strong> åˆ†çµ„ä¾æ“š (ä¾ç…§ä»€éº¼åˆ†é¡)<br>
            <strong>ORDER BY</strong> æ’åºæ–¹å¼ (ç”±å¤§åˆ°å°æˆ–ç”±å°åˆ°å¤§)
        </div>
    </section>

    <!-- 2. SQL é—œéµå­—çµ„è£äº’å‹• -->
    <section class="card">
        <h2>ğŸ® äº’å‹•ç·´ç¿’ Aï¼šçµ„è£ä½ çš„ SQL æŒ‡ä»¤</h2>
        <p>è«‹å°‡ä¸‹æ–¹çš„é—œéµå­—å¡ç‰‡ï¼Œæ‹–æ›³æˆ–é»é¸å¡«å…¥æ­£ç¢ºçš„ç©ºæ ¼ä¸­ï¼Œå®Œæˆæ¨™æº–èªæ³•çµæ§‹ã€‚</p>
        
        <div class="sql-builder-area">
            <div>
                <span class="drop-zone" id="slot-1" data-answer="SELECT" onclick="fillSlot(this)">?</span>
                <span>column_name (æ¬„ä½)</span>
            </div>
            <div>
                <span class="drop-zone" id="slot-2" data-answer="FROM" onclick="fillSlot(this)">?</span>
                <span>table_name (è³‡æ–™è¡¨)</span>
            </div>
            <div>
                <span class="drop-zone" id="slot-3" data-answer="WHERE" onclick="fillSlot(this)">?</span>
                <span>condition (æ¢ä»¶)</span>
            </div>
            <div>
                <span class="drop-zone" id="slot-4" data-answer="GROUP BY" onclick="fillSlot(this)">?</span>
                <span>column (åˆ†çµ„)</span>
            </div>
            <div>
                <span class="drop-zone" id="slot-5" data-answer="ORDER BY" onclick="fillSlot(this)">?</span>
                <span>column (æ’åº)</span>
            </div>
        </div>

        <div class="word-bank" id="word-bank">
            <div class="draggable" draggable="true" id="drag-SELECT">SELECT</div>
            <div class="draggable" draggable="true" id="drag-FROM">FROM</div>
            <div class="draggable" draggable="true" id="drag-WHERE">WHERE</div>
            <div class="draggable" draggable="true" id="drag-GROUP BY">GROUP BY</div>
            <div class="draggable" draggable="true" id="drag-ORDER BY">ORDER BY</div>
        </div>
        
        <div id="sql-feedback"></div>
    </section>

    <!-- 3. é—œéµå­—ç”¨é€”è§£æ -->
    <section class="card">
        <h2>ğŸ” äº’å‹•ç·´ç¿’ Bï¼šé—œéµå­—åŠŸèƒ½è§£æ</h2>
        <p>é»æ“Šä¸‹æ–¹çš„æŒ‰éˆ•ï¼Œçœ‹çœ‹é€™äº›ä¿ç•™å­—åœ¨ SQL ä¸­è² è²¬åšä»€éº¼ï¼š</p>
        
        <div class="keyword-btn-group">
            <button class="keyword-btn" onclick="showExplanation('SELECT')">SELECT</button>
            <button class="keyword-btn" onclick="showExplanation('FROM')">FROM</button>
            <button class="keyword-btn" onclick="showExplanation('WHERE')">WHERE</button>
            <button class="keyword-btn" onclick="showExplanation('GROUP BY')">GROUP BY</button>
            <button class="keyword-btn" onclick="showExplanation('ORDER BY')">ORDER BY</button>
        </div>

        <div class="explanation-box" id="keyword-explanation">
            è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹èªªæ˜...
        </div>
    </section>

    <!-- 4. é¡Œç›®ä½œç­”å€ -->
    <section class="card" style="border-left-color: var(--accent-color);">
        <h2>ğŸ“ å¯¦æˆ°æ¼”ç·´ï¼šè¤‡é¸é¡Œ 32</h2>
        <p style="font-weight: bold; color: var(--accent-color);">âš ï¸ æ³¨æ„ï¼šæœ¬é¡Œç‚ºã€Œè¤‡é¸é¡Œã€ï¼Œç­”æ¡ˆå¯èƒ½ä¸åªä¸€å€‹ï¼</p>
        
        <div style="background: #fafafa; padding: 15px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
            <p><strong>é¡Œç›®ï¼š</strong>SQL è³‡æ–™åº«èªè¨€ä¸­ï¼Œä¸‹åˆ—ä½•è€…å±¬æ–¼ä¿ç•™çš„é—œéµå­—ï¼Ÿ</p>
            
            <form id="quiz-form">
                <div class="quiz-option">
                    <label>
                        <input type="checkbox" name="option" value="A"> (A) SELECT
                    </label>
                </div>
                <div class="quiz-option">
                    <label>
                        <input type="checkbox" name="option" value="B"> (B) FROM
                    </label>
                </div>
                <div class="quiz-option">
                    <label>
                        <input type="checkbox" name="option" value="C"> (C) WHERE
                    </label>
                </div>
                <div class="quiz-option">
                    <label>
                        <input type="checkbox" name="option" value="D"> (D) ORDER BY
                    </label>
                </div>
                <div class="quiz-option">
                    <label>
                        <input type="checkbox" name="option" value="E"> (E) GROUP BY
                    </label>
                </div>
                
                <button type="button" class="quiz-btn" onclick="checkAnswer()">é€å‡ºç­”æ¡ˆ</button>
            </form>

            <div id="quiz-result"></div>
        </div>

        <h3>é¸é …è§£æï¼š</h3>
        <p>é»æ“Šé¸é …æŸ¥çœ‹ç‚ºä»€éº¼å®ƒæ˜¯ä¿ç•™å­—ï¼š</p>
        <ul id="option-analysis">
            <li><strong>(A) SELECTï¼š</strong><span style="color:#27ae60">æ˜¯ä¿ç•™å­—ã€‚</span>å› ç‚ºæ‰€æœ‰æŸ¥è©¢éƒ½å¿…é ˆä»¥æ­¤é–‹é ­ã€‚</li>
            <li><strong>(B) FROMï¼š</strong><span style="color:#27ae60">æ˜¯ä¿ç•™å­—ã€‚</span>ç”¨ä¾†æŒ‡å®šè³‡æ–™ä¾†æºï¼Œä¸å¯çœç•¥ã€‚</li>
            <li><strong>(C) WHEREï¼š</strong><span style="color:#27ae60">æ˜¯ä¿ç•™å­—ã€‚</span>ç”¨ä¾†è¨­å®šæ¢ä»¶ï¼Œå±¬æ–¼æ¨™æº–èªæ³•ã€‚</li>
            <li><strong>(D) ORDER BYï¼š</strong><span style="color:#27ae60">æ˜¯ä¿ç•™å­—ã€‚</span>é›–ç„¶ç”±å…©å€‹å­—çµ„æˆï¼Œä½†åœ¨ SQL ä¸­è¦–ç‚ºä¸€å€‹å®Œæ•´çš„ä¿ç•™æŒ‡ä»¤ã€‚</li>
            <li><strong>(E) GROUP BYï¼š</strong><span style="color:#27ae60">æ˜¯ä¿ç•™å­—ã€‚</span>ç”¨æ–¼èšåˆå‡½æ•¸åˆ†çµ„ï¼Œæ˜¯å›ºå®šèªæ³•ã€‚</li>
        </ul>
    </section>

    <!-- 5. é™·é˜±èˆ‡è‡ªæˆ‘æª¢æ¸¬ -->
    <section class="card">
        <h2>ğŸš« è€ƒè©¦å¸¸è¦‹é™·é˜± (é»æ“Šã€Œæˆ‘æ‡‚äº†ã€æ¶ˆé™¤)</h2>
        <div class="trap-cards">
            <div class="trap-card" id="trap1">
                <h4>é™·é˜± 1</h4>
                <p>ä»¥ç‚º GROUP BY æ˜¯å…©å€‹å­—ï¼Œæ˜¯ã€Œç‰‡èªã€æ‰€ä»¥ä¸æ˜¯é—œéµå­—ï¼Ÿ</p>
                <p><strong>éŒ¯ï¼</strong>åœ¨ SQL è§£æå™¨çœ¼ä¸­ï¼Œå®ƒå€‘å°±æ˜¯ä¿ç•™æŒ‡ä»¤ã€‚</p>
                <button class="trap-close" onclick="dismissTrap('trap1')">æˆ‘æ‡‚äº†</button>
            </div>
            <div class="trap-card" id="trap2">
                <h4>é™·é˜± 2</h4>
                <p>è¤‡é¸é¡Œç¿’æ…£åªé¸å‰ä¸‰å€‹ (SELECT, FROM, WHERE)ï¼Ÿ</p>
                <p><strong>éŒ¯ï¼</strong>ä¸è¦æ¼æ‰æ’åº (ORDER) å’Œåˆ†çµ„ (GROUP)ã€‚</p>
                <button class="trap-close" onclick="dismissTrap('trap2')">æˆ‘æ‡‚äº†</button>
            </div>
            <div class="trap-card" id="trap3">
                <h4>é™·é˜± 3</h4>
                <p>ä»¥ç‚ºåªæœ‰å¤§å¯«æ‰æ˜¯é—œéµå­—ï¼Ÿ</p>
                <p><strong>éŒ¯ï¼</strong>SQL ä¸åˆ†å¤§å°å¯«ï¼Œselect ä¹Ÿæ˜¯ä¿ç•™å­—ã€‚</p>
                <button class="trap-close" onclick="dismissTrap('trap3')">æˆ‘æ‡‚äº†</button>
            </div>
        </div>

        <h3 style="margin-top: 30px;">ğŸ¤” è‡ªæˆ‘æª¢æ¸¬ (ä¸çµ¦ç­”æ¡ˆï¼Œæƒ³ä¸€æƒ³)</h3>
        <div class="self-check-item">
            <p><strong>Q1ï¼š</strong>ç‚ºä»€éº¼æˆ‘å»ºç«‹è³‡æ–™è¡¨æ™‚ï¼Œä¸èƒ½æŠŠæ¬„ä½å–åç‚º "SELECT"ï¼Ÿ</p>
            <button class="hint-btn" onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
            <p id="hint1" class="hint-text">æç¤ºï¼šå› ç‚ºè³‡æ–™åº«çœ‹åˆ° "SELECT" æœƒä»¥ç‚ºä½ è¦é–‹å§‹æŸ¥è©¢è³‡æ–™ï¼Œæœƒé€ æˆèªæ³•æ··äº‚éŒ¯èª¤ã€‚</p>
        </div>
        <div class="self-check-item">
            <p><strong>Q2ï¼š</strong>HAVING (é€šå¸¸è·Ÿåœ¨ GROUP BY å¾Œé¢ç¯©é¸) æ˜¯ä¸æ˜¯ä¿ç•™é—œéµå­—ï¼Ÿ</p>
            <button class="hint-btn" onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
            <p id="hint2" class="hint-text">æç¤ºï¼šæ˜¯ï¼å®ƒä¹Ÿæ˜¯ SQL èªæ³•çµæ§‹çš„ä¸€éƒ¨åˆ†ï¼Œå°±åƒ WHERE ä¸€æ¨£ã€‚</p>
        </div>
        <div class="self-check-item">
            <p><strong>Q3ï¼š</strong>è€ƒè©¦æ™‚å¦‚ä½•å¿«é€Ÿåˆ¤æ–·ä¸€å€‹å­—æ˜¯ä¸æ˜¯ä¿ç•™é—œéµå­—ï¼Ÿ</p>
            <button class="hint-btn" onclick="toggleHint('hint3')">é¡¯ç¤ºæç¤º</button>
            <p id="hint3" class="hint-text">æç¤ºï¼šå•è‡ªå·±ã€Œé€™å€‹å­—æ˜¯ä¸æ˜¯ SQL æŒ‡ä»¤æœ¬èº«å°±åœ¨ç”¨çš„åŠŸèƒ½å­—ï¼Ÿã€å¦‚æœæ˜¯ï¼Œé‚£å°±æ˜¯ä¿ç•™å­—ã€‚</p>
        </div>
    </section>

    <div class="reset-section">
        <button class="reset-btn" onclick="resetAll()">ğŸ”„ å…¨éƒ¨é‡ç½® / é‡æ–°ç·´ç¿’</button>
    </div>

</div>

<script>
    // --- 1. SQL æ‹¼åœ–åŠŸèƒ½ ---
    let selectedWord = null;

    // è™•ç†å¯æ‹–æ›³é …ç›®çš„é»æ“Š (é©ç”¨æ–¼è¡Œå‹•è£ç½®é»é¸æ¨¡å¼)
    const draggables = document.querySelectorAll('.draggable');
    draggables.forEach(elem => {
        // æ‹–æ›³äº‹ä»¶
        elem.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', e.target.innerText);
            e.target.style.opacity = '0.4';
        });

        elem.addEventListener('dragend', (e) => {
            e.target.style.opacity = '1';
        });

        // é»æ“Šäº‹ä»¶ (æ›¿ä»£æ‹–æ›³)
        elem.addEventListener('click', () => {
            if (elem.classList.contains('used')) return;
            
            // æ¸…é™¤å…¶ä»–é¸å–ç‹€æ…‹
            draggables.forEach(d => d.style.border = 'none');
            
            selectedWord = elem.innerText;
            elem.style.border = '2px solid yellow'; // æ¨™ç¤ºç›®å‰é¸å–çš„å­—
        });
    });

    // å¡«ç©ºé‚è¼¯
    function fillSlot(slot) {
        // å¦‚æœè©²æ ¼å·²ç¶“å¡«äº†ï¼Œä¸å‹•ä½œ (æˆ–å¯è¨­è¨ˆé»æ“Šæ¸…é™¤)
        if (slot.classList.contains('filled')) return;

        // å¦‚æœæ²’æœ‰é€éé»é¸é¸æ“‡å­—è©ï¼Œæç¤ºä½¿ç”¨è€…
        if (!selectedWord) {
            // æª¢æŸ¥æ˜¯å¦æœ‰æ­£åœ¨æ‹–æ›³çš„è³‡æ–™ (é€é drop event è™•ç†ï¼Œé€™è£¡æ˜¯ click handler)
            // é€™è£¡ä¸»è¦è™•ç†é»é¸å¡«å……æ¨¡å¼
            return;
        }

        checkAndFill(slot, selectedWord);
    }

    // è™•ç† Drop äº‹ä»¶
    const zones = document.querySelectorAll('.drop-zone');
    zones.forEach(zone => {
        zone.addEventListener('dragover', (e) => {
            e.preventDefault(); // å…è¨± Drop
            zone.style.backgroundColor = '#5c6370';
        });

        zone.addEventListener('dragleave', (e) => {
            zone.style.backgroundColor = '#3e4451';
        });

        zone.addEventListener('drop', (e) => {
            e.preventDefault();
            const data = e.dataTransfer.getData('text/plain');
            checkAndFill(zone, data);
            zone.style.backgroundColor = '#3e4451';
        });
    });

    function checkAndFill(slot, word) {
        const correctWord = slot.getAttribute('data-answer');
        const feedback = document.getElementById('sql-feedback');

        if (word === correctWord) {
            slot.innerText = word;
            slot.classList.add('filled');
            feedback.innerText = "âœ… æ­£ç¢ºï¼";
            feedback.style.color = "#2ecc71";
            
            // æ¨™è¨˜è©²å­—è©å·²ä½¿ç”¨
            const wordElem = document.getElementById(`drag-${word}`);
            if(wordElem) wordElem.classList.add('used');
            wordElem.style.border = 'none';
            selectedWord = null; // é‡ç½®é¸å–

            checkAllSlots();
        } else {
            feedback.innerText = "âŒ éŒ¯èª¤ï¼Œé€™å€‹ä½ç½®æ‡‰è©²æ”¾åˆ¥çš„é—œéµå­—å–”ï¼";
            feedback.style.color = "#e74c3c";
            setTimeout(() => { feedback.innerText = ""; }, 2000);
        }
    }

    function checkAllSlots() {
        const slots = document.querySelectorAll('.drop-zone');
        const allFilled = Array.from(slots).every(slot => slot.classList.contains('filled'));
        if (allFilled) {
            document.getElementById('sql-feedback').innerText = "ğŸ‰ å¤ªæ£’äº†ï¼é€™äº›å…¨éƒ¨éƒ½æ˜¯ SQL å·²å®šç¾©çš„ä¿ç•™é—œéµå­—ï¼";
        }
    }

    // --- 2. é—œéµå­—è§£é‡‹åŠŸèƒ½ ---
    const explanations = {
        'SELECT': '<strong>SELECT (é¸å–)</strong>ï¼šç”¨ä¾†æŒ‡å®šä½ è¦å¾è³‡æ–™åº«ä¸­æŠ“å–å“ªäº›ã€Œæ¬„ä½ã€ã€‚æ˜¯æŸ¥è©¢èªå¥çš„ç¬¬ä¸€å€‹å­—ã€‚',
        'FROM': '<strong>FROM (ä¾†è‡ª)</strong>ï¼šç”¨ä¾†æŒ‡å®šè³‡æ–™æ˜¯å„²å­˜åœ¨å“ªä¸€å¼µã€Œè³‡æ–™è¡¨ (Table)ã€è£¡é¢ã€‚',
        'WHERE': '<strong>WHERE (æ¢ä»¶)</strong>ï¼šç”¨ä¾†è¨­å®šã€Œç¯©é¸æ¢ä»¶ã€ï¼ŒåªæŠŠç¬¦åˆæ¢ä»¶çš„è³‡æ–™æ‰¾å‡ºä¾† (ä¾‹å¦‚ï¼šæ‰¾å‡ºæˆç¸¾ > 60 åˆ†çš„äºº)ã€‚',
        'GROUP BY': '<strong>GROUP BY (åˆ†çµ„)</strong>ï¼šç”¨ä¾†å°‡è³‡æ–™ä¾ç…§ç‰¹å®šæ¬„ä½é€²è¡Œã€Œåˆ†é¡ã€ (ä¾‹å¦‚ï¼šä¾ç…§ç­ç´šåˆ†çµ„)ã€‚',
        'ORDER BY': '<strong>ORDER BY (æ’åº)</strong>ï¼šç”¨ä¾†æ±ºå®šè³‡æ–™é¡¯ç¤ºçš„ã€Œé †åºã€ (ä¾‹å¦‚ï¼šä¾ç…§å­¸è™Ÿç”±å°åˆ°å¤§æ’åº)ã€‚'
    };

    function showExplanation(keyword) {
        const box = document.getElementById('keyword-explanation');
        box.innerHTML = explanations[keyword];
        
        // æŒ‰éˆ•æ¨£å¼åˆ‡æ›
        document.querySelectorAll('.keyword-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }

    // --- 3. è¤‡é¸é¡Œæª¢æŸ¥ ---
    function checkAnswer() {
        const form = document.getElementById('quiz-form');
        const formData = new FormData(form);
        const selected = formData.getAll('option'); // å–å¾—æ‰€æœ‰å‹¾é¸çš„å€¼ ['A', 'B', ...]
        const resultDiv = document.getElementById('quiz-result');

        // æ­£ç¢ºç­”æ¡ˆæ˜¯ ABCDE å…¨é¸
        const correctCount = 5;
        
        if (selected.length === 0) {
            resultDiv.style.display = 'block';
            resultDiv.style.backgroundColor = '#ffeaa7';
            resultDiv.style.color = '#d35400';
            resultDiv.innerText = "âš ï¸ ä½ é‚„æ²’æœ‰é¸æ“‡ä»»ä½•ç­”æ¡ˆå–”ï¼";
        } else if (selected.length === correctCount) {
            resultDiv.style.display = 'block';
            resultDiv.style.backgroundColor = '#dff9fb';
            resultDiv.style.color = '#27ae60';
            resultDiv.innerHTML = "ğŸ† <strong>å®Œå…¨æ­£ç¢ºï¼</strong><br>è§€å¿µæ­£ç¢ºï¼šSQL çš„æŒ‡ä»¤èªæ³•å­—å…¨éƒ¨éƒ½æ˜¯ä¿ç•™é—œéµå­—ã€‚";
        } else {
            resultDiv.style.display = 'block';
            resultDiv.style.backgroundColor = '#fab1a0';
            resultDiv.style.color = '#c0392b';
            resultDiv.innerHTML = "âŒ <strong>ç­”æ¡ˆä¸å®Œæ•´å–”ï¼</strong><br>æç¤ºï¼šSQL é—œéµå­—æ˜¯æ•´çµ„å‡ºç¾çš„ï¼Œä¸èƒ½åªé¸ä¸€éƒ¨åˆ†ï¼Œå†æª¢æŸ¥çœ‹çœ‹é‚„æœ‰å“ªäº›ä¹Ÿæ˜¯æŒ‡ä»¤ï¼Ÿ";
        }
    }

    // --- 4. é™·é˜±å¡åŠŸèƒ½ ---
    function dismissTrap(id) {
        const card = document.getElementById(id);
        card.style.transition = "opacity 0.5s";
        card.style.opacity = "0";
        setTimeout(() => {
            card.style.display = "none";
        }, 500);
    }

    // --- 5. è‡ªæˆ‘æª¢æ¸¬æç¤º ---
    function toggleHint(id) {
        const hint = document.getElementById(id);
        if (hint.style.display === "block") {
            hint.style.display = "none";
        } else {
            hint.style.display = "block";
        }
    }

    // --- 6. å…¨åŸŸé‡ç½® ---
    function resetAll() {
        // é‡ç½®æ‹¼åœ–
        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.classList.remove('filled');
            zone.innerText = "?";
            zone.style.backgroundColor = '#3e4451';
        });
        document.querySelectorAll('.draggable').forEach(drag => {
            drag.classList.remove('used');
            drag.style.border = 'none';
        });
        document.getElementById('sql-feedback').innerText = "";
        selectedWord = null;

        // é‡ç½®è¤‡é¸é¡Œ
        document.getElementById('quiz-form').reset();
        document.getElementById('quiz-result').style.display = 'none';

        // é‡ç½®è§£é‡‹å€
        document.getElementById('keyword-explanation').innerText = "è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•æŸ¥çœ‹èªªæ˜...";
        document.querySelectorAll('.keyword-btn').forEach(btn => btn.classList.remove('active'));

        // é‡ç½®é™·é˜±å¡ (å¦‚æœè¢«æ¶ˆé™¤äº†ï¼Œè®“å®ƒå€‘å›ä¾†)
        document.querySelectorAll('.trap-card').forEach(card => {
            card.style.display = "block";
            setTimeout(() => card.style.opacity = "1", 100);
        });

        // é‡ç½®æç¤º
        document.querySelectorAll('.hint-text').forEach(hint => hint.style.display = "none");

        // æ²å‹•åˆ°é ‚éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

</script>

</body>
</html>