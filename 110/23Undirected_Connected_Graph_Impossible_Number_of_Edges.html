<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡Œè™Ÿ23ï¼šç„¡å‘é€£é€šåœ–é‚Šæ•¸ç¯„åœ</title>
    <style>
        /* --- å…¨å±€è¨­å®š --- */
        :root {
            --primary-color: #333;
            --accent-color: #2c3e50;
            --highlight-bg: #fff9c4; /* æ·¡é»ƒè‰²è¢å…‰ç­† */
            --border-color: #e0e0e0;
            --bg-color: #f9f9f9;
            --card-bg: #ffffff;
            --success-color: #27ae60;
            --error-color: #c0392b;
            --info-color: #2980b9;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* --- æ¨™é¡Œå€ --- */
        header {
            border-bottom: 3px solid var(--accent-color);
            margin-bottom: 25px;
            padding-bottom: 10px;
        }
        
        h1 {
            font-size: 1.8rem;
            margin: 0;
            color: var(--accent-color);
        }
        
        .subtitle {
            font-size: 1rem;
            color: #666;
            margin-top: 5px;
        }

        /* --- å€å¡Šé€šç”¨æ¨£å¼ --- */
        section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: #fff;
        }

        h2 {
            font-size: 1.3rem;
            color: var(--accent-color);
            margin-top: 0;
            border-left: 5px solid var(--info-color);
            padding-left: 10px;
            display: flex;
            align-items: center;
        }

        /* --- ç‰¹æ®Šæ–‡å­—æ¨£å¼ --- */
        .highlight {
            background-color: var(--highlight-bg);
            padding: 0 4px;
            border-radius: 2px;
            font-weight: bold;
        }

        .term {
            font-weight: bold;
            color: var(--info-color);
        }

        .note {
            font-size: 0.95rem;
            color: #555;
            background-color: #f0f4f8;
            padding: 10px;
            border-radius: 4px;
            border-left: 4px solid #bdc3c7;
            margin-top: 10px;
        }

        /* --- é¡Œç›®å€ --- */
        .question-box {
            font-size: 1.1rem;
            background-color: #fdfdfd;
            border: 2px solid var(--accent-color);
        }

        .options {
            list-style-type: none;
            padding: 0;
            margin: 15px 0;
        }

        .options li {
            padding: 5px 0;
        }

        /* --- äº’å‹•ç•«å¸ƒå€ --- */
        .interactive-area {
            background-color: #fcfcfc;
            border: 2px dashed #bbb;
            text-align: center;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #eee;
            border-radius: 4px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
        }

        input[type=range] {
            width: 100%;
            cursor: pointer;
        }

        canvas {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            max-width: 100%;
            height: auto;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        .status-display {
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.1rem;
        }

        .status-connected { color: var(--success-color); }
        .status-disconnected { color: var(--error-color); }

        /* --- æŒ‰éˆ•èˆ‡äº’å‹• --- */
        .btn-toggle {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .btn-toggle:hover {
            opacity: 0.9;
        }

        .answer-hidden {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background-color: #e8f8f5;
            border: 1px solid #a2d9ce;
            border-radius: 4px;
            color: #0e6655;
        }

        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            background: white;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background-color: #f0f0f0;
        }

        .quiz-option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .quiz-option.wrong {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .quiz-feedback {
            margin-top: 10px;
            font-weight: bold;
            min-height: 1.5em;
        }

        /* --- éŸ¿æ‡‰å¼èª¿æ•´ --- */
        @media (max-width: 600px) {
            .container { padding: 15px; }
            h1 { font-size: 1.5rem; }
            .controls { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- A. æ¨™é¡Œå€ -->
    <header>
        <h1>é¡Œè™Ÿ 23ï¼šç„¡å‘é€£é€šåœ– - é‚Šæ•¸åˆ¤æ–·</h1>
        <div class="subtitle">é›»èˆ‡æ¦‚è«– / é›¢æ•£æ•¸å­¸ / åœ–è«–åŸºç¤</div>
    </header>

    <!-- B. é¡Œç›®å€ -->
    <section class="question-box">
        <h2>ã€é¡Œç›®ã€‘</h2>
        <p>23. ä¸€å€‹æ²’æ–¹å‘æ€§çš„é€£æ¥åœ–ï¼Œç¯€é»ç‚º Nï¼Œå‰‡å…¶é‚Šçš„å€‹æ•¸ä¸å¯èƒ½ç‚º</p>
        <ul class="options">
            <li>(A) N-2</li>
            <li>(B) N-1</li>
            <li>(C) N</li>
            <li>(D) N+1</li>
        </ul>
        <button class="btn-toggle" onclick="toggleVisibility('answer-key')">é¡¯ç¤º/éš±è—ç­”æ¡ˆ</button>
        <div id="answer-key" class="answer-hidden">
            <strong>ç­”æ¡ˆï¼šA</strong>
        </div>
    </section>

    <!-- C. ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­— -->
    <section>
        <h2>ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h2>
        <p>è«‹æ‹¿èµ·ä½ å¿ƒä¸­çš„è¢å…‰ç­†ï¼Œåœˆå‡ºä»¥ä¸‹é‡é»ï¼š</p>
        <ul>
            <li><span class="highlight">æ²’æ–¹å‘æ€§</span>ï¼šå³ Undirected Graphï¼Œé‚Šæ²’æœ‰ç®­é ­ï¼ŒAé€£åˆ°Bç­‰æ–¼Bé€£åˆ°Aã€‚</li>
            <li><span class="highlight">é€£æ¥åœ–ï¼ˆé€£é€šï¼‰</span>ï¼šå³ Connected Graphï¼Œåœ–ä¸­ä»»ä½•å…©å€‹é»éƒ½å¯ä»¥èµ°å¾—åˆ°ï¼Œæ²’æœ‰å­¤å³¶ã€‚</li>
            <li><span class="highlight">ç¯€é»ç‚º N</span>ï¼šç¸½å…±æœ‰ N å€‹é»ã€‚</li>
            <li><span class="highlight">é‚Šçš„å€‹æ•¸ä¸å¯èƒ½</span>ï¼šé€™é¡Œåœ¨å•ã€Œé€£é€šåœ–çš„æœ€å°‘é‚Šæ•¸ä¸‹é™ã€ã€‚</li>
        </ul>
    </section>

    <!-- D. ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ -->
    <section>
        <h2>ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h2>
        <div class="note">
            <p><strong>ç¿»è­¯è’Ÿè’»ï¼š</strong></p>
            <p>ã€Œé€™é¡Œå…¶å¯¦å°±æ˜¯åœ¨å•ï¼šå¦‚æœæœ‰ N å€‹åŸå¸‚è¦é‹ªè·¯ï¼Œä¿è­‰æ¯å€‹åŸå¸‚éƒ½èƒ½é–‹è»Šåˆ°é”å…¶ä»–ä»»ä½•åŸå¸‚ï¼ˆä¸ç”¨ç›´é”ï¼Œå¯ä»¥è½‰ä¹˜ï¼‰ï¼Œè«‹å•æœ€å°‘æœ€å°‘è¦é‹ªå¹¾æ¢è·¯ï¼Ÿå¦‚æœè·¯é‹ªå¾—æ¯”æœ€å°‘éœ€æ±‚é‚„å°‘ï¼Œç³»çµ±å°±æœƒå´©æ½°ï¼ˆæ–·é–‹ï¼‰ã€‚ã€</p>
        </div>
    </section>

    <!-- E. ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ -->
    <section>
        <h2>ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h2>
        <p><strong>1. æ ¸å¿ƒè§€å¿µï¼šæœ€å°‘é‚Šæ•¸</strong></p>
        <p>æƒ³åƒæˆ‘å€‘å¾ç¬¬ 1 å€‹é»é–‹å§‹ï¼Œè¦æŠŠå®ƒé€£åˆ°ç¬¬ 2 å€‹é»ï¼Œéœ€è¦ 1 æ¢ç·šã€‚è¦æŠŠç¬¬ 3 å€‹é»æ¥é€²ä¾†ï¼Œåˆéœ€è¦ 1 æ¢ç·š...ä¾æ­¤é¡æ¨ã€‚</p>
        <ul>
            <li>æœ‰ 2 å€‹é»ï¼Œè‡³å°‘è¦ 1 æ¢ç·šé€£é€šã€‚</li>
            <li>æœ‰ 3 å€‹é»ï¼Œè‡³å°‘è¦ 2 æ¢ç·šé€£é€šã€‚</li>
            <li>æœ‰ N å€‹é»ï¼Œè‡³å°‘è¦ <strong>N-1</strong> æ¢ç·šæ‰èƒ½å…¨éƒ¨ä¸²èµ·ä¾†ã€‚</li>
        </ul>
        <p><strong>2. çµè«–</strong></p>
        <p>å¦‚æœè¦ä¿æŒé€£é€šï¼Œé‚Šæ•¸ (E) å¿…é ˆæ»¿è¶³ï¼š <strong>E â‰¥ N - 1</strong>ã€‚</p>
        <p>é€™ç¨®ã€Œå‰›å¥½ N-1 æ¢é‚Šä¸”é€£é€šã€çš„åœ–ï¼Œæˆ‘å€‘ç¨±ç‚º<span class="term">æ¨¹ (Tree)</span>ã€‚</p>
        <p><strong>3. æª¢æŸ¥é¸é …</strong></p>
        <p>ä»»ä½•å°æ–¼ N-1 çš„æ•¸å­—ï¼Œéƒ½ç„¡æ³•è®“ N å€‹é»é€£é€šã€‚é¡Œç›®å•ã€Œä¸å¯èƒ½ã€ï¼Œæ‰€ä»¥æˆ‘å€‘æ‰¾æ¯” N-1 å°çš„æ•¸ï¼Œå°±æ˜¯ <strong>N-2</strong>ã€‚</p>
    </section>

    <!-- F. äº’å‹•ç¤ºç¯„å€ -->
    <section class="interactive-area">
        <h2>äº’å‹•ç¤ºç¯„ï¼šå‹•æ‰‹ç©ç©çœ‹</h2>
        <p>èª¿æ•´ä¸‹æ–¹çš„æ»‘æ¡¿ï¼Œè§€å¯Ÿç¯€é»æ•¸ (N) èˆ‡é‚Šæ•¸ (E) å°é€£é€šæ€§çš„å½±éŸ¿ã€‚</p>
        
        <div class="controls">
            <div class="control-group">
                <label for="nodeRange">ç¯€é»æ•¸é‡ (N): <span id="nodeVal">5</span></label>
                <input type="range" id="nodeRange" min="2" max="10" value="5" oninput="updateGraph()">
            </div>
            <div class="control-group">
                <label for="edgeRange">é‚Šçš„æ•¸é‡ (E): <span id="edgeVal">3</span></label>
                <input type="range" id="edgeRange" min="0" max="15" value="3" oninput="updateGraph()">
            </div>
        </div>

        <canvas id="graphCanvas" width="500" height="300"></canvas>
        
        <div id="graphStatus" class="status-display"></div>
        <div id="graphExplanation" class="note"></div>
    </section>

    <!-- G. ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ -->
    <section>
        <h2>ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h2>
        <ul>
            <li><strong>(A) N-2 <span class="highlight">ã€ä¸å¯èƒ½ã€‘</span></strong>ï¼šæ¯”æœ€å°‘çš„ N-1 é‚„å°‘ï¼Œçµ•å°æœƒæ–·æˆå…©æˆªä»¥ä¸Šï¼ˆéé€£é€šï¼‰ã€‚</li>
            <li><strong>(B) N-1 ã€å¯èƒ½ã€‘</strong>ï¼šé€™æ˜¯é€£é€šçš„æœ€å°‘ä»£åƒ¹ï¼Œå½¢æˆã€Œæ¨¹ (Tree)ã€ã€‚</li>
            <li><strong>(C) N ã€å¯èƒ½ã€‘</strong>ï¼šæ¯”æ¨¹å¤šä¸€æ¢é‚Šï¼Œæœƒå½¢æˆä¸€å€‹åœˆåœˆ (Cycle)ï¼Œä½†ä¾ç„¶é€£é€šã€‚</li>
            <li><strong>(D) N+1 ã€å¯èƒ½ã€‘</strong>ï¼šé‚Šè¶Šå¤šè¶Šç©©å›ºï¼Œç•¶ç„¶é€£é€šã€‚</li>
        </ul>
    </section>

    <!-- H. è§€å¿µè£œå……èˆ‡å»¶ä¼¸ -->
    <section>
        <h2>è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h2>
        <p><span class="term">Connected Graphï¼ˆé€£é€šåœ–ï¼‰</span>ï¼šåœ–ä¸Šä»»å…©é»ä¹‹é–“éƒ½æœ‰è·¯å¾‘ç›¸é€£ã€‚</p>
        <p><span class="term">Treeï¼ˆæ¨¹ï¼‰</span>ï¼šé€£é€šä¸”æ²’æœ‰è¿´åœˆçš„åœ–ã€‚ç‰¹æ€§æ˜¯é‚Šæ•¸å‰›å¥½ç‚º N-1ã€‚</p>
        <p><span class="term">Cycleï¼ˆè¿´åœˆ/ç’°ï¼‰</span>ï¼šå¾æŸé»å‡ºç™¼ï¼Œæ²¿è‘—é‚Šèµ°å¯ä»¥ç¹ä¸€åœˆå›åˆ°åŸé»ã€‚</p>
        <hr>
        <p><strong>ğŸ”¥ é€²éšæ€è€ƒï¼š</strong></p>
        <ol>
            <li><strong>å•æœ€å°‘é‚Šæ•¸ï¼Ÿ</strong> ç­”æ¡ˆæ˜¯ N-1ã€‚</li>
            <li><strong>å•æœ€å¤šé‚Šæ•¸ï¼Ÿ</strong> ä¹Ÿå°±æ˜¯å…©å…©éƒ½ç›¸é€£çš„<span class="term">å®Œå…¨åœ– (Complete Graph)</span>ï¼Œé‚Šæ•¸ç‚º $ \frac{N(N-1)}{2} $ã€‚</li>
        </ol>
    </section>

    <!-- I. è¨˜æ†¶å£è¨£ -->
    <section>
        <h2>è¨˜æ†¶å£è¨£</h2>
        <div style="font-size: 1.2rem; text-align: center; font-weight: bold; color: var(--accent-color); background: #fffbe6; padding: 15px; border-radius: 8px;">
            ã€Œè¦å…¨é€£ï¼Œè‡³å°‘ Næ¸›1ã€<br>
            ã€Œå°‘æ–¼ Næ¸›1ï¼Œä¸€å®šæœƒæ–·æ‰ã€
        </div>
    </section>

    <!-- J. å¸¸è¦‹é™·é˜± -->
    <section>
        <h2>å¸¸è¦‹é™·é˜± âš ï¸</h2>
        <ul>
            <li>âŒ <strong>èª¤å€ï¼š</strong> ä»¥ç‚ºæ¯å€‹é»éƒ½æœ‰ä¸€æ¢é‚Šé€£å‡ºå»å°±å«é€£é€šã€‚</li>
            <li>âœ… <strong>æ­£è§£ï¼š</strong> å°±ç®—æ¯å€‹é»éƒ½æœ‰é‚Šï¼Œä¹Ÿå¯èƒ½æ˜¯å…©å€‹åˆ†é–‹çš„åœˆåœˆï¼ˆåƒæ˜¯å…©å€‹åˆ†é–‹çš„ä¸‰è§’å½¢ï¼‰ï¼Œé€™æ¨£æ˜¯ä¸é€£é€šçš„ã€‚å¿…é ˆç¢ºä¿æ‰€æœ‰ç¾¤é«”éƒ½æ¥åœ¨ä¸€èµ·ï¼Œé€™è‡³å°‘éœ€è¦ N-1ã€‚</li>
        </ul>
    </section>

    <!-- K. ä½œç­”å€ -->
    <section>
        <h2>ã€è€ƒå‰æ¼”ç·´ã€‘</h2>
        <p>è‹¥ N=10ï¼Œä¸‹åˆ—å“ªå€‹é‚Šæ•¸ <span style="color:red; font-weight:bold;">ç„¡æ³•</span> å½¢æˆé€£é€šåœ–ï¼Ÿ</p>
        <div id="quiz-area">
            <button class="quiz-option" onclick="checkAnswer('A')">(A) 8</button>
            <button class="quiz-option" onclick="checkAnswer('B')">(B) 9</button>
            <button class="quiz-option" onclick="checkAnswer('C')">(C) 10</button>
            <button class="quiz-option" onclick="checkAnswer('D')">(D) 45</button>
        </div>
        <div id="quiz-feedback" class="quiz-feedback"></div>
    </section>

    <!-- M. è‡ªæˆ‘æª¢æ¸¬ -->
    <section>
        <h2>è‡ªæˆ‘æª¢æ¸¬</h2>
        <p>è©¦è‘—å›ç­”ä»¥ä¸‹å•é¡Œï¼Œç¢ºèªè§€å¿µæ˜¯å¦æ¸…æ™°ï¼ˆä¸é™„æ¨™æº–ç­”æ¡ˆï¼Œè«‹ç”¨ä¸Šæ–¹è§€å¿µæ¨å°ï¼‰ï¼š</p>
        <ol>
            <li>å¦‚æœä¸€å€‹åœ–æœ‰ 5 å€‹ç¯€é»ï¼Œé‚Šæ•¸åªæœ‰ 3 æ¢ï¼Œè«‹å•å®ƒä¸€å®šæ˜¯é€£é€šåœ–å—ï¼Ÿ</li>
            <li>å¦‚æœé‚Šæ•¸æ˜¯ N-1ï¼Œè€Œä¸”ç¢ºå®šæ˜¯é€£é€šçš„ï¼Œè«‹å•åœ–ä¸­æœƒæœ‰åœˆåœˆ (Cycle) å—ï¼Ÿ</li>
            <li>å¦‚æœé‚Šæ•¸æœ‰ N æ¢ï¼Œä¸”æ˜¯é€£é€šåœ–ï¼Œæœ€å°‘æœƒæœ‰å¹¾å€‹åœˆåœˆï¼Ÿ</li>
        </ol>
    </section>

</div>

<script>
    // --- äº’å‹•é‚è¼¯ JavaScript ---

    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');
    const nodeInput = document.getElementById('nodeRange');
    const edgeInput = document.getElementById('edgeRange');
    const nodeValDisplay = document.getElementById('nodeVal');
    const edgeValDisplay = document.getElementById('edgeVal');
    const statusDisplay = document.getElementById('graphStatus');
    const explanationDisplay = document.getElementById('graphExplanation');

    // åˆå§‹åŒ–
    updateGraph();

    function updateGraph() {
        const N = parseInt(nodeInput.value);
        let E = parseInt(edgeInput.value);

        // é™åˆ¶ E çš„æœ€å¤§å€¼ï¼Œé¿å…éæ–¼æ··äº‚ (é›–ç„¶å®Œå…¨åœ–æ˜¯ N(N-1)/2ï¼Œä½†ç¤ºç¯„ä¸ç”¨é‚£éº¼å¤š)
        const maxEdges = Math.min(N * (N - 1) / 2, 20); 
        // æ›´æ–°æ»‘æ¡¿æœ€å¤§å€¼ (è‹¥éœ€è¦å‹•æ…‹èª¿æ•´ç¯„åœ)
        // edgeInput.max = maxEdges + 2; 

        nodeValDisplay.textContent = N;
        edgeValDisplay.textContent = E;

        drawGraph(N, E);
        updateStatus(N, E);
    }

    function drawGraph(n, e) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 100;
        const nodes = [];

        // 1. è¨ˆç®—ç¯€é»ä½ç½®
        for (let i = 0; i < n; i++) {
            const angle = (2 * Math.PI * i) / n - Math.PI / 2; // å¾ä¸Šæ–¹é–‹å§‹
            nodes.push({
                x: centerX + radius * Math.cos(angle),
                y: centerY + radius * Math.sin(angle),
                id: i + 1
            });
        }

        // 2. æ±ºå®šè¦ç•«å“ªäº›é‚Š
        // ç‚ºäº†æ•™å­¸ç›®çš„ï¼Œæˆ‘å€‘å„ªå…ˆé€£æ¥ç›¸é„°ç¯€é» (0-1, 1-2...) ä»¥æœ€é«˜æ•ˆç‡é”åˆ°é€£é€š
        // é€™æ¨£èƒ½è­‰æ˜ï¼šå³ä½¿ä½ æ˜¯ã€Œåˆ»æ„è¦é€£é€šã€ï¼Œé‚Šæ•¸ä¸å¤ å°±æ˜¯ä¸å¤ 
        
        ctx.beginPath();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;

        let edgesDrawn = 0;

        // ç¬¬ä¸€éšæ®µï¼šç·šæ€§é€£æ¥ (0-1, 1-2, 2-3...) -> é€™æ˜¯æœ€çœé‚Šçš„é€£é€šæ–¹å¼
        for (let i = 0; i < n - 1; i++) {
            if (edgesDrawn < e) {
                connectNodes(nodes[i], nodes[i+1]);
                edgesDrawn++;
            }
        }

        // ç¬¬äºŒéšæ®µï¼šé ­å°¾ç›¸é€£ (n-1 -> 0) -> å½¢æˆç¬¬ä¸€å€‹åœˆ
        if (edgesDrawn < e) {
            connectNodes(nodes[n-1], nodes[0]);
            edgesDrawn++;
        }

        // ç¬¬ä¸‰éšæ®µï¼šéš¨æ©Ÿ/äº¤å‰é€£æ¥ (å¢åŠ æ›´å¤šåœˆåœˆ)
        // ç°¡å–®æ¼”ç®—æ³•ï¼šé€£æ¥ (0,2), (1,3)... è·¨ä¸€é»é€£æ¥
        for (let i = 0; i < n; i++) {
            if (edgesDrawn < e) {
                let target = (i + 2) % n;
                // é¿å…é‡è¤‡ç•«ç·š (é›–è¦–è¦ºæ²’å·®ï¼Œä½†é‚è¼¯ä¸Šè¦å°)
                // é€™è£¡ç°¡åŒ–è™•ç†ï¼Œåƒ…ä½œç‚ºç¤ºæ„åœ–
                connectNodes(nodes[i], nodes[target]);
                edgesDrawn++;
            }
        }
        
        // å¦‚æœé‚„ä¸å¤  (å¤§äº‚é¬¥æ¨¡å¼ï¼Œéš¨æ„é€£)ï¼Œé€™è£¡ç°¡å–®è™•ç†å¡«æ»¿å‰©é¤˜
        // å¯¦éš›ä¸Šå°æ–¼æ•™å­¸ï¼Œå‰ä¸‰éšæ®µå·²è¶³å¤ å±•ç¤º N-1, N, N+1 çš„ç‹€æ…‹

        ctx.stroke();

        // 3. ç•«ç¯€é» (è“‹åœ¨ç·šä¸Š)
        nodes.forEach(node => {
            ctx.beginPath();
            ctx.arc(node.x, node.y, 15, 0, 2 * Math.PI);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(node.id, node.x, node.y);
        });
    }

    function connectNodes(nodeA, nodeB) {
        ctx.moveTo(nodeA.x, nodeA.y);
        ctx.lineTo(nodeB.x, nodeB.y);
    }

    function updateStatus(n, e) {
        const threshold = n - 1;
        let statusHTML = '';
        let explainHTML = '';

        if (e < threshold) {
            statusHTML = `<span class="status-disconnected">âŒ ä¸é€£é€š (Disconnected)</span>`;
            explainHTML = `ç›®å‰é‚Šæ•¸ <b>${e}</b> å°æ–¼æœ€å°‘éœ€æ±‚ <b>${threshold}</b> (N-1)ã€‚<br>ä½ å¯ä»¥çœ‹åˆ°åœ–å½¢æ–·é–‹äº†ï¼Œç„¡æ³•å¾æ¯ä¸€å€‹é»èµ°åˆ°å…¶ä»–æ‰€æœ‰é»ã€‚<br>é€™å°±æ˜¯ç‚ºä»€éº¼é¸é … (A) N-2 æ˜¯ä¸å¯èƒ½é€£é€šçš„ã€‚`;
        } else if (e === threshold) {
            statusHTML = `<span class="status-connected">âœ… é€£é€š (Connected) - æ¨¹ (Tree)</span>`;
            explainHTML = `ç›®å‰é‚Šæ•¸ <b>${e}</b> å‰›å¥½ç­‰æ–¼ <b>${threshold}</b> (N-1)ã€‚<br>é€™æ˜¯æœ€ç²¾ç°¡çš„é€£é€šç‹€æ…‹ï¼Œæ²’æœ‰ä»»ä½•åœˆåœˆã€‚é€™å°±æ˜¯é¸é … (B) çš„æƒ…æ³ã€‚`;
        } else {
            statusHTML = `<span class="status-connected">âœ… é€£é€š (Connected) - æœ‰åœˆåœˆ (Cycle)</span>`;
            explainHTML = `ç›®å‰é‚Šæ•¸ <b>${e}</b> å¤§æ–¼ <b>${threshold}</b>ã€‚<br>åœ–å½¢ä¾ç„¶é€£é€šï¼Œä¸”å¤šé¤˜çš„é‚Šé€ æˆäº†åœˆåœˆã€‚é€™ç¬¦åˆé¸é … (C) å’Œ (D) çš„æƒ…æ³ã€‚`;
        }

        statusDisplay.innerHTML = statusHTML;
        explanationDisplay.innerHTML = explainHTML;
    }

    // --- åŠŸèƒ½å‹ JavaScript ---
    
    function toggleVisibility(id) {
        const el = document.getElementById(id);
        if (el.style.display === 'block') {
            el.style.display = 'none';
        } else {
            el.style.display = 'block';
        }
    }

    function checkAnswer(option) {
        const feedback = document.getElementById('quiz-feedback');
        // é¡Œç›®å• N=10ï¼Œé€£é€šåœ–æœ€å°‘ N-1=9ã€‚
        // é¸é … (A) 8 -> å°æ–¼ 9ï¼Œä¸å¯èƒ½é€£é€š -> æ˜¯æ­£ç¢ºç­”æ¡ˆ (å› ç‚ºé¡Œç›®å•ã€Œç„¡æ³•ã€)
        // é¸é … (B) 9 -> å¯èƒ½
        // é¸é … (C) 10 -> å¯èƒ½
        // é¸é … (D) 45 -> å¯èƒ½ (å®Œå…¨åœ–)
        
        // é‡ç½®æ¨£å¼
        document.querySelectorAll('.quiz-option').forEach(btn => {
            btn.classList.remove('correct', 'wrong');
        });

        if (option === 'A') {
            feedback.innerHTML = '<span style="color:green">ç­”å°äº†ï¼</span><br>N=10 æ™‚ï¼Œæœ€å°‘éœ€è¦ 9 æ¢é‚Šæ‰èƒ½é€£é€šã€‚8 æ¢é‚Šä¸€å®šä¸å¤ ï¼Œæœƒæ–·é–‹ã€‚';
            event.target.classList.add('correct');
        } else {
            feedback.innerHTML = '<span style="color:red">ç­”éŒ¯å›‰ã€‚</span><br>é¡Œç›®å•çš„æ˜¯ã€Œç„¡æ³•ã€å½¢æˆé€£é€šåœ–ã€‚è«‹æƒ³æƒ³ N=10 æœ€å°‘è¦å¹¾æ¢é‚Šï¼Ÿ(N-1)';
            event.target.classList.add('wrong');
        }
    }
</script>

</body>
</html>