<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¡¬ç¢Ÿçµæ§‹äº’å‹•æ•™å­¸ï¼šç£è»Œã€ç£å€ã€ç£æŸ±èˆ‡ç£ç‰‡</title>
    <style>
        :root {
            --primary-color: #2563eb; /* è—è‰² */
            --secondary-color: #4f46e5; /* æ·±è— */
            --accent-color: #f59e0b; /* æ©™è‰² - ç”¨æ–¼é«˜äº® */
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --light-gray: #e2e8f0;
            --success-color: #16a34a;
            --error-color: #dc2626;
        }

        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: white;
            padding: 2rem 1rem;
            text-align: center;
            border-bottom: 4px solid var(--primary-color);
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        header h1 {
            margin: 0;
            color: var(--secondary-color);
            font-size: 1.8rem;
        }

        header p {
            color: #64748b;
            font-size: 1.1rem;
            margin-top: 0.5rem;
        }

        /* Common Section Styles */
        section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        h2 {
            border-left: 5px solid var(--accent-color);
            padding-left: 15px;
            color: var(--secondary-color);
            margin-top: 0;
        }

        /* Question Box */
        .question-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .options-list li {
            background: white;
            margin: 8px 0;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid var(--light-gray);
        }

        /* Core Concepts */
        .concept-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .concept-grid {
                grid-template-columns: 1fr;
            }
        }

        .concept-item {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
        }

        .concept-item strong {
            color: var(--primary-color);
            display: block;
            margin-bottom: 5px;
        }

        /* Interactive Area */
        .interactive-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn-mode {
            padding: 10px 20px;
            border: 2px solid var(--light-gray);
            background: white;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            color: #64748b;
        }

        .btn-mode:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn-mode.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }

        /* Animation highlighting class */
        .highlight-btn {
            animation: pulse-orange 1.5s infinite;
        }

        @keyframes pulse-orange {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); border-color: var(--accent-color); }
            70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); border-color: var(--accent-color); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); border-color: var(--accent-color); }
        }

        #hdd-canvas {
            border: 1px solid var(--light-gray);
            border-radius: 50%; /* Make canvas container circular style optional, keeping square for drawing space */
            border-radius: 12px;
            background: #fff;
            max-width: 100%;
            cursor: crosshair;
        }

        .info-panel {
            width: 100%;
            background: #fffbeb; /* æ·ºé»ƒåº• */
            border-left: 5px solid var(--accent-color);
            padding: 15px;
            border-radius: 4px;
        }

        .info-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: #92400e;
            margin-bottom: 5px;
        }

        .exam-tip {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #b45309;
            font-style: italic;
        }

        /* Slider */
        .slider-container {
            width: 100%;
            max-width: 300px;
            text-align: center;
            margin-top: 10px;
        }
        
        /* Breakdown Cards */
        .breakdown-card {
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .breakdown-header {
            background: #f8fafc;
            padding: 15px;
            font-weight: bold;
            cursor: pointer; /* Not interactive here, just static display style */
            display: flex;
            justify-content: space-between;
        }

        .breakdown-content {
            padding: 15px;
            background: white;
            color: #475569;
        }

        .correct-answer {
            border: 2px solid var(--success-color);
        }
        .correct-answer .breakdown-header {
            background: #dcfce7;
            color: var(--success-color);
        }

        /* Quiz Section */
        .quiz-options button {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            background: white;
            text-align: left;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .quiz-options button:hover {
            border-color: var(--primary-color);
            background: #eff6ff;
        }

        .quiz-result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none; /* Hidden by default */
        }

        .quiz-result.correct {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
            display: block;
        }

        .quiz-result.wrong {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
            display: block;
        }

        .review-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Accordion for Extra Knowledge */
        .accordion {
            background-color: #eee;
            color: #444;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            transition: 0.4s;
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .active-acc, .accordion:hover {
            background-color: #ccc;
        }

        .panel {
            padding: 0 18px;
            background-color: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            border-radius: 0 0 8px 8px;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: #94a3b8;
            font-size: 0.9rem;
        }

    </style>
</head>
<body>

    <header>
        <div class="container">
            <h1>ç¡¬ç¢Ÿçµæ§‹å¤§è§£å¯†</h1>
            <p>åœ“åœˆè·‘ä¸€åœˆå«ç£è»Œ (Track)ï¼Œåˆ‡ç‰‡å«ç£å€ (Sector)</p>
        </div>
    </header>

    <div class="container">

        <!-- 1. é¡Œç›®å€ -->
        <section class="question-box">
            <h2>æœ¬é¡Œ</h2>
            <p style="font-size: 1.1rem; font-weight: bold;">
                ç•¶ç£ç¢Ÿæ—‹è½‰æ™‚ï¼Œä¸€å€‹è®€å¯«é ­åœ¨ç£ç¢Ÿè¡¨é¢èµ°éçš„åœ“å½¢è»Œè·¡ï¼Œç¨±ä¹‹ç‚ºï¼Ÿ
            </p>
            <ul class="options-list">
                <li>(A) ç£æŸ±ï¼ˆCylinderï¼‰</li>
                <li>(B) ç£å€ï¼ˆSectorï¼‰</li>
                <li>(C) ç£è»Œï¼ˆTrackï¼‰</li>
                <li>(D) ç£ç‰‡ï¼ˆPlatterï¼‰</li>
            </ul>
        </section>

        <!-- 2. æ ¸å¿ƒè§€å¿µå€ -->
        <section id="core-concepts">
            <h2>æ ¸å¿ƒè§€å¿µé€Ÿè¨˜</h2>
            <div class="concept-grid">
                <div class="concept-item">
                    <strong>ç£ç‰‡ (Platter)</strong>
                    ç¡¬ç¢Ÿè£¡é¢é‚£ç‰‡åœ“åœ“çš„ç›¤å­ï¼Œè³‡æ–™å°±å­˜åœ¨ä¸Šé¢ã€‚
                </div>
                <div class="concept-item">
                    <strong>ç£è»Œ (Track)</strong>
                    åƒæ“å ´è·‘é“ä¸€æ¨£çš„åŒå¿ƒåœ“ã€‚è®€å¯«é ­ä¸å‹•ã€ç›¤ç‰‡æ—‹è½‰æ™‚ç•«å‡ºçš„ã€Œåœ“åœˆã€ã€‚
                </div>
                <div class="concept-item">
                    <strong>ç£å€ (Sector)</strong>
                    åƒåˆ‡æŠ«è–©ä¸€æ¨£ï¼ŒæŠŠç£è»Œå†åˆ‡æˆä¸€å°æ®µä¸€å°æ®µï¼Œæ˜¯è³‡æ–™å„²å­˜çš„æœ€å°å–®ä½ã€‚
                </div>
                <div class="concept-item">
                    <strong>ç£æŸ± (Cylinder)</strong>
                    æƒ³åƒç¡¬ç¢Ÿæœ‰å¾ˆå¤šç‰‡ç›¤å­ç–Šåœ¨ä¸€èµ·ï¼Œæ‰€æœ‰ç›¤å­ä¸Šã€ŒåŠå¾‘ç›¸åŒã€çš„ç£è»Œé›†åˆèµ·ä¾†ï¼Œåƒä¸€å€‹ç©ºå¿ƒåœ“æŸ±ã€‚
                </div>
            </div>
        </section>

        <!-- 3. äº’å‹•ç¤ºæ„å€ -->
        <section id="interactive-area">
            <h2>äº’å‹•åœ–è§£ (é»æ“Šä¸‹æ–¹æŒ‰éˆ•åˆ‡æ›)</h2>
            
            <div class="interactive-container">
                <!-- æ§åˆ¶æŒ‰éˆ• -->
                <div class="controls">
                    <button class="btn-mode" onclick="setMode('platter')" id="btn-platter">ç£ç‰‡ Platter</button>
                    <button class="btn-mode active" onclick="setMode('track')" id="btn-track">ç£è»Œ Track</button>
                    <button class="btn-mode" onclick="setMode('sector')" id="btn-sector">ç£å€ Sector</button>
                    <button class="btn-mode" onclick="setMode('cylinder')" id="btn-cylinder">ç£æŸ± Cylinder</button>
                </div>

                <!-- ç•«å¸ƒ -->
                <canvas id="hdd-canvas" width="400" height="300"></canvas>
                
                <!-- è®€å¯«é ­æ»‘å‹•æ§åˆ¶ (åƒ…åœ¨æŸäº›æ¨¡å¼é¡¯ç¤ºæœ‰æ•ˆ) -->
                <div class="slider-container">
                    <label for="headSlider">è®€å¯«é ­ä½ç½® (åŠå¾‘)ï¼š</label>
                    <input type="range" id="headSlider" min="1" max="4" value="2" step="1">
                </div>

                <!-- èªªæ˜é¢æ¿ -->
                <div class="info-panel" id="info-panel">
                    <div class="info-title" id="info-title">ç£è»Œ (Track)</div>
                    <div id="info-desc">é€™æ˜¯ç£ç¢Ÿè¡¨é¢ä¸Šçš„ä¸€åœˆåŒå¿ƒåœ“ã€‚</div>
                    <div class="exam-tip" id="exam-tip">ğŸ‘‰ è€ƒè©¦æç¤ºï¼šçœ‹åˆ°ã€Œåœ“å½¢è»Œè·¡ã€å°±è¦æƒ³åˆ°å®ƒï¼</div>
                </div>
            </div>
        </section>

        <!-- 4. é¸é …é€ä¸€ç ´è§£ -->
        <section id="breakdown">
            <h2>é¸é …é€ä¸€è§£æ</h2>
            
            <div class="breakdown-card">
                <div class="breakdown-header">
                    (A) ç£æŸ± (Cylinder) âŒ
                </div>
                <div class="breakdown-content">
                    <strong>éŒ¯èª¤åŸå› ï¼š</strong>ç£æŸ±æ˜¯ã€Œå¤šå€‹ç›¤é¢ã€ä¸Šç›¸åŒåŠå¾‘ç£è»Œçš„é›†åˆï¼ˆå‚ç›´æ¦‚å¿µï¼‰ã€‚é¡Œç›®å•çš„æ˜¯ã€Œå–®ä¸€è¡¨é¢ã€çš„è»Œè·¡ã€‚
                </div>
            </div>

            <div class="breakdown-card">
                <div class="breakdown-header">
                    (B) ç£å€ (Sector) âŒ
                </div>
                <div class="breakdown-content">
                    <strong>éŒ¯èª¤åŸå› ï¼š</strong>ç£å€æ˜¯ç£è»Œè¢«åˆ‡å‰²å¾Œçš„ã€Œæ‰‡å½¢/å¼§å½¢ç‰‡æ®µã€ï¼Œä¸æ˜¯å®Œæ•´çš„åœ“å½¢è»Œè·¡ã€‚å®ƒæ˜¯è³‡æ–™è®€å¯«çš„åŸºæœ¬å–®ä½ï¼ˆé€šå¸¸æ˜¯ 512 bytes æˆ– 4KBï¼‰ã€‚
                </div>
            </div>

            <div class="breakdown-card correct-answer">
                <div class="breakdown-header">
                    (C) ç£è»Œ (Track) âœ… æ­£è§£
                </div>
                <div class="breakdown-content">
                    <strong>æ­£ç¢ºåŸå› ï¼š</strong>è®€å¯«é ­å›ºå®šåœ¨æŸå€‹åŠå¾‘ä½ç½®ï¼Œç•¶ç£ç¢Ÿæ—‹è½‰ä¸€åœˆæ™‚ï¼Œé ­åœ¨ç›¤é¢ä¸Šç•«å‡ºä¾†çš„è·¯å¾‘å°±æ˜¯ä¸€å€‹å®Œæ•´çš„ã€Œåœ“å½¢è»Œè·¡ã€ã€‚
                </div>
            </div>

            <div class="breakdown-card">
                <div class="breakdown-header">
                    (D) ç£ç‰‡ (Platter) âŒ
                </div>
                <div class="breakdown-content">
                    <strong>éŒ¯èª¤åŸå› ï¼š</strong>ç£ç‰‡æ˜¯ç¡¬é«”å¯¦é«”ï¼ˆé‚£å¼µåœ“ç›¤ï¼‰ï¼Œä¸æ˜¯ä¸Šé¢çš„è»Œè·¡åç¨±ã€‚
                </div>
            </div>
        </section>

        <!-- 5. å°æ¸¬é©—å€ -->
        <section id="quiz-area">
            <h2>è‡ªæˆ‘æª¢æ¸¬</h2>
            <p>ç•¶ç£ç¢Ÿæ—‹è½‰æ™‚ï¼Œä¸€å€‹è®€å¯«é ­åœ¨ç£ç¢Ÿè¡¨é¢èµ°éçš„åœ“å½¢è»Œè·¡ï¼Œç¨±ä¹‹ç‚ºï¼Ÿ</p>
            
            <div class="quiz-options">
                <button onclick="checkAnswer('A')">(A) ç£æŸ± (Cylinder)</button>
                <button onclick="checkAnswer('B')">(B) ç£å€ (Sector)</button>
                <button onclick="checkAnswer('C')">(C) ç£è»Œ (Track)</button>
                <button onclick="checkAnswer('D')">(D) ç£ç‰‡ (Platter)</button>
            </div>

            <div id="quiz-result" class="quiz-result">
                <!-- çµæœå°‡é¡¯ç¤ºæ–¼æ­¤ -->
            </div>
        </section>

        <!-- 6. å»¶ä¼¸çŸ¥è­˜ -->
        <section id="extended-knowledge">
            <button class="accordion">ğŸ“š å»¶ä¼¸é–±è®€ï¼šç¡¬ç¢Ÿå®šå€èˆ‡ LBA (é»æ“Šå±•é–‹)</button>
            <div class="panel">
                <p><strong>æ—©æœŸï¼šCHS å®šå€æ³•</strong><br>
                ä»¥å‰é›»è…¦è¦è®€å–ç¡¬ç¢Ÿè³‡æ–™æ™‚ï¼Œå¿…é ˆå‘Šè¨´ç¡¬ç¢Ÿä¸‰å€‹åº§æ¨™ï¼š<br>
                1. ç¬¬å¹¾å±¤ç£æŸ± (<strong>C</strong>ylinder)<br>
                2. ç¬¬å¹¾å€‹è®€å¯«é ­/ç›¤é¢ (<strong>H</strong>ead)<br>
                3. ç¬¬å¹¾å€‹ç£å€ (<strong>S</strong>ector)<br>
                é€™å°±æ˜¯æ‰€è¬‚çš„ CHS æ¨¡å¼ã€‚</p>
                <hr style="border: 0; border-top: 1px dashed #ccc;">
                <p><strong>ç¾ä»£ï¼šLBA é‚è¼¯å€å¡Šå®šå€</strong><br>
                ç¾ä»£ç¡¬ç¢Ÿå®¹é‡å¤ªå¤§ï¼ŒCHS ä¸å¤ ç”¨ä¹Ÿä¸æ–¹ä¾¿ã€‚ç¾åœ¨æ”¹ç”¨ <strong>LBA (Logical Block Addressing)</strong>ï¼Œå°±åƒæŠŠæ‰€æœ‰ç£å€ç·¨è™Ÿæˆ 0, 1, 2, 3... çš„æµæ°´è™Ÿã€‚é›»è…¦åªè¦è·Ÿç¡¬ç¢Ÿèªªã€Œæˆ‘è¦ç¬¬ 1000 è™Ÿç£å€ã€ï¼Œç¡¬ç¢Ÿå…§éƒ¨çš„æ™¶ç‰‡æœƒè‡ªå·±æ›ç®—å®ƒåœ¨å“ªå€‹ç£è»Œä¸Šã€‚é€™æ¨£ä½œæ¥­ç³»çµ±å°±ä¸éœ€è¦çŸ¥é“ç¡¬ç¢Ÿå…§éƒ¨çš„ç‰©ç†æ§‹é€ äº†ã€‚</p>
            </div>
        </section>

    </div>

    <footer>
        <p>äº’å‹•å¼æ•™å­¸ç¶²é  | Designed for Learning HDD Concepts</p>
    </footer>

    <script>
        /**
         * äº’å‹•ç¹ªåœ–å€é‚è¼¯
         */
        const canvas = document.getElementById('hdd-canvas');
        const ctx = canvas.getContext('2d');
        const slider = document.getElementById('headSlider');
        
        // ç‹€æ…‹è®Šæ•¸
        let mode = 'track'; // é è¨­æ¨¡å¼
        let animationFrameId;
        let rotationAngle = 0; // ç”¨æ–¼æ¨¡æ“¬æ—‹è½‰å‹•ç•«

        // å®šç¾©ç¡¬ç¢Ÿå¹¾ä½•åƒæ•¸
        const center = { x: 150, y: 150 }; // ç•«å¸ƒå·¦å´æ”¾ä¿¯è¦–åœ–
        const maxRadius = 120;
        const tracks = [40, 65, 90, 115]; // å››å€‹ç£è»Œçš„åŠå¾‘
        const numSectors = 8; // æ‰‡å€æ•¸é‡

        // åˆå§‹åŒ–
        window.onload = function() {
            setMode('track'); // åˆå§‹ç¹ªè£½
            animate();
            setupAccordion();
        };

        // ç›£è½æ»‘æ¡¿
        slider.addEventListener('input', function() {
            draw();
        });

        // è¨­å®šæ¨¡å¼
        function setMode(newMode) {
            mode = newMode;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.btn-mode').forEach(btn => {
                btn.classList.remove('active', 'highlight-btn');
            });
            document.getElementById('btn-' + newMode).classList.add('active');

            // æ›´æ–°æ–‡å­—èªªæ˜
            updateInfoPanel(newMode);
            
            // é‡ç¹ª
            draw();
        }

        // æ›´æ–°æ–‡å­—èªªæ˜é‚è¼¯
        function updateInfoPanel(currentMode) {
            const titleEl = document.getElementById('info-title');
            const descEl = document.getElementById('info-desc');
            const tipEl = document.getElementById('exam-tip');

            switch(currentMode) {
                case 'platter':
                    titleEl.textContent = 'ç£ç‰‡ (Platter)';
                    descEl.textContent = 'ç¡¬ç¢Ÿå…§éƒ¨çš„åœ“å½¢ç›¤ç‰‡ï¼Œè¡¨é¢å¡—æœ‰ç£æ€§ç‰©è³ªä¾†è¨˜éŒ„è³‡æ–™ã€‚ç¡¬ç¢Ÿå¯èƒ½æœ‰ä¸€ç‰‡æˆ–å¤šç‰‡ Platterã€‚';
                    tipEl.textContent = 'ğŸ‘‰ æç¤ºï¼šé€™æ˜¯æ•´å€‹ã€Œç‰©ç†åœ“ç›¤ã€å¯¦é«”ã€‚';
                    break;
                case 'track':
                    titleEl.textContent = 'ç£è»Œ (Track)';
                    descEl.textContent = 'è®€å¯«é ­ä¸å‹•ï¼Œç›¤ç‰‡æ—‹è½‰æ™‚å½¢æˆçš„åŒå¿ƒåœ“è»Œè·¡ã€‚å°±åƒæ“å ´çš„è·‘é“ä¸€æ¨£ã€‚';
                    tipEl.textContent = 'ğŸ‘‰ è€ƒè©¦æç¤ºï¼šé¡Œç›®é—œéµå­—ã€Œåœ“å½¢è»Œè·¡ã€å°±æ˜¯æŒ‡é€™è£¡ï¼';
                    break;
                case 'sector':
                    titleEl.textContent = 'ç£å€ (Sector)';
                    descEl.textContent = 'ç£è»Œå†è¢«åˆ‡å‰²æˆè¨±å¤šå°æ®µçš„åœ“å¼§ï¼ˆæˆ–æ‰‡å½¢å€åŸŸï¼‰ã€‚é€šå¸¸æ˜¯è³‡æ–™è®€å¯«çš„æœ€å°ç‰©ç†å–®ä½ (512 Bytes)ã€‚';
                    tipEl.textContent = 'ğŸ‘‰ æç¤ºï¼šæƒ³åƒæŠ«è–©åˆ‡ç‰‡ï¼Œæˆ–è€…è·‘é“ä¸Šçš„ä¸€å°æ ¼ã€‚';
                    break;
                case 'cylinder':
                    titleEl.textContent = 'ç£æŸ± (Cylinder)';
                    descEl.textContent = 'å‡è¨­æœ‰å¤šå€‹ç›¤ç‰‡å †ç–Šï¼Œæ‰€æœ‰ç›¤é¢ä¸Šã€Œç›¸åŒåŠå¾‘ã€çš„ç£è»Œå‚ç›´é›†åˆèµ·ä¾†ï¼Œå½¢æˆä¸€å€‹ç©ºå¿ƒåœ“æŸ±é«”ã€‚';
                    tipEl.textContent = 'ğŸ‘‰ æç¤ºï¼šé—œéµå­—æ˜¯ã€Œå¤šç›¤é¢ã€æˆ–ã€Œå‚ç›´å †ç–Šã€ã€‚';
                    break;
            }
        }

        // ä¸»ç¹ªåœ–å¾ªç’°
        function animate() {
            rotationAngle += 0.02; // æ—‹è½‰é€Ÿåº¦
            draw();
            animationFrameId = requestAnimationFrame(animate);
        }

        // æ ¸å¿ƒç¹ªåœ–å‡½æ•¸
        function draw() {
            // æ¸…é™¤ç•«å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // åˆ¤æ–·æ˜¯å¦ç‚º Cylinder æ¨¡å¼ï¼Œå¦‚æœæ˜¯ï¼Œæˆ‘å€‘éœ€è¦èª¿æ•´ä½ˆå±€ç•«å´è¦–åœ–
            if (mode === 'cylinder') {
                drawCylinderMode();
            } else {
                drawTopDownView(center.x, center.y, true);
            }
        }

        // ç¹ªè£½ä¿¯è¦–åœ– (Top-Down View)
        function drawTopDownView(cx, cy, showHead) {
            // 1. ç•«ç£ç‰‡åº•è‰² (Platter)
            ctx.beginPath();
            ctx.arc(cx, cy, maxRadius + 10, 0, Math.PI * 2);
            ctx.fillStyle = (mode === 'platter') ? '#bfdbfe' : '#f1f5f9'; // Platter æ¨¡å¼é«˜äº®è—è‰²
            ctx.fill();
            ctx.strokeStyle = '#94a3b8';
            ctx.lineWidth = 2;
            ctx.stroke();

            // 2. ç•«ç£è»Œ (Tracks)
            // è®€å¯«é ­æ‰€åœ¨çš„ Track Index (0-3)
            let activeTrackIndex = parseInt(slider.value) - 1; 

            tracks.forEach((radius, index) => {
                ctx.beginPath();
                ctx.arc(cx, cy, radius, 0, Math.PI * 2);
                
                // æ¨£å¼åˆ¤æ–·
                if (mode === 'track' && index === activeTrackIndex) {
                    ctx.lineWidth = 6;
                    ctx.strokeStyle = '#f59e0b'; // Orange highlight
                } else if (mode === 'sector' && index === activeTrackIndex) {
                     ctx.lineWidth = 2;
                     ctx.strokeStyle = '#cbd5e1';
                } else {
                    ctx.lineWidth = 2;
                    ctx.strokeStyle = '#cbd5e1';
                }
                ctx.stroke();
            });

            // 3. ç•« Sector åˆ†éš”ç·š (æ¨¡æ“¬æ—‹è½‰)
            ctx.save();
            ctx.translate(cx, cy);
            ctx.rotate(rotationAngle); // è®“æ‰‡å€ç·šæ—‹è½‰

            for (let i = 0; i < numSectors; i++) {
                let angle = (Math.PI * 2 / numSectors) * i;
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(Math.cos(angle) * maxRadius, Math.sin(angle) * maxRadius);
                ctx.strokeStyle = '#e2e8f0';
                ctx.lineWidth = 1;
                ctx.stroke();
            }

            // 4. ç‰¹æ®Šé«˜äº® Sector
            if (mode === 'sector') {
                // é«˜äº®å…¶ä¸­ä¸€å€‹ Sector åœ¨ç›®å‰é¸å®šçš„ Track ä¸Š
                let highlightAngleStart = 0;
                let highlightAngleEnd = Math.PI * 2 / numSectors;
                let r = tracks[activeTrackIndex];
                
                // ç‚ºäº†è¦–è¦ºæ¸…æ¥šï¼Œæˆ‘å€‘ç•«ä¸€å€‹å¼§å½¢è‰²å¡Š
                // è¨ˆç®—å…§å¾‘èˆ‡å¤–å¾‘ (æ¨¡æ“¬ Track çš„å¯¬åº¦)
                let trackWidth = 20; 
                let innerR = r - trackWidth/2;
                let outerR = r + trackWidth/2;

                ctx.beginPath();
                ctx.arc(0, 0, outerR, highlightAngleStart, highlightAngleEnd);
                ctx.arc(0, 0, innerR, highlightAngleEnd, highlightAngleStart, true);
                ctx.fillStyle = '#f59e0b';
                ctx.fill();
            }

            ctx.restore(); // æ¢å¾©æ—‹è½‰å‰çš„ç‹€æ…‹

            // 5. ç•«è®€å¯«é ­ (Read/Write Head)
            if (showHead) {
                let headR = tracks[activeTrackIndex];
                // è®€å¯«é ­æ˜¯å›ºå®šçš„ï¼Œä¸éš¨ç›¤ç‰‡æ—‹è½‰
                let headX = cx + headR; 
                let headY = cy;

                // ç•«è®€å¯«è‡‚
                ctx.beginPath();
                ctx.moveTo(cx + maxRadius + 40, cy + 80); // è½‰è»¸å¤§è‡´ä½ç½®
                ctx.lineTo(headX, headY);
                ctx.lineWidth = 4;
                ctx.strokeStyle = '#64748b';
                ctx.stroke();

                // ç•«é ­
                ctx.fillStyle = '#dc2626'; // ç´…è‰²é ­
                ctx.fillRect(headX - 6, headY - 6, 12, 12);
                
                // æ–‡å­—æ¨™ç¤º
                ctx.fillStyle = '#333';
                ctx.font = '12px sans-serif';
                ctx.fillText("è®€å¯«é ­", headX - 20, headY - 15);
            }
            
            // ä¸­å¿ƒè»¸
            ctx.beginPath();
            ctx.arc(cx, cy, 10, 0, Math.PI*2);
            ctx.fillStyle = '#94a3b8';
            ctx.fill();
        }

        // ç¹ªè£½ç£æŸ±æ¨¡å¼ (é¡¯ç¤ºå †ç–Šæ¦‚å¿µ)
        function drawCylinderMode() {
            // å·¦é‚Šç•«å°ä¸€é»çš„ä¿¯è¦–åœ–
            drawTopDownView(100, 150, false);
            
            // å³é‚Šç•«å´é¢å †ç–Šåœ–
            const stackX = 280;
            const stackY = 150;
            const diskHeight = 150;
            const diskWidth = 20; // æ©¢åœ“é«˜åº¦
            
            // ç•«ä¸‰ç‰‡ç¢Ÿç‰‡å´é¢
            for(let i=0; i<3; i++) {
                let y = 100 + i * 40;
                
                // ç¢Ÿç‰‡æœ¬é«”
                ctx.beginPath();
                ctx.ellipse(stackX, y, 60, 10, 0, 0, Math.PI*2);
                ctx.fillStyle = '#cbd5e1';
                ctx.fill();
                ctx.stroke();
                
                // é«˜äº®é¸ä¸­çš„ç£è»Œ (ç”¨ç´…è‰²ç·šæ¢è¡¨ç¤ºè©²å±¤çš„ Track)
                let activeTrackIndex = parseInt(slider.value) - 1; 
                // å°‡åŠå¾‘æ˜ å°„åˆ°æ©¢åœ“å¯¬åº¦ (40~115 -> 10~50)
                let visualR = (tracks[activeTrackIndex] / maxRadius) * 60;

                ctx.beginPath();
                ctx.ellipse(stackX, y, visualR, 3, 0, 0, Math.PI*2);
                ctx.lineWidth = 2;
                ctx.strokeStyle = '#dc2626'; // ç´…è‰²è¡¨ç¤º Cylinder è²«ç©¿
                ctx.stroke();
            }

            // ç•«è™›ç·šé€£æ¥è¡¨ç¤º "åœ“æŸ±" æ¦‚å¿µ
            let activeTrackIndex = parseInt(slider.value) - 1; 
            let visualR = (tracks[activeTrackIndex] / maxRadius) * 60;
            
            ctx.beginPath();
            ctx.moveTo(stackX - visualR, 100);
            ctx.lineTo(stackX - visualR, 180);
            ctx.moveTo(stackX + visualR, 100);
            ctx.lineTo(stackX + visualR, 180);
            ctx.setLineDash([5, 5]);
            ctx.strokeStyle = '#f59e0b';
            ctx.stroke();
            ctx.setLineDash([]); // Reset

            // æ–‡å­—
            ctx.fillStyle = '#333';
            ctx.font = '14px sans-serif';
            ctx.fillText("å´é¢åœ– (Side View)", 220, 230);
            ctx.fillText("ç›¸åŒçš„ Track å‚ç›´å°é½Š", 210, 250);
            ctx.fillStyle = '#f59e0b';
            ctx.fillText("= ç£æŸ± Cylinder", 230, 270);
            
            // åœ¨å·¦é‚Šåœ–ä¸Šæ¨™ç¤ºç¾åœ¨é¸çš„æ˜¯å“ªä¸€åœˆ
            let cx = 100;
            let cy = 150;
            let r = tracks[activeTrackIndex];
            ctx.beginPath();
            ctx.arc(cx, cy, r, 0, Math.PI*2);
            ctx.lineWidth = 4;
            ctx.strokeStyle = '#dc2626';
            ctx.stroke();
        }

        /**
         * æ¸¬é©—é‚è¼¯
         */
        function checkAnswer(answer) {
            const resultDiv = document.getElementById('quiz-result');
            resultDiv.className = 'quiz-result'; // é‡ç½®
            
            if (answer === 'C') {
                // æ­£ç¢º
                resultDiv.innerHTML = `
                    <h3>âœ… ç­”å°äº†ï¼</h3>
                    <p>å°±æ˜¯ã€Œç£è»Œ (Track)ã€ã€‚è®€å¯«é ­ä¸å‹•ï¼Œç›¤å­è½‰ï¼Œå°±åƒåœ“è¦ç•«åœ“ä¸€æ¨£ï¼Œç•«å‡ºä¾†çš„å°±æ˜¯ç£è»Œã€‚</p>
                `;
                resultDiv.classList.add('correct');
            } else {
                // éŒ¯èª¤
                let feedback = "";
                if(answer === 'A') feedback = "ç£æŸ±æ˜¯å¤šå±¤å †ç–Šçš„æ¦‚å¿µå–”ï¼";
                if(answer === 'B') feedback = "ç£å€æ˜¯æ‰‡å½¢çš„ä¸€å°å¡Šï¼Œä¸æ˜¯æ•´åœˆè»Œè·¡ã€‚";
                if(answer === 'D') feedback = "ç£ç‰‡æ˜¯æ•´å€‹ç›¤å­å•¦ï¼";

                resultDiv.innerHTML = `
                    <h3>âŒ ç­”éŒ¯å›‰</h3>
                    <p>${feedback} é¡Œç›®å•çš„æ˜¯ã€Œåœ“å½¢è»Œè·¡ã€ã€‚</p>
                    <button class="review-btn" onclick="goToReview()">å¸¶æˆ‘å›ä¸Šé¢çœ‹å‹•ç•«</button>
                `;
                resultDiv.classList.add('wrong');
            }
        }

        function goToReview() {
            // æ²å‹•åˆ°äº’å‹•å€
            document.getElementById('interactive-area').scrollIntoView({ behavior: 'smooth' });
            
            // å¼·åˆ¶åˆ‡æ›åˆ° Track æ¨¡å¼ä¸¦çµ¦äºˆè¦–è¦ºæç¤º
            setMode('track');
            
            // æŒ‰éˆ•é–ƒçˆæç¤º
            const trackBtn = document.getElementById('btn-track');
            trackBtn.classList.add('highlight-btn');
            
            // 3ç§’å¾Œç§»é™¤é–ƒçˆ
            setTimeout(() => {
                trackBtn.classList.remove('highlight-btn');
            }, 3000);
        }

        /**
         * Accordion é‚è¼¯
         */
        function setupAccordion() {
            var acc = document.getElementsByClassName("accordion");
            for (var i = 0; i < acc.length; i++) {
                acc[i].addEventListener("click", function() {
                    this.classList.toggle("active-acc");
                    var panel = this.nextElementSibling;
                    if (panel.style.maxHeight) {
                        panel.style.maxHeight = null;
                    } else {
                        panel.style.maxHeight = panel.scrollHeight + "px";
                    }
                });
            }
        }

    </script>
</body>
</html>