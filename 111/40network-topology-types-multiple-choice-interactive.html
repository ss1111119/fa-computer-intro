<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«– - è¤‡é¸é¡Œ 40ï¼šç¶²è·¯æ‹“æ¨¸é¡å‹</title>
    <style>
        /* --- å…¨åŸŸè¨­å®š --- */
        :root {
            --primary-color: #2c3e50; /* æ·±è— - å°ˆæ¥­æ„Ÿ */
            --accent-color: #e74c3c; /* ç´…è‰² - é‡é» */
            --success-color: #27ae60; /* ç¶ è‰² - æ­£ç¢º */
            --highlight-bg: #ecf0f1; /* æ·ºç° - èƒŒæ™¯ */
            --text-color: #333;
            --card-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: #f4f7f6;
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* --- æ¨™é¡Œå€ --- */
        header {
            text-align: center;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8rem;
        }

        .sub-title {
            color: #7f8c8d;
            font-weight: bold;
            margin-top: 10px;
        }

        /* --- ç« ç¯€é€šç”¨æ¨£å¼ --- */
        section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #fff;
        }

        h2 {
            color: var(--primary-color);
            border-left: 5px solid var(--accent-color);
            padding-left: 10px;
            margin-top: 0;
        }

        .highlight-box {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .term {
            font-weight: bold;
            color: var(--accent-color);
        }

        /* --- äº’å‹•ä¸€ï¼šæ‹–æ”¾è¾¨è­˜ --- */
        .drag-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .source-zone {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            min-height: 60px;
        }

        .draggable-item {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: move;
            user-select: none;
            transition: transform 0.2s;
            box-shadow: var(--card-shadow);
        }

        .draggable-item:hover {
            transform: scale(1.05);
            background-color: #34495e;
        }

        .target-zone {
            width: 100%;
            max-width: 400px;
            height: 150px;
            border: 3px dashed #bdc3c7;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #f9f9f9;
            transition: background 0.3s;
        }

        .target-zone.drag-over {
            background-color: #d5f5e3;
            border-color: var(--success-color);
        }

        .target-zone h3 {
            margin: 0;
            color: #7f8c8d;
            pointer-events: none;
        }

        /* --- äº’å‹•äºŒï¼šè¤‡é¸é¡Œ --- */
        .question-box {
            background-color: var(--highlight-bg);
            padding: 20px;
            border-radius: 10px;
        }

        .options-list label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .options-list label:hover {
            background-color: #eaf2f8;
        }

        .options-list input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s;
        }

        .btn:hover {
            background-color: #c0392b;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .feedback.success {
            background-color: #d4edda;
            color: #155724;
            display: block;
        }

        .feedback.error {
            background-color: #f8d7da;
            color: #721c24;
            display: block;
        }

        /* --- æ¦‚å¿µé»æ“Šäº’å‹• --- */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .concept-btn {
            padding: 10px;
            background: white;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .concept-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .concept-display {
            background: #fdfefe;
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 8px;
            min-height: 80px;
        }

        /* --- é™·é˜±å¡ç‰‡ --- */
        .trap-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .trap-card {
            flex: 1;
            min-width: 200px;
            background: #ffe6e6;
            border: 1px solid #ffcccc;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            transition: opacity 0.5s;
        }

        .trap-card:hover {
            background: #ffcccc;
        }

        .trap-card h4 {
            margin-top: 0;
            color: #c0392b;
        }

        .trap-dismiss {
            font-size: 0.8rem;
            color: #7f8c8d;
            text-align: right;
            margin-top: 10px;
            font-style: italic;
        }

        /* --- è‡ªæˆ‘æª¢æ¸¬ --- */
        .quiz-item {
            margin-bottom: 15px;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 10px;
        }
        
        .hint-text {
            display: none;
            color: var(--success-color);
            margin-top: 5px;
            font-weight: bold;
        }

        /* --- åº•éƒ¨æ§åˆ¶ --- */
        .footer-controls {
            text-align: center;
            margin-top: 40px;
            border-top: 1px solid #ddd;
            padding-top: 20px;
        }

        .reset-btn {
            background-color: #95a5a6;
        }
        
        .reset-btn:hover {
            background-color: #7f8c8d;
        }

        /* --- éš±è—å€å¡Š (è§£æç”¨) --- */
        .analysis-detail {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background-color: #e8f8f5;
            border-left: 4px solid var(--success-color);
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>é›»è…¦æ¦‚è«– - è¤‡é¸é¡Œ 40</h1>
        <div class="sub-title">å–®å…ƒï¼šé›»è…¦ç¶²è·¯çš„æ‹“æ¨¸çµæ§‹ (Network Topology)</div>
    </header>

    <!-- 1. æ ¸å¿ƒè§€å¿µå€ -->
    <section id="concept-section">
        <h2>1. æ ¸å¿ƒè§€å¿µå»ºç«‹</h2>
        <p>åœ¨åšé€™ä¸€é¡Œä¹‹å‰ï¼Œå…ˆææ‡‚ä¸‰å€‹åè©ï¼ˆè£œæ•™åå¸«å£è¨£ï¼‰ï¼š</p>
        <ul>
            <li><span class="term">ç¶²è·¯æ‹“æ¨¸ (Network Topology)</span>ï¼šæè¿°é›»è…¦æ€éº¼ã€Œé€£ç·šã€çš„çµæ§‹åœ–ï¼ˆå½¢ç‹€ï¼‰ã€‚</li>
            <li><span class="term">ç¯€é» (Node)</span>ï¼šå°±æ˜¯é›»è…¦ã€å°è¡¨æ©Ÿæˆ–é›†ç·šå™¨ç­‰è¨­å‚™ã€‚</li>
            <li><span class="term">é€£ç·š (Link)</span>ï¼šè¨­å‚™ä¹‹é–“çš„é€£æ¥ç·šè·¯ã€‚</li>
        </ul>

        <div class="highlight-box">
            <strong>ğŸ”¥ è¶…é‡è¦è€ƒé»ï¼š</strong><br>
            åªè¦èƒ½æè¿°ã€Œè¨­å‚™å¦‚ä½•é€£æ¥ã€çš„å½¢ç‹€ï¼Œå°±å¯ä»¥ç¨±ç‚ºä¸€ç¨®æ‹“æ¨¸ï¼<br>
            è€ƒè©¦ä¸ä¸€å®šåªè€ƒæ¨™æº–åç¨±ï¼ˆå¦‚æ˜Ÿç‹€ï¼‰ï¼Œåªè¦æ˜¯æœ‰é‚è¼¯çš„å½¢ç‹€ï¼ˆå¦‚ç›´æ¢ç‹€ï¼‰ï¼Œ<br>
            <strong>èƒ½å¤ ç•«å¾—å‡ºçµæ§‹åœ–çš„ï¼Œé€šå¸¸éƒ½ç®—ï¼</strong>
        </div>

        <div class="concept-grid">
            <div class="concept-btn" onclick="showConcept('tree', this)">æ¨¹ç‹€ (Tree)</div>
            <div class="concept-btn" onclick="showConcept('ring', this)">ç’°ç‹€ (Ring)</div>
            <div class="concept-btn" onclick="showConcept('star', this)">æ˜Ÿç‹€ (Star)</div>
            <div class="concept-btn" onclick="showConcept('linear', this)">ç›´æ¢ç‹€ (Linear)</div>
            <div class="concept-btn" onclick="showConcept('mesh', this)">ç¶²ç‹€ (Mesh)</div>
        </div>
        <div id="concept-display-area" class="concept-display">
            è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•ï¼ŒæŸ¥çœ‹è©²æ‹“æ¨¸çš„çµæ§‹èˆ‡æ¯”å–»ã€‚
        </div>
    </section>

    <!-- 2. æ‹“æ¨¸è¾¨è­˜äº’å‹• (Drag and Drop) -->
    <section id="interactive-section">
        <h2>2. è§€å¿µå¯¦æˆ°ï¼šå“ªäº›æ˜¯æ‹“æ¨¸ï¼Ÿ</h2>
        <p>è«‹å°‡ä¸‹æ–¹çš„å¡ç‰‡ï¼Œæ‹–æ‹‰ï¼ˆæˆ–é»æ“Šé¸å–ï¼‰åˆ°ã€Œå¯ä½œç‚ºç¶²è·¯æ‹“æ¨¸ã€çš„æ¡†æ¡†ä¸­ã€‚</p>
        
        <div class="drag-container">
            <div class="source-zone" id="source-zone">
                <div class="draggable-item" draggable="true" id="item-A">æ¨¹ç‹€</div>
                <div class="draggable-item" draggable="true" id="item-B">ç’°ç‹€</div>
                <div class="draggable-item" draggable="true" id="item-C">æ˜Ÿç‹€</div>
                <div class="draggable-item" draggable="true" id="item-D">ç›´æ¢ç‹€</div>
                <div class="draggable-item" draggable="true" id="item-E">ç¶²ç‹€</div>
            </div>

            <div class="target-zone" id="target-zone">
                <h3>ğŸ‘‡ æ‹–æ”¾åˆ°é€™è£¡ ğŸ‘‡</h3>
                <div id="target-content" style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center; width:100%;"></div>
            </div>
            
            <button class="btn" onclick="checkDragAnswer()">æª¢æŸ¥åˆ†é¡ç­”æ¡ˆ</button>
            <div id="drag-feedback" class="feedback"></div>
        </div>
    </section>

    <!-- 3. è¤‡é¸é¡Œä½œç­”å€ -->
    <section id="quiz-section">
        <h2>3. è¤‡é¸é¡Œ 40 (æ¨¡æ“¬è€ƒé¡Œ)</h2>
        <div class="question-box">
            <p><strong>é¡Œç›®ï¼šä¸‹åˆ—ä½•è€…å¯ä½œç‚ºé›»è…¦ç¶²è·¯çš„æ‹“æ¨¸åœ–ï¼Ÿï¼ˆæœ¬é¡Œå¯è¤‡é¸ï¼‰</strong></p>
            <div class="options-list">
                <label><input type="checkbox" name="q40" value="A"> (A) æ¨¹ç‹€</label>
                <label><input type="checkbox" name="q40" value="B"> (B) ç’°ç‹€</label>
                <label><input type="checkbox" name="q40" value="C"> (C) æ˜Ÿç‹€</label>
                <label><input type="checkbox" name="q40" value="D"> (D) ç›´æ¢ç‹€</label>
                <label><input type="checkbox" name="q40" value="E"> (E) ç¶²ç‹€</label>
            </div>
            <button class="btn" onclick="checkQuizAnswer()">é€å‡ºç­”æ¡ˆ</button>
            <div id="quiz-feedback" class="feedback"></div>
        </div>

        <!-- 4. é¸é …è§£æ (ä½œç­”å¾Œå¯åƒè€ƒ) -->
        <div style="margin-top: 30px;">
            <h3>ğŸ” é¸é …è©³ç´°è§£æï¼ˆé»æ“Šå±•é–‹ï¼‰</h3>
            <div class="options-list">
                <div onclick="toggleAnalysis('analysis-A')" style="cursor:pointer; padding:5px; border-bottom:1px solid #eee;">ğŸ‘‰ (A) æ¨¹ç‹€</div>
                <div id="analysis-A" class="analysis-detail">â­• <strong>å¯ä»¥ï¼</strong>åƒå®¶æ—æ¨¹æˆ–å…¬å¸çµ„ç¹”åœ–ï¼Œç”±ä¸Šå¾€ä¸‹åˆ†æ”¯ï¼Œçµæ§‹æ¸…æ™°ã€‚</div>

                <div onclick="toggleAnalysis('analysis-B')" style="cursor:pointer; padding:5px; border-bottom:1px solid #eee;">ğŸ‘‰ (B) ç’°ç‹€</div>
                <div id="analysis-B" class="analysis-detail">â­• <strong>å¯ä»¥ï¼</strong>æ‰€æœ‰é›»è…¦æ‰‹ç‰½æ‰‹åœæˆä¸€åœˆï¼Œè³‡æ–™å–®å‘ç¹åœˆå‚³é€ã€‚</div>

                <div onclick="toggleAnalysis('analysis-C')" style="cursor:pointer; padding:5px; border-bottom:1px solid #eee;">ğŸ‘‰ (C) æ˜Ÿç‹€</div>
                <div id="analysis-C" class="analysis-detail">â­• <strong>å¯ä»¥ï¼</strong>æœ€å¸¸è¦‹ï¼ä¸­é–“æœ‰ä¸€å°é›†ç·šå™¨(Hub)ï¼Œå¤§å®¶å‘ˆæ”¾å°„ç‹€é€£åˆ°ä¸­é–“ã€‚</div>

                <div onclick="toggleAnalysis('analysis-D')" style="cursor:pointer; padding:5px; border-bottom:1px solid #eee;">ğŸ‘‰ (D) ç›´æ¢ç‹€</div>
                <div id="analysis-D" class="analysis-detail">â­• <strong>å¯ä»¥ï¼</strong>é›–ç„¶åå­—å¾ˆç™½è©±ï¼ˆå­¸è¡“å¸¸ç¨±åŒ¯æµæ’ Busï¼‰ï¼Œä½†ç¢ºå¯¦æè¿°äº†ã€Œä¸€æ¢ä¸»å¹¹ç·šé€£è²«å¤§å®¶ã€çš„çµæ§‹ã€‚</div>

                <div onclick="toggleAnalysis('analysis-E')" style="cursor:pointer; padding:5px; border-bottom:1px solid #eee;">ğŸ‘‰ (E) ç¶²ç‹€</div>
                <div id="analysis-E" class="analysis-detail">â­• <strong>å¯ä»¥ï¼</strong>æœ€è¤‡é›œä¹Ÿæœ€å¯é ï¼Œå¤§å®¶å½¼æ­¤äº‚é€£ï¼Œåƒèœ˜è››ç¶²ä¸€æ¨£ã€‚</div>
            </div>
        </div>
    </section>

    <!-- 5. è€ƒè©¦é™·é˜±å¡ -->
    <section>
        <h2>4. å¸¸è¦‹è€ƒè©¦é™·é˜± (é»æ“Šå¡ç‰‡æ¶ˆé™¤ææ‡¼)</h2>
        <div class="trap-container">
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 1ï¼šåè©è¿·æ€</h4>
                <p>ä»¥ç‚ºåªæœ‰èª²æœ¬ä¸Šçš„ã€Œæ¨™æº–è‹±æ–‡åè©ã€æ‰ç®—ï¼Ÿ<br>âŒ éŒ¯ï¼åªè¦èƒ½ç•«å‡ºçµæ§‹åœ–å°±ç®—ã€‚</p>
                <div class="trap-dismiss">é»æ“Šæˆ‘æ‡‚äº†</div>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 2ï¼šç›´æ¢ç‹€ææ‡¼ç—‡</h4>
                <p>çœ‹åˆ°ã€Œç›´æ¢ç‹€ã€è¦ºå¾—å¤ªå£èªä¸æ•¢é¸ï¼Ÿ<br>âŒ éŒ¯ï¼å®ƒæ˜¯åŒ¯æµæ’(Bus)çš„å½¢ç‹€æè¿°ã€‚</p>
                <div class="trap-dismiss">é»æ“Šæˆ‘æ‡‚äº†</div>
            </div>
            <div class="trap-card" onclick="dismissTrap(this)">
                <h4>é™·é˜± 3ï¼šè¤‡é¸é¡Œä¸æ•¢å…¨é¸</h4>
                <p>è¦ºå¾—ç­”æ¡ˆæ˜¯ (A)(B)(C)(D)(E) å¾ˆå¥‡æ€ªï¼Ÿ<br>âŒ éŒ¯ï¼é€™é¡Œå°±æ˜¯åœ¨è€ƒè§€å¿µå»£åº¦ã€‚</p>
                <div class="trap-dismiss">é»æ“Šæˆ‘æ‡‚äº†</div>
            </div>
        </div>
    </section>

    <!-- 6. è‡ªæˆ‘æª¢æ¸¬ -->
    <section>
        <h2>5. è‡ªæˆ‘æª¢æ¸¬ (ä¸çµ¦ç­”æ¡ˆï¼Œè«‹æ€è€ƒ)</h2>
        
        <div class="quiz-item">
            <p><strong>Q1ï¼šä»€éº¼æƒ…æ³ä¸‹æœƒä½¿ç”¨æˆæœ¬æœ€é«˜çš„ã€Œç¶²ç‹€æ‹“æ¨¸ã€ï¼Ÿ</strong></p>
            <button onclick="toggleHint('hint1')">é¡¯ç¤ºæç¤º</button>
            <div id="hint1" class="hint-text">ğŸ’¡ æç¤ºï¼šç•¶é€™å€‹ç¶²è·¯çµ•å°ä¸èƒ½æ–·ç·šï¼Œéœ€è¦æ¥µé«˜å¯é åº¦æ™‚ï¼ˆå¦‚è»äº‹ã€æ ¸å¿ƒä¼ºæœå™¨ï¼‰ã€‚</div>
        </div>

        <div class="quiz-item">
            <p><strong>Q2ï¼šç‚ºä»€éº¼å®¶è£¡æˆ–è¾¦å…¬å®¤æœ€å¸¸çœ‹åˆ°ã€Œæ˜Ÿç‹€æ‹“æ¨¸ã€ï¼Ÿ</strong></p>
            <button onclick="toggleHint('hint2')">é¡¯ç¤ºæç¤º</button>
            <div id="hint2" class="hint-text">ğŸ’¡ æç¤ºï¼šå› ç‚ºç¶­ä¿®æœ€æ–¹ä¾¿ï¼ä¸€å°é›»è…¦å£æ‰ä¸æœƒå½±éŸ¿å…¶ä»–äººï¼Œåªçœ‹ä¸­é–“é‚£å°é›†ç·šå™¨/äº¤æ›å™¨å°±å¥½ã€‚</div>
        </div>

        <div class="quiz-item">
            <p><strong>Q3ï¼šè€ƒè©¦çœ‹åˆ°ã€Œå¯ä½œç‚ºæ‹“æ¨¸ã€ï¼Œåˆ¤æ–·ä¾æ“šæ˜¯ä»€éº¼ï¼Ÿ</strong></p>
            <button onclick="toggleHint('hint3')">é¡¯ç¤ºæç¤º</button>
            <div id="hint3" class="hint-text">ğŸ’¡ æç¤ºï¼šå•è‡ªå·±ã€Œé€™å€‹åè©èƒ½ä¸èƒ½ç•«å‡ºä¸€ç¨®é€£ç·šçš„å½¢ç‹€ï¼Ÿã€å¦‚æœå¯ä»¥ï¼Œå°±é¸ï¼</div>
        </div>
    </section>

    <div class="footer-controls">
        <button class="btn reset-btn" onclick="resetAll()">ğŸ”„ é‡ç½®æ‰€æœ‰ç·´ç¿’</button>
    </div>

</div>

<script>
    // --- 1. æ¦‚å¿µå±•ç¤ºé‚è¼¯ ---
    const concepts = {
        'tree': {
            desc: 'å±¤ç´šå¼çµæ§‹ï¼Œåƒå€’éä¾†çš„æ¨¹ã€‚ä¸Šæ–¹æ˜¯æ ¹ç¯€é»ï¼Œä¸‹æ–¹æ˜¯åˆ†æ”¯ã€‚',
            metaphor: 'ğŸŒ³ ç”Ÿæ´»æ¯”å–»ï¼šå®¶æ—æ—è­œã€å…¬å¸çµ„ç¹”åœ–ï¼ˆç¸½ç¶“ç† -> ç¶“ç† -> å“¡å·¥ï¼‰ã€‚'
        },
        'ring': {
            desc: 'å°é–‰å¼åœ“ç’°çµæ§‹ï¼Œè¨Šè™Ÿå–®å‘å‚³è¼¸ã€‚è‹¥æ–·ä¸€é»ï¼Œå…¨ç¶²ç™±ç˜“ï¼ˆé™¤éæœ‰é›™ç’°ï¼‰ã€‚',
            metaphor: 'ğŸ’ ç”Ÿæ´»æ¯”å–»ï¼šå¤§é¢¨å¹éŠæˆ²ï¼Œå¤§å®¶æ‰‹ç‰½æ‰‹åœæˆä¸€åœˆã€‚'
        },
        'star': {
            desc: 'ä¸­å¤®æ§åˆ¶çµæ§‹ã€‚æ‰€æœ‰ç¯€é»éƒ½é€£åˆ°ä¸­é–“çš„é›†ç·šå™¨(Hub)æˆ–äº¤æ›å™¨(Switch)ã€‚',
            metaphor: 'â­ ç”Ÿæ´»æ¯”å–»ï¼šè‡ªè¡Œè»Šè¼ªï¼ˆè¼»å°„ç‹€ï¼‰ã€å¤ªé™½ç³»ï¼ˆè¡Œæ˜Ÿç¹å¤ªé™½ï¼‰ã€‚'
        },
        'linear': {
            desc: 'æ‰€æœ‰è¨­å‚™å…±ç”¨ä¸€æ¢ä¸»å¹¹ç·šï¼ˆéª¨å¹¹ï¼‰ã€‚é ­å°¾éœ€æœ‰çµ‚ç«¯é›»é˜»ã€‚åˆç¨±åŒ¯æµæ’(Bus)æ‹“æ¨¸ã€‚',
            metaphor: 'ğŸ“ ç”Ÿæ´»æ¯”å–»ï¼šä¸€æ¢é«˜é€Ÿå…¬è·¯ï¼Œæ²¿è·¯æœ‰ä¸åŒçš„äº¤æµé“å‡ºå£ã€‚'
        },
        'mesh': {
            desc: 'ç¯€é»ä¹‹é–“æœ‰å¤šé‡é€£ç·šã€‚å¯é åº¦æœ€é«˜ï¼Œä½†ç·šè·¯æˆæœ¬æœ€è²´ã€‚',
            metaphor: 'ğŸ•¸ï¸ ç”Ÿæ´»æ¯”å–»ï¼šèœ˜è››ç¶²ã€äººéš›é—œä¿‚ç¶²ï¼ˆæœ‹å‹çš„æœ‹å‹ä¹Ÿæ˜¯æœ‹å‹ï¼‰ã€‚'
        }
    };

    function showConcept(type, btnElement) {
        // æ›´æ–°é¡¯ç¤ºæ–‡å­—
        const display = document.getElementById('concept-display-area');
        display.innerHTML = `<strong>çµæ§‹èªªæ˜ï¼š</strong>${concepts[type].desc}<br><br><strong>${concepts[type].metaphor}</strong>`;
        
        // æ›´æ–°æŒ‰éˆ•æ¨£å¼
        document.querySelectorAll('.concept-btn').forEach(btn => btn.classList.remove('active'));
        btnElement.classList.add('active');
    }

    // --- 2. æ‹–æ”¾é‚è¼¯ (æ”¯æ´æ»‘é¼ èˆ‡ç°¡æ˜“é»æ“Š) ---
    const draggables = document.querySelectorAll('.draggable-item');
    const dropZone = document.getElementById('target-zone');
    const sourceZone = document.getElementById('source-zone');
    const targetContent = document.getElementById('target-content');

    // ç‚ºæ¯å€‹é …ç›®æ·»åŠ äº‹ä»¶
    draggables.forEach(draggable => {
        draggable.addEventListener('dragstart', () => {
            draggable.classList.add('dragging');
        });

        draggable.addEventListener('dragend', () => {
            draggable.classList.remove('dragging');
        });

        // é»æ“Šç§»å‹•æ¨¡å¼ (é©åˆæ‰‹æ©Ÿæ“ä½œä¸æ˜“æ‹–æ‹‰æ™‚)
        draggable.addEventListener('click', () => {
            if (draggable.parentElement.id === 'source-zone') {
                targetContent.appendChild(draggable);
            } else {
                sourceZone.appendChild(draggable);
            }
        });
    });

    dropZone.addEventListener('dragover', e => {
        e.preventDefault();
        dropZone.classList.add('drag-over');
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('drag-over');
    });

    dropZone.addEventListener('drop', e => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');
        const draggable = document.querySelector('.dragging');
        if(draggable) {
            targetContent.appendChild(draggable);
        }
    });

    function checkDragAnswer() {
        const feedback = document.getElementById('drag-feedback');
        const itemsInTarget = targetContent.children.length;
        
        if (itemsInTarget === 5) {
            feedback.textContent = "ğŸ‰ å®Œå…¨æ­£ç¢ºï¼é€™äº”ç¨®å…¨éƒ¨éƒ½æ˜¯å¸¸è¦‹çš„ç¶²è·¯æ‹“æ¨¸çµæ§‹ã€‚è¨˜ä½ï¼šåªè¦èƒ½æè¿°çµæ§‹ï¼Œå°±æ˜¯æ‹“æ¨¸ï¼";
            feedback.className = "feedback success";
        } else {
            feedback.textContent = `âš ï¸ é‚„æ²’æ‰¾å…¨å–”ï¼ç›®å‰åªæœ‰ ${itemsInTarget} å€‹ã€‚æç¤ºï¼šä¸è¦æ‡·ç–‘ï¼Œæ¯ä¸€å¼µå¡ç‰‡éƒ½æ˜¯ï¼`;
            feedback.className = "feedback error";
        }
    }

    // --- 3. è¤‡é¸é¡Œé‚è¼¯ ---
    function checkQuizAnswer() {
        const checkboxes = document.querySelectorAll('input[name="q40"]:checked');
        const feedback = document.getElementById('quiz-feedback');
        const userAnswers = Array.from(checkboxes).map(cb => cb.value);
        
        // æ­£ç¢ºç­”æ¡ˆæ˜¯ A, B, C, D, E (é•·åº¦ç‚º 5)
        if (userAnswers.length === 5) {
            feedback.innerHTML = "ğŸ† <strong>å®Œå…¨æ­£ç¢ºï¼</strong><br>é€™æ˜¯ä¸€é“è§€å¿µé¡Œï¼Œ(A)åˆ°(E)æ¯ä¸€å€‹é¸é …éƒ½ä»£è¡¨ä¸€ç¨®é›»è…¦é€£ç·šçš„å½¢ç‹€ï¼Œæ‰€ä»¥å…¨éƒ¨çš†å¯ä½œç‚ºæ‹“æ¨¸åœ–ã€‚";
            feedback.className = "feedback success";
        } else if (userAnswers.length === 0) {
            feedback.textContent = "å°šæœªä½œç­”å–”ï¼Œè«‹å‹¾é¸æ‚¨èªç‚ºæ­£ç¢ºçš„é¸é …ã€‚";
            feedback.className = "feedback error";
        } else {
            feedback.innerHTML = "ğŸ’¡ <strong>å·®ä¸€é»é»ï¼</strong><br>æœ¬é¡Œæ˜¯è§€å¿µé¡Œã€‚è«‹å•å•è‡ªå·±ï¼šæ²’è¢«ä½ é¸åˆ°çš„é‚£å€‹å½¢ç‹€ï¼Œèƒ½ä¸èƒ½ç”¨ä¾†é€£æ¥é›»è…¦ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå®ƒå°±æ˜¯æ‹“æ¨¸ï¼(æç¤ºï¼šå…¨é¸)";
            feedback.className = "feedback error";
        }
    }

    function toggleAnalysis(id) {
        const el = document.getElementById(id);
        if (el.style.display === "block") {
            el.style.display = "none";
        } else {
            el.style.display = "block";
        }
    }

    // --- 4. é™·é˜±å¡é‚è¼¯ ---
    function dismissTrap(card) {
        card.style.opacity = '0';
        setTimeout(() => {
            card.style.display = 'none';
        }, 500);
    }

    // --- 5. è‡ªæˆ‘æª¢æ¸¬æç¤º ---
    function toggleHint(id) {
        const hint = document.getElementById(id);
        hint.style.display = (hint.style.display === 'block') ? 'none' : 'block';
    }

    // --- 6. é‡ç½®åŠŸèƒ½ ---
    function resetAll() {
        // é‡ç½®æ‹–æ”¾
        const items = document.querySelectorAll('.draggable-item');
        items.forEach(item => sourceZone.appendChild(item));
        document.getElementById('drag-feedback').style.display = 'none';
        
        // é‡ç½®è¤‡é¸é¡Œ
        document.querySelectorAll('input[name="q40"]').forEach(cb => cb.checked = false);
        document.getElementById('quiz-feedback').style.display = 'none';
        
        // æ”¶èµ·è§£æ
        document.querySelectorAll('.analysis-detail').forEach(el => el.style.display = 'none');
        
        // æ¢å¾©é™·é˜±å¡
        document.querySelectorAll('.trap-card').forEach(card => {
            card.style.display = 'block';
            card.style.opacity = '1';
        });

        // æ¢å¾©æç¤º
        document.querySelectorAll('.hint-text').forEach(hint => hint.style.display = 'none');

        // æ¸…ç©ºæ¦‚å¿µå€
        document.getElementById('concept-display-area').innerHTML = 'è«‹é»é¸ä¸Šæ–¹æŒ‰éˆ•ï¼ŒæŸ¥çœ‹è©²æ‹“æ¨¸çš„çµæ§‹èˆ‡æ¯”å–»ã€‚';
        document.querySelectorAll('.concept-btn').forEach(btn => btn.classList.remove('active'));

        // æ²å‹•åˆ°é ‚éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>

</body>
</html>