<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»è…¦æ¦‚è«–äº’å‹•è¬›ç¾©ï¼šæ•´æ•¸åŒé¤˜æ€§è³ª</title>
    <style>
        /* --- å…¨åŸŸè¨­å®š --- */
        :root {
            --primary-color: #2c3e50;    /* æ·±è—ç°ï¼šæ¨™é¡Œ */
            --accent-color: #3498db;     /* äº®è—ï¼šäº’å‹•å…ƒä»¶ */
            --bg-color: #f4f6f8;         /* æ·ºç°èƒŒæ™¯ */
            --card-bg: #ffffff;          /* å¡ç‰‡èƒŒæ™¯ */
            --text-color: #333333;       /* ä¸»è¦æ–‡å­— */
            --highlight-bg: #fff3cd;     /* è¢å…‰ç­†æ•ˆæœ */
            --success-color: #27ae60;    /* æ­£ç¢ºç¶  */
            --error-color: #c0392b;      /* éŒ¯èª¤ç´… */
            --border-radius: 8px;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        /* --- ç‰ˆé¢å®¹å™¨ --- */
        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* --- å¡ç‰‡é€šç”¨æ¨£å¼ --- */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary-color);
        }

        /* --- æ¨™é¡Œå€ --- */
        h1 {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin-top: 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-top: 20px;
            display: flex;
            align-items: center;
        }

        h2::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: var(--accent-color);
            border-radius: 50%;
            margin-right: 10px;
        }

        /* --- é¡Œç›®å€ --- */
        .question-box {
            background-color: #eef2f5;
            padding: 15px;
            border-radius: 5px;
            font-family: "Courier New", Courier, monospace;
            font-weight: bold;
        }
        
        .option-list {
            list-style: none;
            padding: 0;
        }
        .option-list li {
            padding: 5px 0;
        }

        /* --- è¢å…‰ç­†ç‰¹æ•ˆ --- */
        .highlight {
            background-color: var(--highlight-bg);
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }

        /* --- äº’å‹•æ ¸å¿ƒï¼šå¯¦é©—å®¤ --- */
        .lab-panel {
            background-color: #fdfdfd;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: var(--border-radius);
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
            justify-content: center;
        }

        .input-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .input-item label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 3px;
        }

        input[type="number"] {
            width: 60px;
            padding: 8px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            justify-content: center;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.9rem;
        }

        button:hover {
            background-color: #2980b9;
        }

        button.outline {
            background-color: transparent;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
        }
        
        button.outline:hover {
            background-color: #ebf5fb;
        }

        .result-box {
            background-color: #333;
            color: #0f0; /* çµ‚ç«¯æ©Ÿç¶  */
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            margin-top: 10px;
            min-height: 80px;
            white-space: pre-wrap;
        }

        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
            margin-left: 10px;
        }
        .status-pass { background-color: var(--success-color); }
        .status-fail { background-color: var(--error-color); }

        /* --- è¨˜æ†¶å£è¨£èˆ‡é™·é˜± --- */
        .tip-box {
            background-color: #e8f8f5;
            border-left: 4px solid #1abc9c;
            padding: 15px;
            margin: 10px 0;
        }
        .trap-box {
            background-color: #fdedec;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 10px 0;
        }

        /* --- ä½œç­”å€ --- */
        .quiz-options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .quiz-options label:hover {
            background-color: #fafafa;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            display: none; /* é è¨­éš±è— */
            border-radius: 4px;
        }

        .visible {
            display: block;
        }

        /* --- RWD èª¿æ•´ --- */
        @media (max-width: 600px) {
            .input-group {
                gap: 5px;
            }
            input[type="number"] {
                width: 50px;
            }
            .btn-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<div class="container">

    <!-- A. æ¨™é¡Œå€ -->
    <div class="card">
        <h1>é¡Œè™Ÿ 49ï¼šæ•´æ•¸åŒé¤˜ (Modular Arithmetic) æ€§è³ªåˆ¤æ–·</h1>
        <p style="color: #666; font-size: 0.9rem;">å–®å…ƒï¼šé›»è…¦æ¦‚è«– / é›¢æ•£æ•¸å­¸</p>
    </div>

    <!-- B. é¡Œç›®å€ -->
    <div class="card">
        <h2>ã€é¡Œç›®ã€‘</h2>
        <div class="question-box">
            <p>åœ¨æ•´æ•¸çš„åŒé¤˜è¨ˆç®—ä¸­ï¼Œå‡è‹¥ A èˆ‡ B é™¤ä»¥ M æœ‰ç›¸åŒçš„é¤˜æ•¸ï¼Œå³ A â‰¡ B mod Mã€‚</p>
            <p>è‹¥ C è·Ÿ D å° M ä¹Ÿæ˜¯åŒé¤˜çš„é—œä¿‚ï¼Œå‰‡ä¸‹åˆ—çš„ç­‰å¼ï¼Œä½•è€…æ­£ç¢º? (è¤‡é¸)</p>
            <ul class="option-list">
                <li>(A) A mod M + B mod M = (A+B) mod M</li>
                <li>(B) A*B mod M = (A mod M) * (B mod M)</li>
                <li>(C) A mod M - B mod M = (A-B) mod M</li>
                <li>(D) (A+C) â‰¡ (B+D) mod M</li>
                <li>(E) (A*C) â‰¡ (B*D) mod M</li>
            </ul>
        </div>
    </div>

    <!-- C & D. é—œéµå­—èˆ‡ç™½è©±ç¿»è­¯ -->
    <div class="card">
        <h2>ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­— & ç™½è©±ç¿»è­¯</h2>
        <p>çœ‹åˆ°é¡Œç›®ä¸­çš„ <span class="highlight">A â‰¡ B mod M</span>ï¼Œé€™ä¸æ˜¯è¦ä½ ç®—é™¤æ³•ï¼Œè€Œæ˜¯åœ¨è€ƒ<strong>Congruenceï¼ˆåŒé¤˜ï¼šé™¤ä»¥åŒä¸€å€‹æ•¸ï¼Œé¤˜æ•¸ç›¸åŒï¼‰</strong>çš„æ€§è³ªã€‚</p>
        
        <div class="tip-box">
            <strong>ç™½è©±ç¿»è­¯æ©Ÿï¼š</strong><br>
            é¡Œç›®èªªï¼š
            1. ã€ŒA å’Œ B åœ¨ M çš„è·‘é“ä¸Šï¼Œåœåœ¨åŒä¸€å€‹ä½ç½®ã€<br>
            2. ã€ŒC å’Œ D åœ¨ M çš„è·‘é“ä¸Šï¼Œä¹Ÿåœåœ¨åŒä¸€å€‹ä½ç½®ã€<br>
            å•ï¼šæŠŠé€™äº›æ•¸å­—æ‹¿ä¾†åŠ æ¸›ä¹˜é™¤å¾Œï¼Œå“ªäº›ç­‰å¼ä¸€å®šæˆç«‹ï¼Ÿ
        </div>
    </div>

    <!-- E & F. äº’å‹•æ ¸å¿ƒé©—è­‰å€ -->
    <div class="card">
        <h2>ç¬¬äºŒæ­¥ï¼šäº’å‹•å¯¦é©—å®¤ (é‡é»)</h2>
        <p>æ•¸å­¸å…¬å¼çœ‹æšˆäº†å—ï¼Ÿç›´æ¥ä»£æ•¸å­—é€²å»ç®—ç®—çœ‹ï¼</p>
        
        <!-- é©—è­‰æ§åˆ¶é¢æ¿ -->
        <div class="lab-panel">
            <p style="text-align:center; font-weight:bold;">è¨­å®šæ¸¬è©¦æ•¸å€¼</p>
            <div class="input-group">
                <div class="input-item">
                    <label>M (æ¨¡æ•¸)</label>
                    <input type="number" id="valM" value="10">
                </div>
                <div class="input-item" style="border-right: 2px solid #ddd; padding-right: 10px;">
                    <span style="font-size:0.8rem; color:#888;">è¨­å®š Aâ‰¡B</span>
                </div>
                <div class="input-item">
                    <label>A</label>
                    <input type="number" id="valA" value="14">
                </div>
                <div class="input-item">
                    <label>B</label>
                    <input type="number" id="valB" value="4">
                </div>
                <div class="input-item" style="border-right: 2px solid #ddd; padding-right: 10px; padding-left: 10px;">
                    <span style="font-size:0.8rem; color:#888;">è¨­å®š Câ‰¡D</span>
                </div>
                <div class="input-item">
                    <label>C</label>
                    <input type="number" id="valC" value="23">
                </div>
                <div class="input-item">
                    <label>D</label>
                    <input type="number" id="valD" value="3">
                </div>
            </div>

            <p style="text-align:center; color:#e74c3c; font-size:0.8rem;">
                * æç¤ºï¼šA=14, B=4, M=10 ä»£è¡¨ 14é™¤ä»¥10é¤˜4ï¼Œ4é™¤ä»¥10é¤˜4ï¼Œç¬¦åˆåŒé¤˜æ¢ä»¶ã€‚
            </p>

            <p style="text-align:center; font-weight:bold;">é»æ“Šé¸é …é€²è¡Œé©—è­‰</p>
            <div class="btn-group">
                <button onclick="checkOption('A')">é©—è­‰ (A) åŠ æ³•æ‹†é–‹</button>
                <button onclick="checkOption('B')">é©—è­‰ (B) ä¹˜æ³•æ‹†é–‹</button>
                <button onclick="checkOption('C')">é©—è­‰ (C) æ¸›æ³•æ‹†é–‹</button>
                <button onclick="checkOption('D')">é©—è­‰ (D) åŒé¤˜åŠ æ³•</button>
                <button onclick="checkOption('E')">é©—è­‰ (E) åŒé¤˜ä¹˜æ³•</button>
            </div>
            
            <div class="btn-group">
                 <button class="outline" onclick="setTrapValues()">è¼‰å…¥é™·é˜±æ•¸å€¼ (è®“ A, B, C åŸå½¢ç•¢éœ²)</button>
            </div>

            <div class="result-box" id="calcResult">
                è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹è¨ˆç®—...
            </div>
        </div>
    </div>

    <!-- G. é¸é …åˆ†æ -->
    <div class="card">
        <h2>ç¬¬ä¸‰æ­¥ï¼šé€é …è§£æ</h2>
        <ul style="list-style: none; padding: 0;">
            <li style="margin-bottom: 15px;">
                <strong>(A) A mod M + B mod M = (A+B) mod M</strong> <span style="color:red">âŒ</span><br>
                <span style="font-size: 0.9rem; color: #666;">
                    ç†ç”±ï¼šå·¦é‚Šç›¸åŠ å¾Œå¯èƒ½è¶…é Mï¼Œä½†æ²’æœ‰å†å–é¤˜æ•¸ (mod)ã€‚<br>
                    ä¾‹å¦‚ M=10, A=9, B=9ã€‚å·¦é‚Š=9+9=18ï¼Œå³é‚Š=(18)%10=8ã€‚18 â‰  8ã€‚
                </span>
            </li>
            <li style="margin-bottom: 15px;">
                <strong>(B) A*B mod M = (A mod M) * (B mod M)</strong> <span style="color:red">âŒ</span><br>
                <span style="font-size: 0.9rem; color: #666;">
                    ç†ç”±ï¼šè·Ÿ (A) ä¸€æ¨£ï¼Œå³é‚Šç›¸ä¹˜å¾Œå¯èƒ½å¾ˆå¤§ï¼Œå¿˜è¨˜å† mod ä¸€æ¬¡ã€‚<br>
                    ä¾‹å¦‚ M=10, A=4, B=4ã€‚å·¦é‚Š=(16)%10=6ï¼Œå³é‚Š=4*4=16ã€‚6 â‰  16ã€‚
                </span>
            </li>
            <li style="margin-bottom: 15px;">
                <strong>(C) A mod M - B mod M = (A-B) mod M</strong> <span style="color:red">âŒ</span><br>
                <span style="font-size: 0.9rem; color: #666;">
                    ç†ç”±ï¼šå·¦é‚Šç›¸æ¸›å¯èƒ½æ˜¯ã€Œè² æ•¸ã€æˆ–æœªåŒ–ç°¡ï¼Œå³é‚Šé€šå¸¸æ˜¯æ­£é¤˜æ•¸ã€‚<br>
                    ä¾‹å¦‚ M=10, A=3, B=5ã€‚å·¦é‚Š=3-5=-2ï¼Œå³é‚Š=(3-5)%10=8 (é›»è…¦é‹ç®—ä¸­ -2 mod 10 é€šå¸¸å–æ­£é¤˜æ•¸ç‚º 8ï¼Œæˆ–è² é¤˜æ•¸ -2ï¼Œä½†ä¸ä¸€å®šç›¸ç­‰)ã€‚
                </span>
            </li>
            <li style="margin-bottom: 15px;">
                <strong>(D) (A+C) â‰¡ (B+D) mod M</strong> <span style="color:green">âœ…</span><br>
                <span style="font-size: 0.9rem; color: #666;">
                    æ­£è§£ï¼šå¦‚æœ A è·Ÿ B ä¸€æ¨£(åŒé¤˜)ï¼ŒC è·Ÿ D ä¸€æ¨£(åŒé¤˜)ï¼Œé‚£ä»–å€‘<strong>åŠ èµ·ä¾†</strong>ä¹‹å¾Œï¼Œé™¤ä»¥ M çš„é¤˜æ•¸ç•¶ç„¶é‚„æ˜¯ä¸€æ¨£ã€‚
                </span>
            </li>
            <li style="margin-bottom: 15px;">
                <strong>(E) (A*C) â‰¡ (B*D) mod M</strong> <span style="color:green">âœ…</span><br>
                <span style="font-size: 0.9rem; color: #666;">
                    æ­£è§£ï¼šåŒç†ï¼Œå…©é‚ŠåŒæ™‚<strong>æ”¾å¤§å€æ•¸(ç›¸ä¹˜)</strong>ï¼ŒåŒé¤˜é—œä¿‚ä¾ç„¶æˆç«‹ã€‚
                </span>
            </li>
        </ul>
    </div>

    <!-- H, I, J. è§€å¿µèˆ‡é™·é˜± -->
    <div class="card">
        <h2>è¡åˆºç­†è¨˜ï¼šè§€å¿µèˆ‡é™·é˜±</h2>
        
        <div class="tip-box">
            <h3>ğŸ”‘ è¨˜æ†¶å£è¨£</h3>
            <p>ã€ŒåŒé¤˜åŠ åŒé¤˜ï¼Œé‚„æ˜¯åŒé¤˜ï¼›åŒé¤˜ä¹˜åŒé¤˜ï¼Œé‚„æ˜¯åŒé¤˜ã€‚ã€</p>
            <p>çœ‹åˆ° <strong>â‰¡</strong> (ä¸‰æ¢ç·š) é€£æ¥çš„ç®—å¼ï¼ŒæŠŠ A æ›æˆ Bï¼ŒC æ›æˆ Dï¼Œé€šå¸¸æ˜¯å°çš„ã€‚</p>
        </div>

        <div class="trap-box">
            <h3>ğŸ’£ å¸¸è¦‹é™·é˜±</h3>
            <p>çœ‹åˆ° <strong>mod</strong> ç¬¦è™Ÿæ‹†é–‹å¯« (å¦‚é¸é … A, B, C)ï¼Œè¦éå¸¸å°å¿ƒï¼</p>
            <ul>
                <li><strong>é™·é˜± 1ï¼š</strong> å¿˜è¨˜æœ€å¾Œé‚„è¦å† mod ä¸€æ¬¡ (æº¢ä½)ã€‚</li>
                <li><strong>é™·é˜± 2ï¼š</strong> æ¸›æ³•å‡ºç¾è² æ•¸ã€‚</li>
            </ul>
        </div>
    </div>

    <!-- K. ä½œç­”å€ -->
    <div class="card" style="border-left-color: var(--accent-color);">
        <h2>ã€è‡ªæˆ‘æŒ‘æˆ°ã€‘è«‹å‹¾é¸æ­£ç¢ºç­”æ¡ˆ</h2>
        <div class="quiz-options">
            <label><input type="checkbox" name="ans" value="A"> (A) A mod M + B mod M = (A+B) mod M</label>
            <label><input type="checkbox" name="ans" value="B"> (B) A*B mod M = (A mod M) * (B mod M)</label>
            <label><input type="checkbox" name="ans" value="C"> (C) A mod M - B mod M = (A-B) mod M</label>
            <label><input type="checkbox" name="ans" value="D"> (D) (A+C) â‰¡ (B+D) mod M</label>
            <label><input type="checkbox" name="ans" value="E"> (E) (A*C) â‰¡ (B*D) mod M</label>
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="submitQuiz()">é€å‡ºä½œç­”</button>
            <button class="outline" onclick="toggleAnswer()">é¡¯ç¤º/éš±è—ç­”æ¡ˆ</button>
        </div>

        <div id="quizFeedback" class="quiz-feedback"></div>
        <div id="correctAnswer" class="quiz-feedback" style="background-color: #e8f6f3; color: #1e8449;">
            <strong>æ­£ç¢ºç­”æ¡ˆï¼šD, E</strong><br>
            æ­å–œä½ å®Œæˆäº†é€™å€‹å–®å…ƒçš„å­¸ç¿’ï¼åŒé¤˜æ€§è³ªåœ¨æœªä¾†çš„ã€Œå¯†ç¢¼å­¸ (RSAæ¼”ç®—æ³•)ã€ä¸­æœƒå†æ¬¡å‡ºç¾ï¼Œç¾åœ¨æ‰“å¥½åŸºç¤å¾ˆé‡è¦å–”ï¼
        </div>
    </div>

    <!-- M. å»¶ä¼¸æ€è€ƒ -->
    <div class="card">
        <h2>å»¶ä¼¸æ€è€ƒ (ä¸é™„ç­”æ¡ˆï¼Œæƒ³ä¸€æƒ³)</h2>
        <ol>
            <li>ç‚ºä»€éº¼é¸é … (A) å¦‚æœæ”¹æˆ ( (A mod M) + (B mod M) ) <strong>mod M</strong> = (A+B) mod M å°±æœƒè®Šæ­£ç¢ºäº†ï¼Ÿ</li>
            <li>åœ¨é›»è…¦ç¨‹å¼ä¸­ (ä¾‹å¦‚ C++ æˆ– Java)ï¼Œè² æ•¸å– mod (ä¾‹å¦‚ -2 % 10) çš„çµæœæœƒæ˜¯å¤šå°‘ï¼Ÿé€™æœƒå¦‚ä½•å½±éŸ¿é¸é … (C) çš„åˆ¤æ–·ï¼Ÿ</li>
        </ol>
    </div>

</div>

<script>
    // --- äº’å‹•å¯¦é©—å®¤é‚è¼¯ ---

    // é è¨­è¼‰å…¥é™·é˜±æ•¸å€¼ (è®“A, Bé¸é …é¡¯éœ²å‡ºéŒ¯èª¤)
    function setTrapValues() {
        document.getElementById('valM').value = 10;
        document.getElementById('valA').value = 9;  // 9 mod 10 = 9
        document.getElementById('valB').value = 9;  // 9 mod 10 = 9 (åŒé¤˜æ¢ä»¶ A=B é€™è£¡è¨­ç‚ºç›¸åŒç°¡å–®é©—è­‰)
        // A+B = 18. (A)+(B) = 18. 
        // é‡è¨­ C, D ç¬¦åˆåŒé¤˜
        document.getElementById('valC').value = 5;
        document.getElementById('valD').value = 15;
        
        const resultBox = document.getElementById('calcResult');
        resultBox.innerHTML = "å·²è¼‰å…¥é™·é˜±æ•¸å€¼ï¼š\nè©¦è©¦çœ‹æŒ‰ä¸‹ (A) æˆ– (B)ï¼Œä½ æœƒç™¼ç¾å·¦å³å…©é‚Šä¸ç›¸ç­‰ï¼";
        resultBox.style.color = "#f39c12"; // æ©˜è‰²æé†’
    }

    function checkOption(option) {
        // 1. å–å¾—æ•¸å€¼
        const M = parseInt(document.getElementById('valM').value);
        const A = parseInt(document.getElementById('valA').value);
        const B = parseInt(document.getElementById('valB').value);
        const C = parseInt(document.getElementById('valC').value);
        const D = parseInt(document.getElementById('valD').value);
        const resultBox = document.getElementById('calcResult');

        // ç°¡å–®é˜²å‘†
        if (M <= 0) {
            resultBox.innerHTML = "éŒ¯èª¤ï¼šæ¨¡æ•¸ M å¿…é ˆå¤§æ–¼ 0";
            return;
        }

        // æª¢æŸ¥ä½¿ç”¨è€…è¼¸å…¥æ˜¯å¦ç¬¦åˆé¡Œç›®å‡è¨­ (Aâ‰¡B, Câ‰¡D)
        // ç‚ºäº†æ•™å­¸æ–¹ä¾¿ï¼Œæˆ‘å€‘é¡¯ç¤ºè­¦å‘Šä½†ä¸é˜»æ­¢è¨ˆç®—
        let warning = "";
        /* æ³¨æ„ï¼šé¡Œç›®èªª "Aèˆ‡Bé™¤ä»¥Mæœ‰ç›¸åŒé¤˜æ•¸"ï¼Œé€™æ˜¯å‰æã€‚
           å¦‚æœä½¿ç”¨è€…è¼¸å…¥ A=14, B=5, M=10ï¼Œå‰æå°±ä¸æˆç«‹ï¼Œå¯¦é©—å°±æ²’æ„ç¾©ã€‚
           é€™è£¡åšå€‹æª¢æ ¸ã€‚
        */
        // JS çš„ % å°è² æ•¸è¡Œç‚ºç‰¹æ®Šï¼Œé€™è£¡ç°¡å–®è™•ç†æ­£æ•´æ•¸ç‚ºä¸»ï¼Œæˆ–ç”¨ ((n%m)+m)%m
        const mod = (n, m) => ((n % m) + m) % m;

        if (mod(A, M) !== mod(B, M)) {
            warning += `[è­¦å‘Š] ä½ è¨­å®šçš„ A(${A}) å’Œ B(${B}) å° M(${M}) ä¸åŒé¤˜ï¼\nå‰æä¸æˆç«‹ï¼Œå¯¦é©—çµæœåƒ…ä¾›åƒè€ƒã€‚\n`;
        }
        if (mod(C, M) !== mod(D, M)) {
            warning += `[è­¦å‘Š] ä½ è¨­å®šçš„ C(${C}) å’Œ D(${D}) å° M(${M}) ä¸åŒé¤˜ï¼\n`;
        }

        let output = warning;
        let lhs, rhs, isCorrect;

        switch(option) {
            case 'A': // A mod M + B mod M = (A+B) mod M
                // é¡Œç›®ä¸­çš„å¼å­å·¦é‚Šæ²’æœ‰å† mod M
                lhs = mod(A, M) + mod(B, M);
                rhs = mod(A + B, M);
                isCorrect = (lhs === rhs);
                
                output += `é©—è­‰ (A)ï¼š\n`;
                output += `å·¦é‚Š = ${A}%${M} + ${B}%${M} = ${mod(A,M)} + ${mod(B,M)} = ${lhs}\n`;
                output += `å³é‚Š = (${A}+${B})%${M} = ${A+B}%${M} = ${rhs}\n`;
                break;

            case 'B': // A*B mod M = (A mod M) * (B mod M)
                // é¡Œç›®å³é‚Šé€šå¸¸æŒ‡ç®—è¡“çµæœï¼Œé¡Œç›®ç‚º A*B mod M (å·¦) = ... (å³)
                // ä½†ä¾æ“šé¸é …å¯«æ³• (B) A*B mod M = (A mod M) * (B mod M)
                // é€™è£¡å·¦é‚Šæœ‰modï¼Œå³é‚Šæ²’æœ‰å¤–å±¤mod
                
                lhs = mod(A * B, M);
                rhs = mod(A, M) * mod(B, M);
                isCorrect = (lhs === rhs);

                output += `é©—è­‰ (B)ï¼š\n`;
                output += `å·¦é‚Š = (${A}*${B})%${M} = ${A*B}%${M} = ${lhs}\n`;
                output += `å³é‚Š = (${A}%${M}) * (${B}%${M}) = ${mod(A,M)} * ${mod(B,M)} = ${rhs}\n`;
                break;

            case 'C': // A mod M - B mod M = (A-B) mod M
                lhs = mod(A, M) - mod(B, M);
                rhs = mod(A - B, M);
                isCorrect = (lhs === rhs);

                output += `é©—è­‰ (C)ï¼š\n`;
                output += `å·¦é‚Š = ${A}%${M} - ${B}%${M} = ${mod(A,M)} - ${mod(B,M)} = ${lhs}\n`;
                output += `å³é‚Š = (${A}-${B})%${M} = ${A-B}%${M} = ${rhs}\n`;
                break;

            case 'D': // (A+C) â‰¡ (B+D) mod M
                // é€™æ˜¯åŒé¤˜å¼ï¼Œæ„å‘³è‘— å·¦é‚Š%M == å³é‚Š%M
                let valL = A + C;
                let valR = B + D;
                lhs = mod(valL, M);
                rhs = mod(valR, M);
                isCorrect = (lhs === rhs);

                output += `é©—è­‰ (D)ï¼š\n`;
                output += `å·¦å¼æ•¸å€¼ = ${A}+${C} = ${valL}ï¼Œé¤˜æ•¸ = ${lhs}\n`;
                output += `å³å¼æ•¸å€¼ = ${B}+${D} = ${valR}ï¼Œé¤˜æ•¸ = ${rhs}\n`;
                output += `æª¢æŸ¥é¤˜æ•¸æ˜¯å¦ç›¸åŒï¼Ÿ `;
                break;

            case 'E': // (A*C) â‰¡ (B*D) mod M
                let valLE = A * C;
                let valRE = B * D;
                lhs = mod(valLE, M);
                rhs = mod(valRE, M);
                isCorrect = (lhs === rhs);

                output += `é©—è­‰ (E)ï¼š\n`;
                output += `å·¦å¼æ•¸å€¼ = ${A}*${C} = ${valLE}ï¼Œé¤˜æ•¸ = ${lhs}\n`;
                output += `å³å¼æ•¸å€¼ = ${B}*${D} = ${valRE}ï¼Œé¤˜æ•¸ = ${rhs}\n`;
                output += `æª¢æŸ¥é¤˜æ•¸æ˜¯å¦ç›¸åŒï¼Ÿ `;
                break;
        }

        if (isCorrect) {
            output += `ğŸ‘‰ <span class="status-badge status-pass">ç›¸ç­‰ (æˆç«‹)</span>`;
            resultBox.style.color = "#0f0";
        } else {
            output += `ğŸ‘‰ <span class="status-badge status-fail">ä¸ç›¸ç­‰ (ä¸æˆç«‹)</span>`;
            resultBox.style.color = "#ff6b6b";
        }
        
        resultBox.innerHTML = output;
    }

    // --- ä½œç­”å€é‚è¼¯ ---
    function submitQuiz() {
        const checkboxes = document.querySelectorAll('input[name="ans"]:checked');
        const feedback = document.getElementById('quizFeedback');
        let values = [];
        checkboxes.forEach((cb) => {
            values.push(cb.value);
        });

        // åˆ¤æ–·ç­”æ¡ˆ (D, E)
        const correctAnswers = ['D', 'E'];
        
        // æª¢æŸ¥æ˜¯å¦å®Œå…¨åŒ¹é…
        const isMatch = values.length === correctAnswers.length && 
                        values.every(val => correctAnswers.includes(val));

        feedback.className = "quiz-feedback visible";
        
        if (isMatch) {
            feedback.style.backgroundColor = "#d4efdf";
            feedback.style.color = "#196f3d";
            feedback.innerHTML = "<strong>ğŸ‰ å®Œå…¨æ­£ç¢ºï¼</strong><br>çœ‹ä¾†ä½ å·²ç¶“æŒæ¡äº†åŒé¤˜é‹ç®—çš„ç²¾é«“ï¼Œå¯ä»¥æŠŠé€™é¡Œåˆ†æ•¸æ”¾å£è¢‹äº†ï¼";
        } else {
            feedback.style.backgroundColor = "#fadbd8";
            feedback.style.color = "#922b21";
            let msg = "<strong>âš ï¸ ç­”æ¡ˆä¸å®Œå…¨æ­£ç¢ºå–”ï¼</strong><br>";
            if (values.includes('A') || values.includes('B') || values.includes('C')) {
                msg += "æç¤ºï¼šé¸é … (A)(B)(C) éƒ½æ˜¯é™·é˜±ï¼Œå› ç‚ºæ‹†é–‹å¾Œå¿˜äº†å†å–ä¸€æ¬¡ modï¼Œæˆ–æ˜¯æ²’è€ƒæ…®è² æ•¸ã€‚<br>";
            }
            if (!values.includes('D') || !values.includes('E')) {
                msg += "æç¤ºï¼šæ‰¾æ‰¾çœ‹æœ‰æ²’æœ‰ã€Œâ‰¡ã€ç¬¦è™Ÿå…©é‚Šä¸€èµ·åšåŠ æ³•æˆ–ä¹˜æ³•çš„é¸é …ï¼Ÿ<br>";
            }
            msg += "å»ºè­°å›åˆ°ä¸Šæ–¹ã€Œäº’å‹•å¯¦é©—å®¤ã€å†è©¦è©¦çœ‹ï¼";
            feedback.innerHTML = msg;
        }
    }

    function toggleAnswer() {
        const ansBox = document.getElementById('correctAnswer');
        if (ansBox.style.display === 'block') {
            ansBox.style.display = 'none';
        } else {
            ansBox.style.display = 'block';
        }
    }
</script>

</body>
</html>